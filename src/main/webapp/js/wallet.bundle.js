const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ccip.chunk.js","localBatchGatewayRequest.chunk.js","index.chunk.js","parseSignature.chunk.js","secp256k1.chunk.js","hashTypedData.chunk.js","embedded-wallet.chunk.js","index.chunk3.js","index.chunk4.js","if-defined.chunk.js","ref.chunk.js","index.chunk18.js","HelpersUtil.chunk.js","index.chunk11.js","index.chunk15.js","index.chunk21.js","index.chunk8.js","index.chunk9.js","NavigationUtil.chunk.js","email.chunk.js","index.chunk32.js","index.chunk10.js","socials.chunk.js","index.chunk30.js","index.chunk29.js","index.chunk14.js","index.chunk28.js","index.chunk5.js","swaps.chunk.js","index.chunk26.js","index.chunk27.js","SwapController.chunk.js","index.chunk2.js","send.chunk.js","index.chunk16.js","index.chunk6.js","index.chunk13.js","index.chunk12.js","receive.chunk.js","onramp.chunk.js","index.chunk17.js","index.chunk36.js","index.chunk33.js","pay-with-exchange.chunk.js","ExchangeController.chunk.js","transactions.chunk.js","index.chunk7.js","index.chunk35.js","index.chunk19.js","index.chunk31.js","index.chunk20.js","data-capture.chunk.js","features.chunk.js","index.chunk37.js","index.chunk34.js","w3m-modal.chunk.js"])))=>i.map(i=>d[i]);
const lS=Symbol(),Gm=Object.getPrototypeOf,gp=new WeakMap,uS=t=>t&&(gp.has(t)?gp.get(t):Gm(t)===Object.prototype||Gm(t)===Array.prototype),dS=t=>uS(t)&&t[lS]||null,Ym=(t,e=!0)=>{gp.set(t,e)},Ku={},ig=t=>typeof t=="object"&&t!==null,fS=t=>ig(t)&&!Cl.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),DE=(t,e)=>{const n=mp.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return Ym(r,!0),mp.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Cl.has(i))Ym(i,!1);else if(pi.has(i)){const[c,l]=pi.get(i);a.value=DE(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},hS=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(Zm(l,o)||wc.has(o)&&Zm(l,wc.get(o))))return!0;n(i),ig(o)&&(o=dS(o)||o);const u=!pi.has(o)&&gS(o)?Xe(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),pi=new WeakMap,Cl=new WeakSet,mp=new WeakMap,Pu=[1],wc=new WeakMap;let Zm=Object.is,pS=(t,e)=>new Proxy(t,e),gS=fS,mS=DE,yS=hS;function Xe(t={}){if(!ig(t))throw new Error("object required");const e=wc.get(t);if(e)return e;let n=Pu[0];const r=new Set,s=(m,w=++Pu[0])=>{n!==w&&(i=n=w,r.forEach(_=>_(m,w)))};let i=n;const o=(m=Pu[0])=>(i!==m&&(i=m,c.forEach(([w])=>{const _=w[1](m);_>n&&(n=_)})),n),a=m=>(w,_)=>{const b=[...w];b[1]=[m,...b[1]],s(b,_)},c=new Map,l=(m,w)=>{const _=!Cl.has(w)&&pi.get(w);if(_){if((Ku?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const b=_[2](a(m));c.set(m,[_,b])}else c.set(m,[_])}},u=m=>{var w;const _=c.get(m);_&&(c.delete(m),(w=_[1])==null||w.call(_))},d=m=>(r.add(m),r.size===1&&c.forEach(([_,b],A)=>{if((Ku?"production":void 0)!=="production"&&b)throw new Error("remove already exists");const C=_[2](a(A));c.set(A,[_,C])}),()=>{r.delete(m),r.size===0&&c.forEach(([_,b],A)=>{b&&(b(),c.set(A,[_]))})});let f=!0;const h=yS(()=>f,l,u,s),g=pS(t,h);wc.set(t,g);const p=[t,o,d];return pi.set(g,p),Reflect.ownKeys(t).forEach(m=>{const w=Object.getOwnPropertyDescriptor(t,m);"value"in w&&w.writable&&(g[m]=t[m])}),f=!1,g}function Mt(t,e,n){const r=pi.get(t);(Ku?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Ec(t){const e=pi.get(t);(Ku?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return mS(n,r())}function vc(t){return Cl.add(t),t}function bS(){return{proxyStateMap:pi,refSet:Cl,snapCache:mp,versionHolder:Pu,proxyCache:wc}}function kt(t,e,n,r){let s=t[e];return Mt(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:wS,snapCache:ES}=bS(),zl=t=>wS.has(t);function vS(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=ES.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return zl(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!zl(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!zl(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!zl(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,f)=>{l(this.data[d],f,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Xe(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _a(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function UE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Jm={};const B={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Jm<"u"?Jm.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:typeof process<"u"&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},Cc={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=B.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},BE=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var CS=20,_S=1,so=1e6,Xm=1e6,AS=-7,IS=21,SS=!1,_l="[big.js] ",wo=_l+"Invalid ",jd=wo+"decimal places",xS=wo+"rounding mode",LE=_l+"Division by zero",Ve={},Fr=void 0,TS=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function ME(){function t(e){var n=this;if(!(n instanceof t))return e===Fr?ME():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(wo+"value");e=e===0&&1/e<0?"-0":String(e)}NS(n,e)}n.constructor=t}return t.prototype=Ve,t.DP=CS,t.RM=_S,t.NE=AS,t.PE=IS,t.strict=SS,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function NS(t,e){var n,r,s;if(!TS.test(e))throw Error(wo+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Eo(t,e,n,r){var s=t.c;if(n===Fr&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(xS);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Fr))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Fr||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function vo(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Ve.abs=function(){var t=new this.constructor(this);return t.s=1,t};Ve.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Ve.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>so)throw Error(jd);if(!s[0])throw Error(LE);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,f=s.slice(),h=a=s.length,g=r.length,p=r.slice(0,a),m=p.length,w=t,_=w.c=[],b=0,A=o+(w.e=e.e-t.e)+1;for(w.s=i,i=A<0?0:A,f.unshift(0);m++<a;)p.push(0);do{for(l=0;l<10;l++){if(a!=(m=p.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=p[d]){u=s[d]>p[d]?1:-1;break}if(u<0){for(c=m==a?s:f;m;){if(p[--m]<c[m]){for(d=m;d&&!p[--d];)p[d]=9;--p[d],p[m]+=10}p[m]-=c[m]}for(;!p[0];)p.shift()}else break}_[b++]=u?l:++l,p[0]&&u?p[m]=r[h]||0:p=[r[h]]}while((h++<g||p[0]!==Fr)&&i--);return!_[0]&&b!=1&&(_.shift(),w.e--,A--),b>A&&Eo(w,A,n.RM,p[0]!==Fr),w};Ve.eq=function(t){return this.cmp(t)===0};Ve.gt=function(t){return this.cmp(t)>0};Ve.gte=function(t){return this.cmp(t)>-1};Ve.lt=function(t){return this.cmp(t)<0};Ve.lte=function(t){return this.cmp(t)<1};Ve.minus=Ve.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,f=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-f){for((s=a<0)?(a=-a,r=l):(f=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--f;return l[0]||(t.s=1,l=[f=0]),t.c=l,t.e=f,t};Ve.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(LE);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Ve.plus=Ve.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Ve.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-Xm||t>Xm)throw Error(wo+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Ve.prec=function(t,e){if(t!==~~t||t<1||t>so)throw Error(wo+"precision");return Eo(new this.constructor(this),t,e)};Ve.round=function(t,e){if(t===Fr)t=0;else if(t!==~~t||t<-so||t>so)throw Error(jd);return Eo(new this.constructor(this),t+this.e+1,e)};Ve.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(_l+"No square root");i=Math.sqrt(+vo(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Eo(t,(s.DP-=4)+t.e+1,s.RM)};Ve.times=Ve.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Ve.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Fr){if(t!==~~t||t<0||t>so)throw Error(jd);for(n=Eo(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return vo(n,!0,!!r)};Ve.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Fr){if(t!==~~t||t<0||t>so)throw Error(jd);for(n=Eo(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return vo(n,!1,!!r)};Ve[Symbol.for("nodejs.util.inspect.custom")]=Ve.toJSON=Ve.toString=function(){var t=this,e=t.constructor;return vo(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Ve.toNumber=function(){var t=+vo(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(_l+"Imprecise conversion");return t};Ve.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Fr){if(t!==~~t||t<1||t>so)throw Error(wo+"precision");for(n=Eo(new r(n),t,e);n.c.length<t;)n.c.push(0)}return vo(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Ve.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(_l+"valueOf disallowed");return vo(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ps=ME();const OS={bigNumber(t){return t?new Ps(t):new Ps(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ps(0);const n=new Ps(t),r=new Ps(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new Ps(0).toFixed(e):new Ps(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new Ps(e).toNumber()}},PS=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],RS=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],kS=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],$S={getERC20Abi:t=>B.USDT_CONTRACT_ADDRESSES.includes(t)?kS:PS,getSwapAbi:()=>RS},At={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},fr={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.message=="string",r=typeof e.code=="number";return n&&r}return!1}catch{return!1}},isUserRejectedMessage(t){return t.toLowerCase().includes("user rejected")||t.toLowerCase().includes("user cancelled")||t.toLowerCase().includes("user canceled")},isUserRejectedRequestError(t){if(fr.isRpcProviderError(t)){const e=t.code===fr.RPC_ERROR_CODE.USER_REJECTED_REQUEST,n=t.code===fr.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e||n||fr.isUserRejectedMessage(t.message)}return t instanceof Error?fr.isUserRejectedMessage(t.message):!1}};let DS=class extends Error{constructor(e,n){super(n.message,{cause:e}),this.name=fr.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=n.code}},Wo=class extends DS{constructor(e){super(e,{code:fr.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=fr.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}};const fe={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function Uf(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ue={setItem(t,e){nc()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(nc())return localStorage.getItem(t)||void 0},removeItem(t){nc()&&localStorage.removeItem(t)},clear(){nc()&&localStorage.clear()}};function nc(){return typeof window<"u"&&typeof localStorage<"u"}function _c(t,e){const n=(t==null?void 0:t["--apkt-accent"])??(t==null?void 0:t["--w3m-accent"]);return e==="light"?{"--w3m-accent":n||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":n||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}var Qm={};const Bf=(typeof process<"u"&&typeof Qm<"u"?Qm.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",FE=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],US="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ke={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Bf,SECURE_SITE_DASHBOARD:`${Bf}/dashboard`,SECURE_SITE_FAVICON:`${Bf}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USDâ‚®0"]},BALANCE_SUPPORTED_CHAINS:[B.CHAIN.EVM,B.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[B.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[B.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[B.CHAIN.EVM,B.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[B.CHAIN.EVM,B.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[B.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[B.CHAIN.EVM,B.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},H={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=H.getActiveNamespace(),e=H.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ue.setItem(fe.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ue.getItem(fe.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ue.removeItem(fe.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ue.setItem(fe.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ue.setItem(fe.ACTIVE_CAIP_NETWORK_ID,t),H.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ue.getItem(fe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ue.removeItem(fe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Uf(t);ue.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=H.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ue.setItem(fe.RECENT_WALLETS,JSON.stringify(e)),ue.setItem(fe.RECENT_WALLET,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ue.getItem(fe.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const t=ue.getItem(fe.RECENT_WALLET);return t?JSON.parse(t):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{ue.removeItem(fe.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(t,e){try{const n=Uf(t);ue.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ue.getItem(fe.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Uf(t);return ue.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{ue.setItem(fe.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ue.getItem(fe.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ue.removeItem(fe.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ue.getItem(fe.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ue.getItem(fe.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ue.setItem(fe.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ue.getItem(fe.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ue.getItem(fe.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ue.setItem(fe.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=H.getConnectedNamespaces();e.includes(t)||(e.push(t),H.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=H.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),H.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ue.getItem(fe.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ue.setItem(fe.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ue.removeItem(fe.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ue.getItem(fe.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=H.getBalanceCache();ue.setItem(fe.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=H.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;H.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=H.getBalanceCache();e[t.caipAddress]=t,ue.setItem(fe.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ue.getItem(fe.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=H.getBalanceCache();ue.setItem(fe.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=H.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),H.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=H.getNativeBalanceCache();e[t.caipAddress]=t,ue.setItem(fe.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ue.getItem(fe.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=H.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;H.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=H.getEnsCache();e[t.address]=t,ue.setItem(fe.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=H.getEnsCache();ue.setItem(fe.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ue.getItem(fe.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=H.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;H.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=H.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ue.setItem(fe.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=H.getIdentityCache();ue.setItem(fe.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},getTonWalletsCache(){try{const t=ue.getItem(fe.TON_WALLETS_CACHE),e=t?JSON.parse(t):void 0;if(e&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.tonWallets))return e;H.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(t){try{const e=H.getTonWalletsCache()||{timestamp:0,wallets:[]};e.timestamp=new Date().getTime(),e.wallets=t,ue.setItem(fe.TON_WALLETS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ton wallets cache",t)}},removeTonWalletsCache(){try{ue.removeItem(fe.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{ue.removeItem(fe.PORTFOLIO_CACHE),ue.removeItem(fe.NATIVE_BALANCE_CACHE),ue.removeItem(fe.ENS_CACHE),ue.removeItem(fe.IDENTITY_CACHE),ue.removeItem(fe.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ue.setItem(fe.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ue.getItem(fe.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=H.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===B.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};ue.setItem(fe.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ue.getItem(fe.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=H.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),ue.setItem(fe.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=ue.getItem(fe.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=H.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),ue.setItem(fe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=H.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),ue.setItem(fe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(H.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=ue.getItem(fe.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){var n;try{const s=(n=H.getTransactionsCache()[t])==null?void 0:n[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;H.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=H.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},ue.setItem(fe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=H.getTransactionsCache(),r=(n==null?void 0:n[t])||{},{[e]:s,...i}=r;ue.setItem(fe.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=ue.getItem(fe.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=H.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;H.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=H.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},ue.setItem(fe.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=H.getTokenPriceCache();ue.setItem(fe.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t==null?void 0:t.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=ue.getItem(fe.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=H.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,ue.setItem(fe.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},ee={getWindow(){if(!(typeof window>"u"))return window},isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ee.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ke.TEN_SEC_MS:!0},isAllowedRetry(t,e=ke.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ee.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ke.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ee.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ee.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?H.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ee.wait(2e3)])},parseBalance(t,e){let n="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const l=(Math.floor(c*1e3)/1e3).toFixed(3);l&&(n=l)}}const[r,s]=n.split("."),i=r||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return B.W3M_API_URL},getBlockchainApiUrl(){return B.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return B.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ke.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in B.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};var la={};const BS="https://secure.walletconnect.org/sdk",LS=(typeof process<"u"&&typeof la<"u"?la.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||BS,MS=(typeof process<"u"&&typeof la<"u"?la.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",FS=(typeof process<"u"&&typeof la<"u"?la.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",le={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},dt={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ey={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},vt={set(t,e){Un.isClient&&localStorage.setItem(`${le.STORAGE_KEY}${t}`,e)},get(t){return Un.isClient?localStorage.getItem(`${le.STORAGE_KEY}${t}`):null},delete(t,e){Un.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${le.STORAGE_KEY}${t}`))}},Hl=30*1e3,Un={checkIfAllowedToTriggerEmail(){const t=vt.get(le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Hl){const n=Math.ceil((Hl-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=vt.get(le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Hl)return Math.ceil((Hl-e)/1e3)}return 0},checkIfRequestExists(t){return dt.NOT_SAFE_RPC_METHODS.includes(t.method)||dt.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(ey.transactionHash))||(t==null?void 0:t.match(ey.signedMessage)))?le.RPC_RESPONSE_TYPE_TX:le.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return dt.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var ze;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ze||(ze={}));var yp;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(yp||(yp={}));const se=ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xs=t=>{switch(typeof t){case"undefined":return se.undefined;case"string":return se.string;case"number":return isNaN(t)?se.nan:se.number;case"boolean":return se.boolean;case"function":return se.function;case"bigint":return se.bigint;case"symbol":return se.symbol;case"object":return Array.isArray(t)?se.array:t===null?se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?se.promise:typeof Map<"u"&&t instanceof Map?se.map:typeof Set<"u"&&t instanceof Set?se.set:typeof Date<"u"&&t instanceof Date?se.date:se.object;default:return se.unknown}},Y=ze.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jS=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class br extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,ze.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}br.create=t=>new br(t);const Ac=(t,e)=>{let n;switch(t.code){case Y.invalid_type:t.received===se.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ze.jsonStringifyReplacer)}`;break;case Y.unrecognized_keys:n=`Unrecognized key(s) in object: ${ze.joinValues(t.keys,", ")}`;break;case Y.invalid_union:n="Invalid input";break;case Y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ze.joinValues(t.options)}`;break;case Y.invalid_enum_value:n=`Invalid enum value. Expected ${ze.joinValues(t.options)}, received '${t.received}'`;break;case Y.invalid_arguments:n="Invalid function arguments";break;case Y.invalid_return_type:n="Invalid function return type";break;case Y.invalid_date:n="Invalid date";break;case Y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ze.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Y.custom:n="Invalid input";break;case Y.invalid_intersection_types:n="Intersection results could not be merged";break;case Y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Y.not_finite:n="Number must be finite";break;default:n=e.defaultError,ze.assertNever(t)}return{message:n}};let jE=Ac;function zS(t){jE=t}function Gu(){return jE}const Yu=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},HS=[];function ce(t,e){const n=Yu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Gu(),Ac].filter(r=>!!r)});t.common.issues.push(n)}class Jt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return ve;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Jt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ve;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const ve=Object.freeze({status:"aborted"}),zE=t=>({status:"dirty",value:t}),an=t=>({status:"valid",value:t}),bp=t=>t.status==="aborted",wp=t=>t.status==="dirty",Ic=t=>t.status==="valid",Zu=t=>typeof Promise<"u"&&t instanceof Promise;var ye;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));class Hr{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ty=(t,e)=>{if(Ic(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new br(t.common.issues);return this._error=n,this._error}}};function Ae(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class xe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Jt,ctx:{common:e.parent.common,data:e.data,parsedType:Xs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Zu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)},i=this._parseSync({data:e,path:s.path,parent:s});return ty(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Zu(s)?s:Promise.resolve(s));return ty(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Y.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Cr({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ys.create(this,this._def)}nullable(){return ao.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return wr.create(this,this._def)}promise(){return da.create(this,this._def)}or(e){return Nc.create([this,e],this._def)}and(e){return Oc.create(this,e,this._def)}transform(e){return new Cr({...Ae(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Dc({...Ae(this._def),innerType:this,defaultValue:n,typeName:we.ZodDefault})}brand(){return new qE({typeName:we.ZodBranded,type:this,...Ae(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ed({...Ae(this._def),innerType:this,catchValue:n,typeName:we.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Al.create(this,e)}readonly(){return nd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qS=/^c[^\s-]{8,}$/i,WS=/^[a-z][a-z0-9]*$/,VS=/^[0-9A-HJKMNP-TV-Z]{26}$/,KS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,GS=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Lf;const ZS=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,JS=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,XS=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function QS(t,e){return!!((e==="v4"||!e)&&ZS.test(t)||(e==="v6"||!e)&&JS.test(t))}class gr extends xe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==se.string){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.string,received:i.parsedType}),ve}const r=new Jt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ce(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ce(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")GS.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"email",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Lf||(Lf=new RegExp(YS,"u")),Lf.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"emoji",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")KS.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"uuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")qS.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")WS.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid2",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")VS.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ulid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ce(s,{validation:"url",code:Y.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"regex",code:Y.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?XS(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?QS(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ip",code:Y.invalid_string,message:i.message}),r.dirty()):ze.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Y.invalid_string,...ye.errToObj(r)})}_addCheck(e){return new gr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ye.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ye.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ye.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ye.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ye.errToObj(n)})}nonempty(e){return this.min(1,ye.errToObj(e))}trim(){return new gr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new gr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new gr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}gr.create=t=>{var e;return new gr({checks:[],typeName:we.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ae(t)})};function e5(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class gi extends xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==se.number){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.number,received:i.parsedType}),ve}let r;const s=new Jt;for(const i of this._def.checks)i.kind==="int"?ze.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?e5(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.not_finite,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ye.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ye.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ye.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ye.toString(n))}setLimit(e,n,r,s){return new gi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ye.toString(s)}]})}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ze.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}gi.create=t=>new gi({checks:[],typeName:we.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ae(t)});class mi extends xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==se.bigint){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.bigint,received:i.parsedType}),ve}let r;const s=new Jt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ze.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ye.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ye.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ye.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ye.toString(n))}setLimit(e,n,r,s){return new mi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ye.toString(s)}]})}_addCheck(e){return new mi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}mi.create=t=>{var e;return new mi({checks:[],typeName:we.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ae(t)})};class Sc extends xe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==se.boolean){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.boolean,received:r.parsedType}),ve}return an(e.data)}}Sc.create=t=>new Sc({typeName:we.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ae(t)});class io extends xe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==se.date){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.date,received:i.parsedType}),ve}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_date}),ve}const r=new Jt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ze.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new io({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}io.create=t=>new io({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:we.ZodDate,...Ae(t)});class Ju extends xe{_parse(e){if(this._getType(e)!==se.symbol){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.symbol,received:r.parsedType}),ve}return an(e.data)}}Ju.create=t=>new Ju({typeName:we.ZodSymbol,...Ae(t)});class xc extends xe{_parse(e){if(this._getType(e)!==se.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.undefined,received:r.parsedType}),ve}return an(e.data)}}xc.create=t=>new xc({typeName:we.ZodUndefined,...Ae(t)});class Tc extends xe{_parse(e){if(this._getType(e)!==se.null){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.null,received:r.parsedType}),ve}return an(e.data)}}Tc.create=t=>new Tc({typeName:we.ZodNull,...Ae(t)});class ua extends xe{constructor(){super(...arguments),this._any=!0}_parse(e){return an(e.data)}}ua.create=t=>new ua({typeName:we.ZodAny,...Ae(t)});class eo extends xe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return an(e.data)}}eo.create=t=>new eo({typeName:we.ZodUnknown,...Ae(t)});class _s extends xe{_parse(e){const n=this._getOrReturnCtx(e);return ce(n,{code:Y.invalid_type,expected:se.never,received:n.parsedType}),ve}}_s.create=t=>new _s({typeName:we.ZodNever,...Ae(t)});class Xu extends xe{_parse(e){if(this._getType(e)!==se.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.void,received:r.parsedType}),ve}return an(e.data)}}Xu.create=t=>new Xu({typeName:we.ZodVoid,...Ae(t)});class wr extends xe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==se.array)return ce(n,{code:Y.invalid_type,expected:se.array,received:n.parsedType}),ve;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ce(n,{code:o?Y.too_big:Y.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ce(n,{code:Y.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ce(n,{code:Y.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Hr(n,o,n.path,a)))).then(o=>Jt.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Hr(n,o,n.path,a)));return Jt.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new wr({...this._def,minLength:{value:e,message:ye.toString(n)}})}max(e,n){return new wr({...this._def,maxLength:{value:e,message:ye.toString(n)}})}length(e,n){return new wr({...this._def,exactLength:{value:e,message:ye.toString(n)}})}nonempty(e){return this.min(1,e)}}wr.create=(t,e)=>new wr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Ae(e)});function Fo(t){if(t instanceof it){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ys.create(Fo(r))}return new it({...t._def,shape:()=>e})}else return t instanceof wr?new wr({...t._def,type:Fo(t.element)}):t instanceof ys?ys.create(Fo(t.unwrap())):t instanceof ao?ao.create(Fo(t.unwrap())):t instanceof qr?qr.create(t.items.map(e=>Fo(e))):t}class it extends xe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ze.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==se.object){const l=this._getOrReturnCtx(e);return ce(l,{code:Y.invalid_type,expected:se.object,received:l.parsedType}),ve}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof _s&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Hr(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof _s){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ce(s,{code:Y.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Hr(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Jt.mergeObjectSync(r,l)):Jt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new it({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ye.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new it({...this._def,unknownKeys:"strip"})}passthrough(){return new it({...this._def,unknownKeys:"passthrough"})}extend(e){return new it({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new it({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:we.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new it({...this._def,catchall:e})}pick(e){const n={};return ze.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new it({...this._def,shape:()=>n})}omit(e){const n={};return ze.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new it({...this._def,shape:()=>n})}deepPartial(){return Fo(this)}partial(e){const n={};return ze.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new it({...this._def,shape:()=>n})}required(e){const n={};return ze.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ys;)i=i._def.innerType;n[r]=i}}),new it({...this._def,shape:()=>n})}keyof(){return HE(ze.objectKeys(this.shape))}}it.create=(t,e)=>new it({shape:()=>t,unknownKeys:"strip",catchall:_s.create(),typeName:we.ZodObject,...Ae(e)});it.strictCreate=(t,e)=>new it({shape:()=>t,unknownKeys:"strict",catchall:_s.create(),typeName:we.ZodObject,...Ae(e)});it.lazycreate=(t,e)=>new it({shape:t,unknownKeys:"strip",catchall:_s.create(),typeName:we.ZodObject,...Ae(e)});class Nc extends xe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new br(a.ctx.common.issues));return ce(n,{code:Y.invalid_union,unionErrors:o}),ve}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new br(c));return ce(n,{code:Y.invalid_union,unionErrors:a}),ve}}get options(){return this._def.options}}Nc.create=(t,e)=>new Nc({options:t,typeName:we.ZodUnion,...Ae(e)});const Ru=t=>t instanceof Rc?Ru(t.schema):t instanceof Cr?Ru(t.innerType()):t instanceof kc?[t.value]:t instanceof yi?t.options:t instanceof $c?Object.keys(t.enum):t instanceof Dc?Ru(t._def.innerType):t instanceof xc?[void 0]:t instanceof Tc?[null]:null;class zd extends xe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.object)return ce(n,{code:Y.invalid_type,expected:se.object,received:n.parsedType}),ve;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ce(n,{code:Y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Ru(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new zd({typeName:we.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ae(r)})}}function Ep(t,e){const n=Xs(t),r=Xs(e);if(t===e)return{valid:!0,data:t};if(n===se.object&&r===se.object){const s=ze.objectKeys(e),i=ze.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Ep(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===se.array&&r===se.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Ep(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===se.date&&r===se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Oc extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(bp(i)||bp(o))return ve;const a=Ep(i.value,o.value);return a.valid?((wp(i)||wp(o))&&n.dirty(),{status:n.value,value:a.data}):(ce(r,{code:Y.invalid_intersection_types}),ve)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Oc.create=(t,e,n)=>new Oc({left:t,right:e,typeName:we.ZodIntersection,...Ae(n)});class qr extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.array)return ce(r,{code:Y.invalid_type,expected:se.array,received:r.parsedType}),ve;if(r.data.length<this._def.items.length)return ce(r,{code:Y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&r.data.length>this._def.items.length&&(ce(r,{code:Y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Hr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Jt.mergeArray(n,o)):Jt.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new qr({...this._def,rest:e})}}qr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qr({items:t,typeName:we.ZodTuple,rest:null,...Ae(e)})};class Pc extends xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.object)return ce(r,{code:Y.invalid_type,expected:se.object,received:r.parsedType}),ve;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Hr(r,a,r.path,a)),value:o._parse(new Hr(r,r.data[a],r.path,a))});return r.common.async?Jt.mergeObjectAsync(n,s):Jt.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof xe?new Pc({keyType:e,valueType:n,typeName:we.ZodRecord,...Ae(r)}):new Pc({keyType:gr.create(),valueType:e,typeName:we.ZodRecord,...Ae(n)})}}class Qu extends xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.map)return ce(r,{code:Y.invalid_type,expected:se.map,received:r.parsedType}),ve;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Hr(r,a,r.path,[l,"key"])),value:i._parse(new Hr(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return ve;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return ve;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}Qu.create=(t,e,n)=>new Qu({valueType:e,keyType:t,typeName:we.ZodMap,...Ae(n)});class oo extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.set)return ce(r,{code:Y.invalid_type,expected:se.set,received:r.parsedType}),ve;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ce(r,{code:Y.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ce(r,{code:Y.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return ve;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Hr(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new oo({...this._def,minSize:{value:e,message:ye.toString(n)}})}max(e,n){return new oo({...this._def,maxSize:{value:e,message:ye.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}oo.create=(t,e)=>new oo({valueType:t,minSize:null,maxSize:null,typeName:we.ZodSet,...Ae(e)});class Zo extends xe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.function)return ce(n,{code:Y.invalid_type,expected:se.function,received:n.parsedType}),ve;function r(a,c){return Yu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gu(),Ac].filter(l=>!!l),issueData:{code:Y.invalid_arguments,argumentsError:c}})}function s(a,c){return Yu({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gu(),Ac].filter(l=>!!l),issueData:{code:Y.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof da){const a=this;return an(async function(...c){const l=new br([]),u=await a._def.args.parseAsync(c,i).catch(h=>{throw l.addIssue(r(c,h)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(h=>{throw l.addIssue(s(d,h)),l})})}else{const a=this;return an(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new br([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new br([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Zo({...this._def,args:qr.create(e).rest(eo.create())})}returns(e){return new Zo({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Zo({args:e||qr.create([]).rest(eo.create()),returns:n||eo.create(),typeName:we.ZodFunction,...Ae(r)})}}class Rc extends xe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Rc.create=(t,e)=>new Rc({getter:t,typeName:we.ZodLazy,...Ae(e)});class kc extends xe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ce(n,{received:n.data,code:Y.invalid_literal,expected:this._def.value}),ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}kc.create=(t,e)=>new kc({value:t,typeName:we.ZodLiteral,...Ae(e)});function HE(t,e){return new yi({values:t,typeName:we.ZodEnum,...Ae(e)})}class yi extends xe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ce(n,{expected:ze.joinValues(r),received:n.parsedType,code:Y.invalid_type}),ve}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ce(n,{received:n.data,code:Y.invalid_enum_value,options:r}),ve}return an(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return yi.create(e)}exclude(e){return yi.create(this.options.filter(n=>!e.includes(n)))}}yi.create=HE;class $c extends xe{_parse(e){const n=ze.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==se.string&&r.parsedType!==se.number){const s=ze.objectValues(n);return ce(r,{expected:ze.joinValues(s),received:r.parsedType,code:Y.invalid_type}),ve}if(n.indexOf(e.data)===-1){const s=ze.objectValues(n);return ce(r,{received:r.data,code:Y.invalid_enum_value,options:s}),ve}return an(e.data)}get enum(){return this._def.values}}$c.create=(t,e)=>new $c({values:t,typeName:we.ZodNativeEnum,...Ae(e)});class da extends xe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.promise&&n.common.async===!1)return ce(n,{code:Y.invalid_type,expected:se.promise,received:n.parsedType}),ve;const r=n.parsedType===se.promise?n.data:Promise.resolve(n.data);return an(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}da.create=(t,e)=>new da({type:t,typeName:we.ZodPromise,...Ae(e)});class Cr extends xe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ce(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ic(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ic(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);ze.assertNever(s)}}Cr.create=(t,e,n)=>new Cr({schema:t,typeName:we.ZodEffects,effect:e,...Ae(n)});Cr.createWithPreprocess=(t,e,n)=>new Cr({schema:e,effect:{type:"preprocess",transform:t},typeName:we.ZodEffects,...Ae(n)});class ys extends xe{_parse(e){return this._getType(e)===se.undefined?an(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ys.create=(t,e)=>new ys({innerType:t,typeName:we.ZodOptional,...Ae(e)});class ao extends xe{_parse(e){return this._getType(e)===se.null?an(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ao.create=(t,e)=>new ao({innerType:t,typeName:we.ZodNullable,...Ae(e)});class Dc extends xe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===se.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Dc.create=(t,e)=>new Dc({innerType:t,typeName:we.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ae(e)});class ed extends xe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Zu(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new br(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new br(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ed.create=(t,e)=>new ed({innerType:t,typeName:we.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ae(e)});class td extends xe{_parse(e){if(this._getType(e)!==se.nan){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.nan,received:r.parsedType}),ve}return{status:"valid",value:e.data}}}td.create=t=>new td({typeName:we.ZodNaN,...Ae(t)});const t5=Symbol("zod_brand");class qE extends xe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Al extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ve:i.status==="dirty"?(n.dirty(),zE(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ve:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Al({in:e,out:n,typeName:we.ZodPipeline})}}class nd extends xe{_parse(e){const n=this._def.innerType._parse(e);return Ic(n)&&(n.value=Object.freeze(n.value)),n}}nd.create=(t,e)=>new nd({innerType:t,typeName:we.ZodReadonly,...Ae(e)});const WE=(t,e={},n)=>t?ua.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):ua.create(),n5={object:it.lazycreate};var we;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(we||(we={}));const r5=(t,e={message:`Input not instance of ${t.name}`})=>WE(n=>n instanceof t,e),VE=gr.create,KE=gi.create,s5=td.create,i5=mi.create,GE=Sc.create,o5=io.create,a5=Ju.create,c5=xc.create,l5=Tc.create,u5=ua.create,d5=eo.create,f5=_s.create,h5=Xu.create,p5=wr.create,g5=it.create,m5=it.strictCreate,y5=Nc.create,b5=zd.create,w5=Oc.create,E5=qr.create,v5=Pc.create,C5=Qu.create,_5=oo.create,A5=Zo.create,I5=Rc.create,S5=kc.create,x5=yi.create,T5=$c.create,N5=da.create,ny=Cr.create,O5=ys.create,P5=ao.create,R5=Cr.createWithPreprocess,k5=Al.create,$5=()=>VE().optional(),D5=()=>KE().optional(),U5=()=>GE().optional(),B5={string:t=>gr.create({...t,coerce:!0}),number:t=>gi.create({...t,coerce:!0}),boolean:t=>Sc.create({...t,coerce:!0}),bigint:t=>mi.create({...t,coerce:!0}),date:t=>io.create({...t,coerce:!0})},L5=ve;var E=Object.freeze({__proto__:null,defaultErrorMap:Ac,setErrorMap:zS,getErrorMap:Gu,makeIssue:Yu,EMPTY_PATH:HS,addIssueToContext:ce,ParseStatus:Jt,INVALID:ve,DIRTY:zE,OK:an,isAborted:bp,isDirty:wp,isValid:Ic,isAsync:Zu,get util(){return ze},get objectUtil(){return yp},ZodParsedType:se,getParsedType:Xs,ZodType:xe,ZodString:gr,ZodNumber:gi,ZodBigInt:mi,ZodBoolean:Sc,ZodDate:io,ZodSymbol:Ju,ZodUndefined:xc,ZodNull:Tc,ZodAny:ua,ZodUnknown:eo,ZodNever:_s,ZodVoid:Xu,ZodArray:wr,ZodObject:it,ZodUnion:Nc,ZodDiscriminatedUnion:zd,ZodIntersection:Oc,ZodTuple:qr,ZodRecord:Pc,ZodMap:Qu,ZodSet:oo,ZodFunction:Zo,ZodLazy:Rc,ZodLiteral:kc,ZodEnum:yi,ZodNativeEnum:$c,ZodPromise:da,ZodEffects:Cr,ZodTransformer:Cr,ZodOptional:ys,ZodNullable:ao,ZodDefault:Dc,ZodCatch:ed,ZodNaN:td,BRAND:t5,ZodBranded:qE,ZodPipeline:Al,ZodReadonly:nd,custom:WE,Schema:xe,ZodSchema:xe,late:n5,get ZodFirstPartyTypeKind(){return we},coerce:B5,any:u5,array:p5,bigint:i5,boolean:GE,date:o5,discriminatedUnion:b5,effect:ny,enum:x5,function:A5,instanceof:r5,intersection:w5,lazy:I5,literal:S5,map:C5,nan:s5,nativeEnum:T5,never:f5,null:l5,nullable:P5,number:KE,object:g5,oboolean:U5,onumber:D5,optional:O5,ostring:$5,pipeline:k5,preprocess:R5,promise:N5,record:v5,set:_5,strictObject:m5,string:VE,symbol:a5,transformer:ny,tuple:E5,undefined:c5,union:y5,unknown:d5,void:h5,NEVER:L5,ZodIssueCode:Y,quotelessJson:jS,ZodError:br});const ot=E.object({message:E.string()});function ie(t){return E.literal(le[t])}const Hd=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const M5=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),F5=E.object({email:E.string().email()}),j5=E.object({otp:E.string()}),z5=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(Hd),rpcUrl:E.optional(E.string())}),H5=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(Hd),rpcUrl:E.optional(E.string())}),q5=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),W5=E.object({email:E.string().email()}),V5=E.object({otp:E.string()}),K5=E.object({otp:E.string()}),G5=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),Y5=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),Z5=E.object({type:E.string()}),J5=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),X5=E.object({url:E.string()}),Q5=E.object({userName:E.string()}),e6=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([dt.ACCOUNT_TYPES.EOA,dt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(Hd)}),t6=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),n6=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([dt.ACCOUNT_TYPES.EOA,dt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(Hd)}),r6=E.object({uri:E.string()}),s6=E.object({isConnected:E.boolean()}),i6=E.object({chainId:E.string().or(E.number())}),o6=E.object({chainId:E.string().or(E.number())}),a6=E.object({newEmail:E.string().email()}),c6=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const l6=E.object({version:E.string().optional()}),u6=E.object({type:E.string(),address:E.string()}),d6=E.any(),f6=E.object({method:E.literal("eth_accounts")}),h6=E.object({method:E.literal("eth_blockNumber")}),p6=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),g6=E.object({method:E.literal("eth_chainId")}),m6=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),y6=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),b6=E.object({method:E.literal("eth_gasPrice")}),w6=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),E6=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),v6=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),C6=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),_6=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),A6=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),I6=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),S6=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),x6=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),T6=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),N6=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),O6=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),P6=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),R6=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),k6=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),$6=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),D6=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),U6=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),B6=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),L6=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),M6=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),F6=E.object({method:E.literal("eth_newBlockFilter")}),j6=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),z6=E.object({method:E.literal("eth_newPendingTransactionFilter")}),H6=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),q6=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),W6=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),ry=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),V6=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),K6=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),G6=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),Y6=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),Z6=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),J6=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),X6=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),Q6=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),ex=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),tx=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),nx=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),rx=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),sy=E.object({token:E.string()}),oe=E.object({id:E.string().optional()}),Mf={appEvent:oe.extend({type:ie("APP_SWITCH_NETWORK"),payload:M5}).or(oe.extend({type:ie("APP_CONNECT_EMAIL"),payload:F5})).or(oe.extend({type:ie("APP_CONNECT_DEVICE")})).or(oe.extend({type:ie("APP_CONNECT_OTP"),payload:j5})).or(oe.extend({type:ie("APP_CONNECT_SOCIAL"),payload:z5})).or(oe.extend({type:ie("APP_GET_FARCASTER_URI")})).or(oe.extend({type:ie("APP_CONNECT_FARCASTER")})).or(oe.extend({type:ie("APP_GET_USER"),payload:E.optional(H5)})).or(oe.extend({type:ie("APP_GET_SOCIAL_REDIRECT_URI"),payload:q5})).or(oe.extend({type:ie("APP_SIGN_OUT")})).or(oe.extend({type:ie("APP_IS_CONNECTED"),payload:E.optional(sy)})).or(oe.extend({type:ie("APP_GET_CHAIN_ID")})).or(oe.extend({type:ie("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(oe.extend({type:ie("APP_INIT_SMART_ACCOUNT")})).or(oe.extend({type:ie("APP_SET_PREFERRED_ACCOUNT"),payload:Z5})).or(oe.extend({type:ie("APP_RPC_REQUEST"),payload:ry.or(rx).or(f6).or(h6).or(p6).or(g6).or(m6).or(y6).or(b6).or(w6).or(E6).or(v6).or(C6).or(_6).or(A6).or(I6).or(S6).or(x6).or(T6).or(N6).or(O6).or(P6).or(R6).or(k6).or($6).or(D6).or(U6).or(B6).or(L6).or(M6).or(F6).or(j6).or(z6).or(H6).or(q6).or(W6).or(ry).or(V6).or(K6).or(G6).or(Y6).or(Z6).or(J6).or(Q6).or(X6).or(ex).or(tx).or(nx).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(oe.extend({type:ie("APP_UPDATE_EMAIL"),payload:W5})).or(oe.extend({type:ie("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:V5})).or(oe.extend({type:ie("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:K5})).or(oe.extend({type:ie("APP_SYNC_THEME"),payload:G5})).or(oe.extend({type:ie("APP_SYNC_DAPP_DATA"),payload:Y5})).or(oe.extend({type:ie("APP_RELOAD")})).or(oe.extend({type:ie("APP_RPC_ABORT")})),frameEvent:oe.extend({type:ie("FRAME_SWITCH_NETWORK_ERROR"),payload:ot}).or(oe.extend({type:ie("FRAME_SWITCH_NETWORK_SUCCESS"),payload:o6})).or(oe.extend({type:ie("FRAME_CONNECT_EMAIL_SUCCESS"),payload:J5})).or(oe.extend({type:ie("FRAME_CONNECT_EMAIL_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:X5})).or(oe.extend({type:ie("FRAME_GET_FARCASTER_URI_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Q5})).or(oe.extend({type:ie("FRAME_CONNECT_FARCASTER_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_OTP_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_OTP_SUCCESS")})).or(oe.extend({type:ie("FRAME_CONNECT_DEVICE_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_DEVICE_SUCCESS")})).or(oe.extend({type:ie("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:e6})).or(oe.extend({type:ie("FRAME_CONNECT_SOCIAL_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_USER_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_USER_SUCCESS"),payload:n6})).or(oe.extend({type:ie("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:r6})).or(oe.extend({type:ie("FRAME_SIGN_OUT_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SIGN_OUT_SUCCESS")})).or(oe.extend({type:ie("FRAME_IS_CONNECTED_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_IS_CONNECTED_SUCCESS"),payload:s6})).or(oe.extend({type:ie("FRAME_GET_CHAIN_ID_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_CHAIN_ID_SUCCESS"),payload:i6})).or(oe.extend({type:ie("FRAME_RPC_REQUEST_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_RPC_REQUEST_SUCCESS"),payload:d6})).or(oe.extend({type:ie("FRAME_SESSION_UPDATE"),payload:sy})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_SUCCESS"),payload:t6})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:a6})).or(oe.extend({type:ie("FRAME_SYNC_THEME_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SYNC_THEME_SUCCESS")})).or(oe.extend({type:ie("FRAME_SYNC_DAPP_DATA_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(oe.extend({type:ie("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:c6})).or(oe.extend({type:ie("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:u6})).or(oe.extend({type:ie("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_READY"),payload:l6})).or(oe.extend({type:ie("FRAME_RELOAD_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_RELOAD_SUCCESS")}))};function Ff(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function sx({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=B.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(LS);i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",FS),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r);const o=vt.get("dapp_smart_account_version");return o&&(o==="v6"||o==="v7")&&(console.warn(">> AppKit - Forcing smart account version",o),i.searchParams.set("smartAccountVersion",o)),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class ix{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=B.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,l)=>{function u({data:d}){var h;if(!Ff(le.FRAME_EVENT_KEY,d))return;const f=Mf.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}((h=f.data)==null?void 0:h.id)===a&&(c(f.data),window.removeEventListener("message",u))}Un.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{Un.isClient&&window.addEventListener("message",({data:c})=>{if(!Ff(le.FRAME_EVENT_KEY,c))return;const l=Mf.frameEvent.safeParse(c);l.success?a(l.data):console.warn("W3mFrame: invalid frame event",l.error.message)})},onAppEvent:a=>{Un.isClient&&window.addEventListener("message",({data:c})=>{if(!Ff(le.APP_EVENT_KEY,c))return;const l=Mf.appEvent.safeParse(c);l.success||console.warn("W3mFrame: invalid app event",l.error.message),a(c)})},postAppEvent:a=>{var c;if(Un.isClient){if(!((c=this.iframe)!=null&&c.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(Un.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),Un.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=sx({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{var c;(c=this.frameLoadPromiseResolver)==null||c.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{var l;c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(l=this.frameLoadPromiseResolver)==null||l.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}var qd={exports:{}};function ox(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var og=ax;function ax(t,e,n){var r=n&&n.stringify||ox,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,f=t&&t.length||0,h=0;h<f;){if(t.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,t.charCodeAt(h+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<h&&(l+=t.slice(d,h)),l+=Number(e[u]),d=h+2,h++;break;case 105:if(u>=c||e[u]==null)break;d<h&&(l+=t.slice(d,h)),l+=Math.floor(Number(e[u])),d=h+2,h++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<h&&(l+=t.slice(d,h));var g=typeof e[u];if(g==="string"){l+="'"+e[u]+"'",d=h+2,h++;break}if(g==="function"){l+=e[u].name||"<anonymous>",d=h+2,h++;break}l+=r(e[u]),d=h+2,h++;break;case 115:if(u>=c)break;d<h&&(l+=t.slice(d,h)),l+=String(e[u]),d=h+2,h++;break;case 37:d<h&&(l+=t.slice(d,h)),l+="%",d=h+2,h++,u--;break}++u}++h}return d===-1?t:(d<f&&(l+=t.slice(d)),l)}const iy=og;qd.exports=As;const Uc=Cx().console||{},cx={mapHttpRequest:ql,mapHttpResponse:ql,wrapRequestSerializer:jf,wrapResponseSerializer:jf,wrapErrorSerializer:jf,req:ql,res:ql,err:ay,errWithCause:ay};function oi(t,e){return t==="silent"?1/0:e.levels.values[t]}const ag=Symbol("pino.logFuncs"),vp=Symbol("pino.hierarchy"),lx={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function oy(t,e){const n={logger:e,parent:t[vp]};e[vp]=n}function ux(t,e,n){const r={};e.forEach(s=>{r[s]=n[s]?n[s]:Uc[s]||Uc[lx[s]||"log"]||Jo}),t[ag]=r}function dx(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function As(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Uc;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=dx(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(p){n[p]=n}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const c=t.level||"info",l=Object.create(n);l.log||(l.log=Jo),ux(l,a,n),oy({},l),Object.defineProperty(l,"levelVal",{get:d}),Object.defineProperty(l,"level",{get:f,set:h});const u={transmit:e,serialize:s,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:wx(t),messageKey:t.messageKey||"msg",onChild:t.onChild||Jo};l.levels=fx(t),l.level=c,l.isLevelEnabled=function(p){return this.levels.values[p]?this.levels.values[p]>=this.levels.values[this.level]:!1},l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=Jo,l.serializers=r,l._serialize=s,l._stdErrSerialize=i,l.child=function(...p){return g.call(this,u,...p)},e&&(l._logEvent=Cp());function d(){return oi(this.level,this)}function f(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,xi(this,u,l,"error"),xi(this,u,l,"fatal"),xi(this,u,l,"warn"),xi(this,u,l,"info"),xi(this,u,l,"debug"),xi(this,u,l,"trace"),o.forEach(m=>{xi(this,u,l,m)})}function g(p,m,w){if(!m)throw new Error("missing bindings for child Pino");w=w||{},s&&m.serializers&&(w.serializers=m.serializers);const _=w.serializers;if(s&&_){var b=Object.assign({},r,_),A=t.browser.serialize===!0?Object.keys(b):s;delete m.serializers,cg([m],A,b,this._stdErrSerialize)}function C(x){this._childLevel=(x._childLevel|0)+1,this.bindings=m,b&&(this.serializers=b,this._serialize=A),e&&(this._logEvent=Cp([].concat(x._logEvent.bindings,m)))}C.prototype=this;const S=new C(this);return oy(this,S),S.child=function(...x){return g.call(this,p,...x)},S.level=w.level||this.level,p.onChild(S),S}return l}function fx(t){const e=t.customLevels||{},n=Object.assign({},As.levels.values,e),r=Object.assign({},As.levels.labels,hx(e));return{values:n,labels:r}}function hx(t){const e={};return Object.keys(t).forEach(function(n){e[t[n]]=n}),e}As.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};As.stdSerializers=cx;As.stdTimeFunctions=Object.assign({},{nullTime:YE,epochTime:ZE,unixTime:Ex,isoTime:vx});function px(t){const e=[];t.bindings&&e.push(t.bindings);let n=t[vp];for(;n.parent;)n=n.parent,n.logger.bindings&&e.push(n.logger.bindings);return e.reverse()}function xi(t,e,n,r){if(Object.defineProperty(t,r,{value:oi(t.level,n)>oi(r,n)?Jo:n[ag][r],writable:!0,enumerable:!0,configurable:!0}),t[r]===Jo){if(!e.transmit)return;const i=e.transmit.level||t.level,o=oi(i,n);if(oi(r,n)<o)return}t[r]=mx(t,e,n,r);const s=px(t);s.length!==0&&(t[r]=gx(s,t[r]))}function gx(t,e){return function(){return e.apply(this,[...t,...arguments])}}function mx(t,e,n,r){return function(s){return function(){const o=e.timestamp(),a=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Uc?Uc:this;for(var l=0;l<a.length;l++)a[l]=arguments[l];var u=!1;if(e.serialize&&(cg(a,this._serialize,this.serializers,this._stdErrSerialize),u=!0),e.asObject||e.formatters?s.call(c,...yx(this,r,a,o,e)):s.apply(c,a),e.transmit){const d=e.transmit.level||t._level,f=oi(d,n),h=oi(r,n);if(h<f)return;bx(this,{ts:o,methodLevel:r,methodValue:h,transmitValue:n.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:oi(t._level,n)},a,u)}}}(t[ag][r])}function yx(t,e,n,r,s){const{level:i,log:o=d=>d}=s.formatters||{},a=n.slice();let c=a[0];const l={};let u=(t._childLevel|0)+1;if(u<1&&(u=1),r&&(l.time=r),i){const d=i(e,t.levels.values[e]);Object.assign(l,d)}else l.level=t.levels.values[e];if(s.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());return[o(l),...a]}else{if(c!==null&&typeof c=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());c=a.length?iy(a.shift(),a):void 0}else typeof c=="string"&&(c=iy(a.shift(),a));return c!==void 0&&(l[s.messageKey]=c),[o(l)]}}function cg(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=As.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s])&&e)for(const i in t[s])e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function bx(t,e,n,r=!1){const s=e.send,i=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,l=t._logEvent.bindings;r||cg(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(u){return l.indexOf(u)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,s(o,t._logEvent,c),t._logEvent=Cp(l)}function Cp(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function ay(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function wx(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?YE:ZE}function ql(){return{}}function jf(t){return t}function Jo(){}function YE(){return!1}function ZE(){return Date.now()}function Ex(){return Math.round(Date.now()/1e3)}function vx(){return new Date(Date.now()).toISOString()}function Cx(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}qd.exports.default=As;qd.exports.pino=As;var jo=qd.exports;const JE=_a(jo),_x=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Ax=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function co(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Ax(t)}catch{return t}}function Ln(t){return typeof t=="string"?t:_x(t)||""}const Ix={level:"info"},Wd="custom_context",lg=1e3*1024;var Sx=Object.defineProperty,xx=(t,e,n)=>e in t?Sx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qs=(t,e,n)=>xx(t,typeof e!="symbol"?e+"":e,n);let Tx=class{constructor(e){Qs(this,"nodeValue"),Qs(this,"sizeInBytes"),Qs(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},cy=class{constructor(e){Qs(this,"lengthInNodes"),Qs(this,"sizeInBytes"),Qs(this,"head"),Qs(this,"tail"),Qs(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Tx(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};var Nx=Object.defineProperty,Ox=(t,e,n)=>e in t?Nx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wl=(t,e,n)=>Ox(t,typeof e!="symbol"?e+"":e,n);let XE=class{constructor(e,n=lg){Wl(this,"logs"),Wl(this,"level"),Wl(this,"levelValue"),Wl(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=jo.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new cy(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===jo.levels.values.error?console.error(e):n===jo.levels.values.warn?console.warn(e):n===jo.levels.values.debug?console.debug(e):n===jo.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ln({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new cy(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Ln({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var Px=Object.defineProperty,Rx=(t,e,n)=>e in t?Px(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kx=(t,e,n)=>Rx(t,e+"",n);let $x=class{constructor(e,n=lg){kx(this,"baseChunkLogger"),this.baseChunkLogger=new XE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var Dx=Object.defineProperty,Ux=(t,e,n)=>e in t?Dx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bx=(t,e,n)=>Ux(t,e+"",n);let Lx=class{constructor(e,n=lg){Bx(this,"baseChunkLogger"),this.baseChunkLogger=new XE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Mx=Object.defineProperty,Fx=Object.defineProperties,jx=Object.getOwnPropertyDescriptors,ly=Object.getOwnPropertySymbols,zx=Object.prototype.hasOwnProperty,Hx=Object.prototype.propertyIsEnumerable,uy=(t,e,n)=>e in t?Mx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rd=(t,e)=>{for(var n in e||(e={}))zx.call(e,n)&&uy(t,n,e[n]);if(ly)for(var n of ly(e))Hx.call(e,n)&&uy(t,n,e[n]);return t},sd=(t,e)=>Fx(t,jx(e));function qx(t){return sd(rd({},t),{level:(t==null?void 0:t.level)||Ix.level})}function Wx(t,e,n=Wd){return t[n]=e,t}function Vx(t,e=Wd){return t[e]||""}function Kx(t,e,n=Wd){const r=Vx(t,n);return r.trim()?`${r}/${e}`:e}function Gx(t,e,n=Wd){const r=Kx(t,e,n),s=t.child({context:r});return Wx(s,r,n)}function Yx(t){var e,n;const r=new $x((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:JE(sd(rd({},t.opts),{level:"trace",browser:sd(rd({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Zx(t){var e;const n=new Lx((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:JE(sd(rd({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Jx(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Yx(t):Zx(t)}class Xx{constructor(e){var i;const n=qx({level:MS}),{logger:r,chunkLoggerController:s}=Jx({opts:n});this.logger=Gx(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Qx{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c,metadata:l,sdkVersion:u,sdkType:d}){this.openRpcRequests=new Map,this.isInitialized=!1,r&&(this.w3mLogger=new Xx(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const f=this.getRpcUrl(n);this.projectId=e,this.sdkVersion=u,this.sdkType=d,this.metadata=l,this.w3mFrame=new ix({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:f,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!vt.get(le.EMAIL_LOGIN_USED_KEY)}getEmail(){return vt.get(le.EMAIL)}getUsername(){return vt.get(le.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:le.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Un.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:le.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:le.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:le.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:le.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:le.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:le.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:le.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:le.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:le.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:le.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:le.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:le.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:le.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:le.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:le.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:le.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:le.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:le.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:le.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:le.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(dt.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:le.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_IS_CONNECTED_ERROR&&e(),n.type===le.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===le.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:dt.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:n,method:r})=>{dt.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:le.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[le.APP_SYNC_DAPP_DATA,le.APP_SYNC_THEME,le.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[le.APP_CONNECT_EMAIL,le.APP_CONNECT_DEVICE,le.APP_CONNECT_OTP,le.APP_CONNECT_SOCIAL,le.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var h,g,p;const u=Math.random().toString(36).substring(7);(p=(h=this.w3mLogger)==null?void 0:(g=h.logger).info)==null||p.call(g,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests.set(u,{...m.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});const f=(m,w)=>{var _,b,A;m.id===u&&((b=w==null?void 0:(_=w.logger).info)==null||b.call(_,{framEvent:m,id:u},"Received frame response"),this.openRpcRequests.delete(m.id),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((A=m.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(u,m=>f(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){vt.set(le.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){vt.set(le.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&vt.set(le.EMAIL,e),vt.set(le.EMAIL_LOGIN_USED_KEY,"true"),vt.delete(le.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){vt.delete(le.EMAIL_LOGIN_USED_KEY),vt.delete(le.EMAIL),vt.delete(le.LAST_USED_CHAIN_KEY),vt.delete(le.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&vt.set(le.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=vt.get(le.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){vt.set(le.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var i,o;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(i=At.parseCaipNetworkId(e))==null?void 0:i.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n),s=e?r.find(a=>String(a.id)===String(e)||a.caipNetworkId===e):r[0];return(o=s==null?void 0:s.rpcUrls.default.http)==null?void 0:o[0]}}const eT="1.1.0";let An=class _p extends Error{constructor(e,n={}){var o;const r=n.cause instanceof _p?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof _p&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${eT}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Ts(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const QE=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ev=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,tv=/^\(.+?\).*?$/,dy=/^tuple(?<array>(\[(\d*)\])*)$/;function Ap(t){let e=t.type;if(dy.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Ap(i),s<n-1&&(e+=", ")}const r=Ts(dy,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Ap({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Ra(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Ap(s),r!==n-1&&(e+=", ")}return e}function tT(t){var e;return t.type==="function"?`function ${t.name}(${Ra(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Ra(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Ra(t.inputs)})`:t.type==="error"?`error ${t.name}(${Ra(t.inputs)})`:t.type==="constructor"?`constructor(${Ra(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const nv=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function nT(t){return nv.test(t)}function rT(t){return Ts(nv,t)}const rv=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function sT(t){return rv.test(t)}function iT(t){return Ts(rv,t)}const sv=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function oT(t){return sv.test(t)}function aT(t){return Ts(sv,t)}const iv=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function ov(t){return iv.test(t)}function cT(t){return Ts(iv,t)}const av=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function lT(t){return av.test(t)}function uT(t){return Ts(av,t)}const cv=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function dT(t){return cv.test(t)}function fT(t){return Ts(cv,t)}const hT=/^receive\(\) external payable$/;function pT(t){return hT.test(t)}const JJ=new Set(["memory","indexed","storage","calldata"]),gT=new Set(["indexed"]),Ip=new Set(["calldata","memory","storage"]);class XJ extends An{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class mT extends An{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class yT extends An{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class QJ extends An{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class bT extends An{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class wT extends An{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class ET extends An{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class vT extends An{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class CT extends An{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Aa extends An{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class _T extends An{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class AT extends An{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class IT extends An{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class ST extends An{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function xT(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const zf=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function TT(t,e={}){if(oT(t))return NT(t,e);if(sT(t))return OT(t,e);if(nT(t))return PT(t,e);if(lT(t))return RT(t,e);if(dT(t))return kT(t);if(pT(t))return{type:"receive",stateMutability:"payable"};throw new _T({signature:t})}function NT(t,e={}){const n=aT(t);if(!n)throw new Aa({signature:t,type:"function"});const r=hr(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(lo(r[a],{modifiers:Ip,structs:e,type:"function"}));const o=[];if(n.returns){const a=hr(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(lo(a[l],{modifiers:Ip,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function OT(t,e={}){const n=iT(t);if(!n)throw new Aa({signature:t,type:"event"});const r=hr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(lo(r[o],{modifiers:gT,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function PT(t,e={}){const n=rT(t);if(!n)throw new Aa({signature:t,type:"error"});const r=hr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(lo(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function RT(t,e={}){const n=uT(t);if(!n)throw new Aa({signature:t,type:"constructor"});const r=hr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(lo(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function kT(t){const e=fT(t);if(!e)throw new Aa({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const $T=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,DT=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,UT=/^u?int$/;function lo(t,e){var d,f;const n=xT(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(zf.has(n))return zf.get(n);const r=tv.test(t),s=Ts(r?DT:$T,t);if(!s)throw new bT({param:t});if(s.name&&LT(s.name))throw new wT({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const h=hr(s.type),g=[],p=h.length;for(let m=0;m<p;m++)g.push(lo(h[m],{structs:a}));l={components:g}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(UT.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!lv(c))throw new yT({type:c});if(s.modifier){if(!((f=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&f.call(d,s.modifier)))throw new ET({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Ip.has(s.modifier)&&!MT(c,!!s.array))throw new vT({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return zf.set(n,u),u}function hr(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?hr(a,[...e,n.trim()]):hr(a,e,`${n}${o}`,r);case"(":return hr(a,e,`${n}${o}`,r+1);case")":return hr(a,e,`${n}${o}`,r-1);default:return hr(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new ST({current:n,depth:r});return e.push(n.trim()),e}function lv(t){return t==="address"||t==="bool"||t==="function"||t==="string"||QE.test(t)||ev.test(t)}const BT=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function LT(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||QE.test(t)||ev.test(t)||BT.test(t)}function MT(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function FT(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!ov(a))continue;const c=cT(a);if(!c)throw new Aa({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let f=0;f<d;f++){const g=l[f].trim();if(!g)continue;const p=lo(g,{type:"struct"});u.push(p)}if(!u.length)throw new AT({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=uv(c,e)}return r}const jT=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function uv(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(tv.test(o.type))r.push(o);else{const c=Ts(jT,o.type);if(!(c!=null&&c.type))throw new CT({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new IT({type:u});r.push({...o,type:`tuple${l??""}`,components:uv(e[u]??[],e,new Set([...n,u]))})}else if(lv(u))r.push(o);else throw new mT({type:u})}}return r}function dv(t){const e=FT(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];ov(i)||n.push(TT(i,e))}return n}function et(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function bi(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new QT(t.type);return`${t.name}(${Vd(t.inputs,{includeName:e})})`}function Vd(t,{includeName:e=!1}={}){return t?t.map(n=>zT(n,{includeName:e})).join(e?", ":","):""}function zT(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Vd(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function wi(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function yt(t){return wi(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const fv="2.39.0";let ka={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${fv}`},q=class Sp extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Sp?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Sp&&n.cause.docsPath||n.docsPath,i=(a=ka.getDocsUrl)==null?void 0:a.call(ka,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ka.version?[`Version: ${ka.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=fv}walk(e){return hv(this,e)}};function hv(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?hv(t.cause,e):e?null:t}class HT extends q{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class fy extends q{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class pv extends q{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Vd(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Kd extends q{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class qT extends q{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class WT extends q{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${yt(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class VT extends q{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class eX extends q{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class tX extends q{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class gv extends q{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class KT extends q{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class mv extends q{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class nX extends q{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class id extends q{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class GT extends q{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class rX extends q{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class YT extends q{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${bi(e.abiItem)}\`, and`,`\`${n.type}\` in \`${bi(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class sX extends q{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class xp extends q{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Vd(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class yv extends q{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${bi(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class ZT extends q{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class JT extends q{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class XT extends q{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class QT extends q{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class iX extends q{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}let bv=class extends q{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},wv=class extends q{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class hy extends q{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Ia(t,{dir:e,size:n=32}={}){return typeof t=="string"?ui(t,{dir:e,size:n}):eN(t,{dir:e,size:n})}function ui(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new wv({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function eN(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new wv({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let Ev=class extends q{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class tN extends q{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class nN extends q{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let rN=class extends q{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Jn(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function tr(t,{size:e}){if(yt(t)>e)throw new rN({givenSize:yt(t),maxSize:e})}function pr(t,e={}){const{signed:n}=e;e.size&&tr(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function uX(t,e={}){let n=t;if(e.size&&(tr(n,{size:e.size}),n=Jn(n)),Jn(n)==="0x00")return!1;if(Jn(n)==="0x01")return!0;throw new nN(n)}function Ei(t,e={}){return Number(pr(t,e))}function vv(t,e={}){let n=Wr(t);return e.size&&(tr(n,{size:e.size}),n=Jn(n,{dir:"right"})),new TextDecoder().decode(n)}const sN=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Er(t,e={}){return typeof t=="number"||typeof t=="bigint"?re(t,e):typeof t=="string"?Gd(t,e):typeof t=="boolean"?Cv(t,e):cn(t,e)}function Cv(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(tr(n,{size:e.size}),Ia(n,{size:e.size})):n}function cn(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=sN[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(tr(r,{size:e.size}),Ia(r,{dir:"right",size:e.size})):r}function re(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Ev({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ia(a,{size:r}):a}const iN=new TextEncoder;function Gd(t,e={}){const n=iN.encode(t);return cn(n,e)}const oN=new TextEncoder;function Yd(t,e={}){return typeof t=="number"||typeof t=="bigint"?cN(t,e):typeof t=="boolean"?aN(t,e):wi(t)?Wr(t,e):_v(t,e)}function aN(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(tr(n,{size:e.size}),Ia(n,{size:e.size})):n}const Zr={zero:48,nine:57,A:65,F:70,a:97,f:102};function py(t){if(t>=Zr.zero&&t<=Zr.nine)return t-Zr.zero;if(t>=Zr.A&&t<=Zr.F)return t-(Zr.A-10);if(t>=Zr.a&&t<=Zr.f)return t-(Zr.a-10)}function Wr(t,e={}){let n=t;e.size&&(tr(n,{size:e.size}),n=Ia(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=py(r.charCodeAt(a++)),l=py(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new q(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function cN(t,e){const n=re(t,e);return Wr(n)}function _v(t,e={}){const n=oN.encode(t);return typeof e.size=="number"?(tr(n,{size:e.size}),Ia(n,{dir:"right",size:e.size})):n}const Vl=BigInt(2**32-1),gy=BigInt(32);function lN(t,e=!1){return e?{h:Number(t&Vl),l:Number(t>>gy&Vl)}:{h:Number(t>>gy&Vl)|0,l:Number(t&Vl)|0}}function uN(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=lN(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const dN=(t,e,n)=>t<<n|e>>>32-n,fN=(t,e,n)=>e<<n|t>>>32-n,hN=(t,e,n)=>e<<n-32|t>>>64-n,pN=(t,e,n)=>t<<n-32|e>>>64-n,No=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gN(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function od(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function fa(t,...e){if(!gN(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function dX(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");od(t.outputLen),od(t.blockLen)}function ad(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Av(t,e){fa(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function mN(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Bc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Hf(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ir(t,e){return t<<32-e|t>>>e}const yN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bN(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function wN(t){for(let e=0;e<t.length;e++)t[e]=bN(t[e]);return t}const my=yN?t=>t:wN;function EN(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ug(t){return typeof t=="string"&&(t=EN(t)),fa(t),t}function fX(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];fa(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Iv=class{};function Sv(t){const e=r=>t().update(ug(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function pX(t=32){if(No&&typeof No.getRandomValues=="function")return No.getRandomValues(new Uint8Array(t));if(No&&typeof No.randomBytes=="function")return Uint8Array.from(No.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const vN=BigInt(0),$a=BigInt(1),CN=BigInt(2),_N=BigInt(7),AN=BigInt(256),IN=BigInt(113),xv=[],Tv=[],Nv=[];for(let t=0,e=$a,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],xv.push(2*(5*r+n)),Tv.push((t+1)*(t+2)/2%64);let s=vN;for(let i=0;i<7;i++)e=(e<<$a^(e>>_N)*IN)%AN,e&CN&&(s^=$a<<($a<<BigInt(i))-$a);Nv.push(s)}const Ov=uN(Nv,!0),SN=Ov[0],xN=Ov[1],yy=(t,e,n)=>n>32?hN(t,e,n):dN(t,e,n),by=(t,e,n)=>n>32?pN(t,e,n):fN(t,e,n);function TN(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=yy(l,u,1)^n[a],f=by(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Tv[o],c=yy(s,i,a),l=by(s,i,a),u=xv[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=SN[r],t[1]^=xN[r]}Bc(n)}let NN=class Pv extends Iv{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,od(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=mN(this.state)}clone(){return this._cloneInto()}keccak(){my(this.state32),TN(this.state32,this.rounds),my(this.state32),this.posOut=0,this.pos=0}update(e){ad(this),e=ug(e),fa(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ad(this,!1),fa(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return od(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Av(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Bc(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Pv(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const ON=(t,e,n)=>Sv(()=>new NN(e,t,n)),PN=ON(1,136,256/8);function Il(t,e){const n=e||"hex",r=PN(wi(t,{strict:!1})?Yd(t):t);return n==="bytes"?r:Er(r)}const RN=t=>Il(Yd(t));function kN(t){return RN(t)}function $N(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new q("Unable to normalize signature.");return s}const DN=t=>{const e=typeof t=="string"?t:tT(t);return $N(e)};function Rv(t){return kN(DN(t))}const dg=Rv;let _n=class extends q{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Zd=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const qf=new Zd(8192);function Sl(t,e){if(qf.has(`${t}.${e}`))return qf.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Il(_v(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return qf.set(`${t}.${e}`,i),i}function qi(t,e){if(!Ft(t,{strict:!1}))throw new _n({address:t});return Sl(t,e)}const UN=/^0x[a-fA-F0-9]{40}$/,Wf=new Zd(8192);function Ft(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Wf.has(r))return Wf.get(r);const s=UN.test(t)?t.toLowerCase()===t?!0:n?Sl(t)===t:!0:!1;return Wf.set(r,s),s}function ha(t){return typeof t[0]=="string"?Ns(t):BN(t)}function BN(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ns(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Lc(t,e,n,{strict:r}={}){return wi(t,{strict:!1})?LN(t,e,n,{strict:r}):Dv(t,e,n,{strict:r})}function kv(t,e){if(typeof e=="number"&&e>0&&e>yt(t)-1)throw new bv({offset:e,position:"start",size:yt(t)})}function $v(t,e,n){if(typeof e=="number"&&typeof n=="number"&&yt(t)!==n-e)throw new bv({offset:n,position:"end",size:yt(t)})}function Dv(t,e,n,{strict:r}={}){kv(t,e);const s=t.slice(e,n);return r&&$v(s,e,n),s}function LN(t,e,n,{strict:r}={}){kv(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&$v(s,e,n),s}const yX=/^(.*)\[([0-9]*)\]$/,bX=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,MN=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Uv(t,e){if(t.length!==e.length)throw new VT({expectedLength:t.length,givenLength:e.length});const n=FN({params:t,values:e}),r=hg(n);return r.length===0?"0x":r}function FN({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(fg({param:t[r],value:e[r]}));return n}function fg({param:t,value:e}){const n=pg(t.type);if(n){const[r,s]=n;return zN(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return KN(e,{param:t});if(t.type==="address")return jN(e);if(t.type==="bool")return qN(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=MN.exec(t.type)??[];return WN(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return HN(e,{param:t});if(t.type==="string")return VN(e);throw new ZT(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function hg(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=yt(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(re(e+s,{size:32})),r.push(a),s+=yt(a)):n.push(a)}return ha([...n,...r])}function jN(t){if(!Ft(t))throw new _n({address:t});return{dynamic:!1,encoded:ui(t.toLowerCase())}}function zN(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new XT(t);if(!r&&t.length!==e)throw new qT({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=fg({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=hg(i);if(r){const a=re(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?ha([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:ha(i.map(({encoded:o})=>o))}}function HN(t,{param:e}){const[,n]=e.type.split("bytes"),r=yt(t);if(!n){let s=t;return r%32!==0&&(s=ui(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:ha([ui(re(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new WT({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:ui(t,{dir:"right"})}}function qN(t){if(typeof t!="boolean")throw new q(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:ui(Cv(t))}}function WN(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Ev({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:re(t,{size:32,signed:e})}}function VN(t){const e=Gd(t),n=Math.ceil(yt(e)/32),r=[];for(let s=0;s<n;s++)r.push(ui(Lc(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ha([ui(re(yt(e),{size:32})),...r])}}function KN(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=fg({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?hg(r):ha(r.map(({encoded:s})=>s))}}function pg(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const gg=t=>Lc(Rv(t),0,4);function mg(t){const{abi:e,args:n=[],name:r}=t,s=wi(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?gg(a)===r:a.type==="event"?dg(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?Tp(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=Bv(a.inputs,o.inputs,n);if(l)throw new YT({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function Tp(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ft(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Tp(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Tp(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Bv(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Bv(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ft(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ft(n[r],{strict:!1}):!1)return o}}function GN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}function Gr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const wy="/docs/contract/encodeFunctionData";function YN(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=mg({abi:e,args:n,name:r});if(!i)throw new id(r,{docsPath:wy});s=i}if(s.type!=="function")throw new id(void 0,{docsPath:wy});return{abi:[s],functionName:gg(bi(s))}}function Jd(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:YN(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Uv(s.inputs,e??[]):void 0;return Ns([i,o??"0x"])}const ZN={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},JN={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},XN={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Ey extends q{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Lv extends q{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class QN extends q{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const eO={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new QN({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Lv({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Ey({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Ey({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function yg(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(eO);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function tO(t,e={}){typeof e.size<"u"&&tr(t,{size:e.size});const n=cn(t,e);return pr(n,e)}function nO(t,e={}){let n=t;if(typeof e.size<"u"&&(tr(n,{size:e.size}),n=Jn(n)),n.length>1||n[0]>1)throw new tN(n);return!!n[0]}function bs(t,e={}){typeof e.size<"u"&&tr(t,{size:e.size});const n=cn(t,e);return Ei(n,e)}function rO(t,e={}){let n=t;return typeof e.size<"u"&&(tr(n,{size:e.size}),n=Jn(n,{dir:"right"})),new TextDecoder().decode(n)}function Xd(t,e){const n=typeof e=="string"?Wr(e):e,r=yg(n);if(yt(n)===0&&t.length>0)throw new Kd;if(yt(e)&&yt(e)<32)throw new pv({data:typeof e=="string"?e:cn(e),params:t,size:yt(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Xo(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Xo(t,e,{staticPosition:n}){const r=pg(e.type);if(r){const[s,i]=r;return iO(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return lO(t,e,{staticPosition:n});if(e.type==="address")return sO(t);if(e.type==="bool")return oO(t);if(e.type.startsWith("bytes"))return aO(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return cO(t,e);if(e.type==="string")return uO(t,{staticPosition:n});throw new JT(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const vy=32,Np=32;function sO(t){const e=t.readBytes(32);return[Sl(cn(Dv(e,-20))),32]}function iO(t,e,{length:n,staticPosition:r}){if(!n){const o=bs(t.readBytes(Np)),a=r+o,c=a+vy;t.setPosition(a);const l=bs(t.readBytes(vy)),u=Mc(e);let d=0;const f=[];for(let h=0;h<l;++h){t.setPosition(c+(u?h*32:d));const[g,p]=Xo(t,e,{staticPosition:c});d+=p,f.push(g)}return t.setPosition(r+32),[f,32]}if(Mc(e)){const o=bs(t.readBytes(Np)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Xo(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Xo(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function oO(t){return[nO(t.readBytes(32),{size:32}),32]}function aO(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=bs(t.readBytes(32));t.setPosition(n+o);const a=bs(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[cn(c),32]}return[cn(t.readBytes(Number.parseInt(s,10),32)),32]}function cO(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?tO(s,{signed:n}):bs(s,{signed:n}),32]}function lO(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Mc(e)){const o=bs(t.readBytes(Np)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Xo(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Xo(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function uO(t,{staticPosition:e}){const n=bs(t.readBytes(32)),r=e+n;t.setPosition(r);const s=bs(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=rO(Jn(i));return t.setPosition(e+32),[o,32]}function Mc(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Mc);const n=pg(t.type);return!!(n&&Mc({...t,type:n[1]}))}function dO(t){const{abi:e,data:n}=t,r=Lc(n,0,4);if(r==="0x")throw new Kd;const i=[...e||[],JN,XN].find(o=>o.type==="error"&&r===gg(bi(o)));if(!i)throw new gv(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Xd(i.inputs,Lc(n,4)):void 0,errorName:i.name}}const Xn=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function Mv({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Xn(e[i]):e[i]}`).join(", ")})`}const fO={gwei:9,wei:18},hO={ether:-9,wei:9},pO={ether:-18,gwei:-9};function Co(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function bg(t,e="wei"){return Co(t,fO[e])}function vn(t,e="wei"){return Co(t,hO[e])}class gO extends q{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class mO extends q{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Cy(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function yO(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Cy(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Cy(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function xl(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class bO extends q{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class wO extends q{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class EO extends q{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",xl(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class vO extends q{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class CO extends q{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:f}){var g;const h=xl({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${bg(f)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${vn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${vn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${vn(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Fv extends q{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class jv extends q{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class wX extends q{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class _O extends q{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const AO=t=>t,wg=t=>t;class IO extends q{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:f,stateOverride:h}){var m;const g=n?Gr(n):void 0;let p=xl({from:g==null?void 0:g.address,to:d,value:typeof f<"u"&&`${bg(f)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${vn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${vn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${vn(l)} gwei`,nonce:u});h&&(p+=`
${yO(h)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",p].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class zv extends q{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=mg({abi:n,args:r,name:o}),l=c?Mv({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?bi(c,{includeName:!0}):void 0,d=xl({address:s&&AO(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class SO extends q{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=dO({abi:e,data:n});const{abiItem:u,errorName:d,args:f}=o;if(d==="Error")c=f[0];else if(d==="Panic"){const[h]=f;c=ZN[h]}else{const h=u?bi(u,{includeName:!0}):void 0,g=u&&f?Mv({abiItem:u,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[h?`Error: ${h}`:"",g&&g!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${g}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof gv&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class xO extends q{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class TO extends q{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Eg extends q{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class cc extends q{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${wg(o)}`,e&&`Request body: ${Xn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class vg extends q{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${wg(r)}`,`Request body: ${Xn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class _y extends q{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${wg(n)}`,`Request body: ${Xn(e)}`],name:"TimeoutError"})}}const NO=-1;class In extends q{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof vg?e.code:n??NO}}class Mn extends In{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Fc extends In{constructor(e){super(e,{code:Fc.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Fc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class jc extends In{constructor(e){super(e,{code:jc.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class zc extends In{constructor(e,{method:n}={}){super(e,{code:zc.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Hc extends In{constructor(e){super(e,{code:Hc.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Hc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class uo extends In{constructor(e){super(e,{code:uo.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(uo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class qc extends In{constructor(e){super(e,{code:qc.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(qc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Wc extends In{constructor(e){super(e,{code:Wc.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Wc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class di extends In{constructor(e){super(e,{code:di.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(di,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class pa extends In{constructor(e){super(e,{code:pa.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Wi extends In{constructor(e,{method:n}={}){super(e,{code:Wi.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Wi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ga extends In{constructor(e){super(e,{code:ga.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ga,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Vc extends In{constructor(e){super(e,{code:Vc.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Vc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class lt extends Mn{constructor(e){super(e,{code:lt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(lt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Kc extends Mn{constructor(e){super(e,{code:Kc.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Kc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Gc extends Mn{constructor(e,{method:n}={}){super(e,{code:Gc.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Gc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Yc extends Mn{constructor(e){super(e,{code:Yc.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Yc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Zc extends Mn{constructor(e){super(e,{code:Zc.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Vr extends Mn{constructor(e){super(e,{code:Vr.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Vr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Jc extends Mn{constructor(e){super(e,{code:Jc.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Xc extends Mn{constructor(e){super(e,{code:Xc.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Xc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Qc extends Mn{constructor(e){super(e,{code:Qc.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Qc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class el extends Mn{constructor(e){super(e,{code:el.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class tl extends Mn{constructor(e){super(e,{code:tl.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(tl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class nl extends Mn{constructor(e){super(e,{code:nl.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(nl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class rl extends Mn{constructor(e){super(e,{code:rl.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(rl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class OO extends In{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const PO=3;function cd(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof Eg?t:t instanceof q?t.walk(g=>"data"in g)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:f}=a,h=t instanceof Kd?new xO({functionName:i}):[PO,uo.code].includes(c)&&(l||u||d||f)?new SO({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof vg?u:f??d}):t;return new zv(h,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function RO(t){const e=Il(`0x${t.substring(4)}`).substring(26);return Sl(`0x${e}`)}const kO="modulepreload",$O=function(t){return"/"+t},Ay={},Ct=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=$O(c),c in Ay)return;Ay[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":kO,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function DO({hash:t,signature:e}){const n=wi(t)?t:Er(t),{secp256k1:r}=await Ct(async()=>{const{secp256k1:o}=await import("./secp256k1.chunk.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:f}=e,h=Number(f??d),g=Iy(h);return new r.Signature(pr(l),pr(u)).addRecoveryBit(g)}const o=wi(e)?e:Er(e);if(yt(o)!==65)throw new Error("invalid signature length");const a=Ei(`0x${o.slice(130)}`),c=Iy(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Iy(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function UO({hash:t,signature:e}){return RO(await DO({hash:t,signature:e}))}function vi(t,e="hex"){const n=Hv(t),r=yg(new Uint8Array(n.length));return n.encode(r),e==="hex"?cn(r.bytes):r.bytes}function Hv(t){return Array.isArray(t)?BO(t.map(e=>Hv(e))):LO(t)}function BO(t){const e=t.reduce((s,i)=>s+i.length,0),n=qv(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function LO(t){const e=typeof t=="string"?Wr(t):t,n=qv(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function qv(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new q("Length is too large.")}function MO(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Il(Ns(["0x05",vi([e?re(e):"0x",s,n?re(n):"0x"])]));return r==="bytes"?Wr(i):i}async function Wv(t){const{authorization:e,signature:n}=t;return UO({hash:MO(e),signature:n??e})}class FO extends q{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:f}){var g;const h=xl({from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${bg(f)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${vn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${vn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${vn(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Vi extends q{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Vi,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Vi,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class fo extends q{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${vn(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(fo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Op extends q{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${vn(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Op,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Pp extends q{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Pp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Rp extends q{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Rp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class kp extends q{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(kp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class $p extends q{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty($p,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Dp extends q{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Dp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Up extends q{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Up,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Bp extends q{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Bp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class sl extends q{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${vn(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${vn(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(sl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Qd extends q{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Cg(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof q?t.walk(s=>(s==null?void 0:s.code)===Vi.code):t;return r instanceof q?new Vi({cause:t,message:r.details}):Vi.nodeMessage.test(n)?new Vi({cause:t,message:t.details}):fo.nodeMessage.test(n)?new fo({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Op.nodeMessage.test(n)?new Op({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Pp.nodeMessage.test(n)?new Pp({cause:t,nonce:e==null?void 0:e.nonce}):Rp.nodeMessage.test(n)?new Rp({cause:t,nonce:e==null?void 0:e.nonce}):kp.nodeMessage.test(n)?new kp({cause:t,nonce:e==null?void 0:e.nonce}):$p.nodeMessage.test(n)?new $p({cause:t}):Dp.nodeMessage.test(n)?new Dp({cause:t,gas:e==null?void 0:e.gas}):Up.nodeMessage.test(n)?new Up({cause:t,gas:e==null?void 0:e.gas}):Bp.nodeMessage.test(n)?new Bp({cause:t}):sl.nodeMessage.test(n)?new sl({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Qd({cause:t})}function jO(t,{docsPath:e,...n}){const r=(()=>{const s=Cg(t,n);return s instanceof Qd?t:s})();return new FO(r,{docsPath:e,...n})}function _g(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}function Ag(t,e){return({exclude:n,format:r})=>({exclude:n,format:(s,i)=>{const o=e(s,i);if(n)for(const a of n)delete o[a];return{...o,...r(s,i)}},type:t})}const zO={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Ig(t,e){const n={};return typeof t.authorizationList<"u"&&(n.authorizationList=HO(t.authorizationList)),typeof t.accessList<"u"&&(n.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(n.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?n.blobs=t.blobs.map(r=>cn(r)):n.blobs=t.blobs),typeof t.data<"u"&&(n.data=t.data),t.account&&(n.from=t.account.address),typeof t.from<"u"&&(n.from=t.from),typeof t.gas<"u"&&(n.gas=re(t.gas)),typeof t.gasPrice<"u"&&(n.gasPrice=re(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=re(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(n.maxFeePerGas=re(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=re(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(n.nonce=re(t.nonce)),typeof t.to<"u"&&(n.to=t.to),typeof t.type<"u"&&(n.type=zO[t.type]),typeof t.value<"u"&&(n.value=re(t.value)),n}function HO(t){return t.map(e=>({address:e.address,r:e.r?re(BigInt(e.r)):e.r,s:e.s?re(BigInt(e.s)):e.s,chainId:re(e.chainId),nonce:re(e.nonce),...typeof e.yParity<"u"?{yParity:re(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:re(e.v)}:{}}))}function Sy(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new hy({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new hy({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function qO(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=re(e)),n!==void 0&&(o.nonce=re(n)),r!==void 0&&(o.state=Sy(r)),s!==void 0){if(o.state)throw new mO;o.stateDiff=Sy(s)}return o}function Vv(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ft(n,{strict:!1}))throw new _n({address:n});if(e[n])throw new gO({address:n});e[n]=qO(r)}return e}const ef=2n**256n-1n;function tf(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Gr(e):void 0;if(o&&!Ft(o.address))throw new _n({address:o.address});if(i&&!Ft(i))throw new _n({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new bO;if(r&&r>ef)throw new fo({maxFeePerGas:r});if(s&&r&&s>r)throw new sl({maxFeePerGas:r,maxPriorityFeePerGas:s})}class WO extends q{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Sg extends q{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class VO extends q{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${vn(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Kv extends q{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Gv={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function nf(t,e){const n={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Ei(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Ei(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Gv[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(n.authorizationList=GO(t.authorizationList)),n.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const KO=Ag("transaction",nf);function GO(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Yv(t,e){const n=(t.transactions??[]).map(r=>typeof r=="string"?r:nf(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:n,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const YO=Ag("block",Yv);async function il(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){var l,u,d;const i=s??!1,o=n!==void 0?re(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new Kv({blockHash:e,blockNumber:n});return(((d=(u=(l=t.chain)==null?void 0:l.formatters)==null?void 0:u.block)==null?void 0:d.format)||Yv)(a,"getBlock")}async function Zv(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function EX(t,e){return Jv(t,e)}async function Jv(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await et(t,il,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return pr(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):et(t,il,"getBlock")({}),et(t,Zv,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Sg;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function vX(t,e){return Lp(t,e)}async function Lp(t,e){var f,h;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var g,p;return typeof((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)??1.2})();if(o<1)throw new WO;const c=10**(((f=o.toString().split(".")[1])==null?void 0:f.length)??0),l=g=>g*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await et(t,il,"getBlock")({});if(typeof((h=r==null?void 0:r.fees)==null?void 0:h.estimateFeesPerGas)=="function"){const g=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(g!==null)return g}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new Sg;const g=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await Jv(t,{block:u,chain:r,request:s}),p=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??p+g,maxPriorityFeePerGas:g}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await et(t,Zv,"getGasPrice")({}))}}async function ZO(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?re(r):n]},{dedupe:!!r});return Ei(s)}function xg(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Wr(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>cn(i))}function Tg(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Wr(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Wr(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>cn(o))}function JO(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function XO(t,e,n){return t&e^~t&n}function QO(t,e,n){return t&e^t&n^e&n}let e3=class extends Iv{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Hf(this.buffer)}update(e){ad(this),e=ug(e),fa(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Hf(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ad(this),Av(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Bc(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;JO(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Hf(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Rs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),t3=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ks=new Uint32Array(64);let n3=class extends e3{constructor(e=32){super(64,e,8,!1),this.A=Rs[0]|0,this.B=Rs[1]|0,this.C=Rs[2]|0,this.D=Rs[3]|0,this.E=Rs[4]|0,this.F=Rs[5]|0,this.G=Rs[6]|0,this.H=Rs[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ks[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=ks[d-15],h=ks[d-2],g=Ir(f,7)^Ir(f,18)^f>>>3,p=Ir(h,17)^Ir(h,19)^h>>>10;ks[d]=p+ks[d-7]+g+ks[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Ir(a,6)^Ir(a,11)^Ir(a,25),h=u+f+XO(a,c,l)+t3[d]+ks[d]|0,p=(Ir(r,2)^Ir(r,13)^Ir(r,22))+QO(r,s,i)|0;u=l,l=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Bc(ks)}destroy(){this.set(0,0,0,0,0,0,0,0),Bc(this.buffer)}};const r3=Sv(()=>new n3),s3=r3;function i3(t,e){return s3(wi(t,{strict:!1})?Yd(t):t)}function o3(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=i3(e);return s.set([n],0),r==="bytes"?s:cn(s)}function Xv(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(o3({commitment:i,to:r,version:n}));return s}const xy=6,Qv=32,Ng=4096,eC=Qv*Ng,Ty=eC*xy-1-1*Ng*xy,tC=1;class a3 extends q{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class nC extends q{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class c3 extends q{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class l3 extends q{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${tC}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function u3(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?Wr(t.data):t.data,r=yt(n);if(!r)throw new nC;if(r>Ty)throw new a3({maxSize:Ty,size:r});const s=[];let i=!0,o=0;for(;i;){const a=yg(new Uint8Array(eC));let c=0;for(;c<Ng;){const l=n.slice(o,o+(Qv-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>cn(a.bytes))}function rC(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??u3({data:e,to:r}),i=t.commitments??xg({blobs:s,kzg:n,to:r}),o=t.proofs??Tg({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function sC(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new EO({transaction:t})}async function iC(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Ei(e)}const oC=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Ny=new Map;async function Og(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=oC,type:u}=e,d=n&&Gr(n),f={...e,...d?{from:d==null?void 0:d.address}:{}};let h;async function g(){return h||(h=await et(t,il,"getBlock")({blockTag:"latest"}),h)}let p;async function m(){return p||(s?s.id:typeof e.chainId<"u"?e.chainId:(p=await et(t,iC,"getChainId")({}),p))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await m();f.nonce=await c.consume({address:d.address,chainId:w,client:t})}else f.nonce=await et(t,ZO,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=xg({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const _=Xv({commitments:w,to:"hex"});f.blobVersionedHashes=_}if(l.includes("sidecars")){const _=Tg({blobs:r,commitments:w,kzg:o}),b=rC({blobs:r,commitments:w,proofs:_,to:"hex"});f.sidecars=b}}if(l.includes("chainId")&&(f.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{f.type=sC(f)}catch{let w=Ny.get(t.uid);if(typeof w>"u"){const _=await g();w=typeof(_==null?void 0:_.baseFeePerGas)=="bigint",Ny.set(t.uid,w)}f.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const w=await g(),{maxFeePerGas:_,maxPriorityFeePerGas:b}=await Lp(t,{block:w,chain:s,request:f});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new VO({maxPriorityFeePerGas:b});f.maxPriorityFeePerGas=b,f.maxFeePerGas=_}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Sg;if(typeof e.gasPrice>"u"){const w=await g(),{gasPrice:_}=await Lp(t,{block:w,chain:s,request:f,type:"legacy"});f.gasPrice=_}}return l.includes("gas")&&typeof i>"u"&&(f.gas=await et(t,aC,"estimateGas")({...f,account:d,prepare:(d==null?void 0:d.type)==="local"?[]:["blobVersionedHashes"]})),tf(f),delete f.parameters,f}async function aC(t,e){var o,a,c;const{account:n=t.account,prepare:r=!0}=e,s=n?Gr(n):void 0,i=(()=>{if(Array.isArray(r))return r;if((s==null?void 0:s.type)!=="local")return["blobVersionedHashes"]})();try{const{accessList:l,authorizationList:u,blobs:d,blobVersionedHashes:f,blockNumber:h,blockTag:g,data:p,gas:m,gasPrice:w,maxFeePerBlobGas:_,maxFeePerGas:b,maxPriorityFeePerGas:A,nonce:C,value:S,stateOverride:x,...$}=r?await Og(t,{...e,parameters:i}):e,L=(typeof h=="bigint"?re(h):void 0)||g,M=Vv(x),U=await(async()=>{if($.to)return $.to;if(u&&u.length>0)return await Wv({authorization:u[0]}).catch(()=>{throw new q("`to` is required. Could not infer from `authorizationList`")})})();tf(e);const P=(c=(a=(o=t.chain)==null?void 0:o.formatters)==null?void 0:a.transactionRequest)==null?void 0:c.format,y=(P||Ig)({..._g($,{format:P}),account:s,accessList:l,authorizationList:u,blobs:d,blobVersionedHashes:f,data:p,gas:m,gasPrice:w,maxFeePerBlobGas:_,maxFeePerGas:b,maxPriorityFeePerGas:A,nonce:C,to:U,value:S},"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:M?[y,L??t.experimental_blockTag??"latest",M]:L?[y,L]:[y]}))}catch(l){throw jO(l,{...e,account:s,chain:t.chain})}}function d3(t,e){if(!Ft(t,{strict:!1}))throw new _n({address:t});if(!Ft(e,{strict:!1}))throw new _n({address:e});return t.toLowerCase()===e.toLowerCase()}const Oy="/docs/contract/decodeEventLog";function f3(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new KT({docsPath:Oy});const c=e.find(p=>p.type==="event"&&o===dg(bi(p)));if(!(c&&"name"in c)||c.type!=="event")throw new mv(o,{docsPath:Oy});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(p=>!("name"in p&&p.name)),f=d?[]:{},h=u.map((p,m)=>[p,m]).filter(([p])=>"indexed"in p&&p.indexed);for(let p=0;p<h.length;p++){const[m,w]=h[p],_=a[p];if(!_)throw new yv({abiItem:c,param:m});f[d?w:m.name||w]=h3({param:m,value:_})}const g=u.filter(p=>!("indexed"in p&&p.indexed));if(g.length>0){if(n&&n!=="0x")try{const p=Xd(g,n);if(p)if(d)for(let m=0;m<u.length;m++)f[m]=f[m]??p.shift();else for(let m=0;m<g.length;m++)f[g[m].name]=p[m]}catch(p){if(i)throw p instanceof pv||p instanceof Lv?new xp({abiItem:c,data:n,params:g,size:yt(n)}):p}else if(i)throw new xp({abiItem:c,data:"0x",params:g,size:0})}return{eventName:l,args:Object.values(f).length>0?f:void 0}}function h3({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Xd([t],e)||[])[0]}function p3(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===dg(u));if(!c)return null;const l=f3({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!g3({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof mv)return null;if(c instanceof xp||c instanceof yv){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function g3(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?d3(o,a):i.type==="string"||i.type==="bytes"?Il(Yd(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function cC(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}const Vf="/docs/contract/decodeFunctionResult";function Pg(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=mg({abi:e,args:n,name:r});if(!a)throw new id(r,{docsPath:Vf});i=a}if(i.type!=="function")throw new id(void 0,{docsPath:Vf});if(!i.outputs)throw new GT(i.name,{docsPath:Vf});const o=Xd(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const m3="0.1.1";function y3(){return m3}let Sa=class Mp extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Mp){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Mp&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${y3()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return lC(this,e)}};function lC(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?lC(t.cause,e):e?null:t}function Rg(t,e){if(ma(t)>e)throw new T3({givenSize:ma(t),maxSize:e})}function b3(t,e){if(typeof e=="number"&&e>0&&e>ma(t)-1)throw new fC({offset:e,position:"start",size:ma(t)})}function w3(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ma(t)!==n-e)throw new fC({offset:n,position:"end",size:ma(t)})}function uC(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new N3({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const E3="#__bigint";function v3(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+E3:s,n)}const C3=new TextEncoder,_3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function A3(t,e={}){const{strict:n=!1}=e;if(!t)throw new Py(t);if(typeof t!="string")throw new Py(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new Ry(t);if(!t.startsWith("0x"))throw new Ry(t)}function AX(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function IX(t){return t instanceof Uint8Array?Fp(t):Array.isArray(t)?Fp(new Uint8Array(t)):t}function SX(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Rg(n,e.size),dC(n,e.size)):n}function Fp(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=_3[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Rg(r,e.size),I3(r,e.size)):r}function ds(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new x3({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?dC(c,r):c}function xX(t,e={}){return Fp(C3.encode(t),e)}function dC(t,e){return uC(t,{dir:"left",size:e})}function I3(t,e){return uC(t,{dir:"right",size:e})}function TX(t,e,n,r={}){const{strict:s}=r;b3(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&w3(i,e,n),i}function ma(t){return Math.ceil((t.length-2)/2)}function S3(t,e={}){const{signed:n}=e;e.size&&Rg(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function NX(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:S3(t,e))}function OX(t,e={}){const{strict:n=!1}=e;try{return A3(t,{strict:n}),!0}catch{return!1}}let x3=class extends Sa{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Py=class extends Sa{constructor(e){super(`Value \`${typeof e=="object"?v3(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Ry=class extends Sa{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},T3=class extends Sa{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},fC=class extends Sa{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},N3=class extends Sa{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function O3(t){return{address:t.address,amount:ds(t.amount),index:ds(t.index),validatorIndex:ds(t.validatorIndex)}}function P3(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:ds(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:ds(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:ds(t.gasLimit)},...typeof t.number=="bigint"&&{number:ds(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:ds(t.prevRandao)},...typeof t.time=="bigint"&&{time:ds(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(O3)}}}const jp=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],BX=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],hC=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],LX=[...hC,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],MX=[...hC,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],FX=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],jX=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],zX=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],HX=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Kl=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],R3="0x82ad56cb",k3="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",$3="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",qX="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",pC="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class zp extends q{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class D3 extends q{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} â€“ ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} â€“ ${e.name}`],name:"ChainMismatchError"})}}class U3 extends q{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class gC extends q{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class rf extends q{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const Kf="/docs/contract/encodeDeployData";function mC(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new HT({docsPath:Kf});if(!("inputs"in s))throw new fy({docsPath:Kf});if(!s.inputs||s.inputs.length===0)throw new fy({docsPath:Kf});const i=Uv(s.inputs,n);return Ns([r,i])}function yC({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new zp({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new zp({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function B3(t,{docsPath:e,...n}){const r=(()=>{const s=Cg(t,n);return s instanceof Qd?t:s})();return new IO(r,{docsPath:e,...n})}function bC(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Gf=new Map;function wC({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<u.length;h++){const{resolve:g}=u[h];g==null||g([f[h],f])}}).catch(f=>{for(let h=0;h<u.length;h++){const{reject:g}=u[h];g==null||g(f)}})},o=()=>Gf.delete(e),a=()=>c().map(({args:u})=>u),c=()=>Gf.get(e)||[],l=u=>Gf.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:f,reject:h}=bC();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:f,reject:h}),d):(l({args:u,resolve:f,reject:h}),setTimeout(i,r),d)}}}async function EC(t,e){var P,D,y,v;const{account:n=t.account,authorizationList:r,batch:s=!!((P=t.batch)!=null&&P.multicall),blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:f,factoryData:h,gas:g,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:_,nonce:b,to:A,value:C,stateOverride:S,...x}=e,$=n?Gr(n):void 0;if(u&&(f||h))throw new q("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new q("Cannot provide both `code` & `to` as parameters.");const O=u&&d,L=f&&h&&A&&d,M=O||L,U=O?vC({code:u,data:d}):L?F3({data:d,factory:f,factoryData:h,to:A}):d;try{tf(e);const k=(typeof i=="bigint"?re(i):void 0)||o,N=l?P3(l):void 0,R=Vv(S),j=(v=(y=(D=t.chain)==null?void 0:D.formatters)==null?void 0:y.transactionRequest)==null?void 0:v.format,Q=(j||Ig)({..._g(x,{format:j}),accessList:a,account:$,authorizationList:r,blobs:c,data:U,gas:g,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:_,nonce:b,to:M?void 0:A,value:C},"call");if(s&&L3({request:Q})&&!R&&!N)try{return await M3(t,{...Q,blockNumber:i,blockTag:o})}catch(ae){if(!(ae instanceof gC)&&!(ae instanceof zp))throw ae}const K=(()=>{const ae=[Q,k];return R&&N?[...ae,R,N]:R?[...ae,R]:N?[...ae,{},N]:ae})(),G=await t.request({method:"eth_call",params:K});return G==="0x"?{data:void 0}:{data:G}}catch(T){const k=j3(T),{offchainLookup:N,offchainLookupSignature:R}=await Ct(async()=>{const{offchainLookup:j,offchainLookupSignature:z}=await import("./ccip.chunk.js");return{offchainLookup:j,offchainLookupSignature:z}},__vite__mapDeps([0,1]));if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===R&&A)return{data:await N(t,{data:k,to:A})};throw M&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new TO({factory:f}):B3(T,{...e,account:$,chain:t.chain})}}function L3({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(R3)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function M3(t,e){var p;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((p=t.batch)==null?void 0:p.multicall)=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,l=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return yC({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new gC})(),d=(typeof i=="bigint"?re(i):void 0)||o,{schedule:f}=wC({id:`${t.uid}.${d}`,wait:s,shouldSplitBatch(m){return m.reduce((_,{data:b})=>_+(b.length-2),0)>n*2},fn:async m=>{const w=m.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),_=Jd({abi:jp,args:[w],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{...l===null?{data:vC({code:pC,data:_})}:{to:l,data:_}},d]});return Pg({abi:jp,args:[w],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:h,success:g}]=await f({data:a,to:c});if(!g)throw new Eg({data:h});return h==="0x"?{data:void 0}:{data:h}}function vC(t){const{code:e,data:n}=t;return mC({abi:dv(["constructor(bytes, bytes)"]),bytecode:k3,args:[e,n]})}function F3(t){const{data:e,factory:n,factoryData:r,to:s}=t;return mC({abi:dv(["constructor(address, bytes, address, bytes)"]),bytecode:$3,args:[s,e,n,r]})}function j3(t){var n;if(!(t instanceof q))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function CC(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Jd({abi:n,args:s,functionName:i});try{const{data:c}=await et(t,EC,"call")({...o,data:a,to:r});return Pg({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw cd(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}const Yf=new Map,ky=new Map;let z3=0;function ld(t,e,n){const r=++z3,s=()=>Yf.get(t)||[],i=()=>{const u=s();Yf.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(f=>f.id===r))return;const d=ky.get(t);if(u.length===1&&d){const f=d();f instanceof Promise&&f.catch(()=>{})}i()},a=s();if(Yf.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var h,g;const f=s();if(f.length!==0)for(const p of f)(g=(h=p.fns)[u])==null||g.call(h,...d)};const l=n(c);return typeof l=="function"&&ky.set(t,l),o}async function ud(t){return new Promise(e=>setTimeout(e,t))}function _C(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await ud(c);const l=async()=>{s&&(await t({unpoll:i}),await ud(r),l())};l()})(),i}const H3=new Map,q3=new Map;function W3(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,H3),r=e(t,q3);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function V3(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=W3(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const K3=t=>`blockNumber.${t}`;async function G3(t,{cacheTime:e=t.cacheTime}={}){const n=await V3(()=>t.request({method:"eth_blockNumber"}),{cacheKey:K3(t.uid),cacheTime:e});return BigInt(n)}async function Y3(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>cC(i));return!("abi"in e)||!e.abi?s:p3({abi:e.abi,logs:s,strict:n})}async function Z3(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class kg extends q{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Zf extends q{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function J3({chain:t,currentChainId:e}){if(!t)throw new U3;if(e!==t.id)throw new D3({chain:t,currentChainId:e})}function X3(t,{docsPath:e,...n}){const r=(()=>{const s=Cg(t,n);return s instanceof Qd?t:s})();return new CO(r,{docsPath:e,...n})}async function Q3(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Jf=new Zd(128);async function AC(t,e){var _,b,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,type:g,value:p,...m}=e;if(typeof n>"u")throw new kg({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Gr(n):null;try{tf(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Wv({authorization:i[0]}).catch(()=>{throw new q("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let x;r!==null&&(x=await et(t,iC,"getChainId")({}),J3({currentChainId:x,chain:r}));const $=(A=(b=(_=t.chain)==null?void 0:_.formatters)==null?void 0:b.transactionRequest)==null?void 0:A.format,L=($||Ig)({..._g(m,{format:$}),accessList:s,account:w,authorizationList:i,blobs:o,chainId:x,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,to:S,type:g,value:p},"sendTransaction"),M=Jf.get(t.uid),U=M?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:U,params:[L]},{retryCount:0})}catch(P){if(M===!1)throw P;const D=P;if(D.name==="InvalidInputRpcError"||D.name==="InvalidParamsRpcError"||D.name==="MethodNotFoundRpcError"||D.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[L]},{retryCount:0}).then(y=>(Jf.set(t.uid,!0),y)).catch(y=>{const v=y;throw v.name==="MethodNotFoundRpcError"||v.name==="MethodNotSupportedRpcError"?(Jf.set(t.uid,!1),D):v});throw D}}if((w==null?void 0:w.type)==="local"){const x=await et(t,Og,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,nonceManager:w.nonceManager,parameters:[...oC,"sidecars"],type:g,value:p,...m,to:S}),$=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,O=await w.signTransaction(x,{serializer:$});return await et(t,Q3,"sendRawTransaction")({serializedTransaction:O})}throw(w==null?void 0:w.type)==="smart"?new Zf({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Zf({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(S){throw S instanceof Zf?S:X3(S,{...e,account:w,chain:e.chain||void 0})}}async function dd(t,e){return dd.internal(t,AC,"sendTransaction",e)}(function(t){async function e(n,r,s,i){const{abi:o,account:a=n.account,address:c,args:l,dataSuffix:u,functionName:d,...f}=i;if(typeof a>"u")throw new kg({docsPath:"/docs/contract/writeContract"});const h=a?Gr(a):null,g=Jd({abi:o,args:l,functionName:d});try{return await et(n,r,s)({data:`${g}${u?u.replace("0x",""):""}`,to:c,account:h,...f})}catch(p){throw cd(p,{abi:o,address:c,args:l,docsPath:"/docs/contract/writeContract",functionName:d,sender:h==null?void 0:h.address})}}t.internal=e})(dd||(dd={}));function fd(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await ud(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}const eP={"0x0":"reverted","0x1":"success"};function IC(t,e){const n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>cC(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Ei(t.transactionIndex):null,status:t.status?eP[t.status]:null,type:t.type?Gv[t.type]||t.type:null};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}const tP=Ag("transactionReceipt",IC),Hp=256;let Gl=Hp,Yl;function SC(t=11){if(!Yl||Gl+t>Hp*2){Yl="",Gl=0;for(let e=0;e<Hp;e++)Yl+=(256+Math.random()*256|0).toString(16).substring(1)}return Yl.substring(Gl,Gl+++t)}function xC(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),u=t.pollingInterval??l,d=t.cacheTime??u,f=t.account?Gr(t.account):void 0,{config:h,request:g,value:p}=t.transport({chain:n,pollingInterval:u}),m={...h,...p},w={account:f,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:u,request:g,transport:m,type:o,uid:SC(),...a?{experimental_blockTag:a}:{}};function _(b){return A=>{const C=A(b);for(const x in w)delete C[x];const S={...b,...C};return Object.assign(S,{extend:_(S)})}}return Object.assign(w,{extend:_(w)})}async function nP(t){const e=GN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function rP(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?re(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}function sP(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!Ft(s))throw new _n({address:s});if(r<0)throw new rf({chainId:r})}$g(t)}function iP(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new nC;for(const n of e){const r=yt(n),s=Ei(Lc(n,0,1));if(r!==32)throw new c3({hash:n,size:r});if(s!==tC)throw new l3({hash:n,version:s})}}$g(t)}function $g(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new rf({chainId:e});if(s&&!Ft(s))throw new _n({address:s});if(r&&r>ef)throw new fo({maxFeePerGas:r});if(n&&r&&n>r)throw new sl({maxFeePerGas:r,maxPriorityFeePerGas:n})}function oP(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new rf({chainId:e});if(i&&!Ft(i))throw new _n({address:i});if(n||s)throw new q("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>ef)throw new fo({maxFeePerGas:r})}function aP(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!Ft(i))throw new _n({address:i});if(typeof e<"u"&&e<=0)throw new rf({chainId:e});if(n||s)throw new q("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>ef)throw new fo({maxFeePerGas:r})}function sf(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new vO({storageKey:s[i]});if(!Ft(r,{strict:!1}))throw new _n({address:r});e.push([r,s])}return e}function cP(t,e){const n=sC(t);return n==="eip1559"?dP(t,e):n==="eip2930"?fP(t,e):n==="eip4844"?uP(t,e):n==="eip7702"?lP(t,e):hP(t,e)}function lP(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;sP(t);const f=sf(u),h=pP(n);return Ns(["0x04",vi([re(r),i?re(i):"0x",l?re(l):"0x",c?re(c):"0x",s?re(s):"0x",o??"0x",a?re(a):"0x",d??"0x",f,h,...Tl(t,e)])])}function uP(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;iP(t);let f=t.blobVersionedHashes,h=t.sidecars;if(t.blobs&&(typeof f>"u"||typeof h>"u")){const b=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(S=>cn(S)),A=t.kzg,C=xg({blobs:b,kzg:A});if(typeof f>"u"&&(f=Xv({commitments:C})),typeof h>"u"){const S=Tg({blobs:b,commitments:C,kzg:A});h=rC({blobs:b,commitments:C,proofs:S})}}const g=sf(u),p=[re(n),s?re(s):"0x",l?re(l):"0x",c?re(c):"0x",r?re(r):"0x",i??"0x",o?re(o):"0x",d??"0x",g,a?re(a):"0x",f??[],...Tl(t,e)],m=[],w=[],_=[];if(h)for(let b=0;b<h.length;b++){const{blob:A,commitment:C,proof:S}=h[b];m.push(A),w.push(C),_.push(S)}return Ns(["0x03",vi(h?[p,m,w,_]:p)])}function dP(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=t;$g(t);const d=sf(l),f=[re(n),s?re(s):"0x",c?re(c):"0x",a?re(a):"0x",r?re(r):"0x",i??"0x",o?re(o):"0x",u??"0x",d,...Tl(t,e)];return Ns(["0x02",vi(f)])}function fP(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:l}=t;oP(t);const u=sf(c),d=[re(n),i?re(i):"0x",l?re(l):"0x",r?re(r):"0x",o??"0x",a?re(a):"0x",s??"0x",u,...Tl(t,e)];return Ns(["0x01",vi(d)])}function hP(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;aP(t);let l=[i?re(i):"0x",c?re(c):"0x",r?re(r):"0x",o??"0x",a?re(a):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const h=27n+(e.v===27n?0n:1n);if(e.v!==h)throw new wO({v:e.v});return h})(),d=Jn(e.r),f=Jn(e.s);l=[...l,re(u),d==="0x00"?"0x":d,f==="0x00"?"0x":f]}else n>0&&(l=[...l,re(n),"0x","0x"]);return vi(l)}function Tl(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=Jn(n.r),o=Jn(n.s);return[typeof s=="number"?s?re(1):"0x":r===0n?"0x":r===1n?re(1):r===27n?"0x":re(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function pP(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,o=n.address;e.push([r?Er(r):"0x",o,s?Er(s):"0x",...Tl({},i)])}return e}const Zl=new Zd(8192);function gP(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Zl.get(n))return Zl.get(n);const r=t().finally(()=>Zl.delete(n));return Zl.set(n,r),r}function mP(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Wi(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Wi(new Error("method not supported"),{method:l});const u=s?Gd(`${c}.${Xn(n)}`):void 0;return gP(()=>fd(async()=>{try{return await t(n)}catch(f){const h=f;switch(h.code){case Fc.code:throw new Fc(h);case jc.code:throw new jc(h);case zc.code:throw new zc(h,{method:n.method});case Hc.code:throw new Hc(h);case uo.code:throw new uo(h);case qc.code:throw new qc(h);case Wc.code:throw new Wc(h);case di.code:throw new di(h);case pa.code:throw new pa(h);case Wi.code:throw new Wi(h,{method:n.method});case ga.code:throw new ga(h);case Vc.code:throw new Vc(h);case lt.code:throw new lt(h);case Kc.code:throw new Kc(h);case Gc.code:throw new Gc(h);case Yc.code:throw new Yc(h);case Zc.code:throw new Zc(h);case Vr.code:throw new Vr(h);case Jc.code:throw new Jc(h);case Xc.code:throw new Xc(h);case Qc.code:throw new Qc(h);case el.code:throw new el(h);case tl.code:throw new tl(h);case nl.code:throw new nl(h);case rl.code:throw new rl(h);case 5e3:throw new lt(h);default:throw f instanceof q?f:new OO(h)}}},{delay:({count:f,error:h})=>{var g;if(h&&h instanceof cc){const p=(g=h==null?void 0:h.headers)==null?void 0:g.get("Retry-After");if(p!=null&&p.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<f)*o},retryCount:a,shouldRetry:({error:f})=>yP(f)}),{enabled:s,id:u})}}function yP(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===ga.code||t.code===uo.code:t instanceof cc&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Dg(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function TC(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function bP(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const $y=bP();function wP(t,e={}){return{async request(n){var f;const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:u,signal:d}=c;try{const h=await TC(async({signal:p})=>{const m={...c,body:Array.isArray(r)?Xn(r.map(A=>({jsonrpc:"2.0",id:A.id??$y.take(),...A}))):Xn({jsonrpc:"2.0",id:r.id??$y.take(),...r}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:d||(a>0?p:null)},w=new Request(t,m),_=await(i==null?void 0:i(w,m))??{...m,url:t};return await s(_.url??t,_)},{errorInstance:new _y({body:r,url:t}),timeout:a,signal:!0});o&&await o(h);let g;if((f=h.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))g=await h.json();else{g=await h.text();try{g=JSON.parse(g||"{}")}catch(p){if(h.ok)throw p;g={error:g}}}if(!h.ok)throw new cc({body:r,details:Xn(g.error)||h.statusText,headers:h.headers,status:h.status,url:t});return g}catch(h){throw h instanceof cc||h instanceof _y?h:new cc({body:r,cause:h,url:t})}}}}class EP extends q{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function vP(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new EP({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}async function NC(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i,sender:o,nonce:a}){var f,h,g;const c=r||"latest",l=n!==void 0?re(n):void 0;let u=null;if(s?u=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?u=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,re(i)]},{dedupe:!0}):typeof i=="number"?u=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||c,re(i)]},{dedupe:!!l}):o&&typeof a=="number"&&(u=await t.request({method:"eth_getTransactionBySenderAndNonce",params:[o,re(a)]},{dedupe:!0})),!u)throw new Fv({blockHash:e,blockNumber:n,blockTag:c,hash:s,index:i});return(((g=(h=(f=t.chain)==null?void 0:f.formatters)==null?void 0:h.transaction)==null?void 0:g.format)||nf)(u,"getTransaction")}async function Xf(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new jv({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||IC)(n,"getTransactionReceipt")}async function CP(t,e){var _;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:a,stateOverride:c}=e,l=e.contracts,{batchSize:u=e.batchSize??1024,deployless:d=e.deployless??!1}=typeof((_=t.batch)==null?void 0:_.multicall)=="object"?t.batch.multicall:{},f=(()=>{if(e.multicallAddress)return e.multicallAddress;if(d)return null;if(t.chain)return yC({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),h=[[]];let g=0,p=0;for(let b=0;b<l.length;b++){const{abi:A,address:C,args:S,functionName:x}=l[b];try{const $=Jd({abi:A,args:S,functionName:x});p+=($.length-2)/2,u>0&&p>u&&h[g].length>0&&(g++,p=($.length-2)/2,h[g]=[]),h[g]=[...h[g],{allowFailure:!0,callData:$,target:C}]}catch($){const O=cd($,{abi:A,address:C,args:S,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!s)throw O;h[g]=[...h[g],{allowFailure:!0,callData:"0x",target:C}]}}const m=await Promise.allSettled(h.map(b=>et(t,CC,"readContract")({...f===null?{code:pC}:{address:f},abi:jp,account:n,args:[b],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<m.length;b++){const A=m[b];if(A.status==="rejected"){if(!s)throw A.reason;for(let S=0;S<h[b].length;S++)w.push({status:"failure",error:A.reason,result:void 0});continue}const C=A.value;for(let S=0;S<C.length;S++){const{returnData:x,success:$}=C[S],{callData:O}=h[b][S],{abi:L,address:M,functionName:U,args:P}=l[w.length];try{if(O==="0x")throw new Kd;if(!$)throw new Eg({data:x});const D=Pg({abi:L,args:P,data:x,functionName:U});w.push(s?{result:D,status:"success"}:D)}catch(D){const y=cd(D,{abi:L,address:M,args:P,docsPath:"/docs/contract/multicall",functionName:U});if(!s)throw y;w.push({error:y,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new q("multicall results mismatch");return w}function _P(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Xn(["watchBlockNumber",t.uid,e,n,o]);return ld(d,{onBlockNumber:r,onError:s},f=>_C(async()=>{var h;try{const g=await et(t,G3,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(g===c)return;if(g-c>1&&n)for(let p=c+1n;p<g;p++)f.onBlockNumber(p,c),c=p}(c===void 0||g>c)&&(f.onBlockNumber(g,c),c=g)}catch(g){(h=f.onError)==null||h.call(f,g)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Xn(["watchBlockNumber",t.uid,e,n]);return ld(d,{onBlockNumber:r,onError:s},f=>{let h=!0,g=()=>h=!1;return(async()=>{try{const p=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:m}=await p.subscribe({params:["newHeads"],onData(w){var b;if(!h)return;const _=pr((b=w.result)==null?void 0:b.number);f.onBlockNumber(_,c),c=_},onError(w){var _;(_=f.onError)==null||_.call(f,w)}});g=m,h||g()}catch(p){s==null||s(p)}})(),()=>g()})})()}async function AP(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:C})=>~~(1<<C)*200,timeout:c=18e4}=e,l=Xn(["waitForTransactionReceipt",t.uid,s]),u=(()=>{var C;return e.pollingInterval?e.pollingInterval:(C=t.chain)!=null&&C.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval})();let d,f,h,g=!1,p,m;const{promise:w,resolve:_,reject:b}=bC(),A=c?setTimeout(()=>{m==null||m(),p==null||p(),b(new _O({hash:s}))},c):void 0;return p=ld(l,{onReplaced:i,resolve:_,reject:b},async C=>{if(h=await et(t,Xf,"getTransactionReceipt")({hash:s}).catch(()=>{}),h&&r<=1){clearTimeout(A),C.resolve(h),p==null||p();return}m=et(t,_P,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:u,async onBlockNumber(S){const x=O=>{clearTimeout(A),m==null||m(),O(),p==null||p()};let $=S;if(!g)try{if(h){if(r>1&&(!h.blockNumber||$-h.blockNumber+1n<r))return;x(()=>C.resolve(h));return}if(n&&!d&&(g=!0,await fd(async()=>{d=await et(t,NC,"getTransaction")({hash:s}),d.blockNumber&&($=d.blockNumber)},{delay:a,retryCount:o}),g=!1),h=await et(t,Xf,"getTransactionReceipt")({hash:s}),r>1&&(!h.blockNumber||$-h.blockNumber+1n<r))return;x(()=>C.resolve(h))}catch(O){if(O instanceof Fv||O instanceof jv){if(!d){g=!1;return}try{f=d,g=!0;const L=await fd(()=>et(t,il,"getBlock")({blockNumber:$,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:P})=>P instanceof Kv});g=!1;const M=L.transactions.find(({from:P,nonce:D})=>P===f.from&&D===f.nonce);if(!M||(h=await et(t,Xf,"getTransactionReceipt")({hash:M.hash}),r>1&&(!h.blockNumber||$-h.blockNumber+1n<r)))return;let U="replaced";M.to===f.to&&M.value===f.value&&M.input===f.input?U="repriced":M.from===M.to&&M.value===0n&&(U="cancelled"),x(()=>{var P;(P=C.onReplaced)==null||P.call(C,{reason:U,replacedTransaction:f,transaction:M,transactionReceipt:h}),C.resolve(h)})}catch(L){x(()=>C.reject(L))}}else x(()=>C.reject(O))}}})}),w}function IP(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Xn(["watchPendingTransactions",t.uid,e,i]);return ld(l,{onTransactions:r,onError:n},u=>{let d;const f=_C(async()=>{var h;try{if(!d)try{d=await et(t,nP,"createPendingTransactionFilter")({});return}catch(p){throw f(),p}const g=await et(t,Y3,"getFilterChanges")({filter:d});if(g.length===0)return;if(e)u.onTransactions(g);else for(const p of g)u.onTransactions([p])}catch(g){(h=u.onError)==null||h.call(u,g)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await et(t,Z3,"uninstallFilter")({filter:d}),f()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!l)return;const h=f.result;r([h])},onError(f){n==null||n(f)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function SP(t,{account:e=t.account,message:n}){if(!e)throw new kg({docsPath:"/docs/actions/wallet/signMessage"});const r=Gr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Gd(n):n.raw instanceof Uint8Array?Er(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}function Ug({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=SC();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:mP(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function xP(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>Ug({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Dy(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=TP,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let f=t,h=()=>{};const g=Ug({key:n,name:r,async request({method:p,params:m}){let w;const _=async(b=0)=>{const A=f[b]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:p,params:m});return h({method:p,params:m,response:C,transport:A,status:"success"}),C}catch(C){if(h({error:C,method:p,params:m,transport:A,status:"error"}),i(C)||b===f.length-1||(w??(w=f.slice(b+1).some(S=>{const{include:x,exclude:$}=S({chain:c}).config.methods||{};return x?x.includes(p):$?!$.includes(p):!0})),!w))throw C;return _(b+1)}};return _()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:p=>h=p,transports:f.map(p=>p({chain:c,retryCount:0}))});if(s){const p=typeof s=="object"?s:{};NP({chain:c,interval:p.interval??l,onTransports:m=>f=m,ping:p.ping,sampleCount:p.sampleCount,timeout:p.timeout,transports:f,weights:p.weights})}return g}}function TP(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===pa.code||t.code===lt.code||Vi.nodeMessage.test(t.message)||t.code===5e3))}function NP({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const f=await Promise.all(o.map(async p=>{const m=p({chain:t,retryCount:0,timeout:i}),w=Date.now();let _,b;try{await(r?r({transport:m}):m.request({method:"net_listening"})),b=1}catch{b=0}finally{_=Date.now()}return{latency:_-w,success:b}}));u.push(f),u.length>s&&u.shift();const h=Math.max(...u.map(p=>Math.max(...p.map(({latency:m})=>m)))),g=o.map((p,m)=>{const w=u.map(S=>S[m].latency),b=1-w.reduce((S,x)=>S+x,0)/w.length/h,A=u.map(S=>S[m].success),C=A.reduce((S,x)=>S+x,0)/A.length;return C===0?[0,m]:[l*b+c*C,m]}).sort((p,m)=>m[0]-p[0]);n(g.map(([,p])=>o[p])),await ud(e),d()};d()}class OP extends q{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Jl(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:d}=e;return({chain:f,retryCount:h,timeout:g})=>{const{batchSize:p=1e3,wait:m=0}=typeof n=="object"?n:{},w=e.retryCount??h,_=g??e.timeout??1e4,b=t||(f==null?void 0:f.rpcUrls.default.http[0]);if(!b)throw new OP;const A=wP(b,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:l,timeout:_});return Ug({key:i,methods:o,name:a,async request({method:C,params:S}){const x={method:C,params:S},{schedule:$}=wC({id:b,wait:m,shouldSplitBatch(U){return U.length>p},fn:U=>A.request({body:U}),sort:(U,P)=>U.id-P.id}),O=async U=>n?$(U):[await A.request({body:U})],[{error:L,result:M}]=await O(x);if(d)return{error:L,result:M};if(L)throw new vg({body:x,error:L,url:b});return M},retryCount:w,retryDelay:u,timeout:_,type:"http"},{fetchOptions:s,url:b})}}async function Da(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Nl{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Da(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Da(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Da(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Da(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Da(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}sendBeacon({body:e,...n}){const r=this.createUrl(n);return navigator.sendBeacon(r.toString(),e?JSON.stringify(e):void 0)}}const qp={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ke.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;let e=t;return ee.isTelegram()&&(ee.isIos()&&(e=e.filter(n=>n!=="google")),ee.isMac()&&(e=e.filter(n=>n!=="x")),ee.isAndroid()&&(e=e.filter(n=>!["facebook","x"].includes(n)))),ee.isMobile()&&(e=e.filter(n=>n!=="facebook")),e},isSocialsEnabled(){var t,e,n,r;return Array.isArray((t=F.state.features)==null?void 0:t.socials)&&((e=F.state.features)==null?void 0:e.socials.length)>0||Array.isArray((n=F.state.remoteFeatures)==null?void 0:n.socials)&&((r=F.state.remoteFeatures)==null?void 0:r.socials.length)>0},isEmailEnabled(){var t,e;return!!((t=F.state.features)!=null&&t.email||(e=F.state.remoteFeatures)!=null&&e.email)}},he=Xe({features:ke.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ke.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),F={state:he,subscribeKey(t,e){return kt(he,t,e)},setOptions(t){Object.assign(he,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...he.remoteFeatures,...t};he.remoteFeatures=e,(n=he.remoteFeatures)!=null&&n.socials&&(he.remoteFeatures.socials=qp.filterSocialsByPlatform(he.remoteFeatures.socials)),(r=he.features)!=null&&r.pay&&(he.remoteFeatures.email=!1,he.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;he.features||(he.features=ke.DEFAULT_FEATURES);const e={...he.features,...t};he.features=e,(n=he.features)!=null&&n.pay&&he.remoteFeatures&&(he.remoteFeatures.email=!1,he.remoteFeatures.socials=!1)},setProjectId(t){he.projectId=t},setCustomRpcUrls(t){he.customRpcUrls=t},setAllWallets(t){he.allWallets=t},setIncludeWalletIds(t){he.includeWalletIds=t},setExcludeWalletIds(t){he.excludeWalletIds=t},setFeaturedWalletIds(t){he.featuredWalletIds=t},setTokens(t){he.tokens=t},setTermsConditionsUrl(t){he.termsConditionsUrl=t},setPrivacyPolicyUrl(t){he.privacyPolicyUrl=t},setCustomWallets(t){he.customWallets=t},setIsSiweEnabled(t){he.isSiweEnabled=t},setIsUniversalProvider(t){he.isUniversalProvider=t},setSdkVersion(t){he.sdkVersion=t},setMetadata(t){he.metadata=t},setDisableAppend(t){he.disableAppend=t},setEIP6963Enabled(t){he.enableEIP6963=t},setDebug(t){he.debug=t},setEnableWalletGuide(t){he.enableWalletGuide=t},setEnableAuthLogger(t){he.enableAuthLogger=t},setEnableWallets(t){he.enableWallets=t},setPreferUniversalLinks(t){he.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ke.SIWX_DEFAULTS))t[e]??(t[e]=n);he.siwx=t},setConnectMethodsOrder(t){he.features={...he.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){he.features={...he.features,walletFeaturesOrder:t}},setSocialsOrder(t){he.remoteFeatures={...he.remoteFeatures,socials:t}},setCollapseWallets(t){he.features={...he.features,collapseWallets:t}},setEnableEmbedded(t){he.enableEmbedded=t},setAllowUnsupportedChain(t){he.allowUnsupportedChain=t},setManualWCControl(t){he.manualWCControl=t},setEnableNetworkSwitch(t){he.enableNetworkSwitch=t},setEnableMobileFullScreen(t){he.enableMobileFullScreen=ee.isMobile()&&t},setEnableReconnect(t){he.enableReconnect=t},setCoinbasePreference(t){he.coinbasePreference=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(he.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){he.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return he.universalProviderConfigOverride},getSnapshot(){return Ec(he)}},Li=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),wt=Xe({...Li}),PP={state:wt,subscribeKey(t,e){return kt(wt,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ee.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){wt.message=Li.message,wt.variant=Li.variant,wt.svg=Li.svg,wt.open=Li.open,wt.autoClose=Li.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Li.autoClose}){wt.open?(wt.open=!1,setTimeout(()=>{wt.message=t,wt.variant=n,wt.svg=e,wt.open=!0,wt.autoClose=r},150)):(wt.message=t,wt.variant=n,wt.svg=e,wt.open=!0,wt.autoClose=r)}},Br=PP,RP={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},OC=ee.getBlockchainApiUrl(),Qt=Xe({clientId:null,api:new Nl({baseUrl:OC,clientId:null}),supportedChains:{http:[],ws:[]}}),be={state:Qt,async get(t){const{st:e,sv:n}=be.getSdkProperties(),r=F.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Qt.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=F.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Qt.supportedChains.http.length||await be.getSupportedNetworks()}catch{return!1}return Qt.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await be.get({path:"v1/supported-chains"});return Qt.supportedChains=t,t}catch{return Qt.supportedChains}},async fetchIdentity({address:t}){const e=H.getIdentityFromCacheForAddress(t);if(e)return e;const n=await be.get({path:`/v1/identity/${t}`,params:{sender:I.state.activeCaipAddress?ee.getPlainAddress(I.state.activeCaipAddress):void 0}});return H.updateIdentityCache({address:t,identity:n,timestamp:Date.now()}),n},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var c;if(!await be.isNetworkSupported((c=I.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return{data:[],next:void 0};const o=H.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await be.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return H.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await be.isNetworkSupported((o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?be.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async getAddressBalance({caipNetworkId:t,address:e}){return Qt.api.post({path:`/v1?chainId=${t}&projectId=${F.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:e}}}).then(n=>n.result)},async fetchTokenPrice({addresses:t}){var s;if(!await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))return{fungibles:[]};const n=H.getTokenPriceCacheForAddresses(t);if(n)return n;const r=await Qt.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:F.state.projectId},headers:{"Content-Type":"application/json"}});return H.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await be.isNetworkSupported((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?be.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=be.getSdkProperties();if(!await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return be.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await be.isNetworkSupported((o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Qt.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ke.CONVERT_SLIPPAGE_TOLERANCE},projectId:F.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=be.getSdkProperties();if(!await be.isNetworkSupported((o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return be.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=be.getSdkProperties();if(!await be.isNetworkSupported((l=I.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Br.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=H.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await be.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return H.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r,s;if(!await be.isNetworkSupported((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId))return[];const n=(s=I.getAccountData())==null?void 0:s.address;return be.get({path:`/v1/profile/reverse/${t}`,params:{sender:n,apiVersion:"2"}})},async getEnsNameSuggestions(t){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await be.isNetworkSupported((i=I.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Qt.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await be.isNetworkSupported((a=I.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Qt.api.post({path:"/v1/generators/onrampurl",params:{projectId:F.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await be.isNetworkSupported((e=I.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await be.get({path:"/v1/onramp/options"})}catch{return RP}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Qt.api.post({path:"/v1/onramp/quote",params:{projectId:F.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Qt.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:F.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Qt.clientId=t,Qt.api=new Nl({baseUrl:OC,clientId:t})}},Wn={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},kP={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Wn.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Wn.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===Wn.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Wn.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===B.CHAIN.SOLANA&&t===Wn.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Wn.COINBASE.url}/dapp?cb_url=${r}`),e===B.CHAIN.BITCOIN&&t===Wn.BINANCE.id&&!("binancew3w"in window)){const s=I.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${(s==null?void 0:s.id)??1}`),a=new URL(Wn.BINANCE.deeplink);a.searchParams.set("appId",Wn.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(Wn.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},$P=Object.freeze({enabled:!0,events:[]}),DP=new Nl({baseUrl:ee.getAnalyticsUrl(),clientId:null}),UP=5,BP=60*1e3,$s=Xe({...$P}),LP={state:$s,subscribeKey(t,e){return kt($s,t,e)},async sendError(t,e){if(!$s.enabled)return;const n=Date.now();if($s.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<BP}).length>=UP)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};$s.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=F.state;await DP.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ee.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){$s.enabled=!0},disable(){$s.enabled=!1},clearEvents(){$s.events=[]}};class ho extends Error{constructor(e,n,r){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=n,this.originalError=r,r&&r instanceof Error&&(this.originalName=r.name),Object.setPrototypeOf(this,ho.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ho):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function Uy(t,e){let n="";try{t instanceof Error?n=t.message:typeof t=="string"?n=t:typeof t=="object"&&t!==null?Object.keys(t).length===0?n="Unknown error":n=(t==null?void 0:t.message)||JSON.stringify(t):n=String(t)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=t instanceof ho?t:new ho(n,e,t);throw LP.sendError(r,r.category),r}function nr(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Uy(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Uy(a,e)}},n[r]=i}else n[r]=s}),n}const xn=Xe({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),MP={state:xn,subscribeNetworkImages(t){return Mt(xn.networkImages,()=>t(xn.networkImages))},subscribeKey(t,e){return kt(xn,t,e)},subscribe(t){return Mt(xn,()=>t(xn))},setWalletImage(t,e){xn.walletImages[t]=e},setNetworkImage(t,e){xn.networkImages[t]=e},setChainImage(t,e){xn.chainImages[t]=e},setConnectorImage(t,e){xn.connectorImages={...xn.connectorImages,[t]:e}},setTokenImage(t,e){xn.tokenImages[t]=e},setCurrencyImage(t,e){xn.currencyImages[t]=e}},kn=nr(MP),FP={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},Qf=Xe({networkImagePromises:{}}),PC={async fetchWalletImage(t){if(t)return await de._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Qf.networkImagePromises[t]||(Qf.networkImagePromises[t]=de._fetchNetworkImage(t)),await Qf.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return kn.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return kn.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return kn.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return kn.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return kn.state.connectorImages[t.imageId]},getChainImage(t){return kn.state.networkImages[FP[t]]},getTokenImage(t){if(t)return kn.state.tokenImages[t]}},jP=ee.getAnalyticsUrl(),zP=new Nl({baseUrl:jP,clientId:null}),HP=["MODAL_CREATED"],qP=45,By=1e3*10,at=Xe({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Ce={state:at,subscribe(t){return Mt(at,()=>t(at))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=F.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},shouldFlushEvents(){const t=JSON.stringify(at.pendingEvents).length/1024>qP,e=at.lastFlush+By<Date.now();return t||e},_setPendingEvent(t){var e,n;try{let r=(e=I.getAccountData())==null?void 0:e.address;if("address"in t.data&&t.data.address&&(r=t.data.address),HP.includes(t.data.event)||typeof window>"u")return;const s=(n=I.getActiveCaipNetwork())==null?void 0:n.caipNetworkId;this.state.pendingEvents.push({eventId:ee.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:r,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:s}}}),at.reportedErrors.FORBIDDEN=!1,Ce.shouldFlushEvents()&&Ce._submitPendingEvents()}catch(r){console.warn("_setPendingEvent",r)}},sendEvent(t){var n;at.timestamp=Date.now(),at.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];((n=F.state.features)!=null&&n.analytics||e.includes(t.event))&&Ce._setPendingEvent(at),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(t){at.walletImpressions.push(t)},_transformPendingEventsForBatch(t){try{return t.filter(e=>e.props.event!=="WALLET_IMPRESSION_V2")}catch{return t}},_submitPendingEvents(){if(at.lastFlush=Date.now(),!(at.pendingEvents.length===0&&at.walletImpressions.length===0))try{const t=Ce._transformPendingEventsForBatch(at.pendingEvents);at.walletImpressions.length&&t.push({eventId:ee.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...at.walletImpressions]}}),zP.sendBeacon({path:"/batch",params:Ce.getSdkProperties(),body:t}),at.reportedErrors.FORBIDDEN=!1,at.pendingEvents=[],at.walletImpressions=[]}catch{at.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){var t,e,n;at.subscribedToVisibilityChange||typeof document>"u"||(at.subscribedToVisibilityChange=!0,(t=document==null?void 0:document.addEventListener)==null||t.call(document,"visibilitychange",()=>{document.visibilityState==="hidden"&&Ce._submitPendingEvents()}),(e=document==null?void 0:document.addEventListener)==null||e.call(document,"freeze",()=>{Ce._submitPendingEvents()}),(n=window==null?void 0:window.addEventListener)==null||n.call(window,"pagehide",()=>{Ce._submitPendingEvents()}),setInterval(()=>{Ce._submitPendingEvents()},By))}},WP=ee.getApiUrl(),en=new Nl({baseUrl:WP,clientId:null}),VP=40,Ly=4,KP=20,Ee=Xe({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),de={state:Ee,subscribeKey(t,e){return kt(Ee,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=F.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return F.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${en.baseUrl}/getWalletImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});kn.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${en.baseUrl}/public/getAssetImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});kn.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${en.baseUrl}/public/getAssetImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});kn.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${en.baseUrl}/public/getCurrencyImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});kn.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${en.baseUrl}/public/getTokenImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});kn.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){const e=t.length,n=ee.isMobile()?t==null?void 0:t.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(Wn).map(o=>o.id).includes(s.id)):t,r=e-n.length;return{filteredWallets:n,mobileFilteredOutWalletsLength:r}},async fetchProjectConfig(){return(await en.get({path:"/appkit/v1/config",params:de._getSdkProperties()})).features},async fetchUsage(){try{const t=await en.get({path:"/appkit/v1/project-limits",params:de._getSdkProperties()}),{tier:e,isAboveMauLimit:n,isAboveRpcLimit:r}=t.planLimits,s=e==="starter",i=n||r;de.state.plan={tier:e,hasExceededUsageLimit:s&&i,limits:{isAboveRpcLimit:r,isAboveMauLimit:n}}}catch(t){console.warn("Failed to fetch usage",t)}},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await en.get({path:"/projects/v1/origins",params:de._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===B.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=B.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=I.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!PC.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>de._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=V.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>de._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchTokenImage(e)))},async fetchWallets(t){var o;const e=t.exclude??[];de._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Wn).map(a=>a.id));const r=await en.get({path:"/getWallets",params:{...de._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(o=t.include)==null?void 0:o.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=de._filterWalletsByPlatform(r==null?void 0:r.data);return{data:s||[],count:r==null?void 0:r.count,mobileFilteredOutWalletsLength:i}},async prefetchWalletRanks(){const t=V.state.connectors;if(!(t!=null&&t.length))return;const e={page:1,entries:20,badge:"certified"};if(e.names=t.map(s=>s.name).join(","),I.state.activeChain===B.CHAIN.EVM){const s=[...t.flatMap(i=>{var o;return((o=i.connectors)==null?void 0:o.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}))||[]}),...t.map(i=>{var o;return(o=i.info)==null?void 0:o.rdns})].filter(i=>typeof i=="string"&&i.length>0);s.length&&(e.rdns=s.join(","))}const{data:n}=await de.fetchWallets(e);Ee.explorerWallets=n,V.extendConnectorsWithExplorerWallets(n);const r=I.getRequestedCaipNetworkIds().join(",");Ee.explorerFilteredWallets=n.filter(s=>{var i;return(i=s.chains)==null?void 0:i.some(o=>r.includes(o))})},async fetchFeaturedWallets(){const{featuredWalletIds:t}=F.state;if(t!=null&&t.length){const e={...de._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Ly,include:t},{data:n}=await de.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>de._fetchWalletImage(i))),Ee.featured=r,Ee.allFeatured=r}},async fetchRecommendedWallets(){try{Ee.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=F.state,r=[...e??[],...n??[]].filter(Boolean),s=I.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Ly,include:t,exclude:r,chains:s},{data:o,count:a}=await de.fetchWallets(i),c=H.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>de._fetchWalletImage(d))),Ee.recommended=o,Ee.allRecommended=o,Ee.count=a??0}catch{}finally{Ee.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=F.state,s=I.getRequestedCaipNetworkIds().join(","),i=[...Ee.recommended.map(({id:d})=>d),...n??[],...r??[]].filter(Boolean),o={page:t,entries:VP,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:l}=await de.fetchWallets(o);Ee.mobileFilteredOutWalletsLength=l+(Ee.mobileFilteredOutWalletsLength??0);const u=a.slice(0,KP).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(u.map(d=>de._fetchWalletImage(d))),Ee.wallets=ee.uniqueBy([...Ee.wallets,...de._filterOutExtensions(a)],"id").filter(d=>{var f;return(f=d.chains)==null?void 0:f.some(h=>s.includes(h))}),Ee.count=c>Ee.count?c:Ee.count,Ee.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await de.fetchWallets(e);n&&n.forEach(r=>{Ee.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=F.state,s=I.getRequestedCaipNetworkIds().join(",");Ee.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await de.fetchWallets(i);Ce.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>de._fetchWalletImage(c)),ee.wait(300)]),Ee.search=de._filterOutExtensions(o)},initPromise(t,e){const n=Ee.promises[t];return n||(Ee.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0,fetchWalletRanks:s=!0}={}){const i=[t&&de.initPromise("connectorImages",de.fetchConnectorImages),e&&de.initPromise("featuredWallets",de.fetchFeaturedWallets),n&&de.initPromise("recommendedWallets",de.fetchRecommendedWallets),r&&de.initPromise("networkImages",de.fetchNetworkImages),s&&de.initPromise("walletRanks",de.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=F.state.features)!=null&&t.analytics&&de.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await en.get({path:"/getAnalyticsConfig",params:de._getSdkProperties()});F.setFeatures({analytics:t})}catch{F.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Ee.featured=Ee.allFeatured,Ee.recommended=Ee.allRecommended;return}const e=I.getRequestedCaipNetworkIds().join(",");Ee.featured=Ee.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.recommended=Ee.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.filteredWallets=Ee.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Ee.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ee.featured=Ee.allFeatured,Ee.recommended=Ee.allRecommended;return}const e=I.getRequestedCaipNetworkIds().join(",");Ee.featured=Ee.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.recommended=Ee.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.filteredWallets=Ee.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},GP=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],qe=Xe({view:"Connect",history:["Connect"],transactionStack:[]}),YP={state:qe,subscribeKey(t,e){return kt(qe,t,e)},pushTransactionStack(t){qe.transactionStack.push(t)},popTransactionStack(t){const e=qe.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),me.goBack();break;case"cancel":s==null||s(),me.goBack();break}},push(t,e){let n=t,r=e;de.state.plan.hasExceededUsageLimit&&GP.includes(t)&&(n="UsageExceeded",r=void 0),n!==qe.view&&(qe.view=n,qe.history.push(n),qe.data=r)},reset(t,e){qe.view=t,qe.history=[t],qe.data=e},replace(t,e){qe.history.at(-1)===t||(qe.view=t,qe.history[qe.history.length-1]=t,qe.data=e)},goBack(){var r,s;const t=I.state.activeCaipAddress,e=me.state.view==="ConnectingFarcaster",n=!t&&e;if(qe.history.length>1){qe.history.pop();const[i]=qe.history.slice(-1);i&&(t&&i==="Connect"?qe.view="Account":qe.view=i)}else Oe.close();(r=qe.data)!=null&&r.wallet&&(qe.data.wallet=void 0),(s=qe.data)!=null&&s.redirectView&&(qe.data.redirectView=void 0),setTimeout(()=>{var i,o,a;if(n){I.setAccountProp("farcasterUrl",void 0,I.state.activeChain);const c=V.getAuthConnector();(i=c==null?void 0:c.provider)==null||i.reload();const l=Ec(F.state);(a=(o=c==null?void 0:c.provider)==null?void 0:o.syncDappData)==null||a.call(o,{metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType})}},100)},goBackToIndex(t){if(qe.history.length>1){qe.history=qe.history.slice(0,t+1);const[e]=qe.history.slice(-1);e&&(qe.view=e)}},goBackOrCloseModal(){me.state.history.length>1?me.goBack():Oe.close()}},me=nr(YP),Jr=Xe({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Wp={state:Jr,subscribe(t){return Mt(Jr,()=>t(Jr))},setThemeMode(t){Jr.themeMode=t;try{const e=V.getAuthConnector();if(e){const n=Wp.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:_c(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Jr.themeVariables={...Jr.themeVariables,...t};try{const e=V.getAuthConnector();if(e){const n=Wp.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:_c(Jr.themeVariables,Jr.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Ec(Jr)}},gn=nr(Wp),RC=Object.fromEntries(BE.map(t=>[t,void 0])),ZP=Object.fromEntries(BE.map(t=>[t,!0])),$e=Xe({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:RC,filterByNamespaceMap:ZP}),JP={state:$e,subscribe(t){return Mt($e,()=>{t($e)})},subscribeKey(t,e){return kt($e,t,e)},initialize(t){t.forEach(e=>{const n=H.getConnectedConnectorId(e);n&&V.setConnectorId(n,e)})},setActiveConnector(t){t&&($e.activeConnector=vc(t))},setConnectors(t){t.filter(s=>!$e.allConnectors.some(i=>i.id===s.id&&V.getConnectorName(i.name)===V.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&$e.allConnectors.push(vc(s))});const n=V.getEnabledNamespaces(),r=V.getEnabledConnectors(n);$e.connectors=V.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys($e.filterByNamespaceMap).forEach(e=>{$e.filterByNamespaceMap[e]=!1}),t.forEach(e=>{$e.filterByNamespaceMap[e]=!0}),V.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){$e.filterByNamespaceMap[t]=e,V.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=V.getEnabledNamespaces(),e=V.getEnabledConnectors(t),n=V.areAllNamespacesEnabled();$e.connectors=V.mergeMultiChainConnectors(e),n?de.clearFilterByNamespaces():de.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries($e.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return $e.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values($e.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=V.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===B.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=V.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===B.CONNECTOR_ID.AUTH){const s=t,i=Ec(F.state),o=gn.getSnapshot().themeMode,a=gn.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:_c(a,o)}),V.setConnectors([t])}else V.setConnectors([t])},getAuthConnector(t){var r;const e=t||I.state.activeChain,n=$e.connectors.find(s=>s.id===B.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return $e.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return $e.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const r=n||I.state.activeChain;return $e.allConnectors.filter(i=>i.chain===r).find(i=>{var o;return i.explorerId===t||((o=i.info)==null?void 0:o.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="AUTH")return;const e=t,n=Ec(F.state),r=gn.getSnapshot().themeMode,s=gn.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:_c(s,r)})},getConnectorsByNamespace(t){const e=$e.allConnectors.filter(n=>n.chain===t);return V.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return I.checkIfSmartAccountEnabled()&&nn(t)===dt.ACCOUNT_TYPES.EOA},selectWalletConnector(t){var r;const e=(r=me.state.data)==null?void 0:r.redirectView,n=V.getConnector({id:t.id,rdns:t.rdns});kP.handleMobileDeeplinkRedirect((n==null?void 0:n.explorerId)||t.id,I.state.activeChain),n?me.push("ConnectingExternal",{connector:n,wallet:t,redirectView:e}):me.push("ConnectingWalletConnect",{wallet:t,redirectView:e})},getConnectors(t){return t?V.getConnectorsByNamespace(t):V.mergeMultiChainConnectors($e.allConnectors)},setFilterByNamespace(t){$e.filterByNamespace=t,$e.connectors=V.getConnectors(t),de.setFilterByNamespace(t)},setConnectorId(t,e){t&&($e.activeConnectorIds={...$e.activeConnectorIds,[e]:t},H.setConnectedConnectorId(e,t))},removeConnectorId(t){$e.activeConnectorIds={...$e.activeConnectorIds,[t]:void 0},H.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return $e.activeConnectorIds[t]},isConnected(t){return t?!!$e.activeConnectorIds[t]:Object.values($e.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){$e.activeConnectorIds={...RC}},extendConnectorsWithExplorerWallets(t){$e.allConnectors.forEach(r=>{const s=t.find(i=>{var o;return i.id===r.id||i.rdns&&i.rdns===((o=r.info)==null?void 0:o.rdns)});s&&(r.explorerWallet=s)});const e=V.getEnabledNamespaces(),n=V.getEnabledConnectors(e);$e.connectors=V.mergeMultiChainConnectors(n)}},V=nr(JP),XP=1e3,Ua={checkNamespaceConnectorId(t,e){return V.getConnectorId(t)===e},isSocialProvider(t){return ke.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&V.setActiveConnector(e),s==null||s(ee.isMobile()&&t),r){const l=Oe.subscribeKey("open",u=>{u||(me.state.view!==r&&me.replace(r),l(),a(new Error("Modal closed")))})}const c=I.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Oe.close(),c(),o(At.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=I.subscribeKey("activeCaipAddress",s=>{s&&(Oe.close(),r(),e(At.parseCaipAddress(s)))});X.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i,o=!1,a=null;const c=e||I.state.activeChain,l=I.subscribeKey("activeCaipAddress",u=>{u&&(n&&Oe.close(),l())});return new Promise((u,d)=>{async function f(g){var p;if((p=g.data)!=null&&p.resultUri)if(g.origin===B.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const m=V.getAuthConnector(c);if(m&&!o){i&&i.close(),o=!0;const w=g.data.resultUri;Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:t}}),H.setConnectedSocialProvider(t),await X.connectExternal({id:m.id,type:m.type,socialUri:w},m.chain);const _=I.state.activeCaipAddress;if(!_){d(new Error("Failed to connect"));return}u(At.parseCaipAddress(_)),Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}})}}catch(m){Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:ee.parseError(m)}}),d(new Error("Failed to connect"))}}else Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:"Untrusted Origin"}})}async function h(){if(Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"){r==null||r();const g=Oe.subscribeKey("open",m=>{!m&&t==="farcaster"&&(d(new Error("Popup closed")),s==null||s(),g())}),p=V.getAuthConnector();if(p){const m=I.getAccountData(c);if(!(m!=null&&m.farcasterUrl))try{const{url:w}=await p.provider.getFarcasterUri();I.setAccountProp("farcasterUrl",w,c)}catch{d(new Error("Failed to connect to farcaster"))}}}else{const g=V.getAuthConnector();a=ee.returnOpenHref(`${B.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g){const{uri:p}=await g.provider.getSocialRedirectUri({provider:t});if(a&&p){a.location.href=p,i=a;const m=setInterval(()=>{i!=null&&i.closed&&!o&&(d(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",f,!1)}else a==null||a.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Oe.subscribeKey("open",c=>{c||(me.state.view!==e&&me.replace(e),a(),i(new Error("Modal closed")))})}const o=I.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Oe.close(),o(),s(At.parseCaipAddress(a)))})})},async updateEmail(){const t=H.getConnectedConnectorId(I.state.activeChain),e=V.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==B.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await Oe.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Oe.close(),clearInterval(i),o(),r({email:a}))},XP),o=Oe.subscribeKey("open",a=>{a||(me.state.view!=="Connect"&&me.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return I.checkIfSmartAccountEnabled()&&nn(t)===dt.ACCOUNT_TYPES.EOA}};function kC(){var r,s;const t=((r=I.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=I.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ke.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function nn(t){var n;return(n=I.getAccountData(t))==null?void 0:n.preferredAccountType}function gs(t){var e,n;return t?(n=(e=I.state.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:I.state.activeCaipNetwork}const hd={getConnectionStatus(t,e){const n=V.state.activeConnectorIds[e],r=X.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=F.state.remoteFeatures)!=null&&a.multiWallet),n=V.state.activeConnectorIds[t],r=X.getConnections(t),i=(X.state.recentConnections.get(t)??[]).filter(c=>V.getConnectorById(c.connectorId)),o=hd.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},tt=Xe({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),QP={state:tt,subscribe(t){return Mt(tt,()=>t(tt))},setLastNetworkInView(t){tt.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");tt.loading=!0;try{const n=await be.fetchTransactions({account:t,cursor:tt.next,chainId:(e=I.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=ku.filterSpamTransactions(n.data),s=ku.filterByConnectedChain(r),i=[...tt.transactions,...s];tt.loading=!1,tt.transactions=i,tt.transactionsByYear=ku.groupTransactionsByYearAndMonth(tt.transactionsByYear,s),tt.empty=i.length===0,tt.next=n.next?n.next:void 0}catch{const r=I.state.activeChain;Ce.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:F.state.projectId,cursor:tt.next,isSmartAccount:nn(r)===dt.ACCOUNT_TYPES.SMART_ACCOUNT}}),Br.showError("Failed to fetch transactions"),tt.loading=!1,tt.empty=!0,tt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){tt.next=void 0},resetTransactions(){tt.transactions=[],tt.transactionsByYear={},tt.lastNetworkInView=void 0,tt.loading=!1,tt.empty=!1,tt.next=void 0}},ku=nr(QP,"API_ERROR"),De=Xe({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Ti;const e8={state:De,subscribe(t){return Mt(De,()=>t(De))},subscribeKey(t,e){return kt(De,t,e)},_getClient(){return De._client},setClient(t){De._client=vc(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);X.syncStorageConnections(e)},syncStorageConnections(t){const e=H.getConnections(),n=t??Array.from(I.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(De.recentConnections);i.set(r,s),De.recentConnections=i}},getConnections(t){return t?De.connections.get(t)??[]:[]},hasAnyConnection(t){const e=X.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect({cache:t="auto"}={}){var n,r,s,i;const e=ee.isTelegram()||ee.isSafari()&&ee.isIos();if(t==="always"||t==="auto"&&e){if(Ti){await Ti,Ti=void 0;return}if(!ee.isPairingExpired(De==null?void 0:De.wcPairingExpiry)){const o=De.wcUri;De.wcUri=o;return}Ti=(r=(n=X._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n).catch(()=>{}),X.state.status="connecting",await Ti,Ti=void 0,De.wcPairingExpiry=void 0,X.state.status="connected"}else await((i=(s=X._getClient())==null?void 0:s.connectWalletConnect)==null?void 0:i.call(s))},async connectExternal(t,e,n=!0){var o,a,c;const r=await((a=(o=X._getClient())==null?void 0:o.connectExternal)==null?void 0:a.call(o,t));n&&I.setActiveNamespace(e);const s=V.state.allConnectors.find(l=>l.id===(t==null?void 0:t.id)),i=t.type==="AUTH"?"email":"browser";return Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:i,name:(s==null?void 0:s.name)||"Unknown",view:me.state.view,walletRank:(c=s==null?void 0:s.explorerWallet)==null?void 0:c.order}}),r},async reconnectExternal(t){var n,r;await((r=(n=X._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||I.state.activeChain;e&&V.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Oe.setLoading(!0,I.state.activeChain);const n=V.getAuthConnector();n&&(I.setAccountProp("preferredAccountType",t,e),await n.provider.setPreferredAccount(t),H.setPreferredAccountTypes(Object.entries(I.state.chains).reduce((s,[i,o])=>{const a=i,c=nn(a);return c!==void 0&&(s[a]=c),s},{})),await X.reconnectExternal(n),Oe.setLoading(!1,I.state.activeChain),Ce.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=X._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=X._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=X._getClient())==null?void 0:n.formatUnits(t,e)},updateBalance(t){var e;return(e=X._getClient())==null?void 0:e.updateBalance(t)},async sendTransaction(t){var e;return(e=X._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=X._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=X._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=X._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=X._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=X._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=X._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=X._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=X._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){De.wcUri=void 0,De.wcPairingExpiry=void 0,De.wcLinking=void 0,De.recentWallet=void 0,De.status="disconnected",ku.resetTransactions(),H.deleteWalletConnectDeepLink(),H.deleteRecentWallet()},resetUri(){De.wcUri=void 0,De.wcPairingExpiry=void 0,Ti=void 0},finalizeWcConnection(t){var r,s;const{wcLinking:e,recentWallet:n}=X.state;e&&H.setWalletConnectDeepLink(e),n&&H.setAppKitRecent(n),t&&Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:((s=(r=me.state.data)==null?void 0:r.wallet)==null?void 0:s.name)||"Unknown",view:me.state.view,walletRank:n==null?void 0:n.order}})},setWcBasic(t){De.wcBasic=t},setUri(t){De.wcUri=t,De.wcPairingExpiry=ee.getPairingExpiry()},setWcLinking(t){De.wcLinking=t},setWcError(t){De.wcError=t,De.buffering=!1},setRecentWallet(t){De.recentWallet=t},setBuffering(t){De.buffering=t},setStatus(t){De.status=t},setIsSwitchingConnection(t){De.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=X._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new ho("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},async disconnectConnector({id:t,namespace:e}){var n;try{await((n=X._getClient())==null?void 0:n.disconnectConnector({id:t,namespace:e}))}catch(r){throw new ho("Failed to disconnect connector","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const n=new Map(De.connections);n.set(e,t),De.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var i,o;const n=I.getAccountData(e),r=(o=(i=n==null?void 0:n.user)==null?void 0:i.accounts)==null?void 0:o.find(a=>a.type==="smartAccount"),s=r&&r.address.toLowerCase()===t.toLowerCase()&&Ua.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await X.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=V.getConnectorById(t.connectorId),s=t.connectorId===B.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)n&&await X.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await X.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=V.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===B.CONNECTOR_ID.AUTH,a=t.connectorId===B.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Ua.isSocialProvider(i)){const{address:d}=await Ua.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Oe.open({view:"ConnectingFarcaster"})},onConnect(){me.replace("ProfileWallets")}});c=d}else{const{address:d}=await Ua.connectEmail({closeModalOnConnect:r,onOpen(){Oe.open({view:"EmailLogin"})},onConnect(){me.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Ua.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(f){const h=f?"AllWallets":"ConnectingWalletConnect";Oe.state.open?me.push(h):Oe.open({view:h})},onConnect(){me.replace("ProfileWallets")}});c=d}else{const d=await X.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await X.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){var c;let i;const o=(c=I.getAccountData(n))==null?void 0:c.caipAddress;if(o){const{address:l}=At.parseCaipAddress(o);i=l}const a=hd.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const l=await X.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&l){const u=l.toLowerCase()!==i.toLowerCase();s==null||s({address:l,namespace:n,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const l=await X.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});l&&(s==null||s({address:l,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},X=nr(e8),eh={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Co(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let th;async function My(){if(!th){const{createPublicClient:t,http:e,defineChain:n}=await Ct(async()=>{const{createPublicClient:r,http:s,defineChain:i}=await import("./index.chunk.js");return{createPublicClient:r,http:s,defineChain:i}},__vite__mapDeps([2,3,1,4,5,0]));th={createPublicClient:t,http:e,defineChain:n}}return th}const Vp={getBlockchainApiRpcUrl(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()},async getViemChain(t){const{defineChain:e}=await My(),{chainId:n}=At.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(n)})},async createViemPublicClient(t){const{createPublicClient:e,http:n}=await My(),r=F.state.projectId,s=await Vp.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:n(Vp.getBlockchainApiRpcUrl(t.caipNetworkId,r))})}},Bg={async getMyTokensWithBalance(t){var a;const e=(a=I.getAccountData())==null?void 0:a.address,n=I.state.activeCaipNetwork,r=V.getConnectorId("eip155")===B.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=H.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===B.CHAIN.EVM&&r){const c=await this.getEIP155Balances(e,n);if(c)return this.filterLowQualityTokens(c)}const o=await be.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=eh.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await X.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await X.walletGetAssets({account:t,chainFilter:[s]});if(!eh.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>eh.createBalance(l,e.caipNetworkId));return H.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:n}){const r=await Vp.createViemPublicClient(n),{address:s}=At.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await r.multicall({contracts:[{address:e,functionName:"name",args:[],abi:Kl},{address:e,functionName:"symbol",args:[],abi:Kl},{address:e,functionName:"balanceOf",args:[s],abi:Kl},{address:e,functionName:"decimals",args:[],abi:Kl}]});return{name:i,symbol:o,decimals:c,balance:a&&c?Co(a,c):"0"}}},nh={adapters:{}},$C={state:nh,initialize(t){nh.adapters={...t}},get(t){return nh.adapters[t]}},pd={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},ln=Xe({providers:{...pd},providerIds:{...pd}}),Ye={state:ln,subscribeKey(t,e){return kt(ln,t,e)},subscribe(t){return Mt(ln,()=>{t(ln)})},subscribeProviders(t){return Mt(ln.providers,()=>t(ln.providers))},setProvider(t,e){t&&e&&(ln.providers[t]=vc(e))},getProvider(t){if(t)return ln.providers[t]},setProviderId(t,e){e&&(ln.providerIds[t]=e)},getProviderId(t){if(t)return ln.providerIds[t]},reset(){ln.providers={...pd},ln.providerIds={...pd}},resetChain(t){ln.providers[t]=void 0,ln.providerIds[t]=void 0}},Oo=Xe({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),mr={state:Oo,subscribe(t){return Mt(Oo,()=>t(Oo))},subscribeOpen(t){return kt(Oo,"open",t)},set(t){Object.assign(Oo,{...Oo,...t})}},t8={async getTokenList(t){var r;const e=await be.fetchSwapTokens({chainId:t});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=I.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(X==null?void 0:X.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await be.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await be.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=X.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await Bg.getMyTokensWithBalance(t);return I.setAccountProp("tokenBalance",e,I.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:kC(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]},async handleSwapError(t){var e,n;try{const r=t==null?void 0:t.cause;if(!(r!=null&&r.json))return;const s=await r.json(),i=(n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description;return i!=null&&i.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}},Ue=Xe({tokenBalances:[],loading:!1}),n8={state:Ue,subscribe(t){return Mt(Ue,()=>t(Ue))},subscribeKey(t,e){return kt(Ue,t,e)},setToken(t){t&&(Ue.token=vc(t))},setTokenAmount(t){Ue.sendTokenAmount=t},setReceiverAddress(t){Ue.receiverAddress=t},setReceiverProfileImageUrl(t){Ue.receiverProfileImageUrl=t},setReceiverProfileName(t){Ue.receiverProfileName=t},setNetworkBalanceInUsd(t){Ue.networkBalanceInUSD=t},setLoading(t){Ue.loading=t},getSdkEventProperties(t){var e,n;return{message:ee.parseError(t),isSmartAccount:nn(I.state.activeChain)===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((e=Ue.token)==null?void 0:e.symbol)||"",amount:Ue.sendTokenAmount??0,network:((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}},async sendToken(){var t;try{switch(Se.setLoading(!0),(t=I.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Se.sendEvmToken();return;case"solana":await Se.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(e){throw fr.isUserRejectedRequestError(e)?new Wo(e):e}finally{Se.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=I.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=nn(t);if(!Se.state.sendTokenAmount||!Se.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Se.state.token)throw new Error("A token is required");if((n=Se.state.token)!=null&&n.address){Ce.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Se.state.token.address,amount:Se.state.sendTokenAmount,network:((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}});const{hash:i}=await Se.sendERC20Token({receiverAddress:Se.state.receiverAddress,tokenAddress:Se.state.token.address,sendTokenAmount:Se.state.sendTokenAmount,decimals:Se.state.token.quantity.decimals});i&&(Ue.hash=i)}else{Ce.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Se.state.token.symbol||"",amount:Se.state.sendTokenAmount,network:((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}});const{hash:i}=await Se.sendNativeToken({receiverAddress:Se.state.receiverAddress,sendTokenAmount:Se.state.sendTokenAmount,decimals:Se.state.token.quantity.decimals});i&&(Ue.hash=i)}},async fetchTokenBalance(t){var o,a,c;Ue.loading=!0;const e=I.state.activeChain,n=(o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=I.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=((c=I.getAccountData(e))==null?void 0:c.caipAddress)??I.state.activeCaipAddress,i=s?ee.getPlainAddress(s):void 0;if(Ue.lastRetry&&!ee.isAllowedRetry(Ue.lastRetry,30*ke.ONE_SEC_MS))return Ue.loading=!1,[];try{if(i&&n&&r){const l=await Bg.getMyTokensWithBalance();return Ue.tokenBalances=l,Ue.lastRetry=void 0,l}}catch(l){Ue.lastRetry=Date.now(),t==null||t(l),Br.showError("Token Balance Unavailable")}finally{Ue.loading=!1}return[]},fetchNetworkBalance(){if(Ue.tokenBalances.length===0)return;const t=t8.mapBalancesToSwapTokens(Ue.tokenBalances);if(!t)return;const e=t.find(n=>n.address===kC());e&&(Ue.networkBalanceInUSD=e?OS.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var o,a,c,l;me.pushTransactionStack({});const e=t.receiverAddress,n=(o=I.getAccountData())==null?void 0:o.address,r=X.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i=await X.sendTransaction({chainNamespace:B.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)});return Ce.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:nn("eip155")===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=Se.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=I.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||"",hash:i||""}}),(l=X._getClient())==null||l.updateBalance("eip155"),Se.resetSend(),{hash:i}},async sendERC20Token(t){var r,s,i;me.pushTransactionStack({onSuccess(){me.replace("Account")}});const e=X.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),n=(r=I.getAccountData())==null?void 0:r.address;if(n&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const o=ee.getPlainAddress(t.tokenAddress);if(!o)throw new Error("SendController:sendERC20Token - tokenAddress is required");const a=await X.writeContract({fromAddress:n,tokenAddress:o,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:$S.getERC20Abi(o),chainNamespace:B.CHAIN.EVM});return Ce.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:nn("eip155")===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((s=Se.state.token)==null?void 0:s.symbol)||"",amount:t.sendTokenAmount,network:((i=I.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||"",hash:a||""}}),Se.resetSend(),{hash:a}}return{hash:void 0}},async sendSolanaToken(){var n,r,s;if(!Se.state.sendTokenAmount||!Se.state.receiverAddress)throw new Error("An amount and receiver address are required");me.pushTransactionStack({onSuccess(){me.replace("Account")}});let t;Se.state.token&&Se.state.token.address!==ke.SOLANA_NATIVE_TOKEN_ADDRESS&&(ee.isCaipAddress(Se.state.token.address)?t=ee.getPlainAddress(Se.state.token.address):t=Se.state.token.address);const e=await X.sendTransaction({chainNamespace:"solana",tokenMint:t,to:Se.state.receiverAddress,value:Se.state.sendTokenAmount});e&&(Ue.hash=e),(n=X._getClient())==null||n.updateBalance("solana"),Ce.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:((r=Se.state.token)==null?void 0:r.symbol)||"",amount:Se.state.sendTokenAmount,network:((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||"",hash:e||""}}),Se.resetSend()},resetSend(){Ue.token=void 0,Ue.sendTokenAmount=void 0,Ue.receiverAddress=void 0,Ue.receiverProfileImageUrl=void 0,Ue.receiverProfileName=void 0,Ue.loading=!1,Ue.tokenBalances=[]}},Se=nr(n8),rh={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Xl={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},te=Xe({chains:vS(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),DC={state:te,subscribe(t){return Mt(te,()=>{t(te)})},subscribeKey(t,e){return kt(te,t,e)},subscribeAccountStateProp(t,e,n){var s;const r=n||te.activeChain;return r?kt(((s=te.chains.get(r))==null?void 0:s.accountState)||{},t,e):()=>{}},subscribeChainProp(t,e,n){let r;return Mt(te.chains,()=>{var i;const s=n||te.activeChain;if(s){const o=(i=te.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=H.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=F.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(te.noAdapters=!0),te.noAdapters||(te.activeChain=a==null?void 0:a.namespace,te.activeCaipNetwork=i,I.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),te.activeChain&&mr.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(g=>g.chainNamespace===u),f=H.getPreferredAccountTypes()||{},h={...F.state.defaultAccountTypes,...f};I.state.chains.set(u,{namespace:u,networkState:Xe({...Xl,caipNetwork:d==null?void 0:d[0]}),accountState:Xe({...rh,preferredAccountType:h[u]}),caipNetworks:d??[],...n}),I.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(te.activeChain===t){const r=Array.from(te.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&I.setActiveCaipNetwork(s)}}te.chains.delete(t)},addAdapter(t,{connectionControllerClient:e},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");te.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Xl,caipNetwork:n[0]},accountState:{...rh},caipNetworks:n,connectionControllerClient:e}),I.setRequestedCaipNetworks((n==null?void 0:n.filter(r=>r.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=te.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),te.chains.set(t.chainNamespace,{...e,caipNetworks:r}),I.setRequestedCaipNetworks(r,t.chainNamespace),V.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=te.chains.get(t);if(n){const o=((r=te.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&I.setActiveCaipNetwork(n.caipNetworks[0]),te.chains.set(t,{...n,caipNetworks:a}),I.setRequestedCaipNetworks(a||[],t),a.length===0&&V.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=te.chains.get(t);n&&(n.networkState={...n.networkState||Xl,...e},te.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=te.chains.get(t);if(r){const s={...r.accountState||rh,...e};te.chains.set(t,{...r,accountState:s}),(te.chains.size===1||te.activeChain===t)&&e.caipAddress&&(te.activeCaipAddress=e.caipAddress)}},setChainNetworkData(t,e){if(!t)return;const n=te.chains.get(t);if(n){const r={...n.networkState||Xl,...e};te.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){I.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;te.activeChain=t;const e=t?te.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(te.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,te.activeCaipNetwork=n,I.setChainNetworkData(t,{caipNetwork:n}),H.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),mr.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var i,o;if(!t)return;const e=te.activeChain===t.chainNamespace;e||I.setIsSwitchingNamespace(!0);const n=te.chains.get(t.chainNamespace);te.activeChain=t.chainNamespace,te.activeCaipNetwork=t,I.setChainNetworkData(t.chainNamespace,{caipNetwork:t});let r=(i=n==null?void 0:n.accountState)==null?void 0:i.address;if(r)te.activeCaipAddress=`${t.chainNamespace}:${t.id}:${r}`;else if(e&&te.activeCaipAddress){const{address:a}=At.parseCaipAddress(te.activeCaipAddress);r=a,te.activeCaipAddress=`${t.caipNetworkId}:${r}`}else te.activeCaipAddress=void 0;I.setChainAccountData(t.chainNamespace,{address:r,caipAddress:te.activeCaipAddress}),Se.resetSend(),mr.set({activeChain:te.activeChain,selectedNetworkId:(o=te.activeCaipNetwork)==null?void 0:o.caipNetworkId}),H.setActiveCaipNetworkId(t.caipNetworkId),!I.checkIfSupportedNetwork(t.chainNamespace)&&F.state.enableNetworkSwitch&&!F.state.allowUnsupportedChain&&!X.state.wcBasic&&I.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=te.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==I.state.activeChain,n=(s=I.getNetworkData(t))==null?void 0:s.caipNetwork,r=I.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await I.switchActiveNetwork(r)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){var o;const n=I.state.activeChain;if(!n)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=Ye.getProviderId(te.activeChain)==="AUTH",s=(o=I.getAccountData(n))==null?void 0:o.address,i=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t.chainNamespace);try{if(s&&t.chainNamespace===n||r&&i){const a=$C.get(t.chainNamespace);if(!a)throw new Error("Adapter not found");await a.switchNetwork({caipNetwork:t})}I.setActiveCaipNetwork(t)}catch(a){if(e)throw a}Ce.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})},getConnectionControllerClient(t){const e=t||te.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=te.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){var r;const n=(r=te.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=te.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ee.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return te.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=I.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){I.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=I.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));V.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return te.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=I.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=te.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:te.activeCaipNetwork},getActiveCaipAddress(){return te.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=te.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},setApprovedCaipNetworksData(t,e){I.setAdapterNetworkState(t,e)},checkIfSupportedNetwork(t,e){var s;const n=e||((s=te.activeCaipNetwork)==null?void 0:s.caipNetworkId),r=I.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){if(!te.activeChain)return!0;const e=I.getRequestedCaipNetworks(te.activeChain);return e==null?void 0:e.some(n=>n.id===t)},checkIfSmartAccountEnabled(){var r,s;const t=Cc.caipNetworkIdToNumber((r=te.activeCaipNetwork)==null?void 0:r.caipNetworkId);if(!te.activeChain||!t)return!1;const n=((s=vt.get(le.SMART_ACCOUNT_ENABLED_NETWORKS))==null?void 0:s.split(","))||[];return!!(n!=null&&n.includes(t.toString()))},showUnsupportedChainUI(){Oe.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=te.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ke.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){I.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){var s,i;const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=(i=(s=I.state.chains.get(e))==null?void 0:s.accountState)==null?void 0:i.preferredAccountType,r=F.state.defaultAccountTypes[e];te.activeCaipAddress=void 0,I.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),V.removeConnectorId(e)},setIsSwitchingNamespace(t){te.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(te.chains.forEach(s=>{B.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=te.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var n;const e=t||te.activeChain;if(e)return(n=I.state.chains.get(e))==null?void 0:n.accountState},getNetworkData(t){var n;const e=t||te.activeChain;if(e)return(n=I.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=I.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id.toString()===(e==null?void 0:e.toString()));return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=V.state.filterByNamespace;return(t?[te.chains.get(t)]:Array.from(te.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?I.getRequestedCaipNetworks(t):I.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return DC.getCaipNetworks(e).find(n=>n.id.toString()===t.toString()||n.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){te.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return te.lastConnectedSIWECaipNetwork},async fetchTokenBalance(t){var o,a;const e=I.getAccountData();if(!e)return[];const n=(o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=I.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=I.state.activeCaipAddress,i=s?ee.getPlainAddress(s):void 0;if(I.setAccountProp("balanceLoading",!0,r),e.lastRetry&&!ee.isAllowedRetry(e.lastRetry,30*ke.ONE_SEC_MS))return I.setAccountProp("balanceLoading",!1,r),[];try{if(i&&n&&r){const c=await Bg.getMyTokensWithBalance();return I.setAccountProp("tokenBalance",c,r),I.setAccountProp("lastRetry",void 0,r),I.setAccountProp("balanceLoading",!1,r),c}}catch(c){I.setAccountProp("lastRetry",Date.now(),r),t==null||t(c),Br.showError("Token Balance Unavailable")}finally{I.setAccountProp("balanceLoading",!1,r)}return[]},isCaipNetworkDisabled(t){var c;const e=t.chainNamespace,n=!!((c=I.getAccountData(e))!=null&&c.caipAddress),r=I.getAllApprovedCaipNetworkIds(),s=I.getNetworkProp("supportsAllNetworks",e)!==!1,i=V.getConnectorId(e),o=V.getAuthConnector(),a=i===B.CONNECTOR_ID.AUTH&&o;return!n||s||a?!1:!(r!=null&&r.includes(t.caipNetworkId))}},I=nr(DC),r8={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){var f,h;const n=I.state.activeCaipNetwork,r=I.state.activeChain,s=me.state.data;if(t.id===(n==null?void 0:n.id))return;const o=!!((f=I.getAccountData(r))!=null&&f.address),a=!!((h=I.getAccountData(t.chainNamespace))!=null&&h.address),c=t.chainNamespace!==r,u=V.getConnectorId(r)===B.CONNECTOR_ID.AUTH,d=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(g=>g===t.chainNamespace);e||u&&d?me.push("SwitchNetwork",{...s,network:t}):o&&c&&!a?me.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):me.push("SwitchNetwork",{...s,network:t})}},un=Xe({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),s8={state:un,subscribe(t){return Mt(un,()=>t(un))},subscribeKey(t,e){return kt(un,t,e)},async open(t){var o,a;const e=t==null?void 0:t.namespace,n=I.state.activeChain,r=e&&e!==n,s=(o=I.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress,i=I.state.noAdapters;if(X.state.wcBasic?de.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await de.prefetch(),V.setFilterByNamespace(t==null?void 0:t.namespace),Oe.setLoading(!0,e),e&&r){const c=((a=I.getNetworkData(e))==null?void 0:a.caipNetwork)||I.getRequestedCaipNetworks(e)[0];c&&(i?(await I.switchActiveNetwork(c),me.push("ConnectingWalletConnectBasic")):r8.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0}))}else F.state.manualWCControl||i&&!s?ee.isMobile()?me.reset("AllWallets"):me.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?me.reset(t.view,t.data):s?me.reset("Account"):me.reset("Connect");un.open=!0,mr.set({open:!0}),Ce.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=F.state.enableEmbedded,e=!!I.state.activeCaipAddress;un.open&&Ce.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),un.open=!1,me.reset("Connect"),Oe.clearLoading(),t?e?me.replace("Account"):me.push("Connect"):mr.set({open:!1}),X.resetUri()},setLoading(t,e){e&&un.loadingNamespaceMap.set(e,t),un.loading=t,mr.set({loading:t})},clearLoading(){un.loadingNamespaceMap.clear(),un.loading=!1,mr.set({loading:!1})},shake(){un.shake||(un.shake=!0,setTimeout(()=>{un.shake=!1},500))}},Oe=nr(s8),lc={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Kp={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},i8={providers:FE,selectedProvider:null,error:null,purchaseCurrency:lc,paymentCurrency:Kp,purchaseCurrencies:[lc],paymentCurrencies:[],quotesLoading:!1},Be=Xe(i8),o8={state:Be,subscribe(t){return Mt(Be,()=>t(Be))},subscribeKey(t,e){return kt(Be,t,e)},setSelectedProvider(t){var e,n;if(t&&t.name==="meld"){const r=I.state.activeChain,s=r===B.CHAIN.SOLANA?"SOL":"USDC",i=r?((n=(e=I.state.chains.get(r))==null?void 0:e.accountState)==null?void 0:n.address)??"":"",o=new URL(t.url);o.searchParams.append("publicKey",US),o.searchParams.append("destinationCurrencyCode",s),o.searchParams.append("walletAddress",i),o.searchParams.append("externalCustomerId",F.state.projectId),Be.selectedProvider={...t,url:o.toString()}}else Be.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=FE.filter(r=>e.includes(r.name));Be.providers=n}else Be.providers=[]},setPurchaseCurrency(t){Be.purchaseCurrency=t},setPaymentCurrency(t){Be.paymentCurrency=t},setPurchaseAmount(t){Gp.state.purchaseAmount=t},setPaymentAmount(t){Gp.state.paymentAmount=t},async getAvailableCurrencies(){const t=await be.getOnrampOptions();Be.purchaseCurrencies=t.purchaseCurrencies,Be.paymentCurrencies=t.paymentCurrencies,Be.paymentCurrency=t.paymentCurrencies[0]||Kp,Be.purchaseCurrency=t.purchaseCurrencies[0]||lc,await de.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await de.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Be.quotesLoading=!0;try{const n=await be.getOnrampQuote({purchaseCurrency:Be.purchaseCurrency,paymentCurrency:Be.paymentCurrency,amount:((t=Be.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Be.purchaseCurrency)==null?void 0:e.symbol});return Be.quotesLoading=!1,Be.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Be.error=n.message,Be.quotesLoading=!1,null}finally{Be.quotesLoading=!1}},resetState(){Be.selectedProvider=null,Be.error=null,Be.purchaseCurrency=lc,Be.paymentCurrency=Kp,Be.purchaseCurrencies=[lc],Be.paymentCurrencies=[],Be.paymentAmount=void 0,Be.purchaseAmount=void 0,Be.quotesLoading=!1}},Gp=nr(o8);var Lg={exports:{}},Qo=typeof Reflect=="object"?Reflect:null,Fy=Qo&&typeof Qo.apply=="function"?Qo.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},$u;Qo&&typeof Qo.ownKeys=="function"?$u=Qo.ownKeys:Object.getOwnPropertySymbols?$u=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:$u=function(e){return Object.getOwnPropertyNames(e)};function a8(t){console&&console.warn&&console.warn(t)}var UC=Number.isNaN||function(e){return e!==e};function Ke(){Ke.init.call(this)}Lg.exports=Ke;Lg.exports.once=d8;Ke.EventEmitter=Ke;Ke.prototype._events=void 0;Ke.prototype._eventsCount=0;Ke.prototype._maxListeners=void 0;var jy=10;function of(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ke,"defaultMaxListeners",{enumerable:!0,get:function(){return jy},set:function(t){if(typeof t!="number"||t<0||UC(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");jy=t}});Ke.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ke.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||UC(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function BC(t){return t._maxListeners===void 0?Ke.defaultMaxListeners:t._maxListeners}Ke.prototype.getMaxListeners=function(){return BC(this)};Ke.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")Fy(c,this,n);else for(var l=c.length,u=zC(c,l),r=0;r<l;++r)Fy(u[r],this,n);return!0};function LC(t,e,n,r){var s,i,o;if(of(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=BC(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,a8(a)}return t}Ke.prototype.addListener=function(e,n){return LC(this,e,n,!1)};Ke.prototype.on=Ke.prototype.addListener;Ke.prototype.prependListener=function(e,n){return LC(this,e,n,!0)};function c8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function MC(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=c8.bind(r);return s.listener=n,r.wrapFn=s,s}Ke.prototype.once=function(e,n){return of(n),this.on(e,MC(this,e,n)),this};Ke.prototype.prependOnceListener=function(e,n){return of(n),this.prependListener(e,MC(this,e,n)),this};Ke.prototype.removeListener=function(e,n){var r,s,i,o,a;if(of(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():l8(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Ke.prototype.off=Ke.prototype.removeListener;Ke.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function FC(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?u8(s):zC(s,s.length)}Ke.prototype.listeners=function(e){return FC(this,e,!0)};Ke.prototype.rawListeners=function(e){return FC(this,e,!1)};Ke.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):jC.call(t,e)};Ke.prototype.listenerCount=jC;function jC(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ke.prototype.eventNames=function(){return this._eventsCount>0?$u(this._events):[]};function zC(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function l8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function u8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function d8(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}HC(t,e,i,{once:!0}),e!=="error"&&f8(t,s,{once:!0})})}function f8(t,e,n){typeof t.on=="function"&&HC(t,"error",e,n)}function HC(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var rr=Lg.exports;const Mg=_a(rr);var Z={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yp=function(t,e){return Yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Yp(t,e)};function h8(t,e){Yp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Zp=function(){return Zp=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zp.apply(this,arguments)};function p8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function g8(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function m8(t,e){return function(n,r){e(n,r,t)}}function y8(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function b8(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function w8(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function E8(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function v8(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Jp(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qC(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function C8(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(qC(arguments[e]));return t}function _8(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function ol(t){return this instanceof ol?(this.v=t,this):new ol(t)}function A8(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(g,p){i.push([f,h,g,p])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(g){d(i[0][3],g)}}function c(f){f.value instanceof ol?Promise.resolve(f.value.v).then(l,u):d(i[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function I8(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:ol(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function S8(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jp=="function"?Jp(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function x8(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function T8(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function N8(t){return t&&t.__esModule?t:{default:t}}function O8(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function P8(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const R8=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Zp},__asyncDelegator:I8,__asyncGenerator:A8,__asyncValues:S8,__await:ol,__awaiter:b8,__classPrivateFieldGet:O8,__classPrivateFieldSet:P8,__createBinding:E8,__decorate:g8,__exportStar:v8,__extends:h8,__generator:w8,__importDefault:N8,__importStar:T8,__makeTemplateObject:x8,__metadata:y8,__param:m8,__read:qC,__rest:p8,__spread:C8,__spreadArrays:_8,__values:Jp},Symbol.toStringTag,{value:"Module"})),af=UE(R8);var sh={},Ba={},zy;function k8(){if(zy)return Ba;zy=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Ba.delay=t,Ba}var Ni={},ih={},Oi={},Hy;function $8(){return Hy||(Hy=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.ONE_THOUSAND=Oi.ONE_HUNDRED=void 0,Oi.ONE_HUNDRED=100,Oi.ONE_THOUSAND=1e3),Oi}var oh={},qy;function D8(){return qy||(qy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(oh)),oh}var Wy;function WC(){return Wy||(Wy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=af;e.__exportStar($8(),t),e.__exportStar(D8(),t)}(ih)),ih}var Vy;function U8(){if(Vy)return Ni;Vy=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.fromMiliseconds=Ni.toMiliseconds=void 0;const t=WC();function e(r){return r*t.ONE_THOUSAND}Ni.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ni.fromMiliseconds=n,Ni}var Ky;function B8(){return Ky||(Ky=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=af;e.__exportStar(k8(),t),e.__exportStar(U8(),t)}(sh)),sh}var Po={},Gy;function L8(){if(Gy)return Po;Gy=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Po.Watch=t,Po.default=t,Po}var ah={},La={},Yy;function M8(){if(Yy)return La;Yy=1,Object.defineProperty(La,"__esModule",{value:!0}),La.IWatch=void 0;class t{}return La.IWatch=t,La}var Zy;function F8(){return Zy||(Zy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),af.__exportStar(M8(),t)}(ah)),ah}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=af;e.__exportStar(B8(),t),e.__exportStar(L8(),t),e.__exportStar(F8(),t),e.__exportStar(WC(),t)})(Z);class _o{}let j8=class extends _o{constructor(e){super()}};const Jy=Z.FIVE_SECONDS,Ao={pulse:"heartbeat_pulse"};let z8=class VC extends j8{constructor(e){super(e),this.events=new rr.EventEmitter,this.interval=Jy,this.interval=(e==null?void 0:e.interval)||Jy}static async init(e){const n=new VC(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Z.toMiliseconds(this.interval))}pulse(){this.events.emit(Ao.pulse)}};const H8=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,q8=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,W8=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function V8(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){K8(t);return}return e}function K8(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ql(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!W8.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(H8.test(t)||q8.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,V8)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function G8(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Tt(t,...e){try{return G8(t(...e))}catch(n){return Promise.reject(n)}}function Y8(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Z8(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Du(t){if(Y8(t))return String(t);if(Z8(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Du(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Xp="base64:";function J8(t){return typeof t=="string"?t:Xp+eR(t)}function X8(t){return typeof t!="string"||!t.startsWith(Xp)?t:Q8(t.slice(Xp.length))}function Q8(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function eR(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function hn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function tR(...t){return hn(t.join(":"))}function eu(t){return t=hn(t),t?t+":":""}function nR(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function rR(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const sR="memory",iR=()=>{const t=new Map;return{name:sR,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function oR(t={}){const e={mounts:{"":t.driver||iR()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=hn(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Xy(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const f=new Map,h=g=>{let p=f.get(g.base);return p||(p={driver:g.driver,base:g.base,items:[]},f.set(g.base,p)),p};for(const g of l){const p=typeof g=="string",m=hn(p?g:g.key),w=p?void 0:g.value,_=p||!g.options?u:{...u,...g.options},b=n(m);h(b).items.push({key:m,value:w,relativeKey:b.relativeKey,options:_})}return Promise.all([...f.values()].map(g=>d(g))).then(g=>g.flat())},c={hasItem(l,u={}){l=hn(l);const{relativeKey:d,driver:f}=n(l);return Tt(f.hasItem,d,u)},getItem(l,u={}){l=hn(l);const{relativeKey:d,driver:f}=n(l);return Tt(f.getItem,d,u).then(h=>Ql(h))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Tt(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),u).then(f=>f.map(h=>({key:tR(d.base,h.key),value:Ql(h.value)}))):Promise.all(d.items.map(f=>Tt(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:Ql(h)})))))},getItemRaw(l,u={}){l=hn(l);const{relativeKey:d,driver:f}=n(l);return f.getItemRaw?Tt(f.getItemRaw,d,u):Tt(f.getItem,d,u).then(h=>X8(h))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=hn(l);const{relativeKey:f,driver:h}=n(l);h.setItem&&(await Tt(h.setItem,f,Du(u),d),h.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Tt(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:Du(f.value),options:f.options})),u);d.driver.setItem&&await Promise.all(d.items.map(f=>Tt(d.driver.setItem,f.relativeKey,Du(f.value),f.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=hn(l);const{relativeKey:f,driver:h}=n(l);if(h.setItemRaw)await Tt(h.setItemRaw,f,u,d);else if(h.setItem)await Tt(h.setItem,f,J8(u),d);else return;h.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=hn(l);const{relativeKey:d,driver:f}=n(l);f.removeItem&&(await Tt(f.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Tt(f.removeItem,d+"$",u),f.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=hn(l);const{relativeKey:d,driver:f}=n(l),h=Object.create(null);if(f.getMeta&&Object.assign(h,await Tt(f.getMeta,d,u)),!u.nativeOnly){const g=await Tt(f.getItem,d+"$",u).then(p=>Ql(p));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(h,g))}return h},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=eu(l);const d=r(l,!0);let f=[];const h=[];let g=!0;for(const w of d){(m=w.driver.flags)!=null&&m.maxDepth||(g=!1);const _=await Tt(w.driver.getKeys,w.relativeBase,u);for(const b of _){const A=w.mountpoint+hn(b);f.some(C=>A.startsWith(C))||h.push(A)}f=[w.mountpoint,...f.filter(b=>!b.startsWith(w.mountpoint))]}const p=u.maxDepth!==void 0&&!g;return h.filter(w=>(!p||nR(w,u.maxDepth))&&rR(w,l))},async clear(l,u={}){l=eu(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Tt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(f.map(h=>d.driver.removeItem(h,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Qy(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=eu(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Xy(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,f;l=eu(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((f=(d=e.unwatch)[l])==null||f.call(d),delete e.unwatch[l]),u&&await Qy(e.mounts[l]),e.mountpoints=e.mountpoints.filter(h=>h!==l),delete e.mounts[l])},getMount(l=""){l=hn(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=hn(l),r(l,u.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Xy(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function Qy(t){typeof t.dispose=="function"&&await Tt(t.dispose)}function Io(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function KC(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Io(n);return(s,i)=>r.then(o=>i(o.transaction(e,s).objectStore(e)))}let ch;function Ol(){return ch||(ch=KC("keyval-store","keyval")),ch}function eb(t,e=Ol()){return e("readonly",n=>Io(n.get(t)))}function aR(t,e,n=Ol()){return n("readwrite",r=>(r.put(e,t),Io(r.transaction)))}function cR(t,e=Ol()){return e("readwrite",n=>(n.delete(t),Io(n.transaction)))}function lR(t=Ol()){return t("readwrite",e=>(e.clear(),Io(e.transaction)))}function uR(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Io(t.transaction)}function dR(t=Ol()){return t("readonly",e=>{if(e.getAllKeys)return Io(e.getAllKeys());const n=[];return uR(e,r=>n.push(r.key)).then(()=>n)})}const fR="idb-keyval";var hR=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=KC(t.dbName,t.storeName)),{name:fR,options:t,async hasItem(s){return!(typeof await eb(n(s),r)>"u")},async getItem(s){return await eb(n(s),r)??null},setItem(s,i){return aR(n(s),i,r)},removeItem(s){return cR(n(s),r)},getKeys(){return dR(r)},clear(){return lR(r)}}};const pR="WALLET_CONNECT_V2_INDEXED_DB",gR="keyvaluestorage";let mR=class{constructor(){this.indexedDb=oR({driver:hR({dbName:pR,storeName:gR})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Ln(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uu={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof lh<"u"&&lh.localStorage?Uu.exports=lh.localStorage:typeof window<"u"&&window.localStorage?Uu.exports=window.localStorage:Uu.exports=new e})();function yR(t){var e;return[t[0],co((e=t[1])!=null?e:"")]}let bR=class{constructor(){this.localStorage=Uu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(yR)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return co(n)}async setItem(e,n){this.localStorage.setItem(e,Ln(n))}async removeItem(e){this.localStorage.removeItem(e)}};const wR="wc_storage_version",tb=1,ER=async(t,e,n)=>{const r=wR,s=await e.getItem(r);if(s&&s>=tb){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,tb),n(e),vR(t,o)},vR=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let CR=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new bR;this.storage=e;try{const n=new mR;ER(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function _R(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function GC(t,...e){if(!_R(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function AR(t,e){GC(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ro=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function IR(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function YC(t){return typeof t=="string"&&(t=IR(t)),GC(t),t}let SR=class{clone(){return this._cloneInto()}};function xR(t){const e=r=>t().update(YC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ZC(t=32){if(Ro&&typeof Ro.getRandomValues=="function")return Ro.getRandomValues(new Uint8Array(t));if(Ro&&typeof Ro.randomBytes=="function")return Ro.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function TR(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let NR=class extends SR{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=uh(this.buffer)}update(e){nb(this);const{view:n,buffer:r,blockLen:s}=this;e=YC(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=uh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){nb(this),AR(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;TR(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=uh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const tu=BigInt(2**32-1),Qp=BigInt(32);function JC(t,e=!1){return e?{h:Number(t&tu),l:Number(t>>Qp&tu)}:{h:Number(t>>Qp&tu)|0,l:Number(t&tu)|0}}function OR(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=JC(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const PR=(t,e)=>BigInt(t>>>0)<<Qp|BigInt(e>>>0),RR=(t,e,n)=>t>>>n,kR=(t,e,n)=>t<<32-n|e>>>n,$R=(t,e,n)=>t>>>n|e<<32-n,DR=(t,e,n)=>t<<32-n|e>>>n,UR=(t,e,n)=>t<<64-n|e>>>n-32,BR=(t,e,n)=>t>>>n-32|e<<64-n,LR=(t,e)=>e,MR=(t,e)=>t,FR=(t,e,n)=>t<<n|e>>>32-n,jR=(t,e,n)=>e<<n|t>>>32-n,zR=(t,e,n)=>e<<n-32|t>>>64-n,HR=(t,e,n)=>t<<n-32|e>>>64-n;function qR(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const WR=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),VR=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,KR=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),GR=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,YR=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),ZR=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ie={fromBig:JC,split:OR,toBig:PR,shrSH:RR,shrSL:kR,rotrSH:$R,rotrSL:DR,rotrBH:UR,rotrBL:BR,rotr32H:LR,rotr32L:MR,rotlSH:FR,rotlSL:jR,rotlBH:zR,rotlBL:HR,add:qR,add3L:WR,add3H:VR,add4L:KR,add4H:GR,add5H:ZR,add5L:YR},[JR,XR]=Ie.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ds=new Uint32Array(80),Us=new Uint32Array(80);let QR=class extends NR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:g,Hh:p,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,g,p,m]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,g,p,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,n){for(let b=0;b<16;b++,n+=4)Ds[b]=e.getUint32(n),Us[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const A=Ds[b-15]|0,C=Us[b-15]|0,S=Ie.rotrSH(A,C,1)^Ie.rotrSH(A,C,8)^Ie.shrSH(A,C,7),x=Ie.rotrSL(A,C,1)^Ie.rotrSL(A,C,8)^Ie.shrSL(A,C,7),$=Ds[b-2]|0,O=Us[b-2]|0,L=Ie.rotrSH($,O,19)^Ie.rotrBH($,O,61)^Ie.shrSH($,O,6),M=Ie.rotrSL($,O,19)^Ie.rotrBL($,O,61)^Ie.shrSL($,O,6),U=Ie.add4L(x,M,Us[b-7],Us[b-16]),P=Ie.add4H(U,S,L,Ds[b-7],Ds[b-16]);Ds[b]=P|0,Us[b]=U|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:g,Gh:p,Gl:m,Hh:w,Hl:_}=this;for(let b=0;b<80;b++){const A=Ie.rotrSH(d,f,14)^Ie.rotrSH(d,f,18)^Ie.rotrBH(d,f,41),C=Ie.rotrSL(d,f,14)^Ie.rotrSL(d,f,18)^Ie.rotrBL(d,f,41),S=d&h^~d&p,x=f&g^~f&m,$=Ie.add5L(_,C,x,XR[b],Us[b]),O=Ie.add5H($,w,A,S,JR[b],Ds[b]),L=$|0,M=Ie.rotrSH(r,s,28)^Ie.rotrBH(r,s,34)^Ie.rotrBH(r,s,39),U=Ie.rotrSL(r,s,28)^Ie.rotrBL(r,s,34)^Ie.rotrBL(r,s,39),P=r&i^r&a^i&a,D=s&o^s&c^o&c;w=p|0,_=m|0,p=h|0,m=g|0,h=d|0,g=f|0,{h:d,l:f}=Ie.add(l|0,u|0,O|0,L|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const y=Ie.add3L(L,U,D);r=Ie.add3H(y,O,M,P),s=y|0}({h:r,l:s}=Ie.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ie.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ie.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ie.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=Ie.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:g}=Ie.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:m}=Ie.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:w,l:_}=Ie.add(this.Hh|0,this.Hl|0,w|0,_|0),this.set(r,s,i,o,a,c,l,u,d,f,h,g,p,m,w,_)}roundClean(){Ds.fill(0),Us.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const ek=xR(()=>new QR);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fg=BigInt(0),XC=BigInt(1),tk=BigInt(2);function jg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zg(t){if(!jg(t))throw new Error("Uint8Array expected")}function dh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const nk=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hg(t){zg(t);let e="";for(let n=0;n<t.length;n++)e+=nk[t[n]];return e}function QC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Fg:BigInt("0x"+t)}const Xr={_0:48,_9:57,A:65,F:70,a:97,f:102};function rb(t){if(t>=Xr._0&&t<=Xr._9)return t-Xr._0;if(t>=Xr.A&&t<=Xr.F)return t-(Xr.A-10);if(t>=Xr.a&&t<=Xr.f)return t-(Xr.a-10)}function e_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=rb(t.charCodeAt(i)),a=rb(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function rk(t){return QC(Hg(t))}function Bu(t){return zg(t),QC(Hg(Uint8Array.from(t).reverse()))}function t_(t,e){return e_(t.toString(16).padStart(e*2,"0"))}function e0(t,e){return t_(t,e).reverse()}function Qr(t,e,n){let r;if(typeof e=="string")try{r=e_(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(jg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function sb(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];zg(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const fh=t=>typeof t=="bigint"&&Fg<=t;function sk(t,e,n){return fh(t)&&fh(e)&&fh(n)&&e<=t&&t<n}function Ma(t,e,n,r){if(!sk(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ik(t){let e;for(e=0;t>Fg;t>>=XC,e+=1);return e}const ok=t=>(tk<<BigInt(t-1))-XC,ak={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||jg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function qg(t,e,n={}){const r=(s,i,o)=>{const a=ak[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function ib(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Rt=BigInt(0),ut=BigInt(1),Fi=BigInt(2),ck=BigInt(3),t0=BigInt(4),ob=BigInt(5),ab=BigInt(8);function _t(t,e){const n=t%e;return n>=Rt?n:e+n}function lk(t,e,n){if(e<Rt)throw new Error("invalid exponent, negatives unsupported");if(n<=Rt)throw new Error("invalid modulus");if(n===ut)return Rt;let r=ut;for(;e>Rt;)e&ut&&(r=r*t%n),t=t*t%n,e>>=ut;return r}function Sr(t,e,n){let r=t;for(;e-- >Rt;)r*=r,r%=n;return r}function cb(t,e){if(t===Rt)throw new Error("invert: expected non-zero number");if(e<=Rt)throw new Error("invert: expected positive modulus, got "+e);let n=_t(t,e),r=e,s=Rt,i=ut;for(;n!==Rt;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ut)throw new Error("invert: does not exist");return _t(s,e)}function uk(t){const e=(t-ut)/Fi;let n,r,s;for(n=t-ut,r=0;n%Fi===Rt;n/=Fi,r++);for(s=Fi;s<t&&lk(s,e,t)!==t-ut;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ut)/t0;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ut)/Fi;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let g=o.sqr(d);f<c&&!o.eql(g,o.ONE);f++)g=o.sqr(g);const h=o.pow(l,ut<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function dk(t){if(t%t0===ck){const e=(t+ut)/t0;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%ab===ob){const e=(t-ob)/ab;return function(n,r){const s=n.mul(r,Fi),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Fi),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return uk(t)}const fk=(t,e)=>(_t(t,e)&ut)===ut,hk=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pk(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=hk.reduce((r,s)=>(r[s]="function",r),e);return qg(t,n)}function gk(t,e,n){if(n<Rt)throw new Error("invalid exponent, negatives unsupported");if(n===Rt)return t.ONE;if(n===ut)return e;let r=t.ONE,s=e;for(;n>Rt;)n&ut&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ut;return r}function mk(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function n_(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function r_(t,e,n=!1,r={}){if(t<=Rt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=n_(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:ok(s),ZERO:Rt,ONE:ut,create:c=>_t(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Rt<=c&&c<t},is0:c=>c===Rt,isOdd:c=>(c&ut)===ut,neg:c=>_t(-c,t),eql:(c,l)=>c===l,sqr:c=>_t(c*c,t),add:(c,l)=>_t(c+l,t),sub:(c,l)=>_t(c-l,t),mul:(c,l)=>_t(c*l,t),pow:(c,l)=>gk(a,c,l),div:(c,l)=>_t(c*cb(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>cb(c,t),sqrt:r.sqrt||(c=>(o||(o=dk(t)),o(a,c))),invertBatch:c=>mk(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?e0(c,i):t_(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Bu(c):rk(c)}});return Object.freeze(a)}const lb=BigInt(0),nu=BigInt(1);function hh(t,e){const n=e.negate();return t?n:e}function s_(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ph(t,e){s_(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function yk(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function bk(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const gh=new WeakMap,i_=new WeakMap;function mh(t){return i_.get(t)||1}function wk(t,e){return{constTimeNegate:hh,hasPrecomputes(n){return mh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>lb;)r&nu&&(s=s.add(i)),i=i.double(),r>>=nu;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=ph(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=ph(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let f=0;f<i;f++){const h=f*o;let g=Number(s&l);s>>=d,g>o&&(g-=u,s+=nu);const p=h,m=h+Math.abs(g)-1,w=f%2!==0,_=g<0;g===0?c=c.add(hh(w,r[p])):a=a.add(hh(_,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=ph(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(s===lb)break;let h=Number(s&c);if(s>>=u,h>a&&(h-=l,s+=nu),h===0)continue;let g=r[f+Math.abs(h)-1];h<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(n,r,s){let i=gh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&gh.set(r,s(i))),i},wNAFCached(n,r,s){const i=mh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=mh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){s_(r,e),i_.set(n,r),gh.delete(n)}}}function Ek(t,e,n,r){if(yk(n,t),bk(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=ik(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let h=0;h<r.length;h++){const g=r[h],p=Number(g>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[h])}let f=s;for(let h=c.length-1,g=s;h>0;h--)g=g.add(c[h]),f=f.add(g);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function vk(t){return pk(t.Fp),qg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...n_(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const sr=BigInt(0),dn=BigInt(1),ru=BigInt(2),Ck=BigInt(8),_k={zip215:!0};function Ak(t){const e=vk(t);return qg(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ik(t){const e=Ak(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=ru<<BigInt(a*8)-dn,u=n.create,d=r_(e.n,e.nBitLength),f=e.uvRatio||((y,v)=>{try{return{isValid:!0,value:n.sqrt(y*n.inv(v))}}catch{return{isValid:!1,value:sr}}}),h=e.adjustScalarBytes||(y=>y),g=e.domain||((y,v,T)=>{if(dh("phflag",T),v.length||T)throw new Error("Contexts/pre-hash are not supported");return y});function p(y,v){Ma("coordinate "+y,v,sr,l)}function m(y){if(!(y instanceof b))throw new Error("ExtendedPoint expected")}const w=ib((y,v)=>{const{ex:T,ey:k,ez:N}=y,R=y.is0();v==null&&(v=R?Ck:n.inv(N));const j=u(T*v),z=u(k*v),Q=u(N*v);if(R)return{x:sr,y:dn};if(Q!==dn)throw new Error("invZ was invalid");return{x:j,y:z}}),_=ib(y=>{const{a:v,d:T}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:k,ey:N,ez:R,et:j}=y,z=u(k*k),Q=u(N*N),K=u(R*R),G=u(K*K),ae=u(z*v),ge=u(K*u(ae+Q)),Te=u(G+u(T*u(z*Q)));if(ge!==Te)throw new Error("bad point: equation left != right (1)");const pe=u(k*N),Ne=u(R*j);if(pe!==Ne)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(v,T,k,N){this.ex=v,this.ey=T,this.ez=k,this.et=N,p("x",v),p("y",T),p("z",k),p("t",N),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof b)throw new Error("extended point not allowed");const{x:T,y:k}=v||{};return p("x",T),p("y",k),new b(T,k,dn,u(T*k))}static normalizeZ(v){const T=n.invertBatch(v.map(k=>k.ez));return v.map((k,N)=>k.toAffine(T[N])).map(b.fromAffine)}static msm(v,T){return Ek(b,d,v,T)}_setWindowSize(v){S.setWindowSize(this,v)}assertValidity(){_(this)}equals(v){m(v);const{ex:T,ey:k,ez:N}=this,{ex:R,ey:j,ez:z}=v,Q=u(T*z),K=u(R*N),G=u(k*z),ae=u(j*N);return Q===K&&G===ae}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:v}=e,{ex:T,ey:k,ez:N}=this,R=u(T*T),j=u(k*k),z=u(ru*u(N*N)),Q=u(v*R),K=T+k,G=u(u(K*K)-R-j),ae=Q+j,ge=ae-z,Te=Q-j,pe=u(G*ge),Ne=u(ae*Te),st=u(G*Te),bt=u(ge*ae);return new b(pe,Ne,bt,st)}add(v){m(v);const{a:T,d:k}=e,{ex:N,ey:R,ez:j,et:z}=this,{ex:Q,ey:K,ez:G,et:ae}=v;if(T===BigInt(-1)){const jm=u((R-N)*(K+Q)),zm=u((R+N)*(K-Q)),Df=u(zm-jm);if(Df===sr)return this.double();const Hm=u(j*ru*ae),qm=u(z*ru*G),Wm=qm+Hm,Vm=zm+jm,Km=qm-Hm,iS=u(Wm*Df),oS=u(Vm*Km),aS=u(Wm*Km),cS=u(Df*Vm);return new b(iS,oS,cS,aS)}const ge=u(N*Q),Te=u(R*K),pe=u(z*k*ae),Ne=u(j*G),st=u((N+R)*(Q+K)-ge-Te),bt=Ne-pe,It=Ne+pe,Xt=u(Te-T*ge),Yr=u(st*bt),Os=u(It*Xt),rS=u(st*Xt),sS=u(bt*It);return new b(Yr,Os,sS,rS)}subtract(v){return this.add(v.negate())}wNAF(v){return S.wNAFCached(this,v,b.normalizeZ)}multiply(v){const T=v;Ma("scalar",T,dn,r);const{p:k,f:N}=this.wNAF(T);return b.normalizeZ([k,N])[0]}multiplyUnsafe(v,T=b.ZERO){const k=v;return Ma("scalar",k,sr,r),k===sr?C:this.is0()||k===dn?this:S.wNAFCachedUnsafe(this,k,b.normalizeZ,T)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(v){return w(this,v)}clearCofactor(){const{h:v}=e;return v===dn?this:this.multiplyUnsafe(v)}static fromHex(v,T=!1){const{d:k,a:N}=e,R=n.BYTES;v=Qr("pointHex",v,R),dh("zip215",T);const j=v.slice(),z=v[R-1];j[R-1]=z&-129;const Q=Bu(j),K=T?l:n.ORDER;Ma("pointHex.y",Q,sr,K);const G=u(Q*Q),ae=u(G-dn),ge=u(k*G-N);let{isValid:Te,value:pe}=f(ae,ge);if(!Te)throw new Error("Point.fromHex: invalid y coordinate");const Ne=(pe&dn)===dn,st=(z&128)!==0;if(!T&&pe===sr&&st)throw new Error("Point.fromHex: x=0 and x_0=1");return st!==Ne&&(pe=u(-pe)),b.fromAffine({x:pe,y:Q})}static fromPrivateKey(v){return O(v).point}toRawBytes(){const{x:v,y:T}=this.toAffine(),k=e0(T,n.BYTES);return k[k.length-1]|=v&dn?128:0,k}toHex(){return Hg(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,dn,u(e.Gx*e.Gy)),b.ZERO=new b(sr,dn,dn,sr);const{BASE:A,ZERO:C}=b,S=wk(b,a*8);function x(y){return _t(y,r)}function $(y){return x(Bu(y))}function O(y){const v=n.BYTES;y=Qr("private key",y,v);const T=Qr("hashed private key",i(y),2*v),k=h(T.slice(0,v)),N=T.slice(v,2*v),R=$(k),j=A.multiply(R),z=j.toRawBytes();return{head:k,prefix:N,scalar:R,point:j,pointBytes:z}}function L(y){return O(y).pointBytes}function M(y=new Uint8Array,...v){const T=sb(...v);return $(i(g(T,Qr("context",y),!!s)))}function U(y,v,T={}){y=Qr("message",y),s&&(y=s(y));const{prefix:k,scalar:N,pointBytes:R}=O(v),j=M(T.context,k,y),z=A.multiply(j).toRawBytes(),Q=M(T.context,z,R,y),K=x(j+Q*N);Ma("signature.s",K,sr,r);const G=sb(z,e0(K,n.BYTES));return Qr("result",G,n.BYTES*2)}const P=_k;function D(y,v,T,k=P){const{context:N,zip215:R}=k,j=n.BYTES;y=Qr("signature",y,2*j),v=Qr("message",v),T=Qr("publicKey",T,j),R!==void 0&&dh("zip215",R),s&&(v=s(v));const z=Bu(y.slice(j,2*j));let Q,K,G;try{Q=b.fromHex(T,R),K=b.fromHex(y.slice(0,j),R),G=A.multiplyUnsafe(z)}catch{return!1}if(!R&&Q.isSmallOrder())return!1;const ae=M(N,K.toRawBytes(),Q.toRawBytes(),v);return K.add(Q.multiplyUnsafe(ae)).subtract(G).clearCofactor().equals(b.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:L,sign:U,verify:D,ExtendedPoint:b,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>o(n.BYTES),precompute(y=8,v=b.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}}}}BigInt(0),BigInt(1);const Wg=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ub=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Sk=BigInt(1),db=BigInt(2);BigInt(3);const xk=BigInt(5),Tk=BigInt(8);function Nk(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Wg,o=t*t%i*t%i,a=Sr(o,db,i)*o%i,c=Sr(a,Sk,i)*t%i,l=Sr(c,xk,i)*c%i,u=Sr(l,e,i)*l%i,d=Sr(u,n,i)*u%i,f=Sr(d,r,i)*d%i,h=Sr(f,s,i)*f%i,g=Sr(h,s,i)*f%i,p=Sr(g,e,i)*l%i;return{pow_p_5_8:Sr(p,db,i)*t%i,b2:o}}function Ok(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Pk(t,e){const n=Wg,r=_t(e*e*e,n),s=_t(r*r*e,n),i=Nk(t*s).pow_p_5_8;let o=_t(t*r*i,n);const a=_t(e*o*o,n),c=o,l=_t(o*ub,n),u=a===t,d=a===_t(-t,n),f=a===_t(-t*ub,n);return u&&(o=c),(d||f)&&(o=l),fk(o,n)&&(o=_t(-o,n)),{isValid:u||d,value:o}}const Rk=r_(Wg,void 0,!0),kk={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Rk,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Tk,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ek,randomBytes:ZC,adjustScalarBytes:Ok,uvRatio:Pk},o_=Ik(kk),$k="EdDSA",Dk="JWT",gd=".",cf="base64url",a_="utf8",c_="utf8",Uk=":",Bk="did",Lk="key",fb="base58btc",Mk="z",Fk="K36",jk=32;function Vg(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function l_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Vg(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function u_(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=l_(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Vg(n)}function zk(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,w=0,_=g.length;w!==_&&g[w]===0;)w++,p++;for(var b=(_-w)*u+1>>>0,A=new Uint8Array(b);w!==_;){for(var C=g[w],S=0,x=b-1;(C!==0||S<m)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=S,w++}for(var $=b-m;$!==b&&A[$]===0;)$++;for(var O=c.repeat(p);$<b;++$)O+=t.charAt(A[$]);return O}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,w=0;g[p]===c;)m++,p++;for(var _=(g.length-p)*l+1>>>0,b=new Uint8Array(_);g[p];){var A=n[g.charCodeAt(p)];if(A===255)return;for(var C=0,S=_-1;(A!==0||C<w)&&S!==-1;S--,C++)A+=a*b[S]>>>0,b[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=C,p++}if(g[p]!==" "){for(var x=_-w;x!==_&&b[x]===0;)x++;for(var $=new Uint8Array(m+(_-x)),O=m;x!==_;)$[O++]=b[x++];return $}}}function h(g){var p=f(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var Hk=zk,qk=Hk;const d_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Wk=t=>new TextEncoder().encode(t),Vk=t=>new TextDecoder().decode(t);let Kk=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Gk=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return f_(this,e)}},Yk=class{constructor(e){this.decoders=e}or(e){return f_(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const f_=(t,e)=>new Yk({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Zk=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Kk(e,n,r),this.decoder=new Gk(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const lf=({name:t,prefix:e,encode:n,decode:r})=>new Zk(t,e,n,r),Pl=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=qk(n,e);return lf({prefix:t,name:e,encode:r,decode:i=>d_(s(i))})},Jk=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Xk=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},jt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>lf({prefix:e,name:t,encode(s){return Xk(s,r,n)},decode(s){return Jk(s,r,n,t)}}),Qk=lf({prefix:"\0",name:"identity",encode:t=>Vk(t),decode:t=>Wk(t)});var e4=Object.freeze({__proto__:null,identity:Qk});const t4=jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var n4=Object.freeze({__proto__:null,base2:t4});const r4=jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var s4=Object.freeze({__proto__:null,base8:r4});const i4=Pl({prefix:"9",name:"base10",alphabet:"0123456789"});var o4=Object.freeze({__proto__:null,base10:i4});const a4=jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),c4=jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var l4=Object.freeze({__proto__:null,base16:a4,base16upper:c4});const u4=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),d4=jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),f4=jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),h4=jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),p4=jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),g4=jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),m4=jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),y4=jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),b4=jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var w4=Object.freeze({__proto__:null,base32:u4,base32upper:d4,base32pad:f4,base32padupper:h4,base32hex:p4,base32hexupper:g4,base32hexpad:m4,base32hexpadupper:y4,base32z:b4});const E4=Pl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),v4=Pl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var C4=Object.freeze({__proto__:null,base36:E4,base36upper:v4});const _4=Pl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),A4=Pl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var I4=Object.freeze({__proto__:null,base58btc:_4,base58flickr:A4});const S4=jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),x4=jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),T4=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),N4=jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var O4=Object.freeze({__proto__:null,base64:S4,base64pad:x4,base64url:T4,base64urlpad:N4});const h_=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),P4=h_.reduce((t,e,n)=>(t[n]=e,t),[]),R4=h_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function k4(t){return t.reduce((e,n)=>(e+=P4[n],e),"")}function $4(t){const e=[];for(const n of t){const r=R4[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const D4=lf({prefix:"ðŸš€",name:"base256emoji",encode:k4,decode:$4});var U4=Object.freeze({__proto__:null,base256emoji:D4}),B4=p_,hb=128,L4=-128,M4=Math.pow(2,31);function p_(t,e,n){e=e||[],n=n||0;for(var r=n;t>=M4;)e[n++]=t&255|hb,t/=128;for(;t&L4;)e[n++]=t&255|hb,t>>>=7;return e[n]=t|0,p_.bytes=n-r+1,e}var F4=n0,j4=128,pb=127;function n0(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw n0.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&pb)<<s:(o&pb)*Math.pow(2,s),s+=7}while(o>=j4);return n0.bytes=i-r,n}var z4=Math.pow(2,7),H4=Math.pow(2,14),q4=Math.pow(2,21),W4=Math.pow(2,28),V4=Math.pow(2,35),K4=Math.pow(2,42),G4=Math.pow(2,49),Y4=Math.pow(2,56),Z4=Math.pow(2,63),J4=function(t){return t<z4?1:t<H4?2:t<q4?3:t<W4?4:t<V4?5:t<K4?6:t<G4?7:t<Y4?8:t<Z4?9:10},X4={encode:B4,decode:F4,encodingLength:J4},g_=X4;const gb=(t,e,n=0)=>(g_.encode(t,e,n),e),mb=t=>g_.encodingLength(t),r0=(t,e)=>{const n=e.byteLength,r=mb(t),s=r+mb(n),i=new Uint8Array(s+n);return gb(t,i,0),gb(n,i,r),i.set(e,s),new Q4(t,n,e,i)};let Q4=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const m_=({name:t,code:e,encode:n})=>new e$(t,e,n);let e$=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?r0(this.code,n):n.then(r=>r0(this.code,r))}else throw Error("Unknown type, must be binary type")}};const y_=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),t$=m_({name:"sha2-256",code:18,encode:y_("SHA-256")}),n$=m_({name:"sha2-512",code:19,encode:y_("SHA-512")});var r$=Object.freeze({__proto__:null,sha256:t$,sha512:n$});const b_=0,s$="identity",w_=d_,i$=t=>r0(b_,w_(t)),o$={code:b_,name:s$,encode:w_,digest:i$};var a$=Object.freeze({__proto__:null,identity:o$});new TextEncoder,new TextDecoder;const yb={...e4,...n4,...s4,...o4,...l4,...w4,...C4,...I4,...O4,...U4};({...r$,...a$});function E_(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const bb=E_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),yh=E_("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=l_(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),v_={utf8:bb,"utf-8":bb,hex:yb.base16,latin1:yh,ascii:yh,binary:yh,...yb};function uf(t,e="utf8"){const n=v_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function xa(t,e="utf8"){const n=v_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Vg(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function wb(t){return co(uf(xa(t,cf),a_))}function md(t){return uf(xa(Ln(t),a_),cf)}function C_(t){const e=xa(Fk,fb),n=Mk+uf(u_([e,t]),fb);return[Bk,Lk,n].join(Uk)}function c$(t){return uf(t,cf)}function l$(t){return xa(t,cf)}function u$(t){return xa([md(t.header),md(t.payload)].join(gd),c_)}function d$(t){return[md(t.header),md(t.payload),c$(t.signature)].join(gd)}function s0(t){const e=t.split(gd),n=wb(e[0]),r=wb(e[1]),s=l$(e[2]),i=xa(e.slice(0,2).join(gd),c_);return{header:n,payload:r,signature:s,data:i}}function Eb(t=ZC(jk)){const e=o_.getPublicKey(t);return{secretKey:u_([t,e]),publicKey:e}}async function f$(t,e,n,r,s=Z.fromMiliseconds(Date.now())){const i={alg:$k,typ:Dk},o=C_(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=u$({header:i,payload:c}),u=o_.sign(l,r.secretKey.slice(0,32));return d$({header:i,payload:c,signature:u})}var vb=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},h$=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),p$=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),g$=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),m$=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),y$=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),b$=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,w$=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Cb=3,E$=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",b$]],_b=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function v$(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new y$:typeof navigator<"u"?_$(navigator.userAgent):I$()}function C$(t){return t!==""&&E$.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function _$(t){var e=C$(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new m$;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<Cb&&(s=vb(vb([],s,!0),S$(Cb-s.length),!0)):s=[];var i=s.join("."),o=A$(t),a=w$.exec(t);return a&&a[1]?new g$(n,i,o,a[1]):new h$(n,i,o)}function A$(t){for(var e=0,n=_b.length;e<n;e++){var r=_b[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function I$(){var t=typeof process<"u"&&process.version;return t?new p$(process.version.slice(1)):null}function S$(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.getLocalStorage=Je.getLocalStorageOrThrow=Je.getCrypto=Je.getCryptoOrThrow=__=Je.getLocation=Je.getLocationOrThrow=Kg=Je.getNavigator=Je.getNavigatorOrThrow=po=Je.getDocument=Je.getDocumentOrThrow=Je.getFromWindowOrThrow=Je.getFromWindow=void 0;function So(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Je.getFromWindow=So;function Ta(t){const e=So(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Je.getFromWindowOrThrow=Ta;function x$(){return Ta("document")}Je.getDocumentOrThrow=x$;function T$(){return So("document")}var po=Je.getDocument=T$;function N$(){return Ta("navigator")}Je.getNavigatorOrThrow=N$;function O$(){return So("navigator")}var Kg=Je.getNavigator=O$;function P$(){return Ta("location")}Je.getLocationOrThrow=P$;function R$(){return So("location")}var __=Je.getLocation=R$;function k$(){return Ta("crypto")}Je.getCryptoOrThrow=k$;function $$(){return So("crypto")}Je.getCrypto=$$;function D$(){return Ta("localStorage")}Je.getLocalStorageOrThrow=D$;function U$(){return So("localStorage")}Je.getLocalStorage=U$;var Gg={};Object.defineProperty(Gg,"__esModule",{value:!0});var A_=Gg.getWindowMetadata=void 0;const Ab=Je;function B$(){let t,e;try{t=Ab.getDocumentOrThrow(),e=Ab.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),f=[];for(let h=0;h<d.length;h++){const g=d[h],p=g.getAttribute("rel");if(p&&p.toLowerCase().indexOf("icon")>-1){const m=g.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(m.indexOf("/")===0)w+=m;else{const _=e.pathname.split("/");_.pop();const b=_.join("/");w+=b+"/"+m}f.push(w)}else if(m.indexOf("//")===0){const w=e.protocol+m;f.push(w)}else f.push(m)}}return f}function r(...d){const f=t.getElementsByTagName("meta");for(let h=0;h<f.length;h++){const g=f[h],p=["itemprop","property","name"].map(m=>g.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(p.length&&p){const m=g.getAttribute("content");if(m)return m}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}A_=Gg.getWindowMetadata=B$;/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function L$(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function I_(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function yd(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Yg(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function i0(t){if(!Array.isArray(t))throw new Error("array expected")}function bd(t,e){if(!I_(!0,e))throw new Error(`${t}: array of strings expected`)}function M$(t,e){if(!I_(!1,e))throw new Error(`${t}: array of numbers expected`)}function F$(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function j$(t){const e=typeof t=="string"?t.split(""):t,n=e.length;bd("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(i0(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(i0(s),s.map(i=>{yd("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function z$(t=""){return yd("join",t),{encode:e=>(bd("join.decode",e),e.join(t)),decode:e=>(yd("join.decode",e),e.split(t))}}function H$(t,e="="){return Yg(t),yd("padding",e),{encode(n){for(bd("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){bd("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const S_=(t,e)=>e===0?t:S_(e,t%e),wd=(t,e)=>t+(e-S_(t,e)),bh=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function Ib(t,e,n,r){if(i0(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(wd(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${wd(e,n)}`);let s=0,i=0;const o=bh[e],a=bh[n]-1,c=[];for(const l of t){if(Yg(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=bh[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function q$(t,e=!1){if(Yg(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(wd(8,t)>32||wd(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!L$(n))throw new Error("radix2.encode input should be Uint8Array");return Ib(Array.from(n),8,t,!e)},decode:n=>(M$("radix2.decode",n),Uint8Array.from(Ib(n,t,8,e)))}}const W$=F$(q$(5),j$("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),H$(5),z$(""));var x_={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new s(u,d||c,f),g=n?n+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],h]:c._events[g].push(h):(c._events[g]=h,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,g=new Array(h);f<h;f++)g[f]=d[f].fn;return g},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,f,h,g){var p=n?n+l:l;if(!this._events[p])return!1;var m=this._events[p],w=arguments.length,_,b;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),w){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,f),!0;case 5:return m.fn.call(m.context,u,d,f,h),!0;case 6:return m.fn.call(m.context,u,d,f,h,g),!0}for(b=1,_=new Array(w-1);b<w;b++)_[b-1]=arguments[b];m.fn.apply(m.context,_)}else{var A=m.length,C;for(b=0;b<A;b++)switch(m[b].once&&this.removeListener(l,m[b].fn,void 0,!0),w){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,u);break;case 3:m[b].fn.call(m[b].context,u,d);break;case 4:m[b].fn.call(m[b].context,u,d,f);break;default:if(!_)for(C=1,_=new Array(w-1);C<w;C++)_[C-1]=arguments[C];m[b].fn.apply(m[b].context,_)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return o(this,h),this;var g=this._events[h];if(g.fn)g.fn===u&&(!f||g.once)&&(!d||g.context===d)&&o(this,h);else{for(var p=0,m=[],w=g.length;p<w;p++)(g[p].fn!==u||f&&!g[p].once||d&&g[p].context!==d)&&m.push(g[p]);m.length?this._events[h]=m.length===1?m[0]:m:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(x_);var V$=x_.exports;const K$=_a(V$);function G$(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const g=(h-f)*i+1>>>0,p=new Uint8Array(g);for(;f!==h;){let _=l[f],b=0;for(let A=g-1;(_!==0||b<d)&&A!==-1;A--,b++)_+=256*p[A]>>>0,p[A]=_%n>>>0,_=_/n>>>0;if(_!==0)throw new Error("Non-zero carry");d=b,f++}let m=g-d;for(;m!==g&&p[m]===0;)m++;let w=r.repeat(u);for(;m<g;++m)w+=t.charAt(p[m]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,f=0;for(;l[u]===r;)d++,u++;const h=(l.length-u)*s+1>>>0,g=new Uint8Array(h);for(;u<l.length;){const _=l.charCodeAt(u);if(_>255)return;let b=e[_];if(b===255)return;let A=0;for(let C=h-1;(b!==0||A<f)&&C!==-1;C--,A++)b+=n*g[C]>>>0,g[C]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");f=A,u++}let p=h-f;for(;p!==h&&g[p]===0;)p++;const m=new Uint8Array(d+(h-p));let w=d;for(;p!==h;)m[w++]=g[p++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Y$="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Na=G$(Y$);function Z$(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function J$(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const X$=new TextEncoder,Q$=50;function eD(t,e,n){X$.encodeInto(t,e.subarray(n))}function tD(t,e,n){t.length>Q$?eD(t,e,n):J$(t,e,n)}const nD=4096;function T_(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=nD&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const rD=new TextDecoder,sD=200;function iD(t,e,n){const r=t.subarray(e,e+n);return rD.decode(r)}function oD(t,e,n){return n>sD?iD(t,e,n):T_(t,e,n)}class su{constructor(e,n){this.type=e,this.data=n}}class Pn extends Error{constructor(e){super(e);const n=Object.create(Pn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Pn.name})}}const Fa=4294967295;function aD(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function N_(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function O_(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function cD(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const lD=-1,uD=4294967296-1,dD=17179869184-1;function fD({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=dD)if(e===0&&t<=uD){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),N_(r,4,t),n}}function hD(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function pD(t){if(t instanceof Date){const e=hD(t);return fD(e)}else return null}function gD(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=O_(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Pn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function mD(t){const e=gD(t);return new Date(e.sec*1e3+e.nsec/1e6)}const yD={type:lD,encode:pD,decode:mD};class Ed{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(yD)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new su(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new su(o,i)}}}return e instanceof su?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new su(n,e)}}Ed.defaultCodec=new Ed;function bD(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function o0(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):bD(t)?new Uint8Array(t):Uint8Array.from(t)}const wD=100,ED=2048;let vD=class P_{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Ed.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??wD,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??ED,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new P_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=Z$(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),tD(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=o0(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),aD(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),N_(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function CD(t,e){return new vD(e).encodeSharedRef(t)}function wh(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const _D=16,AD=16;class ID{constructor(e=_D,n=AD){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=T_(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const a0="array",uc="map_key",R_="map_value",SD=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Pn("The type of key must be string or number but "+typeof t)};class xD{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=a0,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=uc,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===a0){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===uc||e.type===R_){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const ja=-1,Zg=new DataView(new ArrayBuffer(0)),TD=new Uint8Array(Zg.buffer);try{Zg.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const Sb=new RangeError("Insufficient data"),ND=new ID;let OD=class k_{constructor(e){this.totalPos=0,this.pos=0,this.view=Zg,this.bytes=TD,this.headByte=ja,this.stack=new xD,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Ed.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Fa,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Fa,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Fa,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Fa,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Fa,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:ND,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??SD}clone(){return new k_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=ja,this.stack.reset()}setBuffer(e){const n=o0(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===ja&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=o0(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${wh(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Pn(`Unrecognized type byte: ${wh(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===a0)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===uc){if(n==="__proto__")throw new Pn("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=R_;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=uc;continue e}}return n}}readHeadByte(){return this.headByte===ja&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=ja}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Pn(`Unrecognized array type byte: ${wh(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Pn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Pn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new Pn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw Sb;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=oD(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===uc:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Pn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw Sb;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Pn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=cD(this.view,this.pos);return this.pos+=8,e}readI64(){const e=O_(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function PD(t,e){return new OD(e).decode(t)}function RD(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,w=0,_=g.length;w!==_&&g[w]===0;)w++,p++;for(var b=(_-w)*u+1>>>0,A=new Uint8Array(b);w!==_;){for(var C=g[w],S=0,x=b-1;(C!==0||S<m)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=S,w++}for(var $=b-m;$!==b&&A[$]===0;)$++;for(var O=c.repeat(p);$<b;++$)O+=t.charAt(A[$]);return O}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,w=0;g[p]===c;)m++,p++;for(var _=(g.length-p)*l+1>>>0,b=new Uint8Array(_);g[p];){var A=n[g.charCodeAt(p)];if(A===255)return;for(var C=0,S=_-1;(A!==0||C<w)&&S!==-1;S--,C++)A+=a*b[S]>>>0,b[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=C,p++}if(g[p]!==" "){for(var x=_-w;x!==_&&b[x]===0;)x++;for(var $=new Uint8Array(m+(_-x)),O=m;x!==_;)$[O++]=b[x++];return $}}}function h(g){var p=f(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var kD=RD,$D=kD;const DD=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},UD=t=>new TextEncoder().encode(t),BD=t=>new TextDecoder().decode(t);class LD{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class MD{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $_(this,e)}}class FD{constructor(e){this.decoders=e}or(e){return $_(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $_=(t,e)=>new FD({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class jD{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new LD(e,n,r),this.decoder=new MD(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const df=({name:t,prefix:e,encode:n,decode:r})=>new jD(t,e,n,r),Rl=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=$D(n,e);return df({prefix:t,name:e,encode:r,decode:i=>DD(s(i))})},zD=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},HD=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},zt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>df({prefix:e,name:t,encode(s){return HD(s,r,n)},decode(s){return zD(s,r,n,t)}}),qD=df({prefix:"\0",name:"identity",encode:t=>BD(t),decode:t=>UD(t)}),WD=Object.freeze(Object.defineProperty({__proto__:null,identity:qD},Symbol.toStringTag,{value:"Module"})),VD=zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),KD=Object.freeze(Object.defineProperty({__proto__:null,base2:VD},Symbol.toStringTag,{value:"Module"})),GD=zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),YD=Object.freeze(Object.defineProperty({__proto__:null,base8:GD},Symbol.toStringTag,{value:"Module"})),ZD=Rl({prefix:"9",name:"base10",alphabet:"0123456789"}),JD=Object.freeze(Object.defineProperty({__proto__:null,base10:ZD},Symbol.toStringTag,{value:"Module"})),XD=zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),QD=zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eU=Object.freeze(Object.defineProperty({__proto__:null,base16:XD,base16upper:QD},Symbol.toStringTag,{value:"Module"})),tU=zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nU=zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rU=zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sU=zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),iU=zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oU=zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),aU=zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cU=zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lU=zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),uU=Object.freeze(Object.defineProperty({__proto__:null,base32:tU,base32hex:iU,base32hexpad:aU,base32hexpadupper:cU,base32hexupper:oU,base32pad:rU,base32padupper:sU,base32upper:nU,base32z:lU},Symbol.toStringTag,{value:"Module"})),dU=Rl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fU=Rl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),hU=Object.freeze(Object.defineProperty({__proto__:null,base36:dU,base36upper:fU},Symbol.toStringTag,{value:"Module"})),pU=Rl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gU=Rl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),mU=Object.freeze(Object.defineProperty({__proto__:null,base58btc:pU,base58flickr:gU},Symbol.toStringTag,{value:"Module"})),yU=zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bU=zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wU=zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EU=zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),vU=Object.freeze(Object.defineProperty({__proto__:null,base64:yU,base64pad:bU,base64url:wU,base64urlpad:EU},Symbol.toStringTag,{value:"Module"})),D_=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),CU=D_.reduce((t,e,n)=>(t[n]=e,t),[]),_U=D_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function AU(t){return t.reduce((e,n)=>(e+=CU[n],e),"")}function IU(t){const e=[];for(const n of t){const r=_U[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const SU=df({prefix:"ðŸš€",name:"base256emoji",encode:AU,decode:IU}),xU=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:SU},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const xb={...WD,...KD,...YD,...JD,...eU,...uU,...hU,...mU,...vU,...xU},TU={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},NU="Input must be an string, Buffer or Uint8Array";function OU(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(NU);return e}function PU(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function iu(t){return(4294967296+t).toString(16).substring(1)}function RU(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=iu(e[s]).toUpperCase(),r+=" ",r+=iu(e[s+1]).toUpperCase();else if(n===64)r+=iu(e[s+1]).toUpperCase(),r+=iu(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function kU(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var U_={normalizeInput:OU,toHex:PU,debugPrint:RU,testSpeed:kU};const Lu=U_;function ou(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function Tb(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function B_(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Bs(t,e,n,r,s,i){const o=rc[s],a=rc[s+1],c=rc[i],l=rc[i+1];ou(_e,t,e),Tb(_e,t,o,a);let u=_e[r]^_e[t],d=_e[r+1]^_e[t+1];_e[r]=d,_e[r+1]=u,ou(_e,n,r),u=_e[e]^_e[n],d=_e[e+1]^_e[n+1],_e[e]=u>>>24^d<<8,_e[e+1]=d>>>24^u<<8,ou(_e,t,e),Tb(_e,t,c,l),u=_e[r]^_e[t],d=_e[r+1]^_e[t+1],_e[r]=u>>>16^d<<16,_e[r+1]=d>>>16^u<<16,ou(_e,n,r),u=_e[e]^_e[n],d=_e[e+1]^_e[n+1],_e[e]=d>>>31^u<<1,_e[e+1]=u>>>31^d<<1}const L_=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),$U=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],qt=new Uint8Array($U.map(function(t){return t*2})),_e=new Uint32Array(32),rc=new Uint32Array(32);function M_(t,e){let n=0;for(n=0;n<16;n++)_e[n]=t.h[n],_e[n+16]=L_[n];for(_e[24]=_e[24]^t.t,_e[25]=_e[25]^t.t/4294967296,e&&(_e[28]=~_e[28],_e[29]=~_e[29]),n=0;n<32;n++)rc[n]=B_(t.b,4*n);for(n=0;n<12;n++)Bs(0,8,16,24,qt[n*16+0],qt[n*16+1]),Bs(2,10,18,26,qt[n*16+2],qt[n*16+3]),Bs(4,12,20,28,qt[n*16+4],qt[n*16+5]),Bs(6,14,22,30,qt[n*16+6],qt[n*16+7]),Bs(0,10,20,30,qt[n*16+8],qt[n*16+9]),Bs(2,12,22,24,qt[n*16+10],qt[n*16+11]),Bs(4,14,16,26,qt[n*16+12],qt[n*16+13]),Bs(6,8,18,28,qt[n*16+14],qt[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^_e[n]^_e[n+16]}const Ls=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function F_(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Ls.fill(0),Ls[0]=t,e&&(Ls[1]=e.length),Ls[2]=1,Ls[3]=1,n&&Ls.set(n,32),r&&Ls.set(r,48);for(let i=0;i<16;i++)s.h[i]=L_[i]^B_(Ls,i*4);return e&&(Jg(s,e),s.c=128),s}function Jg(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,M_(t,!1),t.c=0),t.b[t.c++]=e[n]}function j_(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;M_(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function z_(t,e,n,r,s){n=n||64,t=Lu.normalizeInput(t),r&&(r=Lu.normalizeInput(r)),s&&(s=Lu.normalizeInput(s));const i=F_(n,e,r,s);return Jg(i,t),j_(i)}function DU(t,e,n,r,s){const i=z_(t,e,n,r,s);return Lu.toHex(i)}var UU={blake2b:z_,blake2bHex:DU,blake2bInit:F_,blake2bUpdate:Jg,blake2bFinal:j_};const H_=U_;function BU(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ms(t,e,n,r,s,i){Fe[t]=Fe[t]+Fe[e]+s,Fe[r]=au(Fe[r]^Fe[t],16),Fe[n]=Fe[n]+Fe[r],Fe[e]=au(Fe[e]^Fe[n],12),Fe[t]=Fe[t]+Fe[e]+i,Fe[r]=au(Fe[r]^Fe[t],8),Fe[n]=Fe[n]+Fe[r],Fe[e]=au(Fe[e]^Fe[n],7)}function au(t,e){return t>>>e^t<<32-e}const q_=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wt=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Fe=new Uint32Array(16),$t=new Uint32Array(16);function W_(t,e){let n=0;for(n=0;n<8;n++)Fe[n]=t.h[n],Fe[n+8]=q_[n];for(Fe[12]^=t.t,Fe[13]^=t.t/4294967296,e&&(Fe[14]=~Fe[14]),n=0;n<16;n++)$t[n]=BU(t.b,4*n);for(n=0;n<10;n++)Ms(0,4,8,12,$t[Wt[n*16+0]],$t[Wt[n*16+1]]),Ms(1,5,9,13,$t[Wt[n*16+2]],$t[Wt[n*16+3]]),Ms(2,6,10,14,$t[Wt[n*16+4]],$t[Wt[n*16+5]]),Ms(3,7,11,15,$t[Wt[n*16+6]],$t[Wt[n*16+7]]),Ms(0,5,10,15,$t[Wt[n*16+8]],$t[Wt[n*16+9]]),Ms(1,6,11,12,$t[Wt[n*16+10]],$t[Wt[n*16+11]]),Ms(2,7,8,13,$t[Wt[n*16+12]],$t[Wt[n*16+13]]),Ms(3,4,9,14,$t[Wt[n*16+14]],$t[Wt[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Fe[n]^Fe[n+8]}function V_(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(q_),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(Xg(r,e),r.c=64),r}function Xg(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,W_(t,!1),t.c=0),t.b[t.c++]=e[n]}function K_(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;W_(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function G_(t,e,n){n=n||32,t=H_.normalizeInput(t);const r=V_(n,e);return Xg(r,t),K_(r)}function LU(t,e,n){const r=G_(t,e,n);return H_.toHex(r)}var MU={blake2s:G_,blake2sHex:LU,blake2sInit:V_,blake2sUpdate:Xg,blake2sFinal:K_};const za=UU,Ha=MU;var FU={blake2b:za.blake2b,blake2bHex:za.blake2bHex,blake2bInit:za.blake2bInit,blake2bUpdate:za.blake2bUpdate,blake2bFinal:za.blake2bFinal,blake2s:Ha.blake2s,blake2sHex:Ha.blake2sHex,blake2sInit:Ha.blake2sInit,blake2sUpdate:Ha.blake2sUpdate,blake2sFinal:Ha.blake2sFinal};const jU="PARSE_ERROR",zU="INVALID_REQUEST",HU="METHOD_NOT_FOUND",qU="INVALID_PARAMS",Y_="INTERNAL_ERROR",Qg="SERVER_ERROR",WU=[-32700,-32600,-32601,-32602,-32603],dc={[jU]:{code:-32700,message:"Parse error"},[zU]:{code:-32600,message:"Invalid Request"},[HU]:{code:-32601,message:"Method not found"},[qU]:{code:-32602,message:"Invalid params"},[Y_]:{code:-32603,message:"Internal error"},[Qg]:{code:-32e3,message:"Server error"}},Z_=Qg;function VU(t){return WU.includes(t)}function Nb(t){return Object.keys(dc).includes(t)?dc[t]:dc[Z_]}function KU(t){const e=Object.values(dc).find(n=>n.code===t);return e||dc[Z_]}function J_(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var X_={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c0=function(t,e){return c0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},c0(t,e)};function GU(t,e){c0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var l0=function(){return l0=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l0.apply(this,arguments)};function YU(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ZU(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function JU(t,e){return function(n,r){e(n,r,t)}}function XU(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function QU(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function e9(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function t9(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function n9(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function u0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q_(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function r9(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Q_(arguments[e]));return t}function s9(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function al(t){return this instanceof al?(this.v=t,this):new al(t)}function i9(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(g,p){i.push([f,h,g,p])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(g){d(i[0][3],g)}}function c(f){f.value instanceof al?Promise.resolve(f.value.v).then(l,u):d(i[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function o9(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:al(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function a9(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof u0=="function"?u0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function c9(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function l9(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u9(t){return t&&t.__esModule?t:{default:t}}function d9(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function f9(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const h9=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return l0},__asyncDelegator:o9,__asyncGenerator:i9,__asyncValues:a9,__await:al,__awaiter:QU,__classPrivateFieldGet:d9,__classPrivateFieldSet:f9,__createBinding:t9,__decorate:ZU,__exportStar:n9,__extends:GU,__generator:e9,__importDefault:u9,__importStar:l9,__makeTemplateObject:c9,__metadata:XU,__param:JU,__read:Q_,__rest:YU,__spread:r9,__spreadArrays:s9,__values:u0},Symbol.toStringTag,{value:"Module"})),p9=UE(h9);var es={},Ob;function g9(){if(Ob)return es;Ob=1,Object.defineProperty(es,"__esModule",{value:!0}),es.isBrowserCryptoAvailable=es.getSubtleCrypto=es.getBrowerCrypto=void 0;function t(){return($r==null?void 0:$r.crypto)||($r==null?void 0:$r.msCrypto)||{}}es.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}es.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return es.isBrowserCryptoAvailable=n,es}var ts={},Pb;function m9(){if(Pb)return ts;Pb=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.isBrowser=ts.isNode=ts.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ts.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ts.isNode=e;function n(){return!t()&&!e()}return ts.isBrowser=n,ts}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=p9;e.__exportStar(g9(),t),e.__exportStar(m9(),t)})(X_);function Rr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ai(t=6){return BigInt(Rr(t))}function dr(t,e,n){return{id:n||Rr(),jsonrpc:"2.0",method:t,params:e}}function cl(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ff(t,e,n){return{id:t,jsonrpc:"2.0",error:y9(e)}}function y9(t,e){return typeof t>"u"?Nb(Y_):(typeof t=="string"&&(t=Object.assign(Object.assign({},Nb(Qg)),{message:t})),VU(t.code)&&(t=KU(t.code)),t)}let b9=class{},w9=class extends b9{constructor(){super()}},E9=class extends w9{constructor(e){super()}};const v9="^https?:",C9="^wss?:";function _9(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function eA(t,e){const n=_9(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Rb(t){return eA(t,v9)}function kb(t){return eA(t,C9)}function A9(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function tA(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function em(t){return tA(t)&&"method"in t}function hf(t){return tA(t)&&(kr(t)||Gn(t))}function kr(t){return"result"in t}function Gn(t){return"error"in t}let tm=class extends E9{constructor(e){super(e),this.events=new rr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(dr(e.method,e.params||[],e.id||ai().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Gn(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),hf(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const I9=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),S9=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",$b=t=>t.split("?")[0],Db=10,x9=I9();let T9=class{constructor(e){if(this.url=e,this.events=new rr.EventEmitter,this.registering=!1,!kb(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ln(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!kb(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=X_.isReactNative()?void 0:{rejectUnauthorized:!A9(e)},i=new x9(e,[],s);S9()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?co(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=ff(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return J_(e,$b(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Db&&this.events.setMaxListeners(Db)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${$b(this.url)}`));return this.events.emit("register_error",n),n}};var d0={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof $r<"u"&&$r,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof $r<"u"&&$r||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(y){return y&&DataView.prototype.isPrototypeOf(y)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(y){return y&&u.indexOf(Object.prototype.toString.call(y))>-1};function f(y){if(typeof y!="string"&&(y=String(y)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(y)||y==="")throw new TypeError('Invalid character in header field name: "'+y+'"');return y.toLowerCase()}function h(y){return typeof y!="string"&&(y=String(y)),y}function g(y){var v={next:function(){var T=y.shift();return{done:T===void 0,value:T}}};return c.iterable&&(v[Symbol.iterator]=function(){return v}),v}function p(y){this.map={},y instanceof p?y.forEach(function(v,T){this.append(T,v)},this):Array.isArray(y)?y.forEach(function(v){if(v.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+v.length);this.append(v[0],v[1])},this):y&&Object.getOwnPropertyNames(y).forEach(function(v){this.append(v,y[v])},this)}p.prototype.append=function(y,v){y=f(y),v=h(v);var T=this.map[y];this.map[y]=T?T+", "+v:v},p.prototype.delete=function(y){delete this.map[f(y)]},p.prototype.get=function(y){return y=f(y),this.has(y)?this.map[y]:null},p.prototype.has=function(y){return this.map.hasOwnProperty(f(y))},p.prototype.set=function(y,v){this.map[f(y)]=h(v)},p.prototype.forEach=function(y,v){for(var T in this.map)this.map.hasOwnProperty(T)&&y.call(v,this.map[T],T,this)},p.prototype.keys=function(){var y=[];return this.forEach(function(v,T){y.push(T)}),g(y)},p.prototype.values=function(){var y=[];return this.forEach(function(v){y.push(v)}),g(y)},p.prototype.entries=function(){var y=[];return this.forEach(function(v,T){y.push([T,v])}),g(y)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(y){if(!y._noBody){if(y.bodyUsed)return Promise.reject(new TypeError("Already read"));y.bodyUsed=!0}}function w(y){return new Promise(function(v,T){y.onload=function(){v(y.result)},y.onerror=function(){T(y.error)}})}function _(y){var v=new FileReader,T=w(v);return v.readAsArrayBuffer(y),T}function b(y){var v=new FileReader,T=w(v),k=/charset=([A-Za-z0-9_-]+)/.exec(y.type),N=k?k[1]:"utf-8";return v.readAsText(y,N),T}function A(y){for(var v=new Uint8Array(y),T=new Array(v.length),k=0;k<v.length;k++)T[k]=String.fromCharCode(v[k]);return T.join("")}function C(y){if(y.slice)return y.slice(0);var v=new Uint8Array(y.byteLength);return v.set(new Uint8Array(y)),v.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(y){this.bodyUsed=this.bodyUsed,this._bodyInit=y,y?typeof y=="string"?this._bodyText=y:c.blob&&Blob.prototype.isPrototypeOf(y)?this._bodyBlob=y:c.formData&&FormData.prototype.isPrototypeOf(y)?this._bodyFormData=y:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)?this._bodyText=y.toString():c.arrayBuffer&&c.blob&&l(y)?(this._bodyArrayBuffer=C(y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(y)||d(y))?this._bodyArrayBuffer=C(y):this._bodyText=y=Object.prototype.toString.call(y):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var y=m(this);if(y)return y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var y=m(this);return y||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(_);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var y=m(this);if(y)return y;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(y){var v=y.toUpperCase();return x.indexOf(v)>-1?v:y}function O(y,v){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');v=v||{};var T=v.body;if(y instanceof O){if(y.bodyUsed)throw new TypeError("Already read");this.url=y.url,this.credentials=y.credentials,v.headers||(this.headers=new p(y.headers)),this.method=y.method,this.mode=y.mode,this.signal=y.signal,!T&&y._bodyInit!=null&&(T=y._bodyInit,y.bodyUsed=!0)}else this.url=String(y);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new p(v.headers)),this.method=$(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal||function(){if("AbortController"in a){var R=new AbortController;return R.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&T)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(T),(this.method==="GET"||this.method==="HEAD")&&(v.cache==="no-store"||v.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var N=/\?/;this.url+=(N.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function L(y){var v=new FormData;return y.trim().split("&").forEach(function(T){if(T){var k=T.split("="),N=k.shift().replace(/\+/g," "),R=k.join("=").replace(/\+/g," ");v.append(decodeURIComponent(N),decodeURIComponent(R))}}),v}function M(y){var v=new p,T=y.replace(/\r?\n[\t ]+/g," ");return T.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var N=k.split(":"),R=N.shift().trim();if(R){var j=N.join(":").trim();try{v.append(R,j)}catch(z){console.warn("Response "+z.message)}}}),v}S.call(O.prototype);function U(y,v){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=v.statusText===void 0?"":""+v.statusText,this.headers=new p(v.headers),this.url=v.url||"",this._initBody(y)}S.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},U.error=function(){var y=new U(null,{status:200,statusText:""});return y.ok=!1,y.status=0,y.type="error",y};var P=[301,302,303,307,308];U.redirect=function(y,v){if(P.indexOf(v)===-1)throw new RangeError("Invalid status code");return new U(null,{status:v,headers:{location:y}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(v,T){this.message=v,this.name=T;var k=Error(v);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function D(y,v){return new Promise(function(T,k){var N=new O(y,v);if(N.signal&&N.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function j(){R.abort()}R.onload=function(){var K={statusText:R.statusText,headers:M(R.getAllResponseHeaders()||"")};N.url.indexOf("file://")===0&&(R.status<200||R.status>599)?K.status=200:K.status=R.status,K.url="responseURL"in R?R.responseURL:K.headers.get("X-Request-URL");var G="response"in R?R.response:R.responseText;setTimeout(function(){T(new U(G,K))},0)},R.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},R.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},R.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function z(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(R.open(N.method,z(N.url),!0),N.credentials==="include"?R.withCredentials=!0:N.credentials==="omit"&&(R.withCredentials=!1),"responseType"in R&&(c.blob?R.responseType="blob":c.arrayBuffer&&(R.responseType="arraybuffer")),v&&typeof v.headers=="object"&&!(v.headers instanceof p||a.Headers&&v.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(v.headers).forEach(function(K){Q.push(f(K)),R.setRequestHeader(K,h(v.headers[K]))}),N.headers.forEach(function(K,G){Q.indexOf(G)===-1&&R.setRequestHeader(G,K)})}else N.headers.forEach(function(K,G){R.setRequestHeader(G,K)});N.signal&&(N.signal.addEventListener("abort",j),R.onreadystatechange=function(){R.readyState===4&&N.signal.removeEventListener("abort",j)}),R.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}return D.polyfill=!0,a.fetch||(a.fetch=D,a.Headers=p,a.Request=O,a.Response=U),o.Headers=p,o.Request=O,o.Response=U,o.fetch=D,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(d0,d0.exports);var N9=d0.exports;const Ub=_a(N9);var O9=Object.defineProperty,P9=Object.defineProperties,R9=Object.getOwnPropertyDescriptors,Bb=Object.getOwnPropertySymbols,k9=Object.prototype.hasOwnProperty,$9=Object.prototype.propertyIsEnumerable,Lb=(t,e,n)=>e in t?O9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mb=(t,e)=>{for(var n in e||(e={}))k9.call(e,n)&&Lb(t,n,e[n]);if(Bb)for(var n of Bb(e))$9.call(e,n)&&Lb(t,n,e[n]);return t},Fb=(t,e)=>P9(t,R9(e));const D9={Accept:"application/json","Content-Type":"application/json"},U9="POST",jb={headers:D9,method:U9},zb=10;let nA=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new rr.EventEmitter,this.isAvailable=!1,this.registering=!1,!Rb(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Ln(e),r=await(await Ub(this.url,Fb(Mb({},jb),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Rb(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Ln({id:1,jsonrpc:"2.0",method:"test",params:[]});await Ub(e,Fb(Mb({},jb),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?co(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=ff(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return J_(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>zb&&this.events.setMaxListeners(zb)}};const Hb=2147483648,B9={convertEVMChainIdToCoinType(t){if(t>=Hb)throw new Error("Invalid chainId");return(Hb|t)>>>0}},jn=Xe({suggestions:[],loading:!1}),L9={state:jn,subscribe(t){return Mt(jn,()=>t(jn))},subscribeKey(t,e){return kt(jn,t,e)},async resolveName(t){var e,n;try{return await be.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await be.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{jn.loading=!0,jn.suggestions=[];const e=await be.getEnsNameSuggestions(t);return jn.suggestions=e.suggestions||[],jn.suggestions}catch(e){const n=fc.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{jn.loading=!1}},async getNamesForAddress(t){try{if(!I.state.activeCaipNetwork)return[];const n=H.getEnsFromCacheForAddress(t);if(n)return n;const r=await be.reverseLookupEnsName({address:t});return H.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=fc.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){var s;const e=I.state.activeCaipNetwork,n=(s=I.getAccountData(e==null?void 0:e.chainNamespace))==null?void 0:s.address,r=V.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");jn.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});me.pushTransactionStack({onCancel(){me.replace("RegisterAccountName")}});const o=await X.signMessage(i);jn.loading=!1;const a=e.id;if(!a)throw new Error("Network not found");const c=B9.convertEVMChainIdToCoinType(Number(a));await be.registerEnsName({coinType:c,address:n,signature:o,message:i}),I.setAccountProp("profileName",t,e.chainNamespace),H.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),me.replace("RegisterAccountNameSuccess")}catch(i){const o=fc.parseEnsApiError(i,`Error registering name ${t}`);throw me.replace("RegisterAccountName"),new Error(o)}finally{jn.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},fc=nr(L9);function f0(t){try{return new URL(t)}catch{return null}}function M9(t){const e=t.split("/"),n=e.length>0&&e[0]!==void 0?e[0]:"",r=n.lastIndexOf(":");return r===-1?{host:n}:{host:n.slice(0,r),port:n.slice(r+1)}}function F9(t){const e=t.indexOf("://");if(e===-1)return null;const n=t.slice(0,e),r=e+3;let s=t.indexOf("/",r);s===-1&&(s=t.length);const i=t.slice(r,s),o=i.lastIndexOf(":");return o===-1?{scheme:n,host:i}:{scheme:n,host:i.slice(0,o),port:i.slice(o+1)}}function j9(t,e){if(e.includes("://")){const o=f0(e);return o?o.origin===t:!1}const{host:n,port:r}=M9(e),s=t.indexOf("://");if(s!==-1){const o=s+3;let a=t.indexOf("/",o);a===-1&&(a=t.length);const c=t.slice(o,a);if(r!==void 0)return`${n}:${r}`===c;const l=c.split(":")[0];return n===l}const i=f0(t);return i?r!==void 0?n===i.hostname&&r===(i.port||void 0):n===i.hostname:!1}function z9(t,e,n){let r=n,s;const i=r.indexOf("://");i!==-1&&(s=r.slice(0,i),r=r.slice(i+3));const o=r.indexOf("/");o!==-1&&(r=r.slice(0,o));let a=r,c;const l=a.lastIndexOf(":");l!==-1&&(c=a.slice(l+1),a=a.slice(0,l));const u=a.split(".");for(const p of u)if(p.includes("*")&&p!=="*")return!1;const d=t.protocol.replace(/:$/u,"");if(s&&s!==d||c!==void 0&&c!=="*"&&c!==t.port)return!1;const f=F9(e),g=(f?f.host:t.hostname).split(".");if(u.length!==g.length)return!1;for(let p=u.length-1;p>=0;p-=1){const m=u[p],w=g[p];if(m!=="*"&&m!==w)return!1}return!0}const H9={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},ws={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace(t){return H9[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":u.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":u.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K");break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await fc.resolveName(t);return((r=(e!=null&&e.addresses?Object.values(e.addresses):[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isUserRejectedRequestError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.code=="number",r=n&&e.code===ws.RPC_ERROR_CODE.USER_REJECTED_METHODS,s=n&&e.code===ws.RPC_ERROR_CODE.USER_REJECTED;return r||s}return!1}catch{return!1}},isOriginAllowed(t,e,n){const r=[...e,...n];if(e.length===0)return!0;const s=f0(t);if(!s)return r.some(i=>!i.includes("*")&&i===t);if(s.hostname==="localhost"||s.hostname==="127.0.0.1")return!0;for(const i of r)if(i.includes("*")){if(z9(s,t,i))return!0}else if(j9(t,i))return!0;return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=ws.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("accountsChanged",a=>{var c,l,u,d,f;try{const h=((u=(l=(c=t.session)==null?void 0:c.namespaces)==null?void 0:l[e])==null?void 0:u.accounts)||[],g=(f=(d=t.rpcProviders)==null?void 0:d[e])==null?void 0:f.getDefaultChain(),p=a.map(m=>{const w=h.find(A=>A.includes(`${e}:${g}:${m}`));if(!w)return;const{chainId:_,chainNamespace:b}=At.parseCaipAddress(w);return{address:m,chainId:_,chainNamespace:b}}).filter(m=>m!==void 0);p.length>0&&s(p)}catch(h){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,h)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>At.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}},q9=[B.CONNECTOR_ID.AUTH,B.CONNECTOR_ID.WALLET_CONNECT];class rA{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>I.getCaipNetworks(n),this.getConnectorId=n=>V.getConnectorId(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:B.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:B.CONNECTOR_ID.AUTH,type:"AUTH",name:B.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>n.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){I.setAccountProp("status",e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){try{return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(n){throw ws.isUserRejectedRequestError(n)?new Wo(n):n}}async switchNetwork(e){var i;const{caipNetwork:n}=e,r=Ye.getProviderId(n.chainNamespace),s=Ye.getProvider(n.chainNamespace);if(!s)throw new Error("Provider not found");if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(r==="AUTH"){const o=(i=V.getAuthConnector())==null?void 0:i.provider;if(!o)throw new Error("Auth provider not found");const a=nn(n.chainNamespace);await o.switchNetwork({chainId:n.caipNetworkId});const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n.id==="walletConnect");if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ee.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ee.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ee.getAccount(e[0]),a=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&((s=this.getConnectorId(B.CHAIN.EVM))==null?void 0:s.toLowerCase())===n.toLowerCase()&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ee.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){var n;this.removeProviderListeners(e),this.deleteConnection(e),((n=this.getConnectorId(B.CHAIN.EVM))==null?void 0:n.toLowerCase())===e.toLowerCase()&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),s=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),((o=this.getConnectorId(B.CHAIN.EVM))==null?void 0:o.toLowerCase())===n.toLowerCase()&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(q9.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n;const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r==null?void 0:r.address,chainId:(n=e.caipNetwork)==null?void 0:n.id,connector:e.connector})}}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>l.connectorId.toLowerCase()===n.toLowerCase());if(!o)return null;const a=s.find(l=>l.id.toLowerCase()===o.connectorId.toLowerCase()),c=e?o.accounts.find(l=>l.address.toLowerCase()===e.toLowerCase()):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>a.id.toLowerCase()===o.connectorId.toLowerCase()));if(i){const[o]=i.accounts,a=s.find(c=>c.id.toLowerCase()===i.connectorId.toLowerCase());return{...i,account:o,connector:a}}return null}}let Pi=null;const $n={getSIWX(){return F.state.siwx},async initializeIfEnabled(t=I.getActiveCaipAddress()){var i,o,a;const e=F.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(I.checkIfSupportedNetwork(n,`${n}:${r}`))try{if((i=F.state.remoteFeatures)!=null&&i.emailCapture){const l=(o=I.getAccountData(n))==null?void 0:o.user;await Oe.open({view:"DataCapture",data:{email:(l==null?void 0:l.email)??void 0}});return}if(Pi&&await Pi,(await e.getSessions(`${n}:${r}`,s)).length)return;await Oe.open({view:"SIWXSignMessage"})}catch(c){console.error("SIWXUtil:initializeIfEnabled",c),Ce.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(c)}),await((a=X._getClient())==null?void 0:a.disconnect().catch(console.error)),me.reset("Connect"),Br.showError("A problem occurred while trying initialize authentication")}},async isAuthenticated(t=I.getActiveCaipAddress()){if(!F.state.siwx||!t)return!0;const{chainNamespace:n,chainId:r,address:s}=At.parseCaipAddress(t),i=`${n}:${r}`;return(await $n.getSessions({address:s,caipNetworkId:i})).length>0},async requestSignMessage(){const t=F.state.siwx,e=ee.getPlainAddress(I.getActiveCaipAddress()),n=gs();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");try{const r=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),s=r.toString();let i="";t.signMessage?i=await t.signMessage({message:s,chainId:n.caipNetworkId,accountAddress:e}):(V.getConnectorId(n.chainNamespace)===B.CONNECTOR_ID.AUTH&&me.pushTransactionStack({}),i=await X.signMessage(s)||""),await t.addSession({data:r,message:s,signature:i}),I.setLastConnectedSIWECaipNetwork(n),Oe.close(),Ce.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(r){(!Oe.state.open||me.state.view==="ApproveTransaction")&&await Oe.open({view:"SIWXSignMessage"}),Br.showError("Error signing message"),Ce.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(r)}),console.error("SWIXUtil:requestSignMessage",r)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=I.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ee.getPlainAddress(I.getActiveCaipAddress())||""));s&&s.length>0?await I.switchActiveNetwork(r):await X.disconnect()}else await X.disconnect()}else Oe.close();Oe.close(),Ce.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=I.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ee.getPlainAddress(I.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=F.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=I.getActiveCaipAddress();n=ee.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=I.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=me.state.view==="ApproveTransaction",r=me.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var d;const i=$n.getSIWX(),o=gs();if(!i||!s.includes(B.CHAIN.EVM)||(d=F.state.remoteFeatures)!=null&&d.emailCapture){const f=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:f.address,chainId:f.chainId,accounts:f.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),l={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},u=await t.connect({chainId:e,socialUri:n,siwxMessage:l,preferredAccountType:r});return l.accountAddress=u.address,l.serializedMessage=u.message||"",u.signature&&u.message&&await $n.addEmbeddedWalletSession(l,u.message,u.signature),I.setLastConnectedSIWECaipNetwork(o),{address:u.address,chainId:u.chainId,accounts:u.accounts}},async addEmbeddedWalletSession(t,e,n){if(Pi)return Pi;const r=$n.getSIWX();return r?(Pi=r.addSession({data:t,message:e,signature:n}).finally(()=>{Pi=null}),Pi):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var l,u,d;const r=$n.getSIWX(),s=gs(),i=new Set(e.map(f=>f.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:((l=gs())==null?void 0:l.caipNetworkId)||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(f=>f!==o.chainId)]});Br.showLoading("Authenticating...",{autoClose:!1});const c={...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:(u=a.session.peer.metadata.icons)==null?void 0:u[0],type:"WALLET_CONNECT"};if(I.setAccountProp("connectedWalletInfo",c,Array.from(i)[0]),(d=a==null?void 0:a.auths)!=null&&d.length){const f=a.auths.map(h=>{const g=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud??"",version:h.p.version||o.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:g,signature:h.s.s,cacao:h}});try{await r.setSessions(f),s&&I.setLastConnectedSIWECaipNetwork(s),Ce.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:$n.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),Ce.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:$n.getSIWXEventProperties(h)}),await t.disconnect().catch(console.error),h}finally{Br.hide()}}return!0},getSIWXEventProperties(t){var n;const e=I.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||"",isSmartAccount:nn(e)===dt.ACCOUNT_TYPES.SMART_ACCOUNT,message:t?ee.parseError(t):void 0}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};class sA{constructor({provider:e,namespace:n}){this.id=B.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=I.getCaipNetworks.bind(I),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=F.state.universalProviderConfigOverride,s=ws.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return $n.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:W9})}}const W9=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],ir=Xe({message:"",variant:"info",open:!1}),V9={state:ir,subscribeKey(t,e){return kt(ir,t,e)},open(t,e){const{debug:n}=F.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(ir.message=s,ir.variant=e,ir.open=!0),i&&console.error(typeof i=="function"?i():i,r?{code:r}:void 0)},warn(t,e,n){ir.open=!0,ir.message=t,ir.variant="warning",e&&console.warn(e,n)},close(){ir.open=!1,ir.message="",ir.variant="info"}},ct=nr(V9),K9={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class G9 extends Error{}function Y9(){const{sdkType:t,sdkVersion:e,projectId:n}=F.getSnapshot(),r=new URL("https://rpc.walletconnect.org/v1/json-rpc");return r.searchParams.set("projectId",n),r.searchParams.set("st",t),r.searchParams.set("sv",e),r.searchParams.set("source","fund-wallet"),r.toString()}async function nm(t,e){const n=Y9(),{projectId:r}=F.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:r}},o=await(await fetch(n,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new G9(o.error.message);return o}async function uQ(t){return(await nm("reown_getExchanges",t)).result}async function dQ(t){return(await nm("reown_getExchangePayUrl",t)).result}async function fQ(t){return(await nm("reown_getExchangeBuyStatus",t)).result}function hQ(t,e){const{chainNamespace:n,chainId:r}=At.parseCaipNetworkId(t),s=K9[n];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${n}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${n}:${r}`}/${i}:${o}`}const Z9={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},J9={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},iA={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},X9={asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"},Q9={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},eB={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},tB={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},nB={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},rB={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},sB={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},iB={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},oB={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},aB={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},cB={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},lB={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},uB={ethereumETH:Z9,baseETH:J9,baseUSDC:iA,baseSepoliaETH:Q9,ethereumUSDC:eB,arbitrumUSDC:tB,polygonUSDC:nB,solanaUSDC:rB,ethereumUSDT:sB,optimismUSDT:iB,arbitrumUSDT:oB,polygonUSDT:aB,solanaUSDT:cB,solanaSOL:lB};function pQ(t){return Object.values(uB).filter(e=>e.network===t)}const je={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:B.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},tn={ConnectorExplorerIds:{[B.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[B.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[B.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[B.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[B.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[B.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[je.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[je.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[je.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[je.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[je.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[je.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[je.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[je.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[je.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[je.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[je.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[je.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[je.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:{[B.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[B.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[B.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[B.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[B.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[B.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[B.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[B.CONNECTOR_ID.INJECTED]:"Browser Wallet",[B.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[B.CONNECTOR_ID.COINBASE]:"Coinbase",[B.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[B.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[B.CONNECTOR_ID.LEDGER]:"Ledger",[B.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[B.CONNECTOR_ID.INJECTED]:"INJECTED",[B.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[B.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[B.CONNECTOR_ID.AUTH]:"AUTH",[je.CONNECTOR_TYPE_AUTH]:"AUTH"}},yr={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${je.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=I.state.activeChain;return B.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>V.getConnectorId(e)===B.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return B.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?B.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(r=>r!==t):[]},getConnectorStorageInfo(t,e){const r=H.getConnections()[e]??[];return{hasDisconnected:H.isConnectorDisconnected(t,e),hasConnected:r.some(s=>yr.isLowerCaseMatch(s.connectorId,t))}}},dB=new AbortController,nt={EmbeddedWalletAbortController:dB,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${nc()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${F.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systemâ€™s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},oA={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:iA.asset,84532:X9.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries(oA.TOKEN_ADDRESSES_BY_SYMBOL).find(([n,r])=>Object.values(r).includes(t))??[];return e}};var pf={exports:{}};const qb=og;pf.exports=Is;const ll=SB().console||{},fB={mapHttpRequest:cu,mapHttpResponse:cu,wrapRequestSerializer:Eh,wrapResponseSerializer:Eh,wrapErrorSerializer:Eh,req:cu,res:cu,err:Vb,errWithCause:Vb};function ci(t,e){return t==="silent"?1/0:e.levels.values[t]}const rm=Symbol("pino.logFuncs"),h0=Symbol("pino.hierarchy"),hB={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Wb(t,e){const n={logger:e,parent:t[h0]};e[h0]=n}function pB(t,e,n){const r={};e.forEach(s=>{r[s]=n[s]?n[s]:ll[s]||ll[hB[s]||"log"]||ea}),t[rm]=r}function gB(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Is(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||ll;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=gB(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(p){n[p]=n}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const c=t.level||"info",l=Object.create(n);l.log||(l.log=ea),pB(l,a,n),Wb({},l),Object.defineProperty(l,"levelVal",{get:d}),Object.defineProperty(l,"level",{get:f,set:h});const u={transmit:e,serialize:s,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:_B(t),messageKey:t.messageKey||"msg",onChild:t.onChild||ea};l.levels=mB(t),l.level=c,l.isLevelEnabled=function(p){return this.levels.values[p]?this.levels.values[p]>=this.levels.values[this.level]:!1},l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=ea,l.serializers=r,l._serialize=s,l._stdErrSerialize=i,l.child=function(...p){return g.call(this,u,...p)},e&&(l._logEvent=p0());function d(){return ci(this.level,this)}function f(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Ri(this,u,l,"error"),Ri(this,u,l,"fatal"),Ri(this,u,l,"warn"),Ri(this,u,l,"info"),Ri(this,u,l,"debug"),Ri(this,u,l,"trace"),o.forEach(m=>{Ri(this,u,l,m)})}function g(p,m,w){if(!m)throw new Error("missing bindings for child Pino");w=w||{},s&&m.serializers&&(w.serializers=m.serializers);const _=w.serializers;if(s&&_){var b=Object.assign({},r,_),A=t.browser.serialize===!0?Object.keys(b):s;delete m.serializers,sm([m],A,b,this._stdErrSerialize)}function C(x){this._childLevel=(x._childLevel|0)+1,this.bindings=m,b&&(this.serializers=b,this._serialize=A),e&&(this._logEvent=p0([].concat(x._logEvent.bindings,m)))}C.prototype=this;const S=new C(this);return Wb(this,S),S.child=function(...x){return g.call(this,p,...x)},S.level=w.level||this.level,p.onChild(S),S}return l}function mB(t){const e=t.customLevels||{},n=Object.assign({},Is.levels.values,e),r=Object.assign({},Is.levels.labels,yB(e));return{values:n,labels:r}}function yB(t){const e={};return Object.keys(t).forEach(function(n){e[t[n]]=n}),e}Is.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Is.stdSerializers=fB;Is.stdTimeFunctions=Object.assign({},{nullTime:aA,epochTime:cA,unixTime:AB,isoTime:IB});function bB(t){const e=[];t.bindings&&e.push(t.bindings);let n=t[h0];for(;n.parent;)n=n.parent,n.logger.bindings&&e.push(n.logger.bindings);return e.reverse()}function Ri(t,e,n,r){if(Object.defineProperty(t,r,{value:ci(t.level,n)>ci(r,n)?ea:n[rm][r],writable:!0,enumerable:!0,configurable:!0}),t[r]===ea){if(!e.transmit)return;const i=e.transmit.level||t.level,o=ci(i,n);if(ci(r,n)<o)return}t[r]=EB(t,e,n,r);const s=bB(t);s.length!==0&&(t[r]=wB(s,t[r]))}function wB(t,e){return function(){return e.apply(this,[...t,...arguments])}}function EB(t,e,n,r){return function(s){return function(){const o=e.timestamp(),a=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ll?ll:this;for(var l=0;l<a.length;l++)a[l]=arguments[l];var u=!1;if(e.serialize&&(sm(a,this._serialize,this.serializers,this._stdErrSerialize),u=!0),e.asObject||e.formatters?s.call(c,...vB(this,r,a,o,e)):s.apply(c,a),e.transmit){const d=e.transmit.level||t._level,f=ci(d,n),h=ci(r,n);if(h<f)return;CB(this,{ts:o,methodLevel:r,methodValue:h,transmitValue:n.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:ci(t._level,n)},a,u)}}}(t[rm][r])}function vB(t,e,n,r,s){const{level:i,log:o=d=>d}=s.formatters||{},a=n.slice();let c=a[0];const l={};let u=(t._childLevel|0)+1;if(u<1&&(u=1),r&&(l.time=r),i){const d=i(e,t.levels.values[e]);Object.assign(l,d)}else l.level=t.levels.values[e];if(s.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());return[o(l),...a]}else{if(c!==null&&typeof c=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());c=a.length?qb(a.shift(),a):void 0}else typeof c=="string"&&(c=qb(a.shift(),a));return c!==void 0&&(l[s.messageKey]=c),[o(l)]}}function sm(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Is.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s])&&e)for(const i in t[s])e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function CB(t,e,n,r=!1){const s=e.send,i=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,l=t._logEvent.bindings;r||sm(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(u){return l.indexOf(u)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,s(o,t._logEvent,c),t._logEvent=p0(l)}function p0(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Vb(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function _B(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?aA:cA}function cu(){return{}}function Eh(t){return t}function ea(){}function aA(){return!1}function cA(){return Date.now()}function AB(){return Math.round(Date.now()/1e3)}function IB(){return new Date(Date.now()).toISOString()}function SB(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}pf.exports.default=Is;pf.exports.pino=Is;var zo=pf.exports;const lA=_a(zo),xB={level:"info"},im=1e3*1024;var TB=Object.defineProperty,NB=(t,e,n)=>e in t?TB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ei=(t,e,n)=>NB(t,typeof e!="symbol"?e+"":e,n);let OB=class{constructor(e){ei(this,"nodeValue"),ei(this,"sizeInBytes"),ei(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Kb=class{constructor(e){ei(this,"lengthInNodes"),ei(this,"sizeInBytes"),ei(this,"head"),ei(this,"tail"),ei(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new OB(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};var PB=Object.defineProperty,RB=(t,e,n)=>e in t?PB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lu=(t,e,n)=>RB(t,typeof e!="symbol"?e+"":e,n);let uA=class{constructor(e,n=im){lu(this,"logs"),lu(this,"level"),lu(this,"levelValue"),lu(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=zo.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Kb(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===zo.levels.values.error?console.error(e):n===zo.levels.values.warn?console.warn(e):n===zo.levels.values.debug?console.debug(e):n===zo.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ln({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Kb(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Ln({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var kB=Object.defineProperty,$B=(t,e,n)=>e in t?kB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DB=(t,e,n)=>$B(t,e+"",n);let UB=class{constructor(e,n=im){DB(this,"baseChunkLogger"),this.baseChunkLogger=new uA(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var BB=Object.defineProperty,LB=(t,e,n)=>e in t?BB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MB=(t,e,n)=>LB(t,e+"",n);let FB=class{constructor(e,n=im){MB(this,"baseChunkLogger"),this.baseChunkLogger=new uA(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var jB=Object.defineProperty,zB=Object.defineProperties,HB=Object.getOwnPropertyDescriptors,Gb=Object.getOwnPropertySymbols,qB=Object.prototype.hasOwnProperty,WB=Object.prototype.propertyIsEnumerable,Yb=(t,e,n)=>e in t?jB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vd=(t,e)=>{for(var n in e||(e={}))qB.call(e,n)&&Yb(t,n,e[n]);if(Gb)for(var n of Gb(e))WB.call(e,n)&&Yb(t,n,e[n]);return t},Cd=(t,e)=>zB(t,HB(e));function VB(t){return Cd(vd({},t),{level:(t==null?void 0:t.level)||xB.level})}function KB(t){var e,n;const r=new UB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:lA(Cd(vd({},t.opts),{level:"trace",browser:Cd(vd({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function GB(t){var e;const n=new FB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:lA(Cd(vd({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function YB(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?KB(t):GB(t)}const ZB={createLogger(t,e="error"){const n=VB({level:e}),{logger:r}=YB({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},JB="rpc.walletconnect.org";function Zb(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const vh=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ur={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===JB}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:B.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${B.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return vh.includes(e)?Zb(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var f,h,g,p,m,w,_;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(g=(h=(f=t.rpcUrls)==null?void 0:f.default)==null?void 0:h.http)==null?void 0:g[0],a=this.getDefaultRpcUrl(t,i,n),c=((w=(m=(p=t==null?void 0:t.rpcUrls)==null?void 0:p.chainDefault)==null?void 0:m.http)==null?void 0:w[0])||o,l=((_=r==null?void 0:r[i])==null?void 0:_.map(b=>b.url))||[],u=[...l,...a?[a]:[]],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:tn.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ur.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Jl(a.url,a.config))}),vh.includes(t.caipNetworkId)&&r.push(Jl(Zb(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Jl(a))}),Dy(r)},extendWagmiTransports(t,e,n){if(vh.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Dy([n,Jl(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:B.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=H.getActiveCaipNetworkId(),n=I.getAllRequestedCaipNetworks(),r=Array.from(((c=I.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}};class to{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){var d;const{metadata:c,sdkVersion:l,sdkType:u}=F.getSnapshot();return to.instance||(to.instance=new Qx({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!((d=F.state.remoteFeatures)!=null&&d.emailCapture),metadata:c,sdkVersion:l,sdkType:u})),to.instance}}var gf={exports:{}};const Jb=og;gf.exports=Ss;const ul=fL().console||{},XB={mapHttpRequest:uu,mapHttpResponse:uu,wrapRequestSerializer:Ch,wrapResponseSerializer:Ch,wrapErrorSerializer:Ch,req:uu,res:uu,err:Qb,errWithCause:Qb};function li(t,e){return t==="silent"?1/0:e.levels.values[t]}const om=Symbol("pino.logFuncs"),g0=Symbol("pino.hierarchy"),QB={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Xb(t,e){const n={logger:e,parent:t[g0]};e[g0]=n}function eL(t,e,n){const r={};e.forEach(s=>{r[s]=n[s]?n[s]:ul[s]||ul[QB[s]||"log"]||ta}),t[om]=r}function tL(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ss(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||ul;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=tL(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(p){n[p]=n}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const c=t.level||"info",l=Object.create(n);l.log||(l.log=ta),eL(l,a,n),Xb({},l),Object.defineProperty(l,"levelVal",{get:d}),Object.defineProperty(l,"level",{get:f,set:h});const u={transmit:e,serialize:s,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:lL(t),messageKey:t.messageKey||"msg",onChild:t.onChild||ta};l.levels=nL(t),l.level=c,l.isLevelEnabled=function(p){return this.levels.values[p]?this.levels.values[p]>=this.levels.values[this.level]:!1},l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=ta,l.serializers=r,l._serialize=s,l._stdErrSerialize=i,l.child=function(...p){return g.call(this,u,...p)},e&&(l._logEvent=m0());function d(){return li(this.level,this)}function f(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,ki(this,u,l,"error"),ki(this,u,l,"fatal"),ki(this,u,l,"warn"),ki(this,u,l,"info"),ki(this,u,l,"debug"),ki(this,u,l,"trace"),o.forEach(m=>{ki(this,u,l,m)})}function g(p,m,w){if(!m)throw new Error("missing bindings for child Pino");w=w||{},s&&m.serializers&&(w.serializers=m.serializers);const _=w.serializers;if(s&&_){var b=Object.assign({},r,_),A=t.browser.serialize===!0?Object.keys(b):s;delete m.serializers,am([m],A,b,this._stdErrSerialize)}function C(x){this._childLevel=(x._childLevel|0)+1,this.bindings=m,b&&(this.serializers=b,this._serialize=A),e&&(this._logEvent=m0([].concat(x._logEvent.bindings,m)))}C.prototype=this;const S=new C(this);return Xb(this,S),S.child=function(...x){return g.call(this,p,...x)},S.level=w.level||this.level,p.onChild(S),S}return l}function nL(t){const e=t.customLevels||{},n=Object.assign({},Ss.levels.values,e),r=Object.assign({},Ss.levels.labels,rL(e));return{values:n,labels:r}}function rL(t){const e={};return Object.keys(t).forEach(function(n){e[t[n]]=n}),e}Ss.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ss.stdSerializers=XB;Ss.stdTimeFunctions=Object.assign({},{nullTime:dA,epochTime:fA,unixTime:uL,isoTime:dL});function sL(t){const e=[];t.bindings&&e.push(t.bindings);let n=t[g0];for(;n.parent;)n=n.parent,n.logger.bindings&&e.push(n.logger.bindings);return e.reverse()}function ki(t,e,n,r){if(Object.defineProperty(t,r,{value:li(t.level,n)>li(r,n)?ta:n[om][r],writable:!0,enumerable:!0,configurable:!0}),t[r]===ta){if(!e.transmit)return;const i=e.transmit.level||t.level,o=li(i,n);if(li(r,n)<o)return}t[r]=oL(t,e,n,r);const s=sL(t);s.length!==0&&(t[r]=iL(s,t[r]))}function iL(t,e){return function(){return e.apply(this,[...t,...arguments])}}function oL(t,e,n,r){return function(s){return function(){const o=e.timestamp(),a=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ul?ul:this;for(var l=0;l<a.length;l++)a[l]=arguments[l];var u=!1;if(e.serialize&&(am(a,this._serialize,this.serializers,this._stdErrSerialize),u=!0),e.asObject||e.formatters?s.call(c,...aL(this,r,a,o,e)):s.apply(c,a),e.transmit){const d=e.transmit.level||t._level,f=li(d,n),h=li(r,n);if(h<f)return;cL(this,{ts:o,methodLevel:r,methodValue:h,transmitValue:n.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:li(t._level,n)},a,u)}}}(t[om][r])}function aL(t,e,n,r,s){const{level:i,log:o=d=>d}=s.formatters||{},a=n.slice();let c=a[0];const l={};let u=(t._childLevel|0)+1;if(u<1&&(u=1),r&&(l.time=r),i){const d=i(e,t.levels.values[e]);Object.assign(l,d)}else l.level=t.levels.values[e];if(s.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());return[o(l),...a]}else{if(c!==null&&typeof c=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());c=a.length?Jb(a.shift(),a):void 0}else typeof c=="string"&&(c=Jb(a.shift(),a));return c!==void 0&&(l[s.messageKey]=c),[o(l)]}}function am(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Ss.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s])&&e)for(const i in t[s])e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function cL(t,e,n,r=!1){const s=e.send,i=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,l=t._logEvent.bindings;r||am(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(u){return l.indexOf(u)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,s(o,t._logEvent,c),t._logEvent=m0(l)}function m0(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Qb(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function lL(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?dA:fA}function uu(){return{}}function Ch(t){return t}function ta(){}function dA(){return!1}function fA(){return Date.now()}function uL(){return Math.round(Date.now()/1e3)}function dL(){return new Date(Date.now()).toISOString()}function fL(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}gf.exports.default=Ss;gf.exports.pino=Ss;var Ho=gf.exports;const hA=_a(Ho),hL={level:"info"},mf="custom_context",cm=1e3*1024;var pL=Object.defineProperty,gL=(t,e,n)=>e in t?pL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ti=(t,e,n)=>gL(t,typeof e!="symbol"?e+"":e,n);let mL=class{constructor(e){ti(this,"nodeValue"),ti(this,"sizeInBytes"),ti(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},ew=class{constructor(e){ti(this,"lengthInNodes"),ti(this,"sizeInBytes"),ti(this,"head"),ti(this,"tail"),ti(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new mL(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};var yL=Object.defineProperty,bL=(t,e,n)=>e in t?yL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,du=(t,e,n)=>bL(t,typeof e!="symbol"?e+"":e,n);let pA=class{constructor(e,n=cm){du(this,"logs"),du(this,"level"),du(this,"levelValue"),du(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=Ho.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new ew(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Ho.levels.values.error?console.error(e):n===Ho.levels.values.warn?console.warn(e):n===Ho.levels.values.debug?console.debug(e):n===Ho.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ln({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new ew(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Ln({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var wL=Object.defineProperty,EL=(t,e,n)=>e in t?wL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vL=(t,e,n)=>EL(t,e+"",n);let CL=class{constructor(e,n=cm){vL(this,"baseChunkLogger"),this.baseChunkLogger=new pA(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var _L=Object.defineProperty,AL=(t,e,n)=>e in t?_L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IL=(t,e,n)=>AL(t,e+"",n);let SL=class{constructor(e,n=cm){IL(this,"baseChunkLogger"),this.baseChunkLogger=new pA(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var xL=Object.defineProperty,TL=Object.defineProperties,NL=Object.getOwnPropertyDescriptors,tw=Object.getOwnPropertySymbols,OL=Object.prototype.hasOwnProperty,PL=Object.prototype.propertyIsEnumerable,nw=(t,e,n)=>e in t?xL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_d=(t,e)=>{for(var n in e||(e={}))OL.call(e,n)&&nw(t,n,e[n]);if(tw)for(var n of tw(e))PL.call(e,n)&&nw(t,n,e[n]);return t},Ad=(t,e)=>TL(t,NL(e));function RL(t){return Ad(_d({},t),{level:(t==null?void 0:t.level)||hL.level})}function kL(t,e,n=mf){return t[n]=e,t}function Sn(t,e=mf){return t[e]||""}function $L(t,e,n=mf){const r=Sn(t,n);return r.trim()?`${r}/${e}`:e}function Fn(t,e,n=mf){const r=$L(t,e,n),s=t.child({context:r});return kL(s,r,n)}function DL(t){var e,n;const r=new CL((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:hA(Ad(_d({},t.opts),{level:"trace",browser:Ad(_d({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function UL(t){var e;const n=new SL((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:hA(Ad(_d({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function gA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?DL(t):UL(t)}var BL=Object.defineProperty,LL=(t,e,n)=>e in t?BL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rw=(t,e,n)=>LL(t,typeof e!="symbol"?e+"":e,n);let ML=class extends _o{constructor(e){super(),this.opts=e,rw(this,"protocol","wc"),rw(this,"version",2)}};var FL=Object.defineProperty,jL=(t,e,n)=>e in t?FL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zL=(t,e,n)=>jL(t,e+"",n);let HL=class extends _o{constructor(e,n){super(),this.core=e,this.logger=n,zL(this,"records",new Map)}},qL=class{constructor(e,n){this.logger=e,this.core=n}},WL=class extends _o{constructor(e,n){super(),this.relayer=e,this.logger=n}},VL=class extends _o{constructor(e){super()}},KL=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},GL=class extends _o{constructor(e,n){super(),this.relayer=e,this.logger=n}},YL=class extends _o{constructor(e,n){super(),this.core=e,this.logger=n}},ZL=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}};class JL{constructor(e,n){this.projectId=e,this.logger=n}}let XL=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var QL=Object.defineProperty,eM=(t,e,n)=>e in t?QL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sw=(t,e,n)=>eM(t,typeof e!="symbol"?e+"":e,n);let tM=class{constructor(e){this.opts=e,sw(this,"protocol","wc"),sw(this,"version",2)}},nM=class{constructor(e){this.client=e}};const rM="0.1.1";function sM(){return rM}let ft=class y0 extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof y0){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof y0&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${sM()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return mA(this,e)}};function mA(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?mA(t.cause,e):e?null:t}const ko=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function dl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function go(t,...e){if(!iM(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function oM(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");dl(t.outputLen),dl(t.blockLen)}function ya(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yA(t,e){go(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function aM(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ba(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function _h(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xr(t,e){return t<<32-e|t>>>e}const cM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function lM(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function uM(t){for(let e=0;e<t.length;e++)t[e]=lM(t[e]);return t}const iw=cM?t=>t:uM;function dM(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function yf(t){return typeof t=="string"&&(t=dM(t)),go(t),t}function fM(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];go(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class lm{}function bA(t){const e=r=>t().update(yf(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function hM(t=32){if(ko&&typeof ko.getRandomValues=="function")return ko.getRandomValues(new Uint8Array(t));if(ko&&typeof ko.randomBytes=="function")return Uint8Array.from(ko.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function pM(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function gM(t,e,n){return t&e^~t&n}function mM(t,e,n){return t&e^t&n^e&n}class yM extends lm{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=_h(this.buffer)}update(e){ya(this),e=yf(e),go(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=_h(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ya(this),yA(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ba(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;pM(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=_h(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Fs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fu=BigInt(2**32-1),ow=BigInt(32);function bM(t,e=!1){return e?{h:Number(t&fu),l:Number(t>>ow&fu)}:{h:Number(t>>ow&fu)|0,l:Number(t&fu)|0}}function wM(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=bM(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const EM=(t,e,n)=>t<<n|e>>>32-n,vM=(t,e,n)=>e<<n|t>>>32-n,CM=(t,e,n)=>e<<n-32|t>>>64-n,_M=(t,e,n)=>t<<n-32|e>>>64-n,AM=BigInt(0),qa=BigInt(1),IM=BigInt(2),SM=BigInt(7),xM=BigInt(256),TM=BigInt(113),wA=[],EA=[],vA=[];for(let t=0,e=qa,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],wA.push(2*(5*r+n)),EA.push((t+1)*(t+2)/2%64);let s=AM;for(let i=0;i<7;i++)e=(e<<qa^(e>>SM)*TM)%xM,e&IM&&(s^=qa<<(qa<<BigInt(i))-qa);vA.push(s)}const CA=wM(vA,!0),NM=CA[0],OM=CA[1],aw=(t,e,n)=>n>32?CM(t,e,n):EM(t,e,n),cw=(t,e,n)=>n>32?_M(t,e,n):vM(t,e,n);function PM(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=aw(l,u,1)^n[a],f=cw(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=EA[o],c=aw(s,i,a),l=cw(s,i,a),u=wA[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=NM[r],t[1]^=OM[r]}ba(n)}class um extends lm{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,dl(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=aM(this.state)}clone(){return this._cloneInto()}keccak(){iw(this.state32),PM(this.state32,this.rounds),iw(this.state32),this.posOut=0,this.pos=0}update(e){ya(this),e=yf(e),go(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ya(this,!1),go(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return dl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(yA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ba(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new um(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const RM=(t,e,n)=>bA(()=>new um(e,t,n)),kM=RM(1,136,256/8),$M=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),js=new Uint32Array(64);class DM extends yM{constructor(e=32){super(64,e,8,!1),this.A=Fs[0]|0,this.B=Fs[1]|0,this.C=Fs[2]|0,this.D=Fs[3]|0,this.E=Fs[4]|0,this.F=Fs[5]|0,this.G=Fs[6]|0,this.H=Fs[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)js[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=js[d-15],h=js[d-2],g=xr(f,7)^xr(f,18)^f>>>3,p=xr(h,17)^xr(h,19)^h>>>10;js[d]=p+js[d-7]+g+js[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=xr(a,6)^xr(a,11)^xr(a,25),h=u+f+gM(a,c,l)+$M[d]+js[d]|0,p=(xr(r,2)^xr(r,13)^xr(r,22))+mM(r,s,i)|0;u=l,l=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){ba(js)}destroy(){this.set(0,0,0,0,0,0,0,0),ba(this.buffer)}}const UM=bA(()=>new DM);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dm=BigInt(0),b0=BigInt(1);function kl(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fm(t){if(!kl(t))throw new Error("Uint8Array expected")}function fl(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function hu(t){const e=t.toString(16);return e.length&1?"0"+e:e}function _A(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?dm:BigInt("0x"+t)}const AA=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",BM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function hl(t){if(fm(t),AA)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=BM[t[n]];return e}const ns={_0:48,_9:57,A:65,F:70,a:97,f:102};function lw(t){if(t>=ns._0&&t<=ns._9)return t-ns._0;if(t>=ns.A&&t<=ns.F)return t-(ns.A-10);if(t>=ns.a&&t<=ns.f)return t-(ns.a-10)}function Id(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(AA)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=lw(t.charCodeAt(i)),a=lw(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function no(t){return _A(hl(t))}function IA(t){return fm(t),_A(hl(Uint8Array.from(t).reverse()))}function $l(t,e){return Id(t.toString(16).padStart(e*2,"0"))}function SA(t,e){return $l(t,e).reverse()}function Kn(t,e,n){let r;if(typeof e=="string")try{r=Id(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(kl(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Sd(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];fm(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Ah=t=>typeof t=="bigint"&&dm<=t;function hm(t,e,n){return Ah(t)&&Ah(e)&&Ah(n)&&e<=t&&t<n}function na(t,e,n,r){if(!hm(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function LM(t){let e;for(e=0;t>dm;t>>=b0,e+=1);return e}const bf=t=>(b0<<BigInt(t))-b0,Ih=t=>new Uint8Array(t),uw=t=>Uint8Array.from(t);function MM(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ih(t),s=Ih(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=Ih(0))=>{s=a(uw([0]),d),r=a(),d.length!==0&&(s=a(uw([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return Sd(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(l()));)c();return o(),h}}const FM={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||kl(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function wf(t,e,n={}){const r=(s,i,o)=>{const a=FM[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function dw(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}function jM(t,e){if(gw(t)>e)throw new cF({givenSize:gw(t),maxSize:e})}const rs={zero:48,nine:57,A:65,F:70,a:97,f:102};function fw(t){if(t>=rs.zero&&t<=rs.nine)return t-rs.zero;if(t>=rs.A&&t<=rs.F)return t-(rs.A-10);if(t>=rs.a&&t<=rs.f)return t-(rs.a-10)}function zM(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new lF({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function xA(t,e){if(Ci(t)>e)throw new XM({givenSize:Ci(t),maxSize:e})}function HM(t,e){if(typeof e=="number"&&e>0&&e>Ci(t)-1)throw new OA({offset:e,position:"start",size:Ci(t)})}function qM(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ci(t)!==n-e)throw new OA({offset:n,position:"end",size:Ci(t)})}function TA(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new QM({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const WM="#__bigint";function pm(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+WM:s,n)}const VM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KM(t,e={}){const{strict:n=!1}=e;if(!t)throw new hw(t);if(typeof t!="string")throw new hw(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new pw(t);if(!t.startsWith("0x"))throw new pw(t)}function GM(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function gm(t){return t instanceof Uint8Array?xd(t):Array.isArray(t)?xd(new Uint8Array(t)):t}function xd(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=VM[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(xA(r,e.size),NA(r,e.size)):r}function Sh(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new JM({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?YM(c,r):c}function YM(t,e){return TA(t,{dir:"left",size:e})}function NA(t,e){return TA(t,{dir:"right",size:e})}function ls(t,e,n,r={}){const{strict:s}=r;HM(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&qM(i,e,n),i}function Ci(t){return Math.ceil((t.length-2)/2)}function ZM(t,e={}){const{strict:n=!1}=e;try{return KM(t,{strict:n}),!0}catch{return!1}}class JM extends ft{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class hw extends ft{constructor(e){super(`Value \`${typeof e=="object"?pm(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class pw extends ft{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let XM=class extends ft{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class OA extends ft{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let QM=class extends ft{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const eF=new TextEncoder;function tF(t){if(!(t instanceof Uint8Array)){if(!t)throw new pu(t);if(typeof t!="object")throw new pu(t);if(!("BYTES_PER_ELEMENT"in t))throw new pu(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new pu(t)}}function nF(t){return t instanceof Uint8Array?t:typeof t=="string"?sF(t):rF(t)}function rF(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function sF(t,e={}){const{size:n}=e;let r=t;n&&(xA(t,n),r=NA(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=fw(s.charCodeAt(c++)),u=fw(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new ft(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function iF(t,e={}){const{size:n}=e,r=eF.encode(t);return typeof n=="number"?(jM(r,n),oF(r,n)):r}function oF(t,e){return zM(t,{dir:"right",size:e})}function gw(t){return t.length}function aF(t){try{return tF(t),!0}catch{return!1}}class pu extends ft{constructor(e){super(`Value \`${typeof e=="object"?pm(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class cF extends ft{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class lF extends ft{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function PA(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=kM(nF(t));return n==="Bytes"?r:xd(r)}class uF extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const dF={checksum:new uF(8192)},xh=dF.checksum;function RA(t,e={}){const{compressed:n}=e,{prefix:r,x:s,y:i}=t;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new mw({prefix:r,cause:new yF});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new mw({prefix:r,cause:new mF});return}throw new gF({publicKey:t})}function fF(t){const e=(()=>{if(ZM(t))return kA(t);if(aF(t))return hF(t);const{prefix:n,x:r,y:s}=t;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return RA(e),e}function hF(t){return kA(xd(t))}function kA(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new bF({publicKey:t});if(t.length===130){const r=BigInt(ls(t,0,32)),s=BigInt(ls(t,32,64));return{prefix:4,x:r,y:s}}if(t.length===132){const r=Number(ls(t,0,1)),s=BigInt(ls(t,1,33)),i=BigInt(ls(t,33,65));return{prefix:r,x:s,y:i}}const e=Number(ls(t,0,1)),n=BigInt(ls(t,1,33));return{prefix:e,x:n}}function pF(t,e={}){RA(t);const{prefix:n,x:r,y:s}=t,{includePrefix:i=!0}=e;return GM(i?Sh(n,{size:1}):"0x",Sh(r,{size:32}),typeof s=="bigint"?Sh(s,{size:32}):"0x")}class gF extends ft{constructor({publicKey:e}){super(`Value \`${pm(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class mw extends ft{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class mF extends ft{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class yF extends ft{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let bF=class extends ft{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Ci(gm(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const wF=/^0x[a-fA-F0-9]{40}$/;function $A(t,e={}){const{strict:n=!0}=e;if(!wF.test(t))throw new yw({address:t,cause:new CF});if(n){if(t.toLowerCase()===t)return;if(DA(t)!==t)throw new yw({address:t,cause:new _F})}}function DA(t){if(xh.has(t))return xh.get(t);$A(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=PA(iF(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return xh.set(t,s),s}function EF(t,e={}){const{checksum:n=!1}=e;return $A(t),n?DA(t):t}function vF(t,e={}){const n=PA(`0x${pF(t).slice(4)}`).substring(26);return EF(`0x${n}`,e)}class yw extends ft{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class CF extends ft{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class _F extends ft{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class UA extends lm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,oM(e);const r=yf(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ba(i)}update(e){return ya(this),this.iHash.update(e),this}digestInto(e){ya(this),go(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const BA=(t,e,n)=>new UA(t,e).update(n).digest();BA.create=(t,e)=>new UA(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wn=BigInt(0),rn=BigInt(1),Ki=BigInt(2),AF=BigInt(3),LA=BigInt(4),MA=BigInt(5),FA=BigInt(8);function mn(t,e){const n=t%e;return n>=wn?n:e+n}function zn(t,e,n){let r=t;for(;e-- >wn;)r*=r,r%=n;return r}function w0(t,e){if(t===wn)throw new Error("invert: expected non-zero number");if(e<=wn)throw new Error("invert: expected positive modulus, got "+e);let n=mn(t,e),r=e,s=wn,i=rn;for(;n!==wn;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==rn)throw new Error("invert: does not exist");return mn(s,e)}function jA(t,e){const n=(t.ORDER+rn)/LA,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function IF(t,e){const n=(t.ORDER-MA)/FA,r=t.mul(e,Ki),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Ki),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function SF(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-rn,n=0;for(;e%Ki===wn;)e/=Ki,n++;let r=Ki;const s=mm(t);for(;bw(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return jA;let i=s.pow(r,e);const o=(e+rn)/Ki;return function(c,l){if(c.is0(l))return l;if(bw(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),f=c.pow(l,e),h=c.pow(l,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,p=c.sqr(f);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===u)throw new Error("Cannot find square root");const m=rn<<BigInt(u-g-1),w=c.pow(d,m);u=g,d=c.sqr(w),f=c.mul(f,d),h=c.mul(h,w)}return h}}function xF(t){return t%LA===AF?jA:t%FA===MA?IF:SF(t)}const TF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function NF(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=TF.reduce((r,s)=>(r[s]="function",r),e);return wf(t,n)}function OF(t,e,n){if(n<wn)throw new Error("invalid exponent, negatives unsupported");if(n===wn)return t.ONE;if(n===rn)return e;let r=t.ONE,s=e;for(;n>wn;)n&rn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=rn;return r}function zA(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function bw(t,e){const n=(t.ORDER-rn)/Ki,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function HA(t,e){e!==void 0&&dl(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function mm(t,e,n=!1,r={}){if(t<=wn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=HA(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:bf(s),ZERO:wn,ONE:rn,create:c=>mn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return wn<=c&&c<t},is0:c=>c===wn,isOdd:c=>(c&rn)===rn,neg:c=>mn(-c,t),eql:(c,l)=>c===l,sqr:c=>mn(c*c,t),add:(c,l)=>mn(c+l,t),sub:(c,l)=>mn(c-l,t),mul:(c,l)=>mn(c*l,t),pow:(c,l)=>OF(a,c,l),div:(c,l)=>mn(c*w0(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>w0(c,t),sqrt:r.sqrt||(c=>(o||(o=xF(t)),o(a,c))),toBytes:c=>n?SA(c,i):$l(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?IA(c):no(c)},invertBatch:c=>zA(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function qA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function WA(t){const e=qA(t);return e+Math.ceil(e/2)}function PF(t,e,n=!1){const r=t.length,s=qA(e),i=WA(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?IA(t):no(t),a=mn(o,e-rn)+rn;return n?SA(a,s):$l(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ww=BigInt(0),E0=BigInt(1);function Th(t,e){const n=e.negate();return t?n:e}function VA(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Nh(t,e){VA(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=bf(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Ew(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=E0);const l=e*r,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function RF(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function kF(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Oh=new WeakMap,KA=new WeakMap;function Ph(t){return KA.get(t)||1}function $F(t,e){return{constTimeNegate:Th,hasPrecomputes(n){return Ph(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>ww;)r&E0&&(s=s.add(i)),i=i.double(),r>>=E0;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Nh(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Nh(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:g}=Ew(s,c,a);s=l,d?o=o.add(Th(h,r[g])):i=i.add(Th(f,r[u]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Nh(n,e);for(let a=0;a<o.windows&&s!==ww;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=Ew(s,a,o);if(s=c,!u){const f=r[l];i=i.add(d?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=Oh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Oh.set(r,s(i))),i},wNAFCached(n,r,s){const i=Ph(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Ph(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){VA(r,e),KA.set(n,r),Oh.delete(n)}}}function DF(t,e,n,r){RF(n,t),kF(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=LM(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=bf(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let p=0;p<i;p++){const m=r[p],w=Number(m>>BigInt(h)&l);u[w]=u[w].add(n[p])}let g=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),g=g.add(m);if(f=f.add(g),h!==0)for(let p=0;p<c;p++)f=f.double()}return f}function GA(t){return NF(t.Fp),wf(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...HA(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vw(t){t.lowS!==void 0&&fl("lowS",t.lowS),t.prehash!==void 0&&fl("prehash",t.prehash)}function UF(t){const e=GA(t);wf(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class BF extends Error{constructor(e=""){super(e)}}const fs={Err:BF,_tlv:{encode:(t,e)=>{const{Err:n}=fs;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=hu(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?hu(s.length/2|128):"";return hu(t)+i+s+e},decode(t,e){const{Err:n}=fs;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=fs;if(t<ps)throw new e("integer: negative integers are not allowed");let n=hu(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=fs;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return no(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=fs,s=Kn("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=fs,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function Rh(t,e){return hl($l(t,e))}const ps=BigInt(0),Nt=BigInt(1);BigInt(2);const kh=BigInt(3),LF=BigInt(4);function MF(t){const e=UF(t),{Fp:n}=e,r=mm(e.n,e.nBitLength),s=e.toBytes||((b,A,C)=>{const S=A.toAffine();return Sd(Uint8Array.from([4]),n.toBytes(S.x),n.toBytes(S.y))}),i=e.fromBytes||(b=>{const A=b.subarray(1),C=n.fromBytes(A.subarray(0,n.BYTES)),S=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:C,y:S}});function o(b){const{a:A,b:C}=e,S=n.sqr(b),x=n.mul(S,b);return n.add(n.add(x,n.mul(b,A)),C)}function a(b,A){const C=n.sqr(A),S=o(b);return n.eql(C,S)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,kh),LF),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(b){return hm(b,Nt,e.n)}function d(b){const{allowedPrivateKeyLengths:A,nByteLength:C,wrapPrivateKey:S,n:x}=e;if(A&&typeof b!="bigint"){if(kl(b)&&(b=hl(b)),typeof b!="string"||!A.includes(b.length))throw new Error("invalid private key");b=b.padStart(C*2,"0")}let $;try{$=typeof b=="bigint"?b:no(Kn("private key",b,C))}catch{throw new Error("invalid private key, expected hex or "+C+" bytes, got "+typeof b)}return S&&($=mn($,x)),na("private key",$,Nt,x),$}function f(b){if(!(b instanceof p))throw new Error("ProjectivePoint expected")}const h=dw((b,A)=>{const{px:C,py:S,pz:x}=b;if(n.eql(x,n.ONE))return{x:C,y:S};const $=b.is0();A==null&&(A=$?n.ONE:n.inv(x));const O=n.mul(C,A),L=n.mul(S,A),M=n.mul(x,A);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:O,y:L}}),g=dw(b=>{if(b.is0()){if(e.allowInfinityPoint&&!n.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:A,y:C}=b.toAffine();if(!n.isValid(A)||!n.isValid(C))throw new Error("bad point: x or y not FE");if(!a(A,C))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(A,C,S){if(A==null||!n.isValid(A))throw new Error("x required");if(C==null||!n.isValid(C)||n.is0(C))throw new Error("y required");if(S==null||!n.isValid(S))throw new Error("z required");this.px=A,this.py=C,this.pz=S,Object.freeze(this)}static fromAffine(A){const{x:C,y:S}=A||{};if(!A||!n.isValid(C)||!n.isValid(S))throw new Error("invalid affine point");if(A instanceof p)throw new Error("projective point not allowed");const x=$=>n.eql($,n.ZERO);return x(C)&&x(S)?p.ZERO:new p(C,S,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const C=zA(n,A.map(S=>S.pz));return A.map((S,x)=>S.toAffine(C[x])).map(p.fromAffine)}static fromHex(A){const C=p.fromAffine(i(Kn("pointHex",A)));return C.assertValidity(),C}static fromPrivateKey(A){return p.BASE.multiply(d(A))}static msm(A,C){return DF(p,r,A,C)}_setWindowSize(A){_.setWindowSize(this,A)}assertValidity(){g(this)}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){f(A);const{px:C,py:S,pz:x}=this,{px:$,py:O,pz:L}=A,M=n.eql(n.mul(C,L),n.mul($,x)),U=n.eql(n.mul(S,L),n.mul(O,x));return M&&U}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:C}=e,S=n.mul(C,kh),{px:x,py:$,pz:O}=this;let L=n.ZERO,M=n.ZERO,U=n.ZERO,P=n.mul(x,x),D=n.mul($,$),y=n.mul(O,O),v=n.mul(x,$);return v=n.add(v,v),U=n.mul(x,O),U=n.add(U,U),L=n.mul(A,U),M=n.mul(S,y),M=n.add(L,M),L=n.sub(D,M),M=n.add(D,M),M=n.mul(L,M),L=n.mul(v,L),U=n.mul(S,U),y=n.mul(A,y),v=n.sub(P,y),v=n.mul(A,v),v=n.add(v,U),U=n.add(P,P),P=n.add(U,P),P=n.add(P,y),P=n.mul(P,v),M=n.add(M,P),y=n.mul($,O),y=n.add(y,y),P=n.mul(y,v),L=n.sub(L,P),U=n.mul(y,D),U=n.add(U,U),U=n.add(U,U),new p(L,M,U)}add(A){f(A);const{px:C,py:S,pz:x}=this,{px:$,py:O,pz:L}=A;let M=n.ZERO,U=n.ZERO,P=n.ZERO;const D=e.a,y=n.mul(e.b,kh);let v=n.mul(C,$),T=n.mul(S,O),k=n.mul(x,L),N=n.add(C,S),R=n.add($,O);N=n.mul(N,R),R=n.add(v,T),N=n.sub(N,R),R=n.add(C,x);let j=n.add($,L);return R=n.mul(R,j),j=n.add(v,k),R=n.sub(R,j),j=n.add(S,x),M=n.add(O,L),j=n.mul(j,M),M=n.add(T,k),j=n.sub(j,M),P=n.mul(D,R),M=n.mul(y,k),P=n.add(M,P),M=n.sub(T,P),P=n.add(T,P),U=n.mul(M,P),T=n.add(v,v),T=n.add(T,v),k=n.mul(D,k),R=n.mul(y,R),T=n.add(T,k),k=n.sub(v,k),k=n.mul(D,k),R=n.add(R,k),v=n.mul(T,R),U=n.add(U,v),v=n.mul(j,R),M=n.mul(N,M),M=n.sub(M,v),v=n.mul(N,T),P=n.mul(j,P),P=n.add(P,v),new p(M,U,P)}subtract(A){return this.add(A.negate())}is0(){return this.equals(p.ZERO)}wNAF(A){return _.wNAFCached(this,A,p.normalizeZ)}multiplyUnsafe(A){const{endo:C,n:S}=e;na("scalar",A,ps,S);const x=p.ZERO;if(A===ps)return x;if(this.is0()||A===Nt)return this;if(!C||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,A,p.normalizeZ);let{k1neg:$,k1:O,k2neg:L,k2:M}=C.splitScalar(A),U=x,P=x,D=this;for(;O>ps||M>ps;)O&Nt&&(U=U.add(D)),M&Nt&&(P=P.add(D)),D=D.double(),O>>=Nt,M>>=Nt;return $&&(U=U.negate()),L&&(P=P.negate()),P=new p(n.mul(P.px,C.beta),P.py,P.pz),U.add(P)}multiply(A){const{endo:C,n:S}=e;na("scalar",A,Nt,S);let x,$;if(C){const{k1neg:O,k1:L,k2neg:M,k2:U}=C.splitScalar(A);let{p:P,f:D}=this.wNAF(L),{p:y,f:v}=this.wNAF(U);P=_.constTimeNegate(O,P),y=_.constTimeNegate(M,y),y=new p(n.mul(y.px,C.beta),y.py,y.pz),x=P.add(y),$=D.add(v)}else{const{p:O,f:L}=this.wNAF(A);x=O,$=L}return p.normalizeZ([x,$])[0]}multiplyAndAddUnsafe(A,C,S){const x=p.BASE,$=(L,M)=>M===ps||M===Nt||!L.equals(x)?L.multiplyUnsafe(M):L.multiply(M),O=$(this,C).add($(A,S));return O.is0()?void 0:O}toAffine(A){return h(this,A)}isTorsionFree(){const{h:A,isTorsionFree:C}=e;if(A===Nt)return!0;if(C)return C(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:C}=e;return A===Nt?this:C?C(p,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return fl("isCompressed",A),this.assertValidity(),s(p,this,A)}toHex(A=!0){return fl("isCompressed",A),hl(this.toRawBytes(A))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const{endo:m,nBitLength:w}=e,_=$F(p,m?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:u}}function FF(t){const e=GA(t);return wf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function jF(t){const e=FF(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(y){return mn(y,r)}function l(y){return w0(y,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:h}=MF({...e,toBytes(y,v,T){const k=v.toAffine(),N=n.toBytes(k.x),R=Sd;return fl("isCompressed",T),T?R(Uint8Array.from([v.hasEvenY()?2:3]),N):R(Uint8Array.from([4]),N,n.toBytes(k.y))},fromBytes(y){const v=y.length,T=y[0],k=y.subarray(1);if(v===o&&(T===2||T===3)){const N=no(k);if(!hm(N,Nt,n.ORDER))throw new Error("Point is not on curve");const R=f(N);let j;try{j=n.sqrt(R)}catch(K){const G=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+G)}const z=(j&Nt)===Nt;return(T&1)===1!==z&&(j=n.neg(j)),{x:N,y:j}}else if(v===a&&T===4){const N=n.fromBytes(k.subarray(0,n.BYTES)),R=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:N,y:R}}else{const N=o,R=a;throw new Error("invalid Point, expected length of "+N+", or uncompressed "+R+", got "+v)}}});function g(y){const v=r>>Nt;return y>v}function p(y){return g(y)?c(-y):y}const m=(y,v,T)=>no(y.slice(v,T));class w{constructor(v,T,k){na("r",v,Nt,r),na("s",T,Nt,r),this.r=v,this.s=T,k!=null&&(this.recovery=k),Object.freeze(this)}static fromCompact(v){const T=s;return v=Kn("compactSignature",v,T*2),new w(m(v,0,T),m(v,T,2*T))}static fromDER(v){const{r:T,s:k}=fs.toSig(Kn("DER",v));return new w(T,k)}assertValidity(){}addRecoveryBit(v){return new w(this.r,this.s,v)}recoverPublicKey(v){const{r:T,s:k,recovery:N}=this,R=x(Kn("msgHash",v));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const j=N===2||N===3?T+e.n:T;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=N&1?"03":"02",Q=u.fromHex(z+Rh(j,n.BYTES)),K=l(j),G=c(-R*K),ae=c(k*K),ge=u.BASE.multiplyAndAddUnsafe(Q,G,ae);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Id(this.toDERHex())}toDERHex(){return fs.hexFromSig(this)}toCompactRawBytes(){return Id(this.toCompactHex())}toCompactHex(){const v=s;return Rh(this.r,v)+Rh(this.s,v)}}const _={isValidPrivateKey(y){try{return d(y),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const y=WA(e.n);return PF(e.randomBytes(y),e.n)},precompute(y=8,v=u.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}};function b(y,v=!0){return u.fromPrivateKey(y).toRawBytes(v)}function A(y){if(typeof y=="bigint")return!1;if(y instanceof u)return!0;const T=Kn("key",y).length,k=n.BYTES,N=k+1,R=2*k+1;if(!(e.allowedPrivateKeyLengths||s===N))return T===N||T===R}function C(y,v,T=!0){if(A(y)===!0)throw new Error("first arg must be private key");if(A(v)===!1)throw new Error("second arg must be public key");return u.fromHex(v).multiply(d(y)).toRawBytes(T)}const S=e.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");const v=no(y),T=y.length*8-i;return T>0?v>>BigInt(T):v},x=e.bits2int_modN||function(y){return c(S(y))},$=bf(i);function O(y){return na("num < 2^"+i,y,ps,$),$l(y,s)}function L(y,v,T=M){if(["recovered","canonical"].some(pe=>pe in T))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:N}=e;let{lowS:R,prehash:j,extraEntropy:z}=T;R==null&&(R=!0),y=Kn("msgHash",y),vw(T),j&&(y=Kn("prehashed msgHash",k(y)));const Q=x(y),K=d(v),G=[O(K),O(Q)];if(z!=null&&z!==!1){const pe=z===!0?N(n.BYTES):z;G.push(Kn("extraEntropy",pe))}const ae=Sd(...G),ge=Q;function Te(pe){const Ne=S(pe);if(!h(Ne))return;const st=l(Ne),bt=u.BASE.multiply(Ne).toAffine(),It=c(bt.x);if(It===ps)return;const Xt=c(st*c(ge+It*K));if(Xt===ps)return;let Yr=(bt.x===It?0:2)|Number(bt.y&Nt),Os=Xt;return R&&g(Xt)&&(Os=p(Xt),Yr^=1),new w(It,Os,Yr)}return{seed:ae,k2sig:Te}}const M={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function P(y,v,T=M){const{seed:k,k2sig:N}=L(y,v,T),R=e;return MM(R.hash.outputLen,R.nByteLength,R.hmac)(k,N)}u.BASE._setWindowSize(8);function D(y,v,T,k=U){var Yr;const N=y;v=Kn("msgHash",v),T=Kn("publicKey",T);const{lowS:R,prehash:j,format:z}=k;if(vw(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const Q=typeof N=="string"||kl(N),K=!Q&&!z&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!Q&&!K)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,ae;try{if(K&&(G=new w(N.r,N.s)),Q){try{z!=="compact"&&(G=w.fromDER(N))}catch(Os){if(!(Os instanceof fs.Err))throw Os}!G&&z!=="der"&&(G=w.fromCompact(N))}ae=u.fromHex(T)}catch{return!1}if(!G||R&&G.hasHighS())return!1;j&&(v=e.hash(v));const{r:ge,s:Te}=G,pe=x(v),Ne=l(Te),st=c(pe*Ne),bt=c(ge*Ne),It=(Yr=u.BASE.multiplyAndAddUnsafe(ae,st,bt))==null?void 0:Yr.toAffine();return It?c(It.x)===ge:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:C,sign:P,verify:D,ProjectivePoint:u,Signature:w,utils:_}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zF(t){return{hash:t,hmac:(e,...n)=>BA(t,e,fM(...n)),randomBytes:hM}}function HF(t,e){const n=r=>jF({...t,...zF(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),qF=BigInt(0),WF=BigInt(1),v0=BigInt(2),_w=(t,e)=>(t+e/v0)/e;function VF(t){const e=YA,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=zn(u,n,e)*u%e,f=zn(d,n,e)*u%e,h=zn(f,v0,e)*l%e,g=zn(h,s,e)*h%e,p=zn(g,i,e)*g%e,m=zn(p,a,e)*p%e,w=zn(m,c,e)*m%e,_=zn(w,a,e)*p%e,b=zn(_,n,e)*u%e,A=zn(b,o,e)*g%e,C=zn(A,r,e)*l%e,S=zn(C,v0,e);if(!C0.eql(C0.sqr(S),t))throw new Error("Cannot find square root");return S}const C0=mm(YA,void 0,void 0,{sqrt:VF}),KF=HF({a:qF,b:BigInt(7),Fp:C0,n:Cw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Cw,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-WF*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=_w(i*t,e),c=_w(-r*t,e);let l=mn(t-a*n-c*s,e),u=mn(-a*r-c*i,e);const d=l>o,f=u>o;if(d&&(l=e-l),f&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:f,k2:u}}}},UM);function GF(t){if(t.length!==130&&t.length!==132)throw new ZF({signature:t});const e=BigInt(ls(t,0,32)),n=BigInt(ls(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return YF(s)}catch{throw new JF({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function YF(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new XF({value:t})}class ZF extends ft{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Ci(gm(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class JF extends ft{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class XF extends ft{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function QF(t){return vF(e7(t))}function e7(t){const{payload:e,signature:n}=t,{r,s,yParity:i}=n,a=new KF.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i).recoverPublicKey(gm(e).substring(2));return fF(a)}function ym(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ZA(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ym(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function hc(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=ZA(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return ym(n)}function JA(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Aw=JA("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$h=JA("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=ZA(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),XA={utf8:Aw,"utf-8":Aw,hex:xb.base16,latin1:$h,ascii:$h,binary:$h,...xb};function Zn(t,e="utf8"){const n=XA[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ym(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Cn(t,e="utf8"){const n=XA[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}var t7={};const n7=":";function Es(t){const[e,n]=t.split(n7);return{namespace:e,reference:n}}function QA(t,e){return t.includes(":")?[t]:e.chains||[]}var r7=Object.defineProperty,s7=Object.defineProperties,i7=Object.getOwnPropertyDescriptors,Iw=Object.getOwnPropertySymbols,o7=Object.prototype.hasOwnProperty,a7=Object.prototype.propertyIsEnumerable,_0=(t,e,n)=>e in t?r7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sw=(t,e)=>{for(var n in e||(e={}))o7.call(e,n)&&_0(t,n,e[n]);if(Iw)for(var n of Iw(e))a7.call(e,n)&&_0(t,n,e[n]);return t},c7=(t,e)=>s7(t,i7(e)),xw=(t,e,n)=>_0(t,typeof e!="symbol"?e+"":e,n);const l7="ReactNative",Bn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},u7="js";function Td(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ai(){return!po()&&!!Kg()&&navigator.product===l7}function d7(){return Ai()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function f7(){return Ai()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Oa(){return!Td()&&!!Kg()&&!!po()}function Dl(){return Ai()?Bn.reactNative:Td()?Bn.node:Oa()?Bn.browser:Bn.unknown}function Tw(){var t;try{return Ai()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function h7(t,e){const n=new URLSearchParams(t);return Object.entries(e).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!=null&&n.set(r,String(s))}),n.toString()}function p7(t){var e,n;const r=e2();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),c7(Sw(Sw({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function e2(){return A_()||{name:"",description:"",url:"",icons:[""]}}function g7(){if(Dl()===Bn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=v$();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function m7(){var t;const e=Dl();return e===Bn.browser?[e,((t=__())==null?void 0:t.host)||"unknown"].join(":"):e}function t2(t,e,n){const r=g7(),s=m7();return[[t,e].join("-"),[u7,n].join("-"),r,s].join("/")}function y7({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=t2(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=h7(l[1]||"",d);return l[0]+"?"+f}function Gi(t,e){return t.filter(n=>e.includes(n)).length===t.length}function A0(t){return Object.fromEntries(t.entries())}function I0(t){return new Map(Object.entries(t))}function Mi(t=Z.FIVE_MINUTES,e){const n=Z.toMiliseconds(t||Z.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Lr(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function n2(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function b7(t){return n2("topic",t)}function w7(t){return n2("id",t)}function r2(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function pt(t,e){return Z.fromMiliseconds(Date.now()+Z.toMiliseconds(t))}function Dr(t){return Date.now()>=Z.toMiliseconds(t)}function We(t,e){return`${t}${e?`:${e}`:""}`}function jr(t=[],e=[]){return[...new Set([...t,...e])]}async function E7({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=v7(i,t,e),a=Dl();if(a===Bn.browser){if(!((r=po())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}C7(o)}else a===Bn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function v7(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${S7(r,!0)}`}else s=`${s}/wc?${r}`;return s}function C7(t){let e="_self";I7()?e="_top":(A7()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function _7(t,e){let n="";try{if(Oa()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Nw(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function Ow(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function bm(){return typeof process<"u"&&t7.IS_VITEST==="true"}function A7(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function I7(){try{return window.self!==window.top}catch{return!1}}function S7(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function s2(t){return Buffer.from(t,"base64").toString("utf-8")}function x7(t){return new Promise(e=>setTimeout(e,t))}let T7=class{constructor({limit:e}){xw(this,"limit"),xw(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const gu=BigInt(2**32-1),Pw=BigInt(32);function i2(t,e=!1){return e?{h:Number(t&gu),l:Number(t>>Pw&gu)}:{h:Number(t>>Pw&gu)|0,l:Number(t&gu)|0}}function o2(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=i2(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Rw=(t,e,n)=>t>>>n,kw=(t,e,n)=>t<<32-n|e>>>n,Gs=(t,e,n)=>t>>>n|e<<32-n,Ys=(t,e,n)=>t<<32-n|e>>>n,sc=(t,e,n)=>t<<64-n|e>>>n-32,ic=(t,e,n)=>t>>>n-32|e<<64-n,N7=(t,e)=>e,O7=(t,e)=>t,P7=(t,e,n)=>t<<n|e>>>32-n,R7=(t,e,n)=>e<<n|t>>>32-n,k7=(t,e,n)=>e<<n-32|t>>>64-n,$7=(t,e,n)=>t<<n-32|e>>>64-n;function lr(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const wm=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Em=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,D7=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),U7=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,B7=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),L7=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,$o=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ef(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function _r(t,...e){if(!Ef(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vf(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");xs(t.outputLen),xs(t.blockLen)}function _i(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vm(t,e){_r(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function pl(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function er(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Dh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Tr(t,e){return t<<32-e|t>>>e}const a2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function c2(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const is=a2?t=>t:t=>c2(t);function M7(t){for(let e=0;e<t.length;e++)t[e]=c2(t[e]);return t}const Zs=a2?t=>t:M7,l2=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",F7=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ra(t){if(_r(t),l2)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=F7[t[n]];return e}const ss={_0:48,_9:57,A:65,F:70,a:97,f:102};function $w(t){if(t>=ss._0&&t<=ss._9)return t-ss._0;if(t>=ss.A&&t<=ss.F)return t-(ss.A-10);if(t>=ss.a&&t<=ss.f)return t-(ss.a-10)}function Nd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(l2)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=$w(t.charCodeAt(i)),a=$w(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function u2(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function vr(t){return typeof t=="string"&&(t=u2(t)),_r(t),t}function ni(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];_r(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Cf=class{};function Ul(t){const e=r=>t().update(vr(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function j7(t){const e=(r,s)=>t(s).update(vr(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function xo(t=32){if($o&&typeof $o.getRandomValues=="function")return $o.getRandomValues(new Uint8Array(t));if($o&&typeof $o.randomBytes=="function")return Uint8Array.from($o.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const z7=BigInt(0),Wa=BigInt(1),H7=BigInt(2),q7=BigInt(7),W7=BigInt(256),V7=BigInt(113),d2=[],f2=[],h2=[];for(let t=0,e=Wa,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],d2.push(2*(5*r+n)),f2.push((t+1)*(t+2)/2%64);let s=z7;for(let i=0;i<7;i++)e=(e<<Wa^(e>>q7)*V7)%W7,e&H7&&(s^=Wa<<(Wa<<BigInt(i))-Wa);h2.push(s)}const p2=o2(h2,!0),K7=p2[0],G7=p2[1],Dw=(t,e,n)=>n>32?k7(t,e,n):P7(t,e,n),Uw=(t,e,n)=>n>32?$7(t,e,n):R7(t,e,n);function Y7(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Dw(l,u,1)^n[a],f=Uw(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=f2[o],c=Dw(s,i,a),l=Uw(s,i,a),u=d2[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=K7[r],t[1]^=G7[r]}er(n)}let Z7=class g2 extends Cf{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,xs(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=pl(this.state)}clone(){return this._cloneInto()}keccak(){Zs(this.state32),Y7(this.state32,this.rounds),Zs(this.state32),this.posOut=0,this.pos=0}update(e){_i(this),e=vr(e),_r(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){_i(this,!1),_r(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return xs(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(vm(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,er(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new g2(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const J7=(t,e,n)=>Ul(()=>new Z7(e,t,n)),X7=J7(1,136,256/8);function Q7(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function ej(t,e,n){return t&e^~t&n}function tj(t,e,n){return t&e^t&n^e&n}let m2=class extends Cf{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Dh(this.buffer)}update(e){_i(this),e=vr(e),_r(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Dh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){_i(this),vm(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,er(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Q7(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Dh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const zs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Kt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),nj=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hs=new Uint32Array(64);class rj extends m2{constructor(e=32){super(64,e,8,!1),this.A=zs[0]|0,this.B=zs[1]|0,this.C=zs[2]|0,this.D=zs[3]|0,this.E=zs[4]|0,this.F=zs[5]|0,this.G=zs[6]|0,this.H=zs[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Hs[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Hs[d-15],h=Hs[d-2],g=Tr(f,7)^Tr(f,18)^f>>>3,p=Tr(h,17)^Tr(h,19)^h>>>10;Hs[d]=p+Hs[d-7]+g+Hs[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Tr(a,6)^Tr(a,11)^Tr(a,25),h=u+f+ej(a,c,l)+nj[d]+Hs[d]|0,g=(Tr(r,2)^Tr(r,13)^Tr(r,22))+tj(r,s,i)|0;u=l,l=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){er(Hs)}destroy(){this.set(0,0,0,0,0,0,0,0),er(this.buffer)}}const y2=o2(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),sj=y2[0],ij=y2[1],qs=new Uint32Array(80),Ws=new Uint32Array(80);let Cm=class extends m2{constructor(e=64){super(128,e,16,!1),this.Ah=Kt[0]|0,this.Al=Kt[1]|0,this.Bh=Kt[2]|0,this.Bl=Kt[3]|0,this.Ch=Kt[4]|0,this.Cl=Kt[5]|0,this.Dh=Kt[6]|0,this.Dl=Kt[7]|0,this.Eh=Kt[8]|0,this.El=Kt[9]|0,this.Fh=Kt[10]|0,this.Fl=Kt[11]|0,this.Gh=Kt[12]|0,this.Gl=Kt[13]|0,this.Hh=Kt[14]|0,this.Hl=Kt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:g,Hh:p,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,g,p,m]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,g,p,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,n){for(let b=0;b<16;b++,n+=4)qs[b]=e.getUint32(n),Ws[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const A=qs[b-15]|0,C=Ws[b-15]|0,S=Gs(A,C,1)^Gs(A,C,8)^Rw(A,C,7),x=Ys(A,C,1)^Ys(A,C,8)^kw(A,C,7),$=qs[b-2]|0,O=Ws[b-2]|0,L=Gs($,O,19)^sc($,O,61)^Rw($,O,6),M=Ys($,O,19)^ic($,O,61)^kw($,O,6),U=D7(x,M,Ws[b-7],Ws[b-16]),P=U7(U,S,L,qs[b-7],qs[b-16]);qs[b]=P|0,Ws[b]=U|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:g,Gh:p,Gl:m,Hh:w,Hl:_}=this;for(let b=0;b<80;b++){const A=Gs(d,f,14)^Gs(d,f,18)^sc(d,f,41),C=Ys(d,f,14)^Ys(d,f,18)^ic(d,f,41),S=d&h^~d&p,x=f&g^~f&m,$=B7(_,C,x,ij[b],Ws[b]),O=L7($,w,A,S,sj[b],qs[b]),L=$|0,M=Gs(r,s,28)^sc(r,s,34)^sc(r,s,39),U=Ys(r,s,28)^ic(r,s,34)^ic(r,s,39),P=r&i^r&a^i&a,D=s&o^s&c^o&c;w=p|0,_=m|0,p=h|0,m=g|0,h=d|0,g=f|0,{h:d,l:f}=lr(l|0,u|0,O|0,L|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const y=wm(L,U,D);r=Em(y,O,M,P),s=y|0}({h:r,l:s}=lr(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=lr(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=lr(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=lr(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=lr(this.Eh|0,this.El|0,d|0,f|0),{h,l:g}=lr(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:m}=lr(this.Gh|0,this.Gl|0,p|0,m|0),{h:w,l:_}=lr(this.Hh|0,this.Hl|0,w|0,_|0),this.set(r,s,i,o,a,c,l,u,d,f,h,g,p,m,w,_)}roundClean(){er(qs,Ws)}destroy(){er(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class oj extends Cm{constructor(){super(48),this.Ah=Vt[0]|0,this.Al=Vt[1]|0,this.Bh=Vt[2]|0,this.Bl=Vt[3]|0,this.Ch=Vt[4]|0,this.Cl=Vt[5]|0,this.Dh=Vt[6]|0,this.Dl=Vt[7]|0,this.Eh=Vt[8]|0,this.El=Vt[9]|0,this.Fh=Vt[10]|0,this.Fl=Vt[11]|0,this.Gh=Vt[12]|0,this.Gl=Vt[13]|0,this.Hh=Vt[14]|0,this.Hl=Vt[15]|0}}const Gt=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class aj extends Cm{constructor(){super(32),this.Ah=Gt[0]|0,this.Al=Gt[1]|0,this.Bh=Gt[2]|0,this.Bl=Gt[3]|0,this.Ch=Gt[4]|0,this.Cl=Gt[5]|0,this.Dh=Gt[6]|0,this.Dl=Gt[7]|0,this.Eh=Gt[8]|0,this.El=Gt[9]|0,this.Fh=Gt[10]|0,this.Fl=Gt[11]|0,this.Gh=Gt[12]|0,this.Gl=Gt[13]|0,this.Hh=Gt[14]|0,this.Hl=Gt[15]|0}}const _f=Ul(()=>new rj),cj=Ul(()=>new Cm),lj=Ul(()=>new oj),uj=Ul(()=>new aj),dj=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Et=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function Vs(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ne[2*t],l=ne[2*t+1],u=ne[2*e],d=ne[2*e+1],f=ne[2*n],h=ne[2*n+1],g=ne[2*r],p=ne[2*r+1],m=wm(c,u,o);l=Em(m,l,d,a),c=m|0,{Dh:p,Dl:g}={Dh:p^l,Dl:g^c},{Dh:p,Dl:g}={Dh:N7(p,g),Dl:O7(p)},{h,l:f}=lr(h,f,p,g),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:Gs(d,u,24),Bl:Ys(d,u,24)},ne[2*t]=c,ne[2*t+1]=l,ne[2*e]=u,ne[2*e+1]=d,ne[2*n]=f,ne[2*n+1]=h,ne[2*r]=g,ne[2*r+1]=p}function Ks(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ne[2*t],l=ne[2*t+1],u=ne[2*e],d=ne[2*e+1],f=ne[2*n],h=ne[2*n+1],g=ne[2*r],p=ne[2*r+1],m=wm(c,u,o);l=Em(m,l,d,a),c=m|0,{Dh:p,Dl:g}={Dh:p^l,Dl:g^c},{Dh:p,Dl:g}={Dh:Gs(p,g,16),Dl:Ys(p,g,16)},{h,l:f}=lr(h,f,p,g),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:sc(d,u,63),Bl:ic(d,u,63)},ne[2*t]=c,ne[2*t+1]=l,ne[2*e]=u,ne[2*e+1]=d,ne[2*n]=f,ne[2*n+1]=h,ne[2*r]=g,ne[2*r+1]=p}function fj(t,e={},n,r,s){if(xs(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class hj extends Cf{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,xs(e),xs(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=pl(this.buffer)}update(e){_i(this),e=vr(e),_r(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Zs(s),this.compress(s,0,!1),Zs(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Zs(d);for(let f=0;c+n<i;f+=s.length,c+=n)this.length+=n,this.compress(d,f,!1);Zs(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){_i(this),vm(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,er(this.buffer.subarray(n)),Zs(r),this.compress(r,0,!0),Zs(r);const s=pl(e);this.get().forEach((i,o)=>s[o]=is(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class pj extends hj{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Et[0]|0,this.v0h=Et[1]|0,this.v1l=Et[2]|0,this.v1h=Et[3]|0,this.v2l=Et[4]|0,this.v2h=Et[5]|0,this.v3l=Et[6]|0,this.v3h=Et[7]|0,this.v4l=Et[8]|0,this.v4h=Et[9]|0,this.v5l=Et[10]|0,this.v5h=Et[11]|0,this.v6l=Et[12]|0,this.v6h=Et[13]|0,this.v7l=Et[14]|0,this.v7h=Et[15]|0,fj(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=vr(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=vr(i);const a=pl(i);this.v4l^=is(a[0]),this.v4h^=is(a[1]),this.v5l^=is(a[2]),this.v5h^=is(a[3])}if(s!==void 0){s=vr(s);const a=pl(s);this.v6l^=is(a[0]),this.v6h^=is(a[1]),this.v7l^=is(a[2]),this.v7h^=is(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:f,v6l:h,v6h:g,v7l:p,v7h:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,g,p,m]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,g,p,m){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=g|0,this.v7l=p|0,this.v7h=m|0}compress(e,n,r){this.get().forEach((c,l)=>ne[l]=c),ne.set(Et,16);let{h:s,l:i}=i2(BigInt(this.length));ne[24]=Et[8]^i,ne[25]=Et[9]^s,r&&(ne[28]=~ne[28],ne[29]=~ne[29]);let o=0;const a=dj;for(let c=0;c<12;c++)Vs(0,4,8,12,e,n+2*a[o++]),Ks(0,4,8,12,e,n+2*a[o++]),Vs(1,5,9,13,e,n+2*a[o++]),Ks(1,5,9,13,e,n+2*a[o++]),Vs(2,6,10,14,e,n+2*a[o++]),Ks(2,6,10,14,e,n+2*a[o++]),Vs(3,7,11,15,e,n+2*a[o++]),Ks(3,7,11,15,e,n+2*a[o++]),Vs(0,5,10,15,e,n+2*a[o++]),Ks(0,5,10,15,e,n+2*a[o++]),Vs(1,6,11,12,e,n+2*a[o++]),Ks(1,6,11,12,e,n+2*a[o++]),Vs(2,7,8,13,e,n+2*a[o++]),Ks(2,7,8,13,e,n+2*a[o++]),Vs(3,4,9,14,e,n+2*a[o++]),Ks(3,4,9,14,e,n+2*a[o++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],er(ne)}destroy(){this.destroyed=!0,er(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const gj=j7(t=>new pj(t)),mj="https://rpc.walletconnect.org/v1";function b2(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(X7(n)).toString("hex")}async function yj(t,e,n,r,s,i){switch(n.t){case"eip191":return await bj(t,e,n.s);case"eip1271":return await wj(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function bj(t,e,n){const r=GF(n);return QF({payload:b2(e),signature:r}).toLowerCase()===t.toLowerCase()}async function wj(t,e,n,r,s,i){const o=Es(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:b2(e)).substring(2),f=a+d+c+u+l,h=await fetch(`${i||mj}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Ej(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:g}=await h.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Ej(){return Date.now()+Math.floor(Math.random()*1e3)}function vj(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Na.encode(i)}function Cj(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=gj(r,{dkLen:32});return Na.encode(s)}function Bw(t){const e=new Uint8Array(_f(_j(t)));return Na.encode(e)}function _j(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function Lw(t){const e=Buffer.from(t,"base64"),n=PD(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=CD(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=uj(i);return W$.encode(o).replace(/=+$/,"")}function Uh(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function Aj(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(Uh(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(Uh(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(Uh(r.length)),s.push(r);const i=Buffer.concat(s),o=_f(i);return Buffer.from(o).toString("hex").toUpperCase()}function Ij(t){var e,n;const r=[];try{if(typeof t=="string")return r.push(t),r;if(typeof t!="object")return r;t!=null&&t.id&&r.push(t.id);const s=(n=(e=t==null?void 0:t.capabilities)==null?void 0:e.caip345)==null?void 0:n.transactionHashes;s&&r.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return r}var Sj=Object.defineProperty,xj=Object.defineProperties,Tj=Object.getOwnPropertyDescriptors,Mw=Object.getOwnPropertySymbols,Nj=Object.prototype.hasOwnProperty,Oj=Object.prototype.propertyIsEnumerable,Fw=(t,e,n)=>e in t?Sj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pj=(t,e)=>{for(var n in e||(e={}))Nj.call(e,n)&&Fw(t,n,e[n]);if(Mw)for(var n of Mw(e))Oj.call(e,n)&&Fw(t,n,e[n]);return t},Rj=(t,e)=>xj(t,Tj(e));const w2="did:pkh:",kj={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},$j=t=>t?kj[t]||t:"",Af=t=>t==null?void 0:t.split(":"),Dj=t=>{const e=t&&Af(t);if(e)return t.includes(w2)?e[3]:e[1]},Uj=t=>{const e=t&&Af(t);if(e)return t.includes(w2)?e[2]:e[0]},S0=t=>{const e=t&&Af(t);if(e)return e[2]+":"+e[3]},Od=t=>{const e=t&&Af(t);if(e)return e.pop()};async function jw(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=E2(s,s.iss),o=Od(s.iss);return await yj(o,i,r,S0(s.iss),n)}const E2=(t,e)=>{const n=Uj(e);if(!n)throw new Error("Invalid issuer: "+e);const r=`${t.domain} wants you to sign in with your ${$j(n)} account:`,s=Od(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,c=`Chain ID: ${Dj(e)}`,l=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,f=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,p=Mu(t.resources);if(p){const m=gl(p);i=Wj(i,m)}return[r,s,"",i,"",o,a,c,l,u,d,f,h,g].filter(m=>m!=null).join(`
`)};function Bj(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Lj(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function mo(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Mj(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Fj(e,n,r)}}}function Fj(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function v2(t){return mo(t),`urn:recap:${Bj(t).replace(/=/g,"")}`}function gl(t){const e=Lj(t.replace("urn:recap:",""));return mo(e),e}function jj(t,e,n){const r=Mj(t,e,n);return v2(r)}function zj(t){return t&&t.includes("urn:recap:")}function Hj(t,e){const n=gl(t),r=gl(e),s=qj(n,r);return v2(s)}function qj(t,e){mo(t),mo(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Rj(Pj({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Wj(t="",e){mo(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function zw(t){var e;const n=gl(t);mo(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Hw(t){const e=gl(t);mo(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Mu(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return zj(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function C2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function x0(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Bh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yn(t,...e){if(!C2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Vj(t,e){yn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function fi(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function wa(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Kj(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Gj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Yj(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function T0(t){if(typeof t=="string")t=Yj(t);else if(C2(t))t=N0(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Zj(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Jj(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Xj=(t,e)=>{function n(r,...s){if(yn(r),!Gj)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?yn(l):yn(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&yn(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");yn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,yn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(yn(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function Ww(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!ez(e))throw new Error("invalid output, must be aligned");return e}function Vw(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Qj(t,e,n){x0(n);const r=new Uint8Array(16),s=Kj(r);return Vw(s,0,BigInt(e),n),Vw(s,8,BigInt(t),n),r}function ez(t){return t.byteOffset%4===0}function N0(t){return Uint8Array.from(t)}const _2=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),tz=_2("expand 16-byte k"),nz=_2("expand 32-byte k"),rz=fi(tz),sz=fi(nz);function Le(t,e){return t<<e|t>>>32-e}function O0(t){return t.byteOffset%4===0}const mu=64,iz=16,A2=2**32-1,Kw=new Uint32Array;function oz(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(mu),u=fi(l),d=O0(s)&&O0(i),f=d?fi(s):Kw,h=d?fi(i):Kw;for(let g=0;g<c;o++){if(t(e,n,r,u,o,a),o>=A2)throw new Error("arx: counter overflow");const p=Math.min(mu,c-g);if(d&&p===mu){const m=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let w=0,_;w<iz;w++)_=m+w,h[_]=f[_]^u[w];g+=mu;continue}for(let m=0,w;m<p;m++)w=g+m,i[w]=s[w]^l[m];g+=p}}function az(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Zj({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Bh(s),Bh(o),x0(i),x0(n),(a,c,l,u,d=0)=>{yn(a),yn(c),yn(l);const f=l.length;if(u===void 0&&(u=new Uint8Array(f)),yn(u),Bh(d),d<0||d>=A2)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let g=a.length,p,m;if(g===32)h.push(p=N0(a)),m=sz;else if(g===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),m=rz,h.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);O0(c)||h.push(c=N0(c));const w=fi(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,w,fi(c.subarray(0,16)),w),c=c.subarray(16)}const _=16-s;if(_!==c.length)throw new Error(`arx: nonce must be ${_} or 16 bytes`);if(_!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,h.push(c)}const b=fi(c);return oz(t,m,w,b,l,u,d,o),wa(...h),u}}const Dt=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class cz{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=T0(e),yn(e,32);const n=Dt(e,0),r=Dt(e,2),s=Dt(e,4),i=Dt(e,6),o=Dt(e,8),a=Dt(e,10),c=Dt(e,12),l=Dt(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Dt(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],f=o[5],h=o[6],g=o[7],p=o[8],m=o[9],w=Dt(e,n+0),_=Dt(e,n+2),b=Dt(e,n+4),A=Dt(e,n+6),C=Dt(e,n+8),S=Dt(e,n+10),x=Dt(e,n+12),$=Dt(e,n+14);let O=i[0]+(w&8191),L=i[1]+((w>>>13|_<<3)&8191),M=i[2]+((_>>>10|b<<6)&8191),U=i[3]+((b>>>7|A<<9)&8191),P=i[4]+((A>>>4|C<<12)&8191),D=i[5]+(C>>>1&8191),y=i[6]+((C>>>14|S<<2)&8191),v=i[7]+((S>>>11|x<<5)&8191),T=i[8]+((x>>>8|$<<8)&8191),k=i[9]+($>>>5|s),N=0,R=N+O*a+L*(5*m)+M*(5*p)+U*(5*g)+P*(5*h);N=R>>>13,R&=8191,R+=D*(5*f)+y*(5*d)+v*(5*u)+T*(5*l)+k*(5*c),N+=R>>>13,R&=8191;let j=N+O*c+L*a+M*(5*m)+U*(5*p)+P*(5*g);N=j>>>13,j&=8191,j+=D*(5*h)+y*(5*f)+v*(5*d)+T*(5*u)+k*(5*l),N+=j>>>13,j&=8191;let z=N+O*l+L*c+M*a+U*(5*m)+P*(5*p);N=z>>>13,z&=8191,z+=D*(5*g)+y*(5*h)+v*(5*f)+T*(5*d)+k*(5*u),N+=z>>>13,z&=8191;let Q=N+O*u+L*l+M*c+U*a+P*(5*m);N=Q>>>13,Q&=8191,Q+=D*(5*p)+y*(5*g)+v*(5*h)+T*(5*f)+k*(5*d),N+=Q>>>13,Q&=8191;let K=N+O*d+L*u+M*l+U*c+P*a;N=K>>>13,K&=8191,K+=D*(5*m)+y*(5*p)+v*(5*g)+T*(5*h)+k*(5*f),N+=K>>>13,K&=8191;let G=N+O*f+L*d+M*u+U*l+P*c;N=G>>>13,G&=8191,G+=D*a+y*(5*m)+v*(5*p)+T*(5*g)+k*(5*h),N+=G>>>13,G&=8191;let ae=N+O*h+L*f+M*d+U*u+P*l;N=ae>>>13,ae&=8191,ae+=D*c+y*a+v*(5*m)+T*(5*p)+k*(5*g),N+=ae>>>13,ae&=8191;let ge=N+O*g+L*h+M*f+U*d+P*u;N=ge>>>13,ge&=8191,ge+=D*l+y*c+v*a+T*(5*m)+k*(5*p),N+=ge>>>13,ge&=8191;let Te=N+O*p+L*g+M*h+U*f+P*d;N=Te>>>13,Te&=8191,Te+=D*u+y*l+v*c+T*a+k*(5*m),N+=Te>>>13,Te&=8191;let pe=N+O*m+L*p+M*g+U*h+P*f;N=pe>>>13,pe&=8191,pe+=D*d+y*u+v*l+T*c+k*a,N+=pe>>>13,pe&=8191,N=(N<<2)+N|0,N=N+R|0,R=N&8191,N=N>>>13,j+=N,i[0]=R,i[1]=j,i[2]=z,i[3]=Q,i[4]=K,i[5]=G,i[6]=ae,i[7]=ge,i[8]=Te,i[9]=pe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;wa(r)}update(e){qw(this),e=T0(e),yn(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){wa(this.h,this.r,this.buffer,this.pad)}digestInto(e){qw(this),Vj(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function lz(t){const e=(r,s)=>t(s).update(T0(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const uz=lz(t=>new cz(t));function dz(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],f=e[2],h=e[3],g=e[4],p=e[5],m=e[6],w=e[7],_=s,b=n[0],A=n[1],C=n[2],S=o,x=a,$=c,O=l,L=u,M=d,U=f,P=h,D=g,y=p,v=m,T=w,k=_,N=b,R=A,j=C;for(let Q=0;Q<i;Q+=2)S=S+L|0,k=Le(k^S,16),D=D+k|0,L=Le(L^D,12),S=S+L|0,k=Le(k^S,8),D=D+k|0,L=Le(L^D,7),x=x+M|0,N=Le(N^x,16),y=y+N|0,M=Le(M^y,12),x=x+M|0,N=Le(N^x,8),y=y+N|0,M=Le(M^y,7),$=$+U|0,R=Le(R^$,16),v=v+R|0,U=Le(U^v,12),$=$+U|0,R=Le(R^$,8),v=v+R|0,U=Le(U^v,7),O=O+P|0,j=Le(j^O,16),T=T+j|0,P=Le(P^T,12),O=O+P|0,j=Le(j^O,8),T=T+j|0,P=Le(P^T,7),S=S+M|0,j=Le(j^S,16),v=v+j|0,M=Le(M^v,12),S=S+M|0,j=Le(j^S,8),v=v+j|0,M=Le(M^v,7),x=x+U|0,k=Le(k^x,16),T=T+k|0,U=Le(U^T,12),x=x+U|0,k=Le(k^x,8),T=T+k|0,U=Le(U^T,7),$=$+P|0,N=Le(N^$,16),D=D+N|0,P=Le(P^D,12),$=$+P|0,N=Le(N^$,8),D=D+N|0,P=Le(P^D,7),O=O+L|0,R=Le(R^O,16),y=y+R|0,L=Le(L^y,12),O=O+L|0,R=Le(R^O,8),y=y+R|0,L=Le(L^y,7);let z=0;r[z++]=o+S|0,r[z++]=a+x|0,r[z++]=c+$|0,r[z++]=l+O|0,r[z++]=u+L|0,r[z++]=d+M|0,r[z++]=f+U|0,r[z++]=h+P|0,r[z++]=g+D|0,r[z++]=p+y|0,r[z++]=m+v|0,r[z++]=w+T|0,r[z++]=_+k|0,r[z++]=b+N|0,r[z++]=A+R|0,r[z++]=C+j|0}const fz=az(dz,{counterRight:!1,counterLength:4,allowShortKeys:!1}),hz=new Uint8Array(16),Gw=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(hz.subarray(n))},pz=new Uint8Array(32);function Yw(t,e,n,r,s){const i=t(e,n,pz),o=uz.create(i);s&&Gw(o,s),Gw(o,r);const a=Qj(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return wa(i,a),c}const gz=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=Ww(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Yw(t,e,n,a,r);return i.set(c,o),wa(c),i},decrypt(s,i){i=Ww(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Yw(t,e,n,o,r);if(!Jj(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),wa(c),i}}),I2=Xj({blockSize:64,nonceLength:12,tagLength:16},gz(fz));let S2=class extends Cf{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,vf(e);const r=vr(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),er(i)}update(e){return _i(this),this.iHash.update(e),this}digestInto(e){_i(this),_r(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const If=(t,e,n)=>new S2(t,e).update(n).digest();If.create=(t,e)=>new S2(t,e);function mz(t,e,n){return vf(t),n===void 0&&(n=new Uint8Array(t.outputLen)),If(t,vr(n),vr(e))}const Lh=Uint8Array.from([0]),Zw=Uint8Array.of();function yz(t,e,n,r=32){vf(t),xs(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=Zw);const o=new Uint8Array(i*s),a=If.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)Lh[0]=u+1,c.update(u===0?Zw:l).update(n).update(Lh).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),er(l,Lh),o.slice(0,r)}const bz=(t,e,n,r,s)=>yz(t,mz(t,e,n),r,s),Sf=_f,_m=BigInt(0),P0=BigInt(1);function Pd(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Yi(t,e,n=""){const r=Ef(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function yu(t){const e=t.toString(16);return e.length&1?"0"+e:e}function x2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_m:BigInt("0x"+t)}function xf(t){return x2(ra(t))}function Rd(t){return _r(t),x2(ra(Uint8Array.from(t).reverse()))}function Am(t,e){return Nd(t.toString(16).padStart(e*2,"0"))}function Im(t,e){return Am(t,e).reverse()}function Zt(t,e,n){let r;if(typeof e=="string")try{r=Nd(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Ef(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Mh=t=>typeof t=="bigint"&&_m<=t;function wz(t,e,n){return Mh(t)&&Mh(e)&&Mh(n)&&e<=t&&t<n}function R0(t,e,n,r){if(!wz(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function T2(t){let e;for(e=0;t>_m;t>>=P0,e+=1);return e}const Bl=t=>(P0<<BigInt(t))-P0;function Ez(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){i=l();const g=i.slice();h.push(g),f+=i.length}return ni(...h)};return(f,h)=>{c(),u(f);let g;for(;!(g=h(d()));)u();return c(),g}}function Tf(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Jw(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const En=BigInt(0),sn=BigInt(1),Zi=BigInt(2),N2=BigInt(3),O2=BigInt(4),P2=BigInt(5),vz=BigInt(7),R2=BigInt(8),Cz=BigInt(9),k2=BigInt(16);function Rn(t,e){const n=t%e;return n>=En?n:e+n}function cr(t,e,n){let r=t;for(;e-- >En;)r*=r,r%=n;return r}function Xw(t,e){if(t===En)throw new Error("invert: expected non-zero number");if(e<=En)throw new Error("invert: expected positive modulus, got "+e);let n=Rn(t,e),r=e,s=En,i=sn;for(;n!==En;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==sn)throw new Error("invert: does not exist");return Rn(s,e)}function Sm(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function $2(t,e){const n=(t.ORDER+sn)/O2,r=t.pow(e,n);return Sm(t,r,e),r}function _z(t,e){const n=(t.ORDER-P2)/R2,r=t.mul(e,Zi),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Zi),s),a=t.mul(i,t.sub(o,t.ONE));return Sm(t,a,e),a}function Az(t){const e=Ii(t),n=D2(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+vz)/k2;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,r);const d=a.mul(l,s),f=a.mul(l,i),h=a.eql(a.sqr(u),c),g=a.eql(a.sqr(d),c);l=a.cmov(l,u,h),u=a.cmov(f,d,g);const p=a.eql(a.sqr(u),c),m=a.cmov(l,u,p);return Sm(a,m,c),m}}function D2(t){if(t<N2)throw new Error("sqrt is not defined for small field");let e=t-sn,n=0;for(;e%Zi===En;)e/=Zi,n++;let r=Zi;const s=Ii(t);for(;Qw(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return $2;let i=s.pow(r,e);const o=(e+sn)/Zi;return function(a,c){if(a.is0(c))return c;if(Qw(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(h++,g=a.sqr(g),h===l)throw new Error("Cannot find square root");const p=sn<<BigInt(l-h-1),m=a.pow(u,p);l=h,u=a.sqr(m),d=a.mul(d,u),f=a.mul(f,m)}return f}}function Iz(t){return t%O2===N2?$2:t%R2===P2?_z:t%k2===Cz?Az(t):D2(t)}const Sz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xz(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Sz.reduce((r,s)=>(r[s]="function",r),e);return Tf(t,n),t}function Tz(t,e,n){if(n<En)throw new Error("invalid exponent, negatives unsupported");if(n===En)return t.ONE;if(n===sn)return e;let r=t.ONE,s=e;for(;n>En;)n&sn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=sn;return r}function U2(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Qw(t,e){const n=(t.ORDER-sn)/Zi,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function B2(t,e){e!==void 0&&xs(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ii(t,e,n=!1,r={}){if(t<=En)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:l}=B2(t,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:Bl(c),ZERO:En,ONE:sn,allowedLengths:a,create:f=>Rn(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return En<=f&&f<t},is0:f=>f===En,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&sn)===sn,neg:f=>Rn(-f,t),eql:(f,h)=>f===h,sqr:f=>Rn(f*f,t),add:(f,h)=>Rn(f+h,t),sub:(f,h)=>Rn(f-h,t),mul:(f,h)=>Rn(f*h,t),pow:(f,h)=>Tz(d,f,h),div:(f,h)=>Rn(f*Xw(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Xw(f,t),sqrt:i||(f=>(u||(u=Iz(t)),u(d,f))),toBytes:f=>n?Im(f,l):Am(f,l),fromBytes:(f,h=!0)=>{if(a){if(!a.includes(f.length)||f.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const p=new Uint8Array(l);p.set(f,n?0:p.length-f.length),f=p}if(f.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+f.length);let g=n?Rd(f):xf(f);if(o&&(g=Rn(g,t)),!h&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>U2(d,f),cmov:(f,h,g)=>g?h:f});return Object.freeze(d)}function L2(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function M2(t){const e=L2(t);return e+Math.ceil(e/2)}function Nz(t,e,n=!1){const r=t.length,s=L2(e),i=M2(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Rd(t):xf(t),a=Rn(o,e-sn)+sn;return n?Im(a,s):Am(a,s)}const Ea=BigInt(0),Ji=BigInt(1);function kd(t,e){const n=e.negate();return t?n:e}function Fh(t,e){const n=U2(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function F2(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function jh(t,e){F2(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Bl(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function e1(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ji);const l=e*r,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function Oz(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Pz(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const zh=new WeakMap,j2=new WeakMap;function Hh(t){return j2.get(t)||1}function t1(t){if(t!==Ea)throw new Error("invalid wNAF")}class Rz{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>Ea;)n&Ji&&(r=r.add(s)),s=s.double(),n>>=Ji;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=jh(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let l=1;l<s;l++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=jh(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:f,offsetF:h}=e1(r,a,o);r=c,u?i=i.add(kd(f,n[h])):s=s.add(kd(d,n[l]))}return t1(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=jh(e,this.bits);for(let o=0;o<i.windows&&r!==Ea;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=e1(r,o,i);if(r=a,!l){const d=n[c];s=s.add(u?d.negate():d)}}return t1(r),s}getPrecomputes(e,n,r){let s=zh.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),zh.set(n,s))),s}cached(e,n,r){const s=Hh(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=Hh(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){F2(n,this.bits),j2.set(e,n),zh.delete(e)}hasCache(e){return Hh(e)!==1}}function kz(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Ea||r>Ea;)n&Ji&&(i=i.add(s)),r&Ji&&(o=o.add(s)),s=s.double(),n>>=Ji,r>>=Ji;return{p1:i,p2:o}}function $z(t,e,n,r){Oz(n,t),Pz(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=T2(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Bl(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let p=0;p<i;p++){const m=r[p],w=Number(m>>BigInt(h)&l);u[w]=u[w].add(n[p])}let g=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),g=g.add(m);if(f=f.add(g),h!==0)for(let p=0;p<c;p++)f=f.double()}return f}function n1(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return xz(e),e}else return Ii(t,{isLE:n})}function Dz(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Ea))throw new Error(`CURVE.${a} must be positive bigint`)}const s=n1(e.p,n.Fp,r),i=n1(e.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),u2("HashToScalar-");const Va=BigInt(0),Do=BigInt(1),bu=BigInt(2);function Uz(t){return Tf(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Bz(t){const e=Uz(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||xo,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?bu**BigInt(254):bu**BigInt(447),g=a?BigInt(8)*bu**BigInt(251)-Do:BigInt(4)*bu**BigInt(445)-Do,p=h+g+Do,m=U=>Rn(U,n),w=_(d);function _(U){return Im(m(U),u)}function b(U){const P=Zt("u coordinate",U,u);return a&&(P[31]&=127),m(Rd(P))}function A(U){return Rd(s(Zt("scalar",U,u)))}function C(U,P){const D=$(b(P),A(U));if(D===Va)throw new Error("invalid private or public key received");return _(D)}function S(U){return C(U,w)}function x(U,P,D){const y=m(U*(P-D));return P=m(P-y),D=m(D+y),{x_2:P,x_3:D}}function $(U,P){R0("u",U,Va,n),R0("scalar",P,h,p);const D=P,y=U;let v=Do,T=Va,k=U,N=Do,R=Va;for(let z=BigInt(l-1);z>=Va;z--){const Q=D>>z&Do;R^=Q,{x_2:v,x_3:k}=x(R,v,k),{x_2:T,x_3:N}=x(R,T,N),R=Q;const K=v+T,G=m(K*K),ae=v-T,ge=m(ae*ae),Te=G-ge,pe=k+N,Ne=k-N,st=m(Ne*K),bt=m(pe*ae),It=st+bt,Xt=st-bt;k=m(It*It),N=m(y*m(Xt*Xt)),v=m(G*ge),T=m(Te*(G+m(f*Te)))}({x_2:v,x_3:k}=x(R,v,k)),{x_2:T,x_3:N}=x(R,T,N);const j=i(T);return m(v*j)}const O={secretKey:u,publicKey:u,seed:u},L=(U=c(u))=>(_r(U,O.seed),U);function M(U){const P=L(U);return{secretKey:P,publicKey:S(P)}}return{keygen:M,getSharedSecret:(U,P)=>C(U,P),getPublicKey:U=>S(U),scalarMult:C,scalarMultBase:S,utils:{randomSecretKey:L,randomPrivateKey:L},GuBytes:w.slice(),lengths:O}}const Lz=BigInt(1),r1=BigInt(2),Mz=BigInt(3),Fz=BigInt(5);BigInt(8);const z2=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),jz={p:z2,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function zz(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=z2,o=t*t%i*t%i,a=cr(o,r1,i)*o%i,c=cr(a,Lz,i)*t%i,l=cr(c,Fz,i)*c%i,u=cr(l,e,i)*l%i,d=cr(u,n,i)*u%i,f=cr(d,r,i)*d%i,h=cr(f,s,i)*f%i,g=cr(h,s,i)*f%i,p=cr(g,e,i)*l%i;return{pow_p_5_8:cr(p,r1,i)*t%i,b2:o}}function Hz(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const qz=Ii(jz.p,{isLE:!0}),k0=(()=>{const t=qz.ORDER;return Bz({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=zz(e);return Rn(cr(n,Mz,t)*r,t)},adjustScalarBytes:Hz})})(),s1=(t,e)=>(t+(t>=0?e:-e)/H2)/e;function Wz(t,e,n){const[[r,s],[i,o]]=e,a=s1(o*t,n),c=s1(-s*t,n);let l=t-a*r-c*i,u=-a*s-c*o;const d=l<ms,f=u<ms;d&&(l=-l),f&&(u=-u);const h=Bl(Math.ceil(T2(n)/2))+sa;if(l<ms||l>=h||u<ms||u>=h)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:l,k2neg:f,k2:u}}function $0(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function qh(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Pd(n.lowS,"lowS"),Pd(n.prehash,"prehash"),n.format!==void 0&&$0(n.format),n}class Vz extends Error{constructor(e=""){super(e)}}const hs={Err:Vz,_tlv:{encode:(t,e)=>{const{Err:n}=hs;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=yu(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?yu(s.length/2|128):"";return yu(t)+i+s+e},decode(t,e){const{Err:n}=hs;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=hs;if(t<ms)throw new e("integer: negative integers are not allowed");let n=yu(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=hs;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return xf(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=hs,s=Zt("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=hs,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},ms=BigInt(0),sa=BigInt(1),H2=BigInt(2),wu=BigInt(3),Kz=BigInt(4);function Vo(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=Zt("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Gz(t,e={}){const n=Dz("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;Tf(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=W2(r,s);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(U,P,D){const{x:y,y:v}=P.toAffine(),T=r.toBytes(y);if(Pd(D,"isCompressed"),D){u();const k=!r.isOdd(v);return ni(q2(k),T)}else return ni(Uint8Array.of(4),T,r.toBytes(v))}function f(U){Yi(U,void 0,"Point");const{publicKey:P,publicKeyUncompressed:D}=l,y=U.length,v=U[0],T=U.subarray(1);if(y===P&&(v===2||v===3)){const k=r.fromBytes(T);if(!r.isValid(k))throw new Error("bad point: is not on curve, wrong x");const N=p(k);let R;try{R=r.sqrt(N)}catch(z){const Q=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+Q)}u();const j=r.isOdd(R);return(v&1)===1!==j&&(R=r.neg(R)),{x:k,y:R}}else if(y===D&&v===4){const k=r.BYTES,N=r.fromBytes(T.subarray(0,k)),R=r.fromBytes(T.subarray(k,k*2));if(!m(N,R))throw new Error("bad point: is not on curve");return{x:N,y:R}}else throw new Error(`bad point: got length ${y}, expected compressed=${P} or uncompressed=${D}`)}const h=e.toBytes||d,g=e.fromBytes||f;function p(U){const P=r.sqr(U),D=r.mul(P,U);return r.add(r.add(D,r.mul(U,i.a)),i.b)}function m(U,P){const D=r.sqr(P),y=p(U);return r.eql(D,y)}if(!m(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const w=r.mul(r.pow(i.a,wu),Kz),_=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(w,_)))throw new Error("bad curve params: a or b");function b(U,P,D=!1){if(!r.isValid(P)||D&&r.is0(P))throw new Error(`bad point coordinate ${U}`);return P}function A(U){if(!(U instanceof O))throw new Error("ProjectivePoint expected")}function C(U){if(!c||!c.basises)throw new Error("no endo");return Wz(U,c.basises,s.ORDER)}const S=Jw((U,P)=>{const{X:D,Y:y,Z:v}=U;if(r.eql(v,r.ONE))return{x:D,y};const T=U.is0();P==null&&(P=T?r.ONE:r.inv(v));const k=r.mul(D,P),N=r.mul(y,P),R=r.mul(v,P);if(T)return{x:r.ZERO,y:r.ZERO};if(!r.eql(R,r.ONE))throw new Error("invZ was invalid");return{x:k,y:N}}),x=Jw(U=>{if(U.is0()){if(e.allowInfinityPoint&&!r.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:D}=U.toAffine();if(!r.isValid(P)||!r.isValid(D))throw new Error("bad point: x or y not field elements");if(!m(P,D))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function $(U,P,D,y,v){return D=new O(r.mul(D.X,U),D.Y,D.Z),P=kd(y,P),D=kd(v,D),P.add(D)}class O{constructor(P,D,y){this.X=b("x",P),this.Y=b("y",D,!0),this.Z=b("z",y),Object.freeze(this)}static CURVE(){return i}static fromAffine(P){const{x:D,y}=P||{};if(!P||!r.isValid(D)||!r.isValid(y))throw new Error("invalid affine point");if(P instanceof O)throw new Error("projective point not allowed");return r.is0(D)&&r.is0(y)?O.ZERO:new O(D,y,r.ONE)}static fromBytes(P){const D=O.fromAffine(g(Yi(P,void 0,"point")));return D.assertValidity(),D}static fromHex(P){return O.fromBytes(Zt("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,D=!0){return M.createCache(this,P),D||this.multiply(wu),this}assertValidity(){x(this)}hasEvenY(){const{y:P}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(P)}equals(P){A(P);const{X:D,Y:y,Z:v}=this,{X:T,Y:k,Z:N}=P,R=r.eql(r.mul(D,N),r.mul(T,v)),j=r.eql(r.mul(y,N),r.mul(k,v));return R&&j}negate(){return new O(this.X,r.neg(this.Y),this.Z)}double(){const{a:P,b:D}=i,y=r.mul(D,wu),{X:v,Y:T,Z:k}=this;let N=r.ZERO,R=r.ZERO,j=r.ZERO,z=r.mul(v,v),Q=r.mul(T,T),K=r.mul(k,k),G=r.mul(v,T);return G=r.add(G,G),j=r.mul(v,k),j=r.add(j,j),N=r.mul(P,j),R=r.mul(y,K),R=r.add(N,R),N=r.sub(Q,R),R=r.add(Q,R),R=r.mul(N,R),N=r.mul(G,N),j=r.mul(y,j),K=r.mul(P,K),G=r.sub(z,K),G=r.mul(P,G),G=r.add(G,j),j=r.add(z,z),z=r.add(j,z),z=r.add(z,K),z=r.mul(z,G),R=r.add(R,z),K=r.mul(T,k),K=r.add(K,K),z=r.mul(K,G),N=r.sub(N,z),j=r.mul(K,Q),j=r.add(j,j),j=r.add(j,j),new O(N,R,j)}add(P){A(P);const{X:D,Y:y,Z:v}=this,{X:T,Y:k,Z:N}=P;let R=r.ZERO,j=r.ZERO,z=r.ZERO;const Q=i.a,K=r.mul(i.b,wu);let G=r.mul(D,T),ae=r.mul(y,k),ge=r.mul(v,N),Te=r.add(D,y),pe=r.add(T,k);Te=r.mul(Te,pe),pe=r.add(G,ae),Te=r.sub(Te,pe),pe=r.add(D,v);let Ne=r.add(T,N);return pe=r.mul(pe,Ne),Ne=r.add(G,ge),pe=r.sub(pe,Ne),Ne=r.add(y,v),R=r.add(k,N),Ne=r.mul(Ne,R),R=r.add(ae,ge),Ne=r.sub(Ne,R),z=r.mul(Q,pe),R=r.mul(K,ge),z=r.add(R,z),R=r.sub(ae,z),z=r.add(ae,z),j=r.mul(R,z),ae=r.add(G,G),ae=r.add(ae,G),ge=r.mul(Q,ge),pe=r.mul(K,pe),ae=r.add(ae,ge),ge=r.sub(G,ge),ge=r.mul(Q,ge),pe=r.add(pe,ge),G=r.mul(ae,pe),j=r.add(j,G),G=r.mul(Ne,pe),R=r.mul(Te,R),R=r.sub(R,G),G=r.mul(Te,ae),z=r.mul(Ne,z),z=r.add(z,G),new O(R,j,z)}subtract(P){return this.add(P.negate())}is0(){return this.equals(O.ZERO)}multiply(P){const{endo:D}=e;if(!s.isValidNot0(P))throw new Error("invalid scalar: out of range");let y,v;const T=k=>M.cached(this,k,N=>Fh(O,N));if(D){const{k1neg:k,k1:N,k2neg:R,k2:j}=C(P),{p:z,f:Q}=T(N),{p:K,f:G}=T(j);v=Q.add(G),y=$(D.beta,z,K,k,R)}else{const{p:k,f:N}=T(P);y=k,v=N}return Fh(O,[y,v])[0]}multiplyUnsafe(P){const{endo:D}=e,y=this;if(!s.isValid(P))throw new Error("invalid scalar: out of range");if(P===ms||y.is0())return O.ZERO;if(P===sa)return y;if(M.hasCache(this))return this.multiply(P);if(D){const{k1neg:v,k1:T,k2neg:k,k2:N}=C(P),{p1:R,p2:j}=kz(O,y,T,N);return $(D.beta,R,j,v,k)}else return M.unsafe(y,P)}multiplyAndAddUnsafe(P,D,y){const v=this.multiplyUnsafe(D).add(P.multiplyUnsafe(y));return v.is0()?void 0:v}toAffine(P){return S(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===sa?!0:P?P(O,this):M.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===sa?this:P?P(O,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return Pd(P,"isCompressed"),this.assertValidity(),h(O,this,P)}toHex(P=!0){return ra(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return Fh(O,P)}static msm(P,D){return $z(O,s,P,D)}static fromPrivateKey(P){return O.BASE.multiply(Vo(s,P))}}O.BASE=new O(i.Gx,i.Gy,r.ONE),O.ZERO=new O(r.ZERO,r.ONE,r.ZERO),O.Fp=r,O.Fn=s;const L=s.BITS,M=new Rz(O,e.endo?Math.ceil(L/2):L);return O.BASE.precompute(8),O}function q2(t){return Uint8Array.of(t?2:3)}function W2(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Yz(t,e={}){const{Fn:n}=t,r=e.randomBytes||xo,s=Object.assign(W2(t.Fp,n),{seed:M2(n.ORDER)});function i(f){try{return!!Vo(n,f)}catch{return!1}}function o(f,h){const{publicKey:g,publicKeyUncompressed:p}=s;try{const m=f.length;return h===!0&&m!==g||h===!1&&m!==p?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=r(s.seed)){return Nz(Yi(f,s.seed,"seed"),n.ORDER)}function c(f,h=!0){return t.BASE.multiply(Vo(n,f)).toBytes(h)}function l(f){const h=a(f);return{secretKey:h,publicKey:c(h)}}function u(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:h,publicKey:g,publicKeyUncompressed:p}=s;if(n.allowedLengths||h===g)return;const m=Zt("key",f).length;return m===g||m===p}function d(f,h,g=!0){if(u(f)===!0)throw new Error("first arg must be private key");if(u(h)===!1)throw new Error("second arg must be public key");const p=Vo(n,f);return t.fromHex(h).multiply(p).toBytes(g)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:l,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>Vo(n,f),precompute(f=8,h=t.BASE){return h.precompute(f,!1)}},lengths:s})}function Zz(t,e,n={}){vf(e),Tf(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||xo,s=n.hmac||((D,...y)=>If(e,D,ni(...y))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:d,utils:f,lengths:h}=Yz(t,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},p="compact";function m(D){const y=a>>sa;return D>y}function w(D,y){if(!o.isValidNot0(y))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return y}function _(D,y){$0(y);const v=h.signature,T=y==="compact"?v:y==="recovered"?v+1:void 0;return Yi(D,T,`${y} signature`)}class b{constructor(y,v,T){this.r=w("r",y),this.s=w("s",v),T!=null&&(this.recovery=T),Object.freeze(this)}static fromBytes(y,v=p){_(y,v);let T;if(v==="der"){const{r:j,s:z}=hs.toSig(Yi(y));return new b(j,z)}v==="recovered"&&(T=y[0],v="compact",y=y.subarray(1));const k=o.BYTES,N=y.subarray(0,k),R=y.subarray(k,k*2);return new b(o.fromBytes(N),o.fromBytes(R),T)}static fromHex(y,v){return this.fromBytes(Nd(y),v)}addRecoveryBit(y){return new b(this.r,this.s,y)}recoverPublicKey(y){const v=i.ORDER,{r:T,s:k,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*H2<v&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=N===2||N===3?T+a:T;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const j=i.toBytes(R),z=t.fromBytes(ni(q2((N&1)===0),j)),Q=o.inv(R),K=C(Zt("msgHash",y)),G=o.create(-K*Q),ae=o.create(k*Q),ge=t.BASE.multiplyUnsafe(G).add(z.multiplyUnsafe(ae));if(ge.is0())throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return m(this.s)}toBytes(y=p){if($0(y),y==="der")return Nd(hs.hexFromSig(this));const v=o.toBytes(this.r),T=o.toBytes(this.s);if(y==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ni(Uint8Array.of(this.recovery),v,T)}return ni(v,T)}toHex(y){return ra(this.toBytes(y))}assertValidity(){}static fromCompact(y){return b.fromBytes(Zt("sig",y),"compact")}static fromDER(y){return b.fromBytes(Zt("sig",y),"der")}normalizeS(){return this.hasHighS()?new b(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ra(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ra(this.toBytes("compact"))}}const A=n.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const y=xf(D),v=D.length*8-c;return v>0?y>>BigInt(v):y},C=n.bits2int_modN||function(D){return o.create(A(D))},S=Bl(c);function x(D){return R0("num < 2^"+c,D,ms,S),o.toBytes(D)}function $(D,y){return Yi(D,void 0,"message"),y?Yi(e(D),void 0,"prehashed message"):D}function O(D,y,v){if(["recovered","canonical"].some(ae=>ae in v))throw new Error("sign() legacy options not supported");const{lowS:T,prehash:k,extraEntropy:N}=qh(v,g);D=$(D,k);const R=C(D),j=Vo(o,y),z=[x(j),x(R)];if(N!=null&&N!==!1){const ae=N===!0?r(h.secretKey):N;z.push(Zt("extraEntropy",ae))}const Q=ni(...z),K=R;function G(ae){const ge=A(ae);if(!o.isValidNot0(ge))return;const Te=o.inv(ge),pe=t.BASE.multiply(ge).toAffine(),Ne=o.create(pe.x);if(Ne===ms)return;const st=o.create(Te*o.create(K+Ne*j));if(st===ms)return;let bt=(pe.x===Ne?0:2)|Number(pe.y&sa),It=st;return T&&m(st)&&(It=o.neg(st),bt^=1),new b(Ne,It,bt)}return{seed:Q,k2sig:G}}function L(D,y,v={}){D=Zt("message",D);const{seed:T,k2sig:k}=O(D,y,v);return Ez(e.outputLen,o.BYTES,s)(T,k)}function M(D){let y;const v=typeof D=="string"||Ef(D),T=!v&&D!==null&&typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!v&&!T)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(T)y=new b(D.r,D.s);else if(v){try{y=b.fromBytes(Zt("sig",D),"der")}catch(k){if(!(k instanceof hs.Err))throw k}if(!y)try{y=b.fromBytes(Zt("sig",D),"compact")}catch{return!1}}return y||!1}function U(D,y,v,T={}){const{lowS:k,prehash:N,format:R}=qh(T,g);if(v=Zt("publicKey",v),y=$(Zt("message",y),N),"strict"in T)throw new Error("options.strict was renamed to lowS");const j=R===void 0?M(D):b.fromBytes(Zt("sig",D),R);if(j===!1)return!1;try{const z=t.fromBytes(v);if(k&&j.hasHighS())return!1;const{r:Q,s:K}=j,G=C(y),ae=o.inv(K),ge=o.create(G*ae),Te=o.create(Q*ae),pe=t.BASE.multiplyUnsafe(ge).add(z.multiplyUnsafe(Te));return pe.is0()?!1:o.create(pe.x)===Q}catch{return!1}}function P(D,y,v={}){const{prehash:T}=qh(v,g);return y=$(y,T),b.fromBytes(D,"recovered").recoverPublicKey(y).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:d,utils:f,lengths:h,Point:t,sign:L,verify:U,recoverPublicKey:P,Signature:b,hash:e})}function Jz(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Ii(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Xz(t){const{CURVE:e,curveOpts:n}=Jz(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Qz(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,B2(n.Fn.ORDER,n.Fn.BITS))})}function eH(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=Xz(t),i=Gz(e,n),o=Zz(i,r,s);return Qz(t,o)}function D0(t,e){const n=r=>eH({...t,hash:r});return{...n(e),create:n}}const V2={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},K2={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},G2={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},tH=Ii(V2.p),nH=Ii(K2.p),rH=Ii(G2.p),sH=D0({...V2,Fp:tH,lowS:!1},_f);D0({...K2,Fp:nH,lowS:!1},lj),D0({...G2,Fp:rH,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},cj);const iH=sH,Y2="base10",on="base16",bn="base64pad",ri="base64url",Ll="utf8",Z2=0,vs=1,Ml=2,oH=0,i1=1,pc=12,xm=32;function aH(){const t=k0.utils.randomPrivateKey(),e=k0.getPublicKey(t);return{privateKey:Cn(t,on),publicKey:Cn(e,on)}}function U0(){const t=xo(xm);return Cn(t,on)}function cH(t,e){const n=k0.getSharedSecret(Zn(t,on),Zn(e,on)),r=bz(Sf,n,void 0,void 0,xm);return Cn(r,on)}function Fu(t){const e=Sf(Zn(t,on));return Cn(e,on)}function Yn(t){const e=Sf(Zn(t,Ll));return Cn(e,on)}function J2(t){return Zn(`${t}`,Y2)}function yo(t){return Number(Cn(t,Y2))}function X2(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Q2(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function lH(t){const e=J2(typeof t.type<"u"?t.type:Z2);if(yo(e)===vs&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Zn(t.senderPublicKey,on):void 0,r=typeof t.iv<"u"?Zn(t.iv,on):xo(pc),s=Zn(t.symKey,on),i=I2(s,r).encrypt(Zn(t.message,Ll)),o=eI({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ri?X2(o):o}function uH(t){const e=Zn(t.symKey,on),{sealed:n,iv:r}=ml({encoded:t.encoded,encoding:t.encoding}),s=I2(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Cn(s,Ll)}function dH(t,e){const n=J2(Ml),r=xo(pc),s=Zn(t,Ll),i=eI({type:n,sealed:s,iv:r});return e===ri?X2(i):i}function fH(t,e){const{sealed:n}=ml({encoded:t,encoding:e});return Cn(n,Ll)}function eI(t){if(yo(t.type)===Ml)return Cn(hc([t.type,t.sealed]),bn);if(yo(t.type)===vs){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Cn(hc([t.type,t.senderPublicKey,t.iv,t.sealed]),bn)}return Cn(hc([t.type,t.iv,t.sealed]),bn)}function ml(t){const e=(t.encoding||bn)===ri?Q2(t.encoded):t.encoded,n=Zn(e,bn),r=n.slice(oH,i1),s=i1;if(yo(r)===vs){const c=s+xm,l=c+pc,u=n.slice(s,c),d=n.slice(c,l),f=n.slice(l);return{type:r,sealed:f,iv:d,senderPublicKey:u}}if(yo(r)===Ml){const c=n.slice(s),l=xo(pc);return{type:r,sealed:c,iv:l}}const i=s+pc,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function hH(t,e){const n=ml({encoded:t,encoding:e==null?void 0:e.encoding});return tI({type:yo(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Cn(n.senderPublicKey,on):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function tI(t){const e=(t==null?void 0:t.type)||Z2;if(e===vs){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function o1(t){return t.type===vs&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function a1(t){return t.type===Ml}function pH(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return hc([new Uint8Array([4]),e,n])}function gH(t,e){const[n,r,s]=t.split("."),i=Buffer.from(Q2(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Sf(c),u=pH(e);if(!iH.verify(hc([o,a]),l,u))throw new Error("Invalid signature");return s0(t).payload}const mH="irn";function $d(t){return(t==null?void 0:t.relay)||{protocol:mH}}function Ko(t){const e=TU[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var yH=Object.defineProperty,bH=Object.defineProperties,wH=Object.getOwnPropertyDescriptors,c1=Object.getOwnPropertySymbols,EH=Object.prototype.hasOwnProperty,vH=Object.prototype.propertyIsEnumerable,l1=(t,e,n)=>e in t?yH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wh=(t,e)=>{for(var n in e||(e={}))EH.call(e,n)&&l1(t,n,e[n]);if(c1)for(var n of c1(e))vH.call(e,n)&&l1(t,n,e[n]);return t},CH=(t,e)=>bH(t,wH(e));function _H(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function u1(t){if(!t.includes("wc:")){const l=s2(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:AH(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:_H(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function AH(t){return t.startsWith("//")?t.substring(2):t}function IH(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function d1(t){const e=new URLSearchParams,n=Wh(Wh(CH(Wh({},IH(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(n).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!==void 0&&e.append(r,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function Eu(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var SH=Object.defineProperty,xH=Object.defineProperties,TH=Object.getOwnPropertyDescriptors,f1=Object.getOwnPropertySymbols,NH=Object.prototype.hasOwnProperty,OH=Object.prototype.propertyIsEnumerable,h1=(t,e,n)=>e in t?SH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PH=(t,e)=>{for(var n in e||(e={}))NH.call(e,n)&&h1(t,n,e[n]);if(f1)for(var n of f1(e))OH.call(e,n)&&h1(t,n,e[n]);return t},RH=(t,e)=>xH(t,TH(e));function Pa(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function nI(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Pa(n.accounts))}),[...new Set(e)]}function kH(t){const e=[];return Object.values(t).forEach(n=>{e.push(...n.methods)}),[...new Set(e)]}function $H(t){const e=[];return Object.values(t).forEach(n=>{e.push(...n.events)}),[...new Set(e)]}function DH(t,e){const n=[];return Object.values(t).forEach(r=>{Pa(r.accounts).includes(e)&&n.push(...r.methods)}),n}function UH(t,e){const n=[];return Object.values(t).forEach(r=>{Pa(r.accounts).includes(e)&&n.push(...r.events)}),n}function Nf(t){return t.includes(":")}function Go(t){return Nf(t)?t.split(":")[0]:t}function p1(t){var e,n,r;const s={};if(!zr(t))return s;for(const[i,o]of Object.entries(t)){const a=Nf(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Go(i);s[u]=RH(PH({},s[u]),{chains:jr(a,(e=s[u])==null?void 0:e.chains),methods:jr(c,(n=s[u])==null?void 0:n.methods),events:jr(l,(r=s[u])==null?void 0:r.events)})}return s}function BH(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function g1(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=BH(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=jr(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function LH(t,e){var n,r,s,i,o,a;const c=p1(t),l=p1(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const f of d)u[f]={chains:jr((n=c[f])==null?void 0:n.chains,(r=l[f])==null?void 0:r.chains),methods:jr((s=c[f])==null?void 0:s.methods,(i=l[f])==null?void 0:i.methods),events:jr((o=c[f])==null?void 0:o.events,(a=l[f])==null?void 0:a.events)};return u}const MH={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},FH={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(t,e){const{message:n,code:r}=FH[t];return{message:e?`${n} ${e}`:n,code:r}}function rt(t,e){const{message:n,code:r}=MH[t];return{message:e?`${n} ${e}`:n,code:r}}function Cs(t,e){return!!Array.isArray(t)}function zr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ot(t){return typeof t>"u"}function mt(t,e){return e&&Ot(t)?!0:typeof t=="string"&&!!t.trim().length}function Tm(t,e){return typeof t=="number"&&!isNaN(t)}function jH(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Gi(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Pa(a),d=n[o];(!Gi(QA(o,d),u)||!Gi(d.methods,c)||!Gi(d.events,l))&&(i=!1)}),i):!1}function Dd(t){return mt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function zH(t){if(mt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Dd(n)}}return!1}function HH(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(mt(t,!1)){if(e(t))return!0;const n=s2(t);return e(n)}}catch{}return!1}function qH(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function WH(t){return t==null?void 0:t.topic}function VH(t,e){let n=null;return mt(t==null?void 0:t.publicKey,!1)||(n=J("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function m1(t){let e=!0;return Cs(t)?t.length&&(e=t.every(n=>mt(n,!1))):e=!1,e}function KH(t,e,n){let r=null;return Cs(e)&&e.length?e.forEach(s=>{r||Dd(s)||(r=rt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Dd(t)||(r=rt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function GH(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=KH(s,QA(s,i),`${e} ${n}`);o&&(r=o)}),r}function YH(t,e){let n=null;return Cs(t)?t.forEach(r=>{n||zH(r)||(n=rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function ZH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=YH(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function JH(t,e){let n=null;return m1(t==null?void 0:t.methods)?m1(t==null?void 0:t.events)||(n=rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function rI(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=JH(r,`${e}, namespace`);s&&(n=s)}),n}function XH(t,e,n){let r=null;if(t&&zr(t)){const s=rI(t,e);s&&(r=s);const i=GH(t,e,n);i&&(r=i)}else r=J("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Vh(t,e){let n=null;if(t&&zr(t)){const r=rI(t,e);r&&(n=r);const s=ZH(t,e);s&&(n=s)}else n=J("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function sI(t){return mt(t.protocol,!0)}function QH(t,e){let n=!1;return t?t&&Cs(t)&&t.length&&t.forEach(r=>{n=sI(r)}):n=!0,n}function eq(t){return typeof t=="number"}function pn(t){return typeof t<"u"&&typeof t!==null}function tq(t){return!(!t||typeof t!="object"||!t.code||!Tm(t.code)||!t.message||!mt(t.message,!1))}function nq(t){return!(Ot(t)||!mt(t.method,!1))}function rq(t){return!(Ot(t)||Ot(t.result)&&Ot(t.error)||!Tm(t.id)||!mt(t.jsonrpc,!1))}function sq(t){return!(Ot(t)||!mt(t.name,!1))}function y1(t,e){return!(!Dd(e)||!nI(t).includes(e))}function iq(t,e,n){return mt(n,!1)?DH(t,e).includes(n):!1}function oq(t,e,n){return mt(n,!1)?UH(t,e).includes(n):!1}function b1(t,e,n){let r=null;const s=aq(t),i=cq(e),o=Object.keys(s),a=Object.keys(i),c=w1(Object.keys(t)),l=w1(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Gi(o,a)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const f=Pa(e[d].accounts);f.includes(d)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(Gi(s[d].methods,i[d].methods)?Gi(s[d].events,i[d].events)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function aq(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function w1(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function cq(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Pa(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function lq(t,e){return Tm(t)&&t<=e.max&&t>=e.min}function E1(){const t=Dl();return new Promise(e=>{switch(t){case Bn.browser:e(uq());break;case Bn.reactNative:e(dq());break;case Bn.node:e(fq());break;default:e(!0)}})}function uq(){return Oa()&&(navigator==null?void 0:navigator.onLine)}async function dq(){if(Ai()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function fq(){return!0}function hq(t){switch(Dl()){case Bn.browser:pq(t);break;case Bn.reactNative:gq(t);break}}function pq(t){!Ai()&&Oa()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function gq(t){Ai()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function mq(){var t;return Oa()&&po()?((t=po())==null?void 0:t.visibilityState)==="visible":!0}const Kh={};class Ka{static get(e){return Kh[e]}static set(e,n){Kh[e]=n}static delete(e){delete Kh[e]}}function yq(t){const e=Na.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function bq({publicKey:t,signature:e,payload:n}){var r;const s=B0(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=vq(n.address),a=n.era==="00"?new Uint8Array([0]):B0(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${Eq(n.tip)}`),d=_q(u),f=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),h=Cq(f.length+1);return new Uint8Array([...h,i,...f])}function wq(t){const e=B0(t),n=FU.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function B0(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Eq(t){return t.startsWith("0x")?t.slice(2):t}function vq(t){const e=Na.decode(t)[0];return e===42?0:e===60?2:1}function Cq(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function _q(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Aq(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=yq(t.transaction.address),r=bq({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return wq(s)}function Nm({logger:t,name:e}){const n=typeof t=="string"?gA({opts:{level:t,name:e}}).logger:t;return n.level=typeof t=="string"?t:t.level,n}var Iq={};const iI="wc",oI=2,L0="core",Kr=`${iI}@2:${L0}:`,Sq={logger:"error"},xq={database:":memory:"},Tq="crypto",v1="client_ed25519_seed",Nq=Z.ONE_DAY,Oq="keychain",Pq="0.3",Rq="messages",kq="0.3",$q=Z.SIX_HOURS,Dq="publisher",aI="irn",Uq="error",cI="wss://relay.walletconnect.org",Bq="relayer",gt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Lq="_subscription",Hn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Mq=.1,M0="2.23.0",Qe={link_mode:"link_mode",relay:"relay"},ju={inbound:"inbound",outbound:"outbound"},Fq="0.3",jq="WALLETCONNECT_CLIENT_ID",C1="WALLETCONNECT_LINK_MODE_APPS",On={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},zq="subscription",Hq="0.3",qq="pairing",Wq="0.3",Ga={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},ji={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},or={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Vq="history",Kq="0.3",Gq="expirer",Vn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Yq="0.3",Zq="verify-api",Jq="https://verify.walletconnect.com",lI="https://verify.walletconnect.org",gc=lI,Xq=`${gc}/v3`,Qq=[Jq,lI],eW="echo",tW="https://echo.walletconnect.com",Pr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},os={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ar={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},$i={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},Di={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ya={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},nW=.1,rW="event-client",sW=86400,iW="https://pulse.walletconnect.org/batch";function oW(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,w=0,_=g.length;w!==_&&g[w]===0;)w++,p++;for(var b=(_-w)*u+1>>>0,A=new Uint8Array(b);w!==_;){for(var C=g[w],S=0,x=b-1;(C!==0||S<m)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=S,w++}for(var $=b-m;$!==b&&A[$]===0;)$++;for(var O=c.repeat(p);$<b;++$)O+=t.charAt(A[$]);return O}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,w=0;g[p]===c;)m++,p++;for(var _=(g.length-p)*l+1>>>0,b=new Uint8Array(_);g[p];){var A=n[g.charCodeAt(p)];if(A===255)return;for(var C=0,S=_-1;(A!==0||C<w)&&S!==-1;S--,C++)A+=a*b[S]>>>0,b[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=C,p++}if(g[p]!==" "){for(var x=_-w;x!==_&&b[x]===0;)x++;for(var $=new Uint8Array(m+(_-x)),O=m;x!==_;)$[O++]=b[x++];return $}}}function h(g){var p=f(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var aW=oW,cW=aW;const uI=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},lW=t=>new TextEncoder().encode(t),uW=t=>new TextDecoder().decode(t);class dW{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class fW{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return dI(this,e)}}class hW{constructor(e){this.decoders=e}or(e){return dI(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const dI=(t,e)=>new hW({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class pW{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new dW(e,n,r),this.decoder=new fW(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Of=({name:t,prefix:e,encode:n,decode:r})=>new pW(t,e,n,r),Fl=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=cW(n,e);return Of({prefix:t,name:e,encode:r,decode:i=>uI(s(i))})},gW=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},mW=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ht=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Of({prefix:e,name:t,encode(s){return mW(s,r,n)},decode(s){return gW(s,r,n,t)}}),yW=Of({prefix:"\0",name:"identity",encode:t=>uW(t),decode:t=>lW(t)});var bW=Object.freeze({__proto__:null,identity:yW});const wW=Ht({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var EW=Object.freeze({__proto__:null,base2:wW});const vW=Ht({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var CW=Object.freeze({__proto__:null,base8:vW});const _W=Fl({prefix:"9",name:"base10",alphabet:"0123456789"});var AW=Object.freeze({__proto__:null,base10:_W});const IW=Ht({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),SW=Ht({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var xW=Object.freeze({__proto__:null,base16:IW,base16upper:SW});const TW=Ht({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),NW=Ht({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),OW=Ht({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PW=Ht({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),RW=Ht({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kW=Ht({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$W=Ht({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),DW=Ht({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),UW=Ht({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var BW=Object.freeze({__proto__:null,base32:TW,base32upper:NW,base32pad:OW,base32padupper:PW,base32hex:RW,base32hexupper:kW,base32hexpad:$W,base32hexpadupper:DW,base32z:UW});const LW=Fl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),MW=Fl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var FW=Object.freeze({__proto__:null,base36:LW,base36upper:MW});const jW=Fl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zW=Fl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var HW=Object.freeze({__proto__:null,base58btc:jW,base58flickr:zW});const qW=Ht({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),WW=Ht({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),VW=Ht({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),KW=Ht({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var GW=Object.freeze({__proto__:null,base64:qW,base64pad:WW,base64url:VW,base64urlpad:KW});const fI=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),YW=fI.reduce((t,e,n)=>(t[n]=e,t),[]),ZW=fI.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function JW(t){return t.reduce((e,n)=>(e+=YW[n],e),"")}function XW(t){const e=[];for(const n of t){const r=ZW[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const QW=Of({prefix:"ðŸš€",name:"base256emoji",encode:JW,decode:XW});var eV=Object.freeze({__proto__:null,base256emoji:QW}),tV=hI,_1=128,nV=-128,rV=Math.pow(2,31);function hI(t,e,n){e=e||[],n=n||0;for(var r=n;t>=rV;)e[n++]=t&255|_1,t/=128;for(;t&nV;)e[n++]=t&255|_1,t>>>=7;return e[n]=t|0,hI.bytes=n-r+1,e}var sV=F0,iV=128,A1=127;function F0(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw F0.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&A1)<<s:(o&A1)*Math.pow(2,s),s+=7}while(o>=iV);return F0.bytes=i-r,n}var oV=Math.pow(2,7),aV=Math.pow(2,14),cV=Math.pow(2,21),lV=Math.pow(2,28),uV=Math.pow(2,35),dV=Math.pow(2,42),fV=Math.pow(2,49),hV=Math.pow(2,56),pV=Math.pow(2,63),gV=function(t){return t<oV?1:t<aV?2:t<cV?3:t<lV?4:t<uV?5:t<dV?6:t<fV?7:t<hV?8:t<pV?9:10},mV={encode:tV,decode:sV,encodingLength:gV},pI=mV;const I1=(t,e,n=0)=>(pI.encode(t,e,n),e),S1=t=>pI.encodingLength(t),j0=(t,e)=>{const n=e.byteLength,r=S1(t),s=r+S1(n),i=new Uint8Array(s+n);return I1(t,i,0),I1(n,i,r),i.set(e,s),new yV(t,n,e,i)};class yV{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const gI=({name:t,code:e,encode:n})=>new bV(t,e,n);class bV{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?j0(this.code,n):n.then(r=>j0(this.code,r))}else throw Error("Unknown type, must be binary type")}}const mI=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),wV=gI({name:"sha2-256",code:18,encode:mI("SHA-256")}),EV=gI({name:"sha2-512",code:19,encode:mI("SHA-512")});var vV=Object.freeze({__proto__:null,sha256:wV,sha512:EV});const yI=0,CV="identity",bI=uI,_V=t=>j0(yI,bI(t)),AV={code:yI,name:CV,encode:bI,digest:_V};var IV=Object.freeze({__proto__:null,identity:AV});new TextEncoder,new TextDecoder;const x1={...bW,...EW,...CW,...AW,...xW,...BW,...FW,...HW,...GW,...eV};({...vV,...IV});function wI(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function SV(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?wI(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function EI(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const T1=EI("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Gh=EI("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=SV(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xV={utf8:T1,"utf-8":T1,hex:x1.base16,latin1:Gh,ascii:Gh,binary:Gh,...x1};function TV(t,e="utf8"){const n=xV[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?wI(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var NV=Object.defineProperty,OV=(t,e,n)=>e in t?NV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nr=(t,e,n)=>OV(t,typeof e!="symbol"?e+"":e,n);class PV{constructor(e,n){this.core=e,this.logger=n,Nr(this,"keychain",new Map),Nr(this,"name",Oq),Nr(this,"version",Pq),Nr(this,"initialized",!1),Nr(this,"storagePrefix",Kr),Nr(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Nr(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Nr(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Nr(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=J("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Nr(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Fn(n,this.name)}get context(){return Sn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,A0(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?I0(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var RV=Object.defineProperty,kV=(t,e,n)=>e in t?RV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,St=(t,e,n)=>kV(t,typeof e!="symbol"?e+"":e,n);class $V{constructor(e,n,r){this.core=e,this.logger=n,St(this,"name",Tq),St(this,"keychain"),St(this,"randomSessionIdentifier",U0()),St(this,"initialized",!1),St(this,"clientId"),St(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),St(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),St(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=Eb(s),o=C_(i.publicKey);return this.clientId=o,o}),St(this,"generateKeyPair",()=>{this.isInitialized();const s=aH();return this.setPrivateKey(s.publicKey,s.privateKey)}),St(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Eb(i),a=this.randomSessionIdentifier;return await f$(a,s,Nq,o)}),St(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=cH(a,i);return this.setSymKey(c,o)}),St(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Fu(s);return await this.keychain.set(o,s),o}),St(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),St(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),St(this,"encode",async(s,i,o)=>{this.isInitialized();const a=tI(o),c=Ln(i);if(a1(a))return dH(c,o==null?void 0:o.encoding);if(o1(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;s=await this.generateSharedKey(f,h)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return lH({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),St(this,"decode",async(s,i,o)=>{this.isInitialized();const a=hH(i,o);if(a1(a)){const c=fH(i,o==null?void 0:o.encoding);return co(c)}if(o1(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=uH({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return co(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),St(this,"getPayloadType",(s,i=bn)=>{const o=ml({encoded:s,encoding:i});return yo(o.type)}),St(this,"getPayloadSenderPublicKey",(s,i=bn)=>{const o=ml({encoded:s,encoding:i});return o.senderPublicKey?Cn(o.senderPublicKey,on):void 0}),this.core=e,this.logger=Fn(n,this.name),this.keychain=r||new PV(this.core,this.logger)}get context(){return Sn(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(v1)}catch{e=U0(),await this.keychain.set(v1,e)}return TV(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var DV=Object.defineProperty,UV=Object.defineProperties,BV=Object.getOwnPropertyDescriptors,N1=Object.getOwnPropertySymbols,LV=Object.prototype.hasOwnProperty,MV=Object.prototype.propertyIsEnumerable,z0=(t,e,n)=>e in t?DV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FV=(t,e)=>{for(var n in e||(e={}))LV.call(e,n)&&z0(t,n,e[n]);if(N1)for(var n of N1(e))MV.call(e,n)&&z0(t,n,e[n]);return t},jV=(t,e)=>UV(t,BV(e)),Tn=(t,e,n)=>z0(t,typeof e!="symbol"?e+"":e,n);class zV extends qL{constructor(e,n){super(e,n),this.logger=e,this.core=n,Tn(this,"messages",new Map),Tn(this,"messagesWithoutClientAck",new Map),Tn(this,"name",Rq),Tn(this,"version",kq),Tn(this,"initialized",!1),Tn(this,"storagePrefix",Kr),Tn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Tn(this,"set",async(r,s,i)=>{this.isInitialized();const o=Yn(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===ju.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,jV(FV({},c),{[o]:s}))}return await this.persist(),o}),Tn(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Tn(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Tn(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Yn(s);return typeof i[o]<"u"}),Tn(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Yn(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Tn(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Fn(e,this.name),this.core=n}get context(){return Sn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,A0(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,A0(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?I0(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?I0(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var HV=Object.defineProperty,qV=Object.defineProperties,WV=Object.getOwnPropertyDescriptors,O1=Object.getOwnPropertySymbols,VV=Object.prototype.hasOwnProperty,KV=Object.prototype.propertyIsEnumerable,H0=(t,e,n)=>e in t?HV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uo=(t,e)=>{for(var n in e||(e={}))VV.call(e,n)&&H0(t,n,e[n]);if(O1)for(var n of O1(e))KV.call(e,n)&&H0(t,n,e[n]);return t},P1=(t,e)=>qV(t,WV(e)),qn=(t,e,n)=>H0(t,typeof e!="symbol"?e+"":e,n);class GV extends WL{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,qn(this,"events",new rr.EventEmitter),qn(this,"name",Dq),qn(this,"queue",new Map),qn(this,"publishTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),qn(this,"initialPublishTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),qn(this,"needsTransportRestart",!1),qn(this,"publish",async(r,s,i)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=(i==null?void 0:i.ttl)||$q,f=(i==null?void 0:i.prompt)||!1,h=(i==null?void 0:i.tag)||0,g=(i==null?void 0:i.id)||ai().toString(),p=Ko($d().protocol),m={id:g,method:(i==null?void 0:i.publishMethod)||p.publish,params:Uo({topic:r,message:s,ttl:d,prompt:f,tag:h,attestation:i==null?void 0:i.attestation},i==null?void 0:i.tvf)},w=`Failed to publish payload, please try again. id:${g} tag:${h}`;try{Ot((o=m.params)==null?void 0:o.prompt)&&((a=m.params)==null||delete a.prompt),Ot((c=m.params)==null?void 0:c.tag)&&((l=m.params)==null||delete l.tag);const _=new Promise(async b=>{const A=({id:S})=>{var x;((x=m.id)==null?void 0:x.toString())===S.toString()&&(this.removeRequestFromQueue(S),this.relayer.events.removeListener(gt.publish,A),b())};this.relayer.events.on(gt.publish,A);const C=Lr(new Promise((S,x)=>{this.rpcPublish(m,i).then(S).catch($=>{this.logger.warn($,$==null?void 0:$.message),x($)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${g} tag:${h}`);try{await C,this.events.removeListener(gt.publish,A)}catch(S){this.queue.set(g,{request:m,opts:i,attempt:1}),this.logger.warn(S,S==null?void 0:S.message)}});this.logger.trace({type:"method",method:"publish",params:{id:g,topic:r,message:s,opts:i}}),await Lr(_,this.publishTimeout,w)}catch(_){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(_),(u=i==null?void 0:i.internal)!=null&&u.throwOnFailedPublish)throw _}finally{this.queue.delete(g)}}),qn(this,"publishCustom",async r=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:l,opts:u={}}=r,{attestation:d,tvf:f,publishMethod:h,prompt:g,tag:p,ttl:m=Z.FIVE_MINUTES}=u,w=u.id||ai().toString(),_=Ko($d().protocol),b=h||_.publish,A={id:w,method:b,params:Uo(P1(Uo({},l),{ttl:m,prompt:g,tag:p,attestation:d}),f)},C=`Failed to publish custom payload, please try again. id:${w} tag:${p}`;try{Ot((s=A.params)==null?void 0:s.prompt)&&((i=A.params)==null||delete i.prompt),Ot((o=A.params)==null?void 0:o.tag)&&((a=A.params)==null||delete a.tag);const S=new Promise(async x=>{const $=({id:L})=>{var M;((M=A.id)==null?void 0:M.toString())===L.toString()&&(this.removeRequestFromQueue(L),this.relayer.events.removeListener(gt.publish,$),x())};this.relayer.events.on(gt.publish,$);const O=Lr(new Promise((L,M)=>{this.rpcPublish(A,u).then(L).catch(U=>{this.logger.warn(U,U==null?void 0:U.message),M(U)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${b} id:${w} tag:${p}`);try{await O,this.events.removeListener(gt.publish,$)}catch(L){this.queue.set(w,{request:A,opts:u,attempt:1}),this.logger.warn(L,L==null?void 0:L.message)}});this.logger.trace({type:"method",method:"publish",params:{id:w,payload:l,opts:u}}),await Lr(S,this.publishTimeout,C)}catch(S){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(S),(c=u==null?void 0:u.internal)!=null&&c.throwOnFailedPublish)throw S}finally{this.queue.delete(w)}}),qn(this,"on",(r,s)=>{this.events.on(r,s)}),qn(this,"once",(r,s)=>{this.events.once(r,s)}),qn(this,"off",(r,s)=>{this.events.off(r,s)}),qn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Fn(n,this.name),this.registerEventListeners()}get context(){return Sn(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(gt.publish,Uo(Uo({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,P1(Uo({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ao.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(gt.connection_stalled);return}this.checkQueue()}),this.relayer.on(gt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var YV=Object.defineProperty,ZV=(t,e,n)=>e in t?YV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bo=(t,e,n)=>ZV(t,typeof e!="symbol"?e+"":e,n);class JV{constructor(){Bo(this,"map",new Map),Bo(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Bo(this,"get",e=>this.map.get(e)||[]),Bo(this,"exists",(e,n)=>this.get(e).includes(n)),Bo(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Bo(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var XV=Object.defineProperty,QV=Object.defineProperties,eK=Object.getOwnPropertyDescriptors,R1=Object.getOwnPropertySymbols,tK=Object.prototype.hasOwnProperty,nK=Object.prototype.propertyIsEnumerable,q0=(t,e,n)=>e in t?XV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Za=(t,e)=>{for(var n in e||(e={}))tK.call(e,n)&&q0(t,n,e[n]);if(R1)for(var n of R1(e))nK.call(e,n)&&q0(t,n,e[n]);return t},Yh=(t,e)=>QV(t,eK(e)),Ge=(t,e,n)=>q0(t,typeof e!="symbol"?e+"":e,n);class rK extends GL{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ge(this,"subscriptions",new Map),Ge(this,"topicMap",new JV),Ge(this,"events",new rr.EventEmitter),Ge(this,"name",zq),Ge(this,"version",Hq),Ge(this,"pending",new Map),Ge(this,"cached",[]),Ge(this,"initialized",!1),Ge(this,"storagePrefix",Kr),Ge(this,"subscribeTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Ge(this,"initialSubscribeTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Ge(this,"clientId"),Ge(this,"batchSubscribeTopicsLimit",500),Ge(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Ge(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=$d(s),a={topic:r,relay:o,transportType:s==null?void 0:s.transportType};(i=s==null?void 0:s.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Ge(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Ge(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Ge(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Ge(this,"on",(r,s)=>{this.events.on(r,s)}),Ge(this,"once",(r,s)=>{this.events.once(r,s)}),Ge(this,"off",(r,s)=>{this.events.off(r,s)}),Ge(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Ge(this,"start",async()=>{await this.onConnect()}),Ge(this,"stop",async()=>{await this.onDisconnect()}),Ge(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Ge(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Ge(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ao.pulse,async()=>{await this.checkPending()}),this.events.on(On.created,async r=>{const s=On.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(On.deleted,async r=>{const s=On.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Fn(n,this.name),this.clientId=""}get context(){return Sn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=$d(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const o=await this.getSubscriptionId(e);if((s=r==null?void 0:r.internal)!=null&&s.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===Qe.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const a={method:Ko(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===Qe.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},Z.toMiliseconds(Z.ONE_SECOND)),o;const l=new Promise(async d=>{const f=h=>{h.topic===e&&(this.events.removeListener(On.created,f),d(h.id))};this.events.on(On.created,f);try{const h=await Lr(new Promise((g,p)=>{this.relayer.request(a).catch(m=>{this.logger.warn(m,m==null?void 0:m.message),p(m)}).then(g)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(On.created,f),d(h)}catch{}}),u=await Lr(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(gt.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Ko(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Lr(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(gt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Ko(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Lr(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(gt.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Ko(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,Yh(Za({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Za({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Za({},n)),this.topicMap.set(n.topic,e),this.events.emit(On.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(On.deleted,Yh(Za({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(On.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(On.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>Yh(Za({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await x7(Z.toMiliseconds(Z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Yn(e+await this.getClientId())}}var sK=Object.defineProperty,k1=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,oK=Object.prototype.propertyIsEnumerable,W0=(t,e,n)=>e in t?sK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$1=(t,e)=>{for(var n in e||(e={}))iK.call(e,n)&&W0(t,n,e[n]);if(k1)for(var n of k1(e))oK.call(e,n)&&W0(t,n,e[n]);return t},Me=(t,e,n)=>W0(t,typeof e!="symbol"?e+"":e,n);class aK extends VL{constructor(e){var n;super(e),Me(this,"protocol","wc"),Me(this,"version",2),Me(this,"core"),Me(this,"logger"),Me(this,"events",new rr.EventEmitter),Me(this,"provider"),Me(this,"messages"),Me(this,"subscriber"),Me(this,"publisher"),Me(this,"name",Bq),Me(this,"transportExplicitlyClosed",!1),Me(this,"initialized",!1),Me(this,"connectionAttemptInProgress",!1),Me(this,"relayUrl"),Me(this,"projectId"),Me(this,"packageName"),Me(this,"bundleId"),Me(this,"hasExperiencedNetworkDisruption",!1),Me(this,"pingTimeout"),Me(this,"heartBeatTimeout",Z.toMiliseconds(Z.THIRTY_SECONDS+Z.FIVE_SECONDS)),Me(this,"reconnectTimeout"),Me(this,"connectPromise"),Me(this,"reconnectInProgress",!1),Me(this,"requestsInFlight",[]),Me(this,"connectTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Me(this,"request",async r=>{var s,i;this.logger.debug("Publishing Request Payload");const o=r.id||ai().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(s=r.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(l=>l!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),Me(this,"resetPingTimeout",()=>{Td()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a==null?void 0:a.message)}},this.heartBeatTimeout))}),Me(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Me(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(gt.connect)}),Me(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),Me(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(gt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Me(this,"registerProviderListeners",()=>{this.provider.on(Hn.payload,this.onPayloadHandler),this.provider.on(Hn.connect,this.onConnectHandler),this.provider.on(Hn.disconnect,this.onDisconnectHandler),this.provider.on(Hn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=Nm({logger:(n=e.logger)!=null?n:Uq,name:this.name}),this.messages=new zV(this.logger,e.core),this.subscriber=new rK(this,this.logger),this.publisher=new GV(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||cI,d7()?this.packageName=Tw():f7()&&(this.bundleId=Tw()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Sn(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Qe.relay},ju.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(On.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(On.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,$1({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Lr(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await E1())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=pt(Z.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(gt.message,e),await this.recordMessageEvent(e,ju.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Hn.disconnect,i),await Lr(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Hn.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Hn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Hn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Z.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(Td())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new tm(new T9(y7({sdkVersion:M0,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),em(e)){if(!e.method.endsWith(Lq))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Qe.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($1({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else hf(e)&&this.events.emit(gt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,ju.inbound),this.events.emit(gt.message,e))}async acknowledgePayload(e){const n=cl(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Hn.payload,this.onPayloadHandler),this.provider.off(Hn.connect,this.onConnectHandler),this.provider.off(Hn.disconnect,this.onDisconnectHandler),this.provider.off(Hn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await E1();hq(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ao.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&mq())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(gt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Z.toMiliseconds(Mq)))))}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function cK(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function D1(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function U1(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const lK="[object RegExp]",uK="[object String]",dK="[object Number]",fK="[object Boolean]",B1="[object Arguments]",hK="[object Symbol]",pK="[object Date]",gK="[object Map]",mK="[object Set]",yK="[object Array]",bK="[object Function]",wK="[object ArrayBuffer]",Zh="[object Object]",EK="[object Error]",vK="[object DataView]",CK="[object Uint8Array]",_K="[object Uint8ClampedArray]",AK="[object Uint16Array]",IK="[object Uint32Array]",SK="[object BigUint64Array]",xK="[object Int8Array]",TK="[object Int16Array]",NK="[object Int32Array]",OK="[object BigInt64Array]",PK="[object Float32Array]",RK="[object Float64Array]";function kK(){}function L1(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function $K(t,e,n){return oc(t,e,void 0,void 0,void 0,void 0,n)}function oc(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return mc(t,e,i,o)}return mc(t,e,i,o)}function mc(t,e,n,r){if(Object.is(t,e))return!0;let s=U1(t),i=U1(e);if(s===B1&&(s=Zh),i===B1&&(i=Zh),s!==i)return!1;switch(s){case uK:return t.toString()===e.toString();case dK:{const c=t.valueOf(),l=e.valueOf();return cK(c,l)}case fK:case pK:case hK:return Object.is(t.valueOf(),e.valueOf());case lK:return t.source===e.source&&t.flags===e.flags;case bK:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case gK:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!oc(l,e.get(c),c,t,e,n,r))return!1;return!0}case mK:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],f=l.findIndex(h=>oc(d,h,void 0,t,e,n,r));if(f===-1)return!1;l.splice(f,1)}return!0}case yK:case CK:case _K:case AK:case IK:case SK:case xK:case TK:case NK:case OK:case PK:case RK:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!oc(t[c],e[c],c,t,e,n,r))return!1;return!0}case wK:return t.byteLength!==e.byteLength?!1:mc(new Uint8Array(t),new Uint8Array(e),n,r);case vK:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:mc(new Uint8Array(t),new Uint8Array(e),n,r);case EK:return t.name===e.name&&t.message===e.message;case Zh:{if(!(mc(t.constructor,e.constructor,n,r)||L1(t)&&L1(e)))return!1;const c=[...Object.keys(t),...D1(t)],l=[...Object.keys(e),...D1(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],f=t[d];if(!Object.hasOwn(e,d))return!1;const h=e[d];if(!oc(f,h,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function DK(t,e){return $K(t,e,kK)}var UK=Object.defineProperty,M1=Object.getOwnPropertySymbols,BK=Object.prototype.hasOwnProperty,LK=Object.prototype.propertyIsEnumerable,V0=(t,e,n)=>e in t?UK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F1=(t,e)=>{for(var n in e||(e={}))BK.call(e,n)&&V0(t,n,e[n]);if(M1)for(var n of M1(e))LK.call(e,n)&&V0(t,n,e[n]);return t},fn=(t,e,n)=>V0(t,typeof e!="symbol"?e+"":e,n);class To extends KL{constructor(e,n,r,s=Kr,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,fn(this,"map",new Map),fn(this,"version",Fq),fn(this,"cached",[]),fn(this,"initialized",!1),fn(this,"getKey"),fn(this,"storagePrefix",Kr),fn(this,"recentlyDeleted",[]),fn(this,"recentlyDeletedLimit",200),fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ot(o)?this.map.set(this.getKey(o),o):qH(o)?this.map.set(o.id,o):WH(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),fn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),fn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),fn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>DK(a[c],o[c]))):this.values)),fn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=F1(F1({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),fn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Fn(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Sn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=J("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var MK=Object.defineProperty,FK=(t,e,n)=>e in t?MK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pe=(t,e,n)=>FK(t,typeof e!="symbol"?e+"":e,n);class jK{constructor(e,n){this.core=e,this.logger=n,Pe(this,"name",qq),Pe(this,"version",Wq),Pe(this,"events",new Mg),Pe(this,"pairings"),Pe(this,"initialized",!1),Pe(this,"storagePrefix",Kr),Pe(this,"ignoredPayloadTypes",[vs]),Pe(this,"registeredMethods",[]),Pe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Pe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Pe(this,"create",async r=>{this.isInitialized();const s=U0(),i=await this.core.crypto.setSymKey(s),o=pt(Z.FIVE_MINUTES),a={protocol:aI},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=d1({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ji.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:i,uri:l}}),Pe(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Pr.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=u1(r.uri);s.props.properties.topic=i,s.addTrace(Pr.pairing_uri_validation_success),s.addTrace(Pr.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Pr.existing_pairing),u.active)throw s.setError(os.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Pr.pairing_not_expired)}const d=c||pt(Z.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(Pr.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ji.create,f),s.addTrace(Pr.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Pr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(os.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(h){throw s.setError(os.subscribe_pairing_topic_failure),h}return s.addTrace(Pr.subscribe_pairing_topic_success),f}),Pe(this,"activate",async({topic:r})=>{this.isInitialized();const s=pt(Z.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Pe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Mi();this.events.once(We("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Pe(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Pe(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Pe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Pe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",rt("USER_DISCONNECTED")),await this.deletePairing(s))}),Pe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return d1({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Pe(this,"sendRequest",async(r,s,i)=>{const o=dr(s,i),a=await this.core.crypto.encode(r,o),c=Ga[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Pe(this,"sendResult",async(r,s,i)=>{const o=cl(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Ga[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Pe(this,"sendError",async(r,s,i)=>{const o=ff(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Ga[c]?Ga[c].res:Ga.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Pe(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Pe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Dr(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Pe(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Pe(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Pe(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ji.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Pe(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{kr(s)?this.events.emit(We("pairing_ping",i),{}):Gn(s)&&this.events.emit(We("pairing_ping",i),{error:s.error})},500)}),Pe(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ji.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Pe(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=rt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Pe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(rt("WC_METHOD_UNSUPPORTED",r))}),Pe(this,"isValidPair",(r,s)=>{var i;if(!pn(r)){const{message:a}=J("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(os.malformed_pairing_uri),new Error(a)}if(!HH(r.uri)){const{message:a}=J("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(os.malformed_pairing_uri),new Error(a)}const o=u1(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(os.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(os.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Z.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(os.pairing_expired);const{message:a}=J("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Pe(this,"isValidPing",async r=>{if(!pn(r)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Pe(this,"isValidDisconnect",async r=>{if(!pn(r)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Pe(this,"isValidPairingTopic",async r=>{if(!mt(r,!1)){const{message:s}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Dr(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=J("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Fn(n,this.name),this.pairings=new To(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Sn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(gt.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Qe.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);em(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):hf(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Vn.expired,async e=>{const{topic:n}=r2(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ji.expire,{topic:n}))})}}var zK=Object.defineProperty,HK=(t,e,n)=>e in t?zK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ut=(t,e,n)=>HK(t,typeof e!="symbol"?e+"":e,n);class qK extends HL{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ut(this,"records",new Map),Ut(this,"events",new rr.EventEmitter),Ut(this,"name",Vq),Ut(this,"version",Kq),Ut(this,"cached",[]),Ut(this,"initialized",!1),Ut(this,"storagePrefix",Kr),Ut(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ut(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:pt(Z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(or.created,o)}),Ut(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Gn(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(or.updated,s))}),Ut(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Ut(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(or.deleted,i)}}),this.persist()}),Ut(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Ut(this,"on",(r,s)=>{this.events.on(r,s)}),Ut(this,"once",(r,s)=>{this.events.once(r,s)}),Ut(this,"off",(r,s)=>{this.events.off(r,s)}),Ut(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Fn(n,this.name)}get context(){return Sn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:dr(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(or.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(or.created,e=>{const n=or.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(or.updated,e=>{const n=or.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(or.deleted,e=>{const n=or.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Ao.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Z.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(or.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var WK=Object.defineProperty,VK=(t,e,n)=>e in t?WK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yt=(t,e,n)=>VK(t,typeof e!="symbol"?e+"":e,n);class KK extends YL{constructor(e,n){super(e,n),this.core=e,this.logger=n,Yt(this,"expirations",new Map),Yt(this,"events",new rr.EventEmitter),Yt(this,"name",Gq),Yt(this,"version",Yq),Yt(this,"cached",[]),Yt(this,"initialized",!1),Yt(this,"storagePrefix",Kr),Yt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Yt(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Yt(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Vn.created,{target:i,expiration:o})}),Yt(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Yt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Vn.deleted,{target:s,expiration:i})}}),Yt(this,"on",(r,s)=>{this.events.on(r,s)}),Yt(this,"once",(r,s)=>{this.events.once(r,s)}),Yt(this,"off",(r,s)=>{this.events.off(r,s)}),Yt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Fn(n,this.name)}get context(){return Sn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return b7(e);if(typeof e=="number")return w7(e);const{message:n}=J("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Vn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Z.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Vn.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Ao.pulse,()=>this.checkExpirations()),this.events.on(Vn.created,e=>{const n=Vn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Vn.expired,e=>{const n=Vn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Vn.deleted,e=>{const n=Vn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var GK=Object.defineProperty,YK=(t,e,n)=>e in t?GK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ht=(t,e,n)=>YK(t,typeof e!="symbol"?e+"":e,n);class ZK extends ZL{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ht(this,"name",Zq),ht(this,"abortController"),ht(this,"isDevEnv"),ht(this,"verifyUrlV3",Xq),ht(this,"storagePrefix",Kr),ht(this,"version",oI),ht(this,"publicKey"),ht(this,"fetchPromise"),ht(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Z.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ht(this,"register",async s=>{if(!Oa()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=po(),u=this.startAbortTimer(Z.ONE_SECOND*5),d=await new Promise((f,h)=>{const g=()=>{window.removeEventListener("message",m),l.body.removeChild(p),h("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const p=l.createElement("iframe");p.src=c,p.style.display="none",p.addEventListener("error",g,{signal:this.abortController.signal});const m=w=>{if(w.data&&typeof w.data=="string")try{const _=JSON.parse(w.data);if(_.type==="verify_attestation"){if(s0(_.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(p),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",m),f(_.attestation===null?"":_.attestation)}}catch(_){this.logger.warn(_)}};l.body.appendChild(p),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(l){this.logger.warn(l)}return""}),ht(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(s0(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ht(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Z.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ht(this,"getVerifyUrl",s=>{let i=s||gc;return Qq.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${gc}`),i=gc),i}),ht(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Z.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ht(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ht(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ht(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ht(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ht(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ht(this,"validateAttestation",(s,i)=>{const o=gH(s,i.publicKey),a={hasExpired:Z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Fn(n,this.name),this.abortController=new AbortController,this.isDevEnv=bm(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Sn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Z.toMiliseconds(e))}}var JK=Object.defineProperty,XK=(t,e,n)=>e in t?JK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j1=(t,e,n)=>XK(t,typeof e!="symbol"?e+"":e,n);class QK extends JL{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,j1(this,"context",eW),j1(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${tW}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Fn(n,this.context)}}var eG=Object.defineProperty,z1=Object.getOwnPropertySymbols,tG=Object.prototype.hasOwnProperty,nG=Object.prototype.propertyIsEnumerable,K0=(t,e,n)=>e in t?eG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ja=(t,e)=>{for(var n in e||(e={}))tG.call(e,n)&&K0(t,n,e[n]);if(z1)for(var n of z1(e))nG.call(e,n)&&K0(t,n,e[n]);return t},xt=(t,e,n)=>K0(t,typeof e!="symbol"?e+"":e,n);class rG extends XL{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,xt(this,"context",rW),xt(this,"storagePrefix",Kr),xt(this,"storageVersion",nW),xt(this,"events",new Map),xt(this,"shouldPersist",!1),xt(this,"init",async()=>{if(!bm())try{const s={eventId:Ow(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:t2(this.core.relayer.protocol,this.core.relayer.version,M0)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),xt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=Ow(),u=this.core.projectId||"",d=Date.now(),f=Ja({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,f),this.shouldPersist=!0),f}),xt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Ja(Ja({},a),this.setMethods(a.eventId))}),xt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),xt(this,"setEventListeners",()=>{this.core.heartbeat.on(Ao.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Z.fromMiliseconds(Date.now())-Z.fromMiliseconds(s.timestamp)>sW&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),xt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),xt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),xt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),xt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),xt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Ja(Ja({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),xt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),xt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${iW}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${M0}${i}`,{method:"POST",body:JSON.stringify(s)})}),xt(this,"getAppDomain",()=>e2().url),this.logger=Fn(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var sG=Object.defineProperty,H1=Object.getOwnPropertySymbols,iG=Object.prototype.hasOwnProperty,oG=Object.prototype.propertyIsEnumerable,G0=(t,e,n)=>e in t?sG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q1=(t,e)=>{for(var n in e||(e={}))iG.call(e,n)&&G0(t,n,e[n]);if(H1)for(var n of H1(e))oG.call(e,n)&&G0(t,n,e[n]);return t},Ze=(t,e,n)=>G0(t,typeof e!="symbol"?e+"":e,n);let aG=class vI extends ML{constructor(e){var n;super(e),Ze(this,"protocol",iI),Ze(this,"version",oI),Ze(this,"name",L0),Ze(this,"relayUrl"),Ze(this,"projectId"),Ze(this,"customStoragePrefix"),Ze(this,"events",new rr.EventEmitter),Ze(this,"logger"),Ze(this,"heartbeat"),Ze(this,"relayer"),Ze(this,"crypto"),Ze(this,"storage"),Ze(this,"history"),Ze(this,"expirer"),Ze(this,"pairing"),Ze(this,"verify"),Ze(this,"echoClient"),Ze(this,"linkModeSupportedApps"),Ze(this,"eventClient"),Ze(this,"initialized",!1),Ze(this,"logChunkController"),Ze(this,"on",(a,c)=>this.events.on(a,c)),Ze(this,"once",(a,c)=>this.events.once(a,c)),Ze(this,"off",(a,c)=>this.events.off(a,c)),Ze(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ze(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Qe.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||cI,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=RL({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Sq.logger,name:L0}),{logger:i,chunkLoggerController:o}=gA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Fn(i,this.name),this.heartbeat=new z8,this.crypto=new $V(this,this.logger,e==null?void 0:e.keychain),this.history=new qK(this,this.logger),this.expirer=new KK(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new CR(q1(q1({},xq),e==null?void 0:e.storageOptions)),this.relayer=new aK({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new jK(this,this.logger),this.verify=new ZK(this,this.logger,this.storage),this.echoClient=new QK(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new rG(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new vI(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(jq,r),n}get context(){return Sn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(C1,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(C1)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Iq.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const cG=aG,CI="wc",_I=2,AI="client",Om=`${CI}@${_I}:${AI}:`,Jh={name:AI,logger:"error"},W1="WALLETCONNECT_DEEPLINK_CHOICE",lG="proposal",V1="Proposal expired",uG="session",Lo=Z.SEVEN_DAYS,dG="engine",Bt={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1119}}},Xh={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},Or={idle:"IDLE",active:"ACTIVE"},fG={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},hG="request",pG=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],gG="wc",mG="auth",yG="authKeys",bG="pairingTopics",wG="requests",Pf=`${gG}@${1.5}:${mG}:`,zu=`${Pf}:PUB_KEY`;var EG=Object.defineProperty,vG=Object.defineProperties,CG=Object.getOwnPropertyDescriptors,K1=Object.getOwnPropertySymbols,_G=Object.prototype.hasOwnProperty,AG=Object.prototype.propertyIsEnumerable,Y0=(t,e,n)=>e in t?EG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,He=(t,e)=>{for(var n in e||(e={}))_G.call(e,n)&&Y0(t,n,e[n]);if(K1)for(var n of K1(e))AG.call(e,n)&&Y0(t,n,e[n]);return t},Lt=(t,e)=>vG(t,CG(e)),W=(t,e,n)=>Y0(t,typeof e!="symbol"?e+"":e,n);class IG extends nM{constructor(e){super(e),W(this,"name",dG),W(this,"events",new Mg),W(this,"initialized",!1),W(this,"requestQueue",{state:Or.idle,queue:[]}),W(this,"sessionRequestQueue",{state:Or.idle,queue:[]}),W(this,"emittedSessionRequests",new T7({limit:500})),W(this,"requestQueueDelay",Z.ONE_SECOND),W(this,"expectedPairingMethodMap",new Map),W(this,"recentlyDeletedMap",new Map),W(this,"recentlyDeletedLimit",200),W(this,"relayMessageCache",[]),W(this,"pendingSessions",new Map),W(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Bt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay)))}),W(this,"connect",async n=>{var r;this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=Lt(He({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=LH(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:l,relays:u,authentication:d,walletPay:f}=s,h=((r=d==null?void 0:d[0])==null?void 0:r.ttl)||Bt.wc_sessionPropose.req.ttl||Z.FIVE_MINUTES;this.validateRequestExpiry(h);let g=i,p,m=!1;try{if(g){const O=this.client.core.pairing.pairings.get(g);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),m=O.active}}catch(O){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),O}if(!g||!m){const{topic:O,uri:L}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});g=O,p=L}if(!g){const{message:O}=J("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(O)}const w=await this.client.core.crypto.generateKeyPair(),_=pt(h),b=He(Lt(He(He({requiredNamespaces:o,optionalNamespaces:a,relays:u??[{protocol:aI}],proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:_,pairingTopic:g},c&&{sessionProperties:c}),l&&{scopedProperties:l}),{id:Rr()}),(d||f)&&{requests:{authentication:d==null?void 0:d.map(O=>{const{domain:L,chains:M,nonce:U,uri:P,exp:D,nbf:y,type:v,statement:T,requestId:k,resources:N,signatureTypes:R}=O;return{domain:L,chains:M,nonce:U,type:v??"caip122",aud:P,version:"1",iat:new Date().toISOString(),exp:D,nbf:y,statement:T,requestId:k,resources:N,signatureTypes:R}}),walletPay:f}}),A=We("session_connect",b.id),{reject:C,resolve:S,done:x}=Mi(h,V1),$=({id:O})=>{O===b.id&&(this.client.events.off("proposal_expire",$),this.pendingSessions.delete(b.id),this.events.emit(A,{error:{message:V1,code:0}}))};return this.client.events.on("proposal_expire",$),this.events.once(A,({error:O,session:L})=>{this.client.events.off("proposal_expire",$),O?C(O):L&&S(L)}),await this.setProposal(b.id,b),await this.sendProposeSession({proposal:b,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:b.id}}}).catch(O=>{throw this.deleteProposal(b.id),O}),{uri:p,approval:x}}),W(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),W(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ar.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(L){throw o.setError($i.no_internet_connection),L}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(L){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError($i.proposal_not_found),L}try{await this.isValidApprove(n)}catch(L){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError($i.session_approve_namespace_validation_failure),L}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:h}=n,g=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:m,requiredNamespaces:w,optionalNamespaces:_}=g;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ar.session_approve_started,properties:{topic:p,trace:[ar.session_approve_started,ar.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),C=m.publicKey,S=await this.client.core.crypto.generateSharedKey(A,C),x=Lt(He(He(He({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:A,metadata:this.client.metadata},expiry:pt(Lo)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{proposalRequestsResponses:h}),$=Qe.relay;b.addTrace(ar.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:$,internal:{skipSubscribe:!0}})}catch(L){throw b.setError($i.subscribe_session_topic_failure),L}b.addTrace(ar.subscribe_session_topic_success);const O=Lt(He({},x),{topic:S,requiredNamespaces:w,optionalNamespaces:_,pairingTopic:p,acknowledged:!1,self:x.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:A,transportType:Qe.relay,authentication:h==null?void 0:h.authentication,walletPayResult:h==null?void 0:h.walletPay});await this.client.session.set(S,O),b.addTrace(ar.store_session);try{await this.sendApproveSession({sessionTopic:S,proposal:g,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:A},sessionSettleRequest:x,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:He({correlationId:a},this.getTVFApproveParams(O))}}),b.addTrace(ar.session_approve_publish_success)}catch(L){throw this.client.logger.error(L),this.client.session.delete(S,rt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),L}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:m.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(S,pt(Lo)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),W(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Bt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),W(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Mi(Z.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=Rr(),l=ai().toString(),u=this.client.session.get(r).namespaces;return this.events.once(We("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),W(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Rr(),{done:i,resolve:o,reject:a}=Mi(Z.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(We("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,pt(Lo)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),W(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=Bt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Qe.relay&&await this.confirmOnlineStateOrThrow();const c=Rr(),l=ai().toString(),{done:u,resolve:d,reject:f}=Mi(o,"Request expired. Please try again.");this.events.once(We("session_request",c),({error:m,result:w})=>{m?f(m):d(w)});const h="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:{request:Lt(He({},s),{expiryTimestamp:pt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(m=>f(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const p={request:Lt(He({},s),{expiryTimestamp:pt(o)}),chainId:r};return await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:p,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,p)}).catch(w=>f(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const _=await _7(this.client.core.storage,W1);await E7({id:c,topic:i,wcDeepLink:_})}m()}),u()]).then(m=>m[2])}),W(this,"respond",async n=>{var r,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:(n==null?void 0:n.topic)||((s=(r=n==null?void 0:n.response)==null?void 0:r.id)==null?void 0:s.toString()),trace:[ar.session_request_response_started]}});try{await this.isValidRespond(n)}catch(d){throw i.addTrace(d==null?void 0:d.message),i.setError($i.session_request_response_validation_failure),d}i.addTrace(ar.session_request_response_validation_success);const{topic:o,response:a}=n,{id:c}=a,l=this.client.session.get(o);l.transportType===Qe.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);try{i.addTrace(ar.session_request_response_publish_started),kr(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:u}):Gn(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:u}),this.cleanupAfterResponse(n)}catch(d){throw i.addTrace(d==null?void 0:d.message),i.setError($i.session_request_response_publish_failure),d}}),W(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Rr(),i=ai().toString(),{done:o,resolve:a,reject:c}=Mi(Z.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(We("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),W(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=ai().toString(),a=Rr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),W(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:rt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=J("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),W(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>jH(r,n)))),W(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),W(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Qe.link_mode:Qe.relay;o===Qe.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:f,exp:h,nbf:g,methods:p=[],expiry:m}=n,w=[...n.resources||[]],{topic:_,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:_,uri:b}});const A=await this.client.core.crypto.generateKeyPair(),C=Fu(A);if(await Promise.all([this.client.auth.authKeys.set(zu,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:_})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${_}`),p.length>0){const{namespace:N}=Es(a[0]);let R=jj(N,"request",p);Mu(w)&&(R=Hj(R,w.pop())),w.push(R)}const S=m&&m>Bt.wc_sessionAuthenticate.req.ttl?m:Bt.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:f??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:g,resources:w},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:pt(S)},$={eip155:{chains:a,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},O={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:_,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:pt(Bt.wc_sessionPropose.req.ttl),id:Rr()},{done:L,resolve:M,reject:U}=Mi(S,"Request expired"),P=Rr(),D=We("session_connect",O.id),y=We("session_request",P),v=async({error:N,session:R})=>{this.events.off(y,T),N?U(N):R&&M({session:R})},T=async N=>{var R,j,z;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),N.error){const pe=rt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return N.error.code===pe.code?void 0:(this.events.off(D,v),U(N.error.message))}await this.deleteProposal(O.id),this.events.off(D,v);const{cacaos:Q,responder:K}=N.result,G=[],ae=[];for(const pe of Q){await jw({cacao:pe,projectId:this.client.core.projectId})||(this.client.logger.error(pe,"Signature verification failed"),U(rt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ne}=pe,st=Mu(Ne.resources),bt=[S0(Ne.iss)],It=Od(Ne.iss);if(st){const Xt=zw(st),Yr=Hw(st);G.push(...Xt),bt.push(...Yr)}for(const Xt of bt)ae.push(`${Xt}:${It}`)}const ge=await this.client.core.crypto.generateSharedKey(A,K.publicKey);let Te;G.length>0&&(Te={topic:ge,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:pt(Lo),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:_,namespaces:g1([...new Set(G)],[...new Set(ae)]),transportType:o},await this.client.core.relayer.subscribe(ge,{transportType:o}),await this.client.session.set(ge,Te),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:K.metadata}),Te=this.client.session.get(ge)),(R=this.client.metadata.redirect)!=null&&R.linkMode&&(j=K.metadata.redirect)!=null&&j.linkMode&&(z=K.metadata.redirect)!=null&&z.universal&&r&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(ge,{transportType:Qe.link_mode})),M({auths:Q,session:Te})};this.events.once(D,v),this.events.once(y,T);let k;try{if(i){const N=dr("wc_sessionAuthenticate",x,P);this.client.core.history.set(_,N);const R=await this.client.core.crypto.encode("",N,{type:Ml,encoding:ri});k=Eu(r,_,R)}else await Promise.all([this.sendRequest({topic:_,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:_,method:"wc_sessionPropose",params:O,expiry:Bt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O.id})])}catch(N){throw this.events.off(D,v),this.events.off(y,T),N}return await this.setProposal(O.id,O),await this.setAuthRequest(P,{request:Lt(He({},x),{verifyContext:{}}),pairingTopic:_,transportType:o}),{uri:k??b,response:L}}),W(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Di.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(Ya.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Ya.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Qe.relay;a===Qe.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Fu(c),d={type:vs,receiverPublicKey:c,senderPublicKey:l},f=[],h=[];for(const m of s){if(!await jw({cacao:m,projectId:this.client.core.projectId})){i.setError(Ya.invalid_cacao);const C=rt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(Di.cacaos_verified);const{p:w}=m,_=Mu(w.resources),b=[S0(w.iss)],A=Od(w.iss);if(_){const C=zw(_),S=Hw(_);f.push(...C),b.push(...S)}for(const C of b)h.push(`${C}:${A}`)}const g=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Di.create_authenticated_session_topic);let p;if((f==null?void 0:f.length)>0){p={topic:g,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:pt(Lo),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:g1([...new Set(f)],[...new Set(h)]),transportType:a},i.addTrace(Di.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(m){throw i.setError(Ya.subscribe_authenticated_session_topic_failure),m}i.addTrace(Di.subscribe_authenticated_session_topic_success),await this.client.session.set(g,p),i.addTrace(Di.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Di.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(Ya.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:p}}),W(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Qe.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Fu(o),l={type:vs,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Bt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),W(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return E2(r,s)}),W(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),W(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),W(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,rt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(W1).catch(l=>this.client.logger.warn(l)),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Or.idle),await Promise.all(this.getPendingSessionRequests().filter(l=>l.topic===s).map(l=>this.deletePendingSessionRequest(l.id,rt("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),W(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError($i.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,rt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),W(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Or.idle,this.client.events.emit("session_request_expire",{id:n}))}),W(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),W(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),W(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,pt(Bt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),W(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Qe.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),W(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||pt(Bt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),W(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d,publishOpts:f={}}=n,h=dr(s,i,c);let g;const p=!!u;try{const _=p?ri:bn;g=await this.client.core.crypto.encode(r,h,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),_}let m;if(pG.includes(s)){const _=Yn(JSON.stringify(h)),b=Yn(g);m=await this.client.core.verify.register({id:b,decryptedId:_})}const w=He(He({},Bt[s].req),f);if(w.attestation=m,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const _=Eu(u,r,g);await global.Linking.openURL(_,this.client.name)}else w.tvf=Lt(He({},d),{correlationId:h.id}),l?(w.internal=Lt(He({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,g,w)):this.client.core.relayer.publish(r,g,w).catch(_=>this.client.logger.error(_));return h.id}),W(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=dr("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:bn}),a=Yn(JSON.stringify(i)),c=Yn(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:Lt(He({},s),{publishMethod:"wc_proposeSession",attestation:l})})}),W(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,c=cl(i.id,s),l=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:bn}),u=dr("wc_sessionSettle",o,a==null?void 0:a.id),d=await this.client.core.crypto.encode(r,u,{encoding:bn});this.client.core.history.set(r,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:d},opts:Lt(He({},a),{publishMethod:"wc_approveSession"})})}),W(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=cl(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?ri:bn;u=await this.client.core.crypto.encode(s,l,Lt(He({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let f,h;try{f=await this.client.core.history.get(s,r);const g=f.request;try{h=this.getTVFParams(r,g.params,i)}catch(p){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${p==null?void 0:p.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),g}if(d){const g=Eu(c,s,u);await global.Linking.openURL(g,this.client.name)}else{const g=f.request.method,p=Bt[g].res;p.tvf=Lt(He({},h),{correlationId:r}),o?(p.internal=Lt(He({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,p)):this.client.core.relayer.publish(s,u,p).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),W(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=ff(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=d?ri:bn;u=await this.client.core.crypto.encode(s,l,Lt(He({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),h}let f;try{f=await this.client.core.history.get(s,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),h}if(d){const h=Eu(c,s,u);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,g=a||Bt[h].res;this.client.core.relayer.publish(s,u,g)}await this.client.core.history.resolve(l)}),W(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Dr(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Dr(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),W(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),W(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),W(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Or.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Or.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Or.idle}),W(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),W(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),W(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=J("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),W(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),W(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(os.proposal_listener_not_found)),this.isValidConnect(He({},s.params));const u=a.expiryTimestamp||pt(Bt.wc_sessionPropose.req.ttl),d=He({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:Yn(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Pr.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Bt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),W(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(kr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Gn(r)){await this.deleteProposal(i);const o=We("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),W(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:h}=r.params,g=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!g)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(g.proposalId),m=Lt(He(He(He({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:g.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:g.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:Qe.relay,authentication:h==null?void 0:h.authentication,walletPayResult:h==null?void 0:h.walletPay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:g.pairingTopic,metadata:m.peer.metadata}),this.pendingSessions.delete(g.proposalId),this.deleteProposal(g.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:m}),this.events.emit(We("session_connect",g.proposalId),{session:m})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;kr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(We("session_approve",s),{})):Gn(r)&&(await this.client.session.delete(n,rt("USER_DISCONNECTED")),this.events.emit(We("session_approve",s),{error:r.error}))}),W(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Ka.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:rt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(He({topic:n},s));try{Ka.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Ka.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),W(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=We("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);kr(r)?this.events.emit(We("session_update",s),{}):Gn(r)&&this.events.emit(We("session_update",s),{error:r.error})}),W(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,pt(Lo)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),W(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=We("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);kr(r)?this.events.emit(We("session_extend",s),{}):Gn(r)&&this.events.emit(We("session_extend",s),{error:r.error})}),W(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),W(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=We("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);kr(r)?this.events.emit(We("session_ping",s),{}):Gn(r)&&this.events.emit(We("session_ping",s),{error:r.error})},500)}),W(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{await this.isValidDisconnect({topic:n,reason:r.params}),this.cleanupPendingSentRequestsForTopic({topic:n,error:rt("USER_DISCONNECTED")}),await this.deleteSession({topic:n,id:s})}catch(i){this.client.logger.error(i)}}),W(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:f}=a;try{await this.isValidRequest(He({topic:o},f));const h=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:Yn(JSON.stringify(dr("wc_sessionRequest",f,d))),encryptedId:l,metadata:h.peer.metadata,transportType:u}),p={id:d,topic:o,params:f,verifyContext:g};await this.setPendingSessionRequest(p),u===Qe.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=h.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(p):(this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),W(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=We("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);kr(r)?this.events.emit(We("session_request",s),{result:r.result}):Gn(r)&&this.events.emit(We("session_request",s),{error:r.error})}),W(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Ka.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(He({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Ka.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),kr(r)?this.events.emit(We("session_request",s),{result:r.result}):Gn(r)&&this.events.emit(We("session_request",s),{error:r.error})}),W(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Yn(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),h={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:h,pairingTopic:s,transportType:c}),c===Qe.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),h={type:vs,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:h,rpcOpts:Bt.wc_sessionAuthenticate.autoReject,appLink:f})}}),W(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),W(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Or.idle,this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay))}),W(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{this.events.emit(We("session_request",i.request.id),{error:r})})}),W(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Or.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),W(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Or.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),W(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:dr("wc_sessionPropose",Lt(He({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),W(this,"isValidConnect",async n=>{if(!pn(n)){const{message:l}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ot(r)||await this.isValidPairingTopic(r),!QH(c)){const{message:l}=J("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(s&&!Ot(s)&&zr(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!Ot(i)&&zr(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),W(this,"validateNamespaces",(n,r)=>{const s=XH(n,"connect()",r);if(s)throw new Error(s.message)}),W(this,"isValidApprove",async n=>{if(!pn(n))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Vh(s,"approve()");if(l)throw new Error(l.message);const u=b1(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!mt(i,!0)){const{message:d}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),W(this,"isValidReject",async n=>{if(!pn(n)){const{message:i}=J("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!tq(s)){const{message:i}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),W(this,"isValidSessionSettleRequest",n=>{if(!pn(n)){const{message:l}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!sI(r)){const{message:l}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=VH(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Vh(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Dr(o)){const{message:l}=J("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),W(this,"isValidUpdate",async n=>{if(!pn(n)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=Vh(s,"update()");if(o)throw new Error(o.message);const a=b1(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),W(this,"isValidExtend",async n=>{if(!pn(n)){const{message:s}=J("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),W(this,"isValidRequest",async n=>{if(!pn(n)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!y1(a,i)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!nq(s)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!iq(a,i,s.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),W(this,"isValidRespond",async n=>{var r;if(!pn(n)){const{message:a}=J("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(a){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!rq(i)){const{message:a}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=J("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),W(this,"isValidPing",async n=>{if(!pn(n)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),W(this,"isValidEmit",async n=>{if(!pn(n)){const{message:a}=J("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!y1(o,i)){const{message:a}=J("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!sq(s)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!oq(o,i,s.name)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),W(this,"isValidDisconnect",async n=>{if(!pn(n)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),W(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!mt(s,!1))throw new Error("uri is required parameter");if(!mt(i,!1))throw new Error("domain is required parameter");if(!mt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Es(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Es(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),W(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||gc,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Qe.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),W(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=J("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),W(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),W(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),W(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=J("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),W(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,f;return!n||r!==Qe.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),W(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),W(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Nw(n,"topic")||"",s=decodeURIComponent(Nw(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Qe.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),W(this,"registerLinkModeListeners",async()=>{var n;if(bm()||Ai()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),W(this,"getTVFApproveParams",n=>{try{const r=nI(n.namespaces),s=kH(n.namespaces),i=$H(n.namespaces),o=n.sessionProperties,a=n.scopedProperties;return{approvedChains:r,approvedMethods:s,approvedEvents:i,sessionProperties:o,scopedProperties:a}}catch(r){return this.client.logger.warn(r,"Error getting TVF approve params"),{}}}),W(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn(l,"Error getting TVF params")}return c}),W(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),W(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=fG[i];if(i==="sui_signTransaction")return[Cj(r.transactionBytes)];if(i==="near_signTransaction")return[Bw(r)];if(i==="near_signTransactions")return r.map(c=>Bw(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Aq({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Cs(r)?r.map(c=>Lw(c)):[Lw(r)];if(i==="cosmos_signDirect")return[Aj(r)];if(i==="wallet_sendCalls")return Ij(r);if(typeof r=="string")return[r];const a=r[o.key];if(Cs(a))return i==="solana_signAllTransactions"?a.map(c=>vj(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(gt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(zu)?this.client.auth.authKeys.get(zu):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Qe.link_mode?ri:bn});em(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Yn(r)})):hf(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i})),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${r}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Vn.expired,async e=>{const{topic:n,id:r}=r2(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,J("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,J("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ji.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ji.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!mt(e,!1)){const{message:n}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Dr(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=J("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!mt(e,!1)){const{message:n}=J("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Dr(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=J("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=J("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(mt(e,!1)){const{message:n}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!eq(e)){const{message:n}=J("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Dr(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=J("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}validateRequestExpiry(e){if(e&&!lq(e,Xh)){const{message:n}=J("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${Xh.min} and ${Xh.max}`);throw new Error(n)}}}class SG extends To{constructor(e,n){super(e,n,lG,Om),this.core=e,this.logger=n}}let xG=class extends To{constructor(e,n){super(e,n,uG,Om),this.core=e,this.logger=n}};class TG extends To{constructor(e,n){super(e,n,hG,Om,r=>r.id),this.core=e,this.logger=n}}class NG extends To{constructor(e,n){super(e,n,yG,Pf,()=>zu),this.core=e,this.logger=n}}class OG extends To{constructor(e,n){super(e,n,bG,Pf),this.core=e,this.logger=n}}class PG extends To{constructor(e,n){super(e,n,wG,Pf,r=>r.id),this.core=e,this.logger=n}}var RG=Object.defineProperty,kG=(t,e,n)=>e in t?RG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qh=(t,e,n)=>kG(t,typeof e!="symbol"?e+"":e,n);class $G{constructor(e,n){this.core=e,this.logger=n,Qh(this,"authKeys"),Qh(this,"pairingTopics"),Qh(this,"requests"),this.authKeys=new NG(this.core,this.logger),this.pairingTopics=new OG(this.core,this.logger),this.requests=new PG(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var DG=Object.defineProperty,UG=(t,e,n)=>e in t?DG(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Re=(t,e,n)=>UG(t,typeof e!="symbol"?e+"":e,n);class Pm extends tM{constructor(e){super(e),Re(this,"protocol",CI),Re(this,"version",_I),Re(this,"name",Jh.name),Re(this,"metadata"),Re(this,"core"),Re(this,"logger"),Re(this,"events",new rr.EventEmitter),Re(this,"engine"),Re(this,"session"),Re(this,"proposal"),Re(this,"pendingRequest"),Re(this,"auth"),Re(this,"signConfig"),Re(this,"on",(r,s)=>this.events.on(r,s)),Re(this,"once",(r,s)=>this.events.once(r,s)),Re(this,"off",(r,s)=>this.events.off(r,s)),Re(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Re(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Re(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Re(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Re(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Re(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||Jh.name,this.metadata=p7(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=Nm({logger:(e==null?void 0:e.logger)||Jh.logger,name:this.name});this.logger=n,this.core=(e==null?void 0:e.core)||new cG(e),this.session=new xG(this.core,this.logger),this.proposal=new SG(this.core,this.logger),this.pendingRequest=new TG(this.core,this.logger),this.engine=new IG(this),this.auth=new $G(this.core,this.logger)}static async init(e){const n=new Pm(e);return await n.initialize(),n}get context(){return Sn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const BG=Pm;function Rm(t){return t==null||typeof t!="object"&&typeof t!="function"}function II(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function SI(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const LG="[object RegExp]",xI="[object String]",TI="[object Number]",NI="[object Boolean]",OI="[object Arguments]",MG="[object Symbol]",FG="[object Date]",jG="[object Map]",zG="[object Set]",HG="[object Array]",qG="[object ArrayBuffer]",WG="[object Object]",VG="[object DataView]",KG="[object Uint8Array]",GG="[object Uint8ClampedArray]",YG="[object Uint16Array]",ZG="[object Uint32Array]",JG="[object Int8Array]",XG="[object Int16Array]",QG="[object Int32Array]",eY="[object Float32Array]",tY="[object Float64Array]";function km(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nY(t,e){return Yo(t,void 0,t,new Map,e)}function Yo(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(Rm(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Yo(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Yo(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Yo(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(km(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Yo(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),zi(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),zi(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),zi(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,zi(o,t,n,r,s),o}if(typeof t=="object"&&rY(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),zi(o,t,n,r,s),o}return t}function zi(t,e,n=t,r,s){const i=[...Object.keys(e),...II(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Yo(e[a],a,n,r,s))}}function rY(t){switch(SI(t)){case OI:case HG:case qG:case VG:case NI:case FG:case eY:case tY:case JG:case XG:case QG:case jG:case TI:case WG:case LG:case zG:case xI:case MG:case KG:case GG:case YG:case ZG:return!0;default:return!1}}function sY(t,e){return nY(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case TI:case xI:case NI:{const o=new t.constructor(t==null?void 0:t.valueOf());return zi(o,t),o}case OI:{const o={};return zi(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function G1(t){return sY(t)}function Y1(t){return t!==null&&typeof t=="object"&&SI(t)==="[object Arguments]"}function Z1(t){return typeof t=="object"&&t!==null}function iY(){}function oY(t){return km(t)}function aY(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function cY(t){if(Rm(t))return t;if(Array.isArray(t)||km(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function lY(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=Z0(s,o,r,new Map)}return s}function Z0(t,e,n,r){if(Rm(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return cY(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...II(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Y1(a)&&(a={...a}),Y1(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=G1(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const h=d[f];u[h]=c[h]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Z1(c)&&Z1(a)?t[o]=Z0(c,a,n,r):c==null&&aY(a)?t[o]=Z0({},a,n,r):c==null&&oY(a)?t[o]=G1(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function uY(t,...e){return lY(t,...e,iY)}const J1="error",dY="wss://relay.walletconnect.org",fY="wc",PI="universal_provider",vu=`${fY}@2:${PI}:`,RI="https://rpc.walletconnect.org/v1/",kI="generic",hY=`${RI}bundler`,ia="call_status",pY=86400,$m={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var gY=Object.defineProperty,mY=Object.defineProperties,yY=Object.getOwnPropertyDescriptors,X1=Object.getOwnPropertySymbols,bY=Object.prototype.hasOwnProperty,wY=Object.prototype.propertyIsEnumerable,Q1=(t,e,n)=>e in t?gY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cu=(t,e)=>{for(var n in e||(e={}))bY.call(e,n)&&Q1(t,n,e[n]);if(X1)for(var n of X1(e))wY.call(e,n)&&Q1(t,n,e[n]);return t},EY=(t,e)=>mY(t,yY(e));function $I(t,e,n){var r;const s=Es(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${RI}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function vY(t){return t.includes(":")?t.split(":")[1]:t}function DI(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function CY(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function eE(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n==null?void 0:n.chains)==null?void 0:r.length)&&((s=n==null?void 0:n.chains)==null?void 0:s.length)>0}))}function _u(t={},e={}){const n=eE(tE(t)),r=eE(tE(e));return uY(n,r)}function tE(t){var e,n,r,s,i;const o={};if(!zr(t))return o;for(const[a,c]of Object.entries(t)){const l=Nf(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],f=c.rpcMap||{},h=Go(a);o[h]=EY(Cu(Cu({},o[h]),c),{chains:jr(l,(e=o[h])==null?void 0:e.chains),methods:jr(u,(n=o[h])==null?void 0:n.methods),events:jr(d,(r=o[h])==null?void 0:r.events)}),(zr(f)||zr(((s=o[h])==null?void 0:s.rpcMap)||{}))&&(o[h].rpcMap=Cu(Cu({},f),(i=o[h])==null?void 0:i.rpcMap))}return o}function nE(t){return t.includes(":")?t.split(":")[2]:t}function rE(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=Nf(n)?[n]:r.chains?r.chains:DI(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function ep(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function _Y(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const UI={},oa=t=>UI[t],tp=(t,e)=>{UI[t]=e};var AY=Object.defineProperty,sE=Object.getOwnPropertySymbols,IY=Object.prototype.hasOwnProperty,SY=Object.prototype.propertyIsEnumerable,iE=(t,e,n)=>e in t?AY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oE=(t,e)=>{for(var n in e||(e={}))IY.call(e,n)&&iE(t,n,e[n]);if(sE)for(var n of sE(e))SY.call(e,n)&&iE(t,n,e[n]);return t};const aE="eip155",xY=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],TY=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,np=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,cE=t=>Object.keys(t).filter(e=>xY.includes(e)).reduce((e,n)=>(e[n]=NY(t[n]),e),{}),NY=t=>typeof t=="string"&&_Y(t)?JSON.parse(t):t,OY=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!zr(s)&&!zr(r))return;const o=cE(r);for(const a of n){const c=TY(a);if(!c)continue;i[np(c)]=o;const l=s==null?void 0:s[`${aE}:${c}`];if(l){const u=l==null?void 0:l[`${aE}:${c}:${e}`];i[np(c)]=oE(oE({},i[np(c)]),cE(u||l))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var PY=Object.defineProperty,RY=(t,e,n)=>e in t?PY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kY=(t,e,n)=>RY(t,e+"",n);let rp;class Dm{constructor(e){kY(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,n){return await this.storage.setItem(e,n)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return rp||(rp=new Dm(e)),rp}}var $Y=Object.defineProperty,DY=Object.defineProperties,UY=Object.getOwnPropertyDescriptors,lE=Object.getOwnPropertySymbols,BY=Object.prototype.hasOwnProperty,LY=Object.prototype.propertyIsEnumerable,uE=(t,e,n)=>e in t?$Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MY=(t,e)=>{for(var n in e||(e={}))BY.call(e,n)&&uE(t,n,e[n]);if(lE)for(var n of lE(e))LY.call(e,n)&&uE(t,n,e[n]);return t},FY=(t,e)=>DY(t,UY(e));async function jY(t,e){const n=Es(t.result.capabilities.caip345.caip2),r=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(r.map(d=>zY(n.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!i.length||i.some(d=>!d),a=i.every(d=>(d==null?void 0:d.status)==="0x1"),c=i.every(d=>(d==null?void 0:d.status)==="0x0"),l=i.some(d=>(d==null?void 0:d.status)==="0x0");let u;return o?u=100:a?u=200:c?u=500:l&&(u=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:u}}async function zY(t,e,n){return await n(parseInt(t)).request(dr("eth_getTransactionReceipt",[e]))}async function HY({sendCalls:t,storage:e}){const n=await e.getItem(ia);await e.setItem(ia,FY(MY({},n),{[t.result.id]:{request:t.request,result:t.result,expiry:pt(pY)}}))}async function qY({resultId:t,storage:e}){const n=await e.getItem(ia);if(n){delete n[t],await e.setItem(ia,n);for(const r in n)Dr(n[r].expiry)&&delete n[r];await e.setItem(ia,n)}}async function WY({resultId:t,storage:e}){const n=await e.getItem(ia),r=n==null?void 0:n[t];if(r&&!Dr(r.expiry))return r;await qY({resultId:t,storage:e})}var VY=Object.defineProperty,KY=Object.defineProperties,GY=Object.getOwnPropertyDescriptors,dE=Object.getOwnPropertySymbols,YY=Object.prototype.hasOwnProperty,ZY=Object.prototype.propertyIsEnumerable,J0=(t,e,n)=>e in t?VY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sp=(t,e)=>{for(var n in e||(e={}))YY.call(e,n)&&J0(t,n,e[n]);if(dE)for(var n of dE(e))ZY.call(e,n)&&J0(t,n,e[n]);return t},ip=(t,e)=>KY(t,GY(e)),Ui=(t,e,n)=>J0(t,typeof e!="symbol"?e+"":e,n);class JY{constructor(e){Ui(this,"name","eip155"),Ui(this,"client"),Ui(this,"chainId"),Ui(this,"namespace"),Ui(this,"httpProviders"),Ui(this,"events"),Ui(this,"storage"),this.namespace=e.namespace,this.events=oa("events"),this.client=oa("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=Dm.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n);const r=this.chainId;this.chainId=parseInt(e),this.events.emit($m.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||$I(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tm(new nA(r,oa("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(vY(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(e){const n=e||this.chainId;return this.httpProviders[n]||(this.httpProviders=ip(sp({},this.httpProviders),{[n]:this.createHttpProvider(n)}),this.httpProviders[n])}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=u==null?void 0:u[d];if(f)return f;let h;try{h=OY(l,a,c)}catch(p){console.warn("Failed to extract capabilities from session",p)}if(h)return h;const g=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:ip(sp({},l.sessionProperties||{}),{capabilities:ip(sp({},u||{}),{[d]:g})})})}catch(p){console.warn("Failed to update session with capabilities",p)}return g}async getCallStatus(e){var n,r,s;const i=this.client.session.get(e.topic),o=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(o){const l=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(l,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,l)}}const a=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,a)}const c=await WY({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await jY(c,this.getHttpProvider.bind(this))}catch(l){console.warn("Failed to fetch call status from stored send calls",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(dr("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${hY}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}async sendCalls(e){var n,r,s;const i=await this.client.request(e),o=(n=e.request.params)==null?void 0:n[0],a=i==null?void 0:i.id,c=(i==null?void 0:i.capabilities)||{},l=(r=c==null?void 0:c.caip345)==null?void 0:r.caip2,u=(s=c==null?void 0:c.caip345)==null?void 0:s.transactionHashes;return!a||!l||!(u!=null&&u.length)||await HY({sendCalls:{request:o,result:i},storage:this.storage}),i}}var XY=Object.defineProperty,QY=(t,e,n)=>e in t?XY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mo=(t,e,n)=>QY(t,typeof e!="symbol"?e+"":e,n);class eZ{constructor(e){Mo(this,"name",kI),Mo(this,"client"),Mo(this,"httpProviders"),Mo(this,"events"),Mo(this,"namespace"),Mo(this,"chainId"),this.namespace=e.namespace,this.events=oa("events"),this.client=oa("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n);const r=this.chainId;this.chainId=e,this.events.emit($m.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Es(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{var i,o;const a=Es(s),c=(o=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];r[a.reference]=this.createHttpProvider(s,c)}),r}getHttpProvider(e){const n=Es(e).reference,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||$I(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tm(new nA(r,oa("disableProviderPing")))}}var tZ=Object.defineProperty,nZ=Object.defineProperties,rZ=Object.getOwnPropertyDescriptors,fE=Object.getOwnPropertySymbols,sZ=Object.prototype.hasOwnProperty,iZ=Object.prototype.propertyIsEnumerable,X0=(t,e,n)=>e in t?tZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xa=(t,e)=>{for(var n in e||(e={}))sZ.call(e,n)&&X0(t,n,e[n]);if(fE)for(var n of fE(e))iZ.call(e,n)&&X0(t,n,e[n]);return t},Au=(t,e)=>nZ(t,rZ(e)),Nn=(t,e,n)=>X0(t,typeof e!="symbol"?e+"":e,n);let oZ=class BI{constructor(e){Nn(this,"client"),Nn(this,"namespaces"),Nn(this,"optionalNamespaces"),Nn(this,"sessionProperties"),Nn(this,"scopedProperties"),Nn(this,"events",new Mg),Nn(this,"rpcProviders",{}),Nn(this,"session"),Nn(this,"providerOpts"),Nn(this,"logger"),Nn(this,"uri"),Nn(this,"disableProviderPing",!1),Nn(this,"connectParams");var n,r;this.providerOpts=e,this.logger=Nm({logger:(n=e.logger)!=null?n:J1,name:(r=this.providerOpts.name)!=null?r:PI}),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new BI(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Xa({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,cl(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=e,this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=rE(this.session.namespaces);this.namespaces=_u(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){var n,r;const{uri:s,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(n=this.connectParams)==null?void 0:n.authentication,walletPay:(r=this.connectParams)==null?void 0:r.walletPay});s&&(this.uri=s,this.events.emit("display_uri",s));const o=await i();this.session=o;const a=rE(o.namespaces);return this.namespaces=_u(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!Cs(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn(n,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await BG.init({core:this.providerOpts.core,logger:this.providerOpts.logger||J1,relayUrl:this.providerOpts.relayUrl||dY,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Go(n)))];tp("client",this.client),tp("events",this.events),tp("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=CY(n,this.session);if((r==null?void 0:r.length)===0)return;const s=DI(r),i=_u(this.namespaces,this.optionalNamespaces),o=Au(Xa({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new JY({namespace:o});break;default:this.rpcProviders[n]=new eZ({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Cs(o)&&this.events.emit("accountsChanged",o.map(nE))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Go(o),l=ep(o)!==ep(a)?`${c}:${ep(a)}`:o;this.onChainChanged({currentCaipChainId:l})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Au(Xa({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Au(Xa({},rt("USER_DISCONNECTED")),{data:e.topic})))}),this.on($m.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(Au(Xa({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[kI]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=_u(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Go(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Go(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:n,internal:r=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),r?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:n})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:n,previousCaipChainId:r}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(nE);if(!Cs(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${vu}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${vu}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${vu}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(vu)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn(n,"Failed to cleanup storage")}}};var hE={};const aZ={ACCOUNT_TABS:[{label:"Tokens"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof hE<"u"?hE.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},cZ=[tn.ConnectorExplorerIds[B.CONNECTOR_ID.COINBASE],tn.ConnectorExplorerIds[B.CONNECTOR_ID.COINBASE_SDK],tn.ConnectorExplorerIds[B.CONNECTOR_ID.BASE_ACCOUNT],tn.ConnectorExplorerIds[je.SOLFLARE_CONNECTOR_NAME],tn.ConnectorExplorerIds[je.PHANTOM_CONNECTOR_NAME],tn.ConnectorExplorerIds[je.BINANCE_CONNECTOR_NAME]],ac={filterOutDuplicatesByRDNS(t){const e=F.state.enableEIP6963?V.state.connectors:[],n=H.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ee.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=V.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"||a.type==="MULTI_CHAIN"),n=H.getRecentWallets(),r=e.map(a=>{var c;return a.explorerId||((c=a.explorerWallet)==null?void 0:c.id)||a.id}),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=V.state,{featuredWalletIds:n}=F.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=F.state.features)==null?void 0:c.connectMethodsOrder),r=e||V.state.connectors;if(n)return n;const{injected:s,announced:i}=op.getConnectorsByType(r,de.state.recommended,de.state.featured),o=s.filter(op.showConnector),a=i.filter(op.showConnector);return o.length||a.length?["wallet","email","social"]:aZ.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&de.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&de.state.excludedWallets.some(r=>yr.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))},filterWalletsByWcSupport(t){return X.state.wcBasic?t.filter(e=>e.supports_wc):ee.isMobile()?t.filter(e=>e.supports_wc||cZ.includes(e.id)):t}},op={getConnectorsByType(t,e,n){const{customWallets:r}=F.state,s=H.getRecentWallets(),i=ac.filterOutDuplicateWallets(e),o=ac.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&de.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&de.state.excludedWallets.some(i=>yr.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ee.isMobile()||ee.isMobile()&&!e&&!X.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(I.state.chains.values()).some(n=>V.getConnectorId(n.namespace)===B.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=F.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const d=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(p=>p.isEnabled),f=new Set(d.map(p=>p.type)),h=c.filter(p=>f.has(p)).map(p=>({type:p,isEnabled:!0})),g=d.filter(({type:p})=>!h.some(({type:w})=>w===p));return Array.from(new Set([...h,...g].map(({type:p})=>p)))},sortConnectorsByExplorerWallet(t){return[...t].sort((e,n)=>e.explorerWallet&&n.explorerWallet?(e.explorerWallet.order??0)-(n.explorerWallet.order??0):e.explorerWallet?-1:n.explorerWallet?1:0)},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ee.isMobile())return{accounts:[],chainId:void 0};if(t.id===B.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}},getFilteredCustomWallets(t){const e=H.getRecentWallets(),n=V.state.connectors.map(o=>{var a;return(a=o.info)==null?void 0:a.rdns}).filter(Boolean),r=e.map(o=>o.rdns).filter(Boolean),s=n.concat(r);if(s.includes("io.metamask.mobile")&&ee.isMobile()){const o=s.indexOf("io.metamask.mobile");s[o]="io.metamask"}return t.filter(o=>!s.includes(String(o==null?void 0:o.rdns)))},hasWalletConnector(t){return V.state.connectors.some(e=>e.id===t.id||e.name===t.name)},isWalletCompatibleWithCurrentChain(t){const e=I.state.activeChain;return e&&t.chains?t.chains.some(n=>{const r=n.split(":")[0];return e===r}):!0},getFilteredRecentWallets(){return H.getRecentWallets().filter(n=>!ac.isExcluded(n)).filter(n=>!this.hasWalletConnector(n)).filter(n=>this.isWalletCompatibleWithCurrentChain(n))},getCappedRecommendedWallets(t){const{connectors:e}=V.state,{customWallets:n,featuredWalletIds:r}=F.state,s=e.find(_=>_.id==="walletConnect"),i=e.filter(_=>_.type==="INJECTED"||_.type==="ANNOUNCED"||_.type==="MULTI_CHAIN");if(!s&&!i.length&&!(n!=null&&n.length))return[];const o=qp.isEmailEnabled(),a=qp.isSocialsEnabled(),c=i.filter(_=>_.name!=="Browser Wallet"&&_.name!=="WalletConnect"),l=(r==null?void 0:r.length)||0,u=(n==null?void 0:n.length)||0,d=c.length||0,f=o?1:0,h=a?1:0,g=l+u+d+f+h,m=Math.max(0,4-g);return m<=0?[]:ac.filterOutDuplicateWallets(t).slice(0,m)}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Hu=globalThis,Um=Hu.ShadowRoot&&(Hu.ShadyCSS===void 0||Hu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Bm=Symbol(),pE=new WeakMap;let LI=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Bm)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Um&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=pE.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&pE.set(n,e))}return e}toString(){return this.cssText}};const ur=t=>new LI(typeof t=="string"?t:t+"",void 0,Bm),si=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new LI(n,t,Bm)},lZ=(t,e)=>{if(Um)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Hu.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},gE=Um?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ur(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:uZ,defineProperty:dZ,getOwnPropertyDescriptor:fZ,getOwnPropertyNames:hZ,getOwnPropertySymbols:pZ,getPrototypeOf:gZ}=Object,hi=globalThis,mE=hi.trustedTypes,mZ=mE?mE.emptyScript:"",ap=hi.reactiveElementPolyfillSupport,yc=(t,e)=>t,Q0={toAttribute(t,e){switch(e){case Boolean:t=t?mZ:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},MI=(t,e)=>!uZ(t,e),yE={attribute:!0,type:String,converter:Q0,reflect:!1,useDefault:!1,hasChanged:MI};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),hi.litPropertyMetadata??(hi.litPropertyMetadata=new WeakMap);let qo=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=yE){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&dZ(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=fZ(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??yE}static _$Ei(){if(this.hasOwnProperty(yc("elementProperties")))return;const e=gZ(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(yc("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(yc("properties"))){const n=this.properties,r=[...hZ(n),...pZ(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(gE(s))}else e!==void 0&&n.push(gE(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return lZ(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:Q0).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Q0;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??MI)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};qo.elementStyles=[],qo.shadowRootOptions={mode:"open"},qo[yc("elementProperties")]=new Map,qo[yc("finalized")]=new Map,ap==null||ap({ReactiveElement:qo}),(hi.reactiveElementVersions??(hi.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bc=globalThis,Ud=bc.trustedTypes,bE=Ud?Ud.createPolicy("lit-html",{createHTML:t=>t}):void 0,FI="$lit$",ii=`lit$${Math.random().toFixed(9).slice(2)}$`,jI="?"+ii,yZ=`<${jI}>`,bo=document,yl=()=>bo.createComment(""),bl=t=>t===null||typeof t!="object"&&typeof t!="function",Lm=Array.isArray,bZ=t=>Lm(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",cp=`[ 	
\f\r]`,Qa=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,wE=/-->/g,EE=/>/g,Bi=RegExp(`>|${cp}(?:([^\\s"'>=/]+)(${cp}*=${cp}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),vE=/'/g,CE=/"/g,zI=/^(?:script|style|textarea|title)$/i,HI=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),GQ=HI(1),YQ=HI(2),va=Symbol.for("lit-noChange"),Pt=Symbol.for("lit-nothing"),_E=new WeakMap,Xi=bo.createTreeWalker(bo,129);function qI(t,e){if(!Lm(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return bE!==void 0?bE.createHTML(e):e}const wZ=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Qa;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===Qa?u[1]==="!--"?o=wE:u[1]!==void 0?o=EE:u[2]!==void 0?(zI.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Bi):u[3]!==void 0&&(o=Bi):o===Bi?u[0]===">"?(o=s??Qa,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Bi:u[3]==='"'?CE:vE):o===CE||o===vE?o=Bi:o===wE||o===EE?o=Qa:(o=Bi,s=void 0);const h=o===Bi&&t[a+1].startsWith("/>")?" ":"";i+=o===Qa?c+yZ:d>=0?(r.push(l),c.slice(0,d)+FI+c.slice(d)+ii+h):c+ii+(d===-2?a:h)}return[qI(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class wl{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=wZ(e,n);if(this.el=wl.createElement(l,r),Xi.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Xi.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(FI)){const f=u[o++],h=s.getAttribute(d).split(ii),g=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:g[2],strings:h,ctor:g[1]==="."?vZ:g[1]==="?"?CZ:g[1]==="@"?_Z:Rf}),s.removeAttribute(d)}else d.startsWith(ii)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(zI.test(s.tagName)){const d=s.textContent.split(ii),f=d.length-1;if(f>0){s.textContent=Ud?Ud.emptyScript:"";for(let h=0;h<f;h++)s.append(d[h],yl()),Xi.nextNode(),c.push({type:2,index:++i});s.append(d[f],yl())}}}else if(s.nodeType===8)if(s.data===jI)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ii,d+1))!==-1;)c.push({type:7,index:i}),d+=ii.length-1}i++}}static createElement(e,n){const r=bo.createElement("template");return r.innerHTML=e,r}}function Ca(t,e,n=t,r){var o,a;if(e===va)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=bl(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Ca(t,s._$AS(t,e.values),s,r)),e}class EZ{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??bo).importNode(n,!0);Xi.currentNode=s;let i=Xi.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new jl(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new AZ(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Xi.nextNode(),o++)}return Xi.currentNode=bo,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class jl{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Pt,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Ca(this,e,n),bl(e)?e===Pt||e==null||e===""?(this._$AH!==Pt&&this._$AR(),this._$AH=Pt):e!==this._$AH&&e!==va&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):bZ(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Pt&&bl(this._$AH)?this._$AA.nextSibling.data=e:this.T(bo.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=wl.createElement(qI(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new EZ(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=_E.get(e.strings);return n===void 0&&_E.set(e.strings,n=new wl(e)),n}k(e){Lm(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new jl(this.O(yl()),this.O(yl()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Rf{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Pt,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Pt}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Ca(this,e,n,0),o=!bl(e)||e!==this._$AH&&e!==va,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Ca(this,a[r+c],n,c),l===va&&(l=this._$AH[c]),o||(o=!bl(l)||l!==this._$AH[c]),l===Pt?e=Pt:e!==Pt&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Pt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class vZ extends Rf{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Pt?void 0:e}}class CZ extends Rf{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Pt)}}class _Z extends Rf{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Ca(this,e,n,0)??Pt)===va)return;const r=this._$AH,s=e===Pt&&r!==Pt||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Pt&&(r===Pt||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class AZ{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Ca(this,e)}}const lp=bc.litHtmlPolyfillSupport;lp==null||lp(wl,jl),(bc.litHtmlVersions??(bc.litHtmlVersions=[])).push("3.3.1");const IZ=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new jl(e.insertBefore(yl(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ro=globalThis;class qu extends qo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=IZ(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return va}}var $E;qu._$litElement$=!0,qu.finalized=!0,($E=ro.litElementHydrateSupport)==null||$E.call(ro,{LitElement:qu});const up=ro.litElementPolyfillSupport;up==null||up({LitElement:qu});(ro.litElementVersions??(ro.litElementVersions=[])).push("4.2.1");const SZ={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},Bd={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},xZ={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},TZ={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},NZ={regular:"KHTeka",mono:"KHTekaMono"},OZ={regular:"400",medium:"500"},PZ={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},RZ={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},kZ={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},$Z={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},eg={colors:SZ,fontFamily:NZ,fontWeight:OZ,textSize:PZ,typography:RZ,tokens:{core:Bd.core,theme:Bd.dark},borderRadius:xZ,spacing:TZ,durations:$Z,easings:kZ},AE="--apkt";function Iu(t){if(!t)return{};const e={};return e["font-family"]=t["--apkt-font-family"]??t["--w3m-font-family"]??"KHTeka",e.accent=t["--apkt-accent"]??t["--w3m-accent"]??"#0988F0",e["color-mix"]=t["--apkt-color-mix"]??t["--w3m-color-mix"]??"#000",e["color-mix-strength"]=t["--apkt-color-mix-strength"]??t["--w3m-color-mix-strength"]??0,e["font-size-master"]=t["--apkt-font-size-master"]??t["--w3m-font-size-master"]??"10px",e["border-radius-master"]=t["--apkt-border-radius-master"]??t["--w3m-border-radius-master"]??"4px",t["--apkt-z-index"]!==void 0?e["z-index"]=t["--apkt-z-index"]:t["--w3m-z-index"]!==void 0&&(e["z-index"]=t["--w3m-z-index"]),e}const us={createCSSVariables(t){const e={},n={};function r(i,o,a=""){for(const[c,l]of Object.entries(i)){const u=a?`${a}-${c}`:c;l&&typeof l=="object"&&Object.keys(l).length?(o[c]={},r(l,o[c],u)):typeof l=="string"&&(o[c]=`${AE}-${u}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return r(t,e),s(e,n),{cssVariables:e,cssVariablesVarPrefix:n}},assignCSSVariables(t,e){const n={};function r(s,i,o){for(const[a,c]of Object.entries(s)){const l=o?`${o}-${a}`:a,u=i[a];c&&typeof c=="object"?r(c,u,l):typeof u=="string"&&(n[`${AE}-${l}`]=u)}}return r(t,e),n},createRootStyles(t,e){const n={...eg,tokens:{...eg.tokens,theme:t==="light"?Bd.light:Bd.dark}},{cssVariables:r}=us.createCSSVariables(n),s=us.assignCSSVariables(r,n),i=us.generateW3MVariables(e),o=us.generateW3MOverrides(e),a=us.generateScaledVariables(e),c=us.generateBaseVariables(s),l={...s,...c,...i,...o,...a},u=us.applyColorMixToVariables(e,l),d={...l,...u};return`:root {${Object.entries(d).map(([h,g])=>`${h}:${g.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e=Iu(t),n={};return n["--w3m-font-family"]=e["font-family"],n["--w3m-accent"]=e.accent,n["--w3m-color-mix"]=e["color-mix"],n["--w3m-color-mix-strength"]=`${e["color-mix-strength"]}%`,n["--w3m-font-size-master"]=e["font-size-master"],n["--w3m-border-radius-master"]=e["border-radius-master"],n},generateW3MOverrides(t){if(!t)return{};const e=Iu(t),n={};if(t["--apkt-accent"]||t["--w3m-accent"]){const r=e.accent;n["--apkt-tokens-core-iconAccentPrimary"]=r,n["--apkt-tokens-core-borderAccentPrimary"]=r,n["--apkt-tokens-core-textAccentPrimary"]=r,n["--apkt-tokens-core-backgroundAccentPrimary"]=r}return(t["--apkt-font-family"]||t["--w3m-font-family"])&&(n["--apkt-fontFamily-regular"]=e["font-family"]),e["z-index"]!==void 0&&(n["--apkt-tokens-core-zIndex"]=`${e["z-index"]}`),n},generateScaledVariables(t){if(!t)return{};const e=Iu(t),n={};if(t["--apkt-font-size-master"]||t["--w3m-font-size-master"]){const r=parseFloat(e["font-size-master"].replace("px",""));n["--apkt-textSize-h1"]=`${Number(r)*5}px`,n["--apkt-textSize-h2"]=`${Number(r)*4.4}px`,n["--apkt-textSize-h3"]=`${Number(r)*3.8}px`,n["--apkt-textSize-h4"]=`${Number(r)*3.2}px`,n["--apkt-textSize-h5"]=`${Number(r)*2.6}px`,n["--apkt-textSize-h6"]=`${Number(r)*2}px`,n["--apkt-textSize-large"]=`${Number(r)*1.6}px`,n["--apkt-textSize-medium"]=`${Number(r)*1.4}px`,n["--apkt-textSize-small"]=`${Number(r)*1.2}px`}if(t["--apkt-border-radius-master"]||t["--w3m-border-radius-master"]){const r=parseFloat(e["border-radius-master"].replace("px",""));n["--apkt-borderRadius-1"]=`${Number(r)}px`,n["--apkt-borderRadius-2"]=`${Number(r)*2}px`,n["--apkt-borderRadius-3"]=`${Number(r)*3}px`,n["--apkt-borderRadius-4"]=`${Number(r)*4}px`,n["--apkt-borderRadius-5"]=`${Number(r)*5}px`,n["--apkt-borderRadius-6"]=`${Number(r)*6}px`,n["--apkt-borderRadius-8"]=`${Number(r)*8}px`,n["--apkt-borderRadius-16"]=`${Number(r)*16}px`,n["--apkt-borderRadius-20"]=`${Number(r)*20}px`,n["--apkt-borderRadius-32"]=`${Number(r)*32}px`,n["--apkt-borderRadius-64"]=`${Number(r)*64}px`,n["--apkt-borderRadius-128"]=`${Number(r)*128}px`}return n},generateColorMixCSS(t,e){if(!(t!=null&&t["--w3m-color-mix"])||!t["--w3m-color-mix-strength"])return"";const n=t["--w3m-color-mix"],r=t["--w3m-color-mix-strength"];if(!r||r===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=(e==null?void 0:e[o])||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${n} ${r}%, ${a});`:`${o}: color-mix(in srgb, ${n} ${r}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},n=t["--apkt-tokens-theme-backgroundPrimary"];n&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=n);const r=t["--apkt-tokens-core-backgroundAccentPrimary"];return r&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=r),e},applyColorMixToVariables(t,e){const n={};e!=null&&e["--apkt-tokens-theme-backgroundPrimary"]&&(n["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e!=null&&e["--apkt-tokens-core-backgroundAccentPrimary"]&&(n["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");const r=Iu(t),s=r["color-mix"],i=r["color-mix-strength"];if(!i||i===0)return n;const o=Object.keys(e||{}).filter(a=>{const c=a.includes("-tokens-core-background")||a.includes("-tokens-core-text")||a.includes("-tokens-core-border")||a.includes("-tokens-core-foreground")||a.includes("-tokens-core-icon")||a.includes("-tokens-theme-background")||a.includes("-tokens-theme-text")||a.includes("-tokens-theme-border")||a.includes("-tokens-theme-foreground")||a.includes("-tokens-theme-icon")||a.includes("-tokens-theme-overlay"),l=a.includes("-borderRadius-")||a.includes("-spacing-")||a.includes("-textSize-")||a.includes("-fontFamily-")||a.includes("-fontWeight-")||a.includes("-typography-")||a.includes("-duration-")||a.includes("-ease-")||a.includes("-path-")||a.includes("-width-")||a.includes("-height-")||a.includes("-visual-size-")||a.includes("-modal-width")||a.includes("-cover");return c&&!l});return o.length===0||o.forEach(a=>{const c=(e==null?void 0:e[a])||"";a.endsWith("-base")||(a==="--apkt-tokens-theme-backgroundPrimary"||a==="--apkt-tokens-core-backgroundAccentPrimary"?n[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base))`:c.includes("color-mix")||c.startsWith("#")||c.startsWith("rgb")?n[a]=`color-mix(in srgb, ${s} ${i}%, ${c})`:n[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base, ${c}))`)}),n}},{cssVariablesVarPrefix:DZ}=us.createCSSVariables(eg);function ZQ(t,...e){return si(t,...e.map(n=>ur(typeof n=="function"?n(DZ):n)))}let Hi,Qi,Mr,Dn,Ld;const as={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function Md(t,e="dark"){Hi&&document.head.removeChild(Hi),Hi=document.createElement("style"),Hi.textContent=us.createRootStyles(e,t),document.head.appendChild(Hi)}function JQ(t,e="dark"){if(Ld=t,Qi=document.createElement("style"),Mr=document.createElement("style"),Dn=document.createElement("style"),Qi.textContent=aa(t).core.cssText,Mr.textContent=aa(t).dark.cssText,Dn.textContent=aa(t).light.cssText,document.head.appendChild(Qi),document.head.appendChild(Mr),document.head.appendChild(Dn),Md(t,e),tg(e),!((t==null?void 0:t["--apkt-font-family"])||(t==null?void 0:t["--w3m-font-family"])))for(const[r,s]of Object.entries(as)){const i=document.createElement("link");i.rel="preload",i.href=s,i.as="font",i.type=r.includes("woff2")?"font/woff2":"font/woff",i.crossOrigin="anonymous",document.head.appendChild(i)}tg(e)}function tg(t="dark"){Mr&&Dn&&Hi&&(t==="light"?(Md(Ld,t),Mr.removeAttribute("media"),Dn.media="enabled"):(Md(Ld,t),Dn.removeAttribute("media"),Mr.media="enabled"))}function UZ(t){var e,n,r;if(Ld=t,Qi&&Mr&&Dn){Qi.textContent=aa(t).core.cssText,Mr.textContent=aa(t).dark.cssText,Dn.textContent=aa(t).light.cssText;const s=(t==null?void 0:t["--apkt-font-family"])||(t==null?void 0:t["--w3m-font-family"]);s&&(Qi.textContent=(e=Qi.textContent)==null?void 0:e.replace("font-family: KHTeka",`font-family: ${s}`),Mr.textContent=(n=Mr.textContent)==null?void 0:n.replace("font-family: KHTeka",`font-family: ${s}`),Dn.textContent=(r=Dn.textContent)==null?void 0:r.replace("font-family: KHTeka",`font-family: ${s}`))}if(Hi){const s=(Dn==null?void 0:Dn.media)==="enabled"?"light":"dark";Md(t,s)}}function aa(t){const e=!!(t!=null&&t["--apkt-font-family"]||t!=null&&t["--w3m-font-family"]);return{core:si`
      ${e?si``:si`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ur(as["KHTeka-400-woff2"])}) format('woff2'),
                url(${ur(as["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ur(as["KHTeka-300-woff2"])}) format('woff2'),
                url(${ur(as["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${ur(as["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${ur(as["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${ur(as["KHTeka-400-woff2"])}) format('woff2'),
                url(${ur(as["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:si`
      :root {
      }
    `,light:si`
      :root {
      }
    `}}const XQ=si`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,QQ=si`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Su={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};class BZ extends rA{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new sA({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ee.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var o,a,c,l,u;if(!(e.caipNetwork&&ke.BALANCE_SUPPORTED_CHAINS.includes((o=e.caipNetwork)==null?void 0:o.chainNamespace))||(a=e.caipNetwork)!=null&&a.testnet)return{balance:"0.00",symbol:((c=e.caipNetwork)==null?void 0:c.nativeCurrency.symbol)||""};const r=I.getAccountData();if(r!=null&&r.balanceLoading&&e.chainId===((l=I.state.activeCaipNetwork)==null?void 0:l.id))return{balance:(r==null?void 0:r.balance)||"0.00",symbol:(r==null?void 0:r.balanceSymbol)||""};const i=(await I.fetchTokenBalance()).find(d=>{var f,h;return d.chainId===`${(f=e.caipNetwork)==null?void 0:f.chainNamespace}:${e.chainId}`&&d.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=I.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===B.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Na.encode(new TextEncoder().encode(r)),pubkey:s}},(a=I.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=I.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===B.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Er(n.id)}]}))}catch(u){if(u.code===Su.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Su.ERROR_INVALID_CHAIN_ID||u.code===Su.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Su.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Er(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const LZ=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],xu={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?ke.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?ke.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?ke.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ke.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ke.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ke.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?ke.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},MZ={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=xu[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=xu[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return xu[t].processApi(e)},processFallbackFeature(t,e){return xu[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await de.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?ke.DEFAULT_REMOTE_FEATURES:ke.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of LZ){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),ke.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;ct.open({debugMessage:nt.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class FZ{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o;if(n){const a=(s=I.getCaipNetworks(n))==null?void 0:s.find(u=>u.id===r);if(a)return a;const c=(i=I.getNetworkData(n))==null?void 0:i.caipNetwork;return c||((o=I.getRequestedCaipNetworks(n).filter(u=>u.chainNamespace===n))==null?void 0:o[0])}return I.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>I.getCaipNetworks(n),this.getActiveChainNamespace=()=>I.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{I.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>I.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>{var r,s;return I.state.activeChain===n||!n?I.state.activeCaipAddress:(s=(r=I.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.caipAddress},this.setClientId=n=>{be.setClientId(n)},this.getProvider=n=>Ye.getProvider(n),this.getProviderType=n=>Ye.getProviderId(n),this.getPreferredAccountType=n=>nn(n),this.setCaipAddress=(n,r,s=!1)=>{I.setAccountProp("caipAddress",n,r,s),I.setAccountProp("address",ee.getPlainAddress(n),r,s)},this.setBalance=(n,r,s)=>{I.setAccountProp("balance",n,s),I.setAccountProp("balanceSymbol",r,s)},this.setProfileName=(n,r)=>{I.setAccountProp("profileName",n,r)},this.setProfileImage=(n,r)=>{I.setAccountProp("profileImage",n,r)},this.setUser=(n,r)=>{I.setAccountProp("user",n,r)},this.resetAccount=n=>{I.resetAccount(n)},this.setCaipNetwork=n=>{I.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{I.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{I.setAccountProp("status",n,r),V.isConnected()?H.setConnectionStatus("connected"):H.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>{var r;return(r=I.getAccountData(n))==null?void 0:r.address},this.setConnectors=n=>{const r=[...V.state.allConnectors,...n];V.setConnectors(r)},this.setConnections=(n,r)=>{H.setConnections(n,r),X.setConnections(n,r)},this.fetchIdentity=n=>be.fetchIdentity(n),this.getReownName=n=>fc.getNamesForAddress(n),this.getConnectors=()=>V.getConnectors(),this.getConnectorImage=n=>PC.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?hd.getConnectionsData(n).connections:(ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?hd.getConnectionsData(n).recentConnections:(ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await X.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}H.deleteAddressFromConnection(n),X.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=Ye.getProviderId(r),i=n?{...n,type:s}:void 0;I.setAccountProp("connectedWalletInfo",i,r)},this.getIsConnectedState=()=>!!I.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{var o;const i=((o=I.getAccountData(s))==null?void 0:o.addressLabels)||{};I.setAccountProp("addressLabels",{...i,[n]:r},s)},this.removeAddressLabel=(n,r)=>{var i;const s=((i=I.getAccountData(r))==null?void 0:i.addressLabels)||{};I.setAccountProp("addressLabels",{...s,[n]:void 0},r)},this.getAddress=n=>{var s;const r=n||I.state.activeChain;return(s=I.getAccountData(r))==null?void 0:s.address},this.resetNetwork=n=>{I.resetNetwork(n)},this.addConnector=n=>{V.addConnector(n)},this.resetWcConnection=()=>{X.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{I.setAccountProp("addressExplorerUrl",n,r)},this.setSmartAccountDeployed=(n,r)=>{I.setAccountProp("smartAccountDeployed",n,r)},this.setPreferredAccountType=(n,r)=>{I.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{F.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s,i,o;if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),F.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(this.remoteFeatures=await MZ.fetchRemoteFeatures(e)),await de.fetchUsage(),F.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Gp.setOnrampProviders(this.remoteFeatures.onramp),((n=F.state.remoteFeatures)!=null&&n.email||Array.isArray((r=F.state.remoteFeatures)==null?void 0:r.socials)&&((s=F.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins(),(i=F.state.features)!=null&&i.reownAuthentication||(o=F.state.remoteFeatures)!=null&&o.reownAuthentication){const{ReownAuthentication:a}=await Ct(async()=>{const{ReownAuthentication:l}=await import("./features.chunk.js");return{ReownAuthentication:l}},[]),c=F.state.siwx;c instanceof a||(c&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),F.setSIWX(new a))}}async openSend(e){var i;const n=e.namespace||I.state.activeChain,r=this.getCaipAddress(n),s=(i=this.getCaipNetwork(n))==null?void 0:i.id;if(!r)throw new Error("openSend: caipAddress not found");if((s==null?void 0:s.toString())!==e.chainId.toString()){const o=I.getCaipNetworkById(e.chainId,n);if(!o)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(o,{throwOnFailure:!0})}try{const o=oA.getTokenSymbolByAddress(e.assetAddress);o&&await de.fetchTokenImages([o])}catch{}return await Oe.open({view:"WalletSend",data:{send:e}}),new Promise((o,a)=>{const c=Se.subscribeKey("hash",d=>{d&&(u(),o({hash:d}))}),l=Oe.subscribe(d=>{d.open||(u(),a(new Error("Modal closed")))}),u=this.createCleanupHandler([c,l])})}toModalOptions(){function e(r){return(r==null?void 0:r.view)==="Swap"}function n(r){return(r==null?void 0:r.view)==="WalletSend"}return{isSwap:e,isSend:n}}async checkAllowedOrigins(){try{const e=await de.fetchAllowedOrigins();if(!ee.isClient())return;const n=window.location.origin;ws.isOriginAllowed(n,e,B.DEFAULT_ALLOWED_ANCESTORS)||ct.open(nt.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":ct.open(nt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;ct.open({displayMessage:nt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:nt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(n=>{try{n()}catch{}})}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Ce.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){$C.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&gn.setThemeMode(e.themeMode),e.themeVariables&&gn.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");I.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const n=this.getDefaultNetwork();n&&I.setActiveCaipNetwork(n)}initializeConnectionController(e){X.initialize(e.adapters??[]),X.setWcBasic(e.basic??!1)}initializeConnectorController(){V.initialize(this.chainNamespaces)}initializeProjectSettings(e){F.setProjectId(e.projectId),F.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;F.setDebug(e.debug!==!1),F.setEnableWalletGuide(e.enableWalletGuide!==!1),F.setEnableWallets(e.enableWallets!==!1),F.setEIP6963Enabled(e.enableEIP6963!==!1),F.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),F.setEnableReconnect(e.enableReconnect!==!1),F.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),F.setCoinbasePreference(e.coinbasePreference),F.setEnableAuthLogger(e.enableAuthLogger!==!1),F.setCustomRpcUrls(e.customRpcUrls),F.setEnableEmbedded(e.enableEmbedded),F.setAllWallets(e.allWallets),F.setIncludeWalletIds(e.includeWalletIds),F.setExcludeWalletIds(e.excludeWalletIds),F.setFeaturedWalletIds(e.featuredWalletIds),F.setTokens(e.tokens),F.setTermsConditionsUrl(e.termsConditionsUrl),F.setPrivacyPolicyUrl(e.privacyPolicyUrl),F.setCustomWallets(e.customWallets),F.setFeatures(e.features),F.setAllowUnsupportedChain(e.allowUnsupportedChain),F.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),F.setPreferUniversalLinks(e.experimental_preferUniversalLinks),F.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),F.setMetadata(e.metadata),F.setDisableAppend(e.disableAppend),F.setEnableEmbedded(e.enableEmbedded),F.setSIWX(e.siwx),this.features=F.state.features??{},!e.projectId){ct.open(nt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===B.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");F.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ee.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Ur.getUnsupportedNetwork(`${n}:${e}`);I.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ur.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Ur.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Ur.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Ur.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,n){var r,s;try{this.setLoading(!0,e);let i={connections:[]};const o=this.getAdapter(e);return(((s=(r=I.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.caipAddress)||!F.state.enableReconnect)&&(o!=null&&o.disconnect)&&(i=await o.disconnect({id:n})),this.setLoading(!1,e),i}catch(i){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${i.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var l;const e=I.state.activeChain,n=this.getAdapter(e),r=(l=this.getCaipNetwork(e))==null?void 0:l.id,s=X.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),H.setConnectedNamespaces([...I.state.chains.keys()]),await this.syncWalletConnectAccount(),await $n.initializeIfEnabled()},connectExternal:async e=>{const n=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,n),n?{address:n.address}:void 0},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=I.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),H.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{var l;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||I.state.activeChain,o=V.getConnectorId(i),a=n===B.CONNECTOR_ID.AUTH||o===B.CONNECTOR_ID.AUTH,c=n===B.CONNECTOR_ID.WALLET_CONNECT||o===B.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(I.state.chains.keys());let d=r?[r]:u;(c||a)&&(d=u);const f=d.map(async p=>{const m=V.getConnectorId(p),w=n||m,_=await this.disconnectConnector(p,w);_&&(a&&H.deleteConnectedSocialProvider(),_.connections.forEach(b=>{H.addDisconnectedConnectorId(b.connectorId,p)})),s&&this.onDisconnectNamespace({chainNamespace:p,closeModal:!1})}),h=await Promise.allSettled(f);Se.resetSend(),X.resetWcConnection(),(l=$n.getSIWX())!=null&&l.signOutOnDisconnect&&await $n.clearSessions(),V.setFilterByNamespace(void 0),X.syncStorageConnections();const g=h.filter(p=>p.status==="rejected");if(g.length>0)throw new Error(g.map(p=>p.reason.message).join(", "));Ce.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=I.state.activeChain,r=this.getAdapter(I.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=this.getAddress(n);if(!s)throw new Error("signMessage: address not found");const i=await(r==null?void 0:r.signMessage({message:e,address:s,provider:Ye.getProvider(n)}));return(i==null?void 0:i.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(ke.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=Ye.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===B.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Ye.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var s;const e=I.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");const n=this.getAddress(e);if(!n)throw new Error("getEnsAvatar: address not found");await this.syncIdentity({address:n,chainId:Number((s=this.getCaipNetwork())==null?void 0:s.id),chainNamespace:e});const r=I.getAccountData();return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>await ws.resolveReownName(e),writeContract:async e=>{const n=I.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Ye.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(I.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(I.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getAddress(e),r=this.getCaipNetwork(e);!r||!n||this.updateNativeBalance(n,r==null?void 0:r.id,e)}},X.setClient(this.connectionControllerClient)}async onConnectExternal(e){var l,u,d,f,h,g,p,m;const n=I.state.activeChain,r=e.chain||n,s=this.getAdapter(r);let i=!0;if(e.type===je.CONNECTOR_TYPE_AUTH&&B.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(b=>V.getConnectorId(b)===B.CONNECTOR_ID.AUTH)&&e.chain!==n&&(i=!1),e.chain&&e.chain!==n&&!e.caipNetwork){const w=this.getCaipNetworks().find(_=>_.chainNamespace===e.chain);w&&i&&this.setCaipNetwork(w)}if(!r)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(r),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:((l=e.caipNetwork)==null?void 0:l.id)||(o==null?void 0:o.id),rpcUrl:((h=(f=(d=(u=e.caipNetwork)==null?void 0:u.rpcUrls)==null?void 0:d.default)==null?void 0:f.http)==null?void 0:h[0])||((m=(p=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:p.http)==null?void 0:m[0])});if(c)return H.addConnectedNamespace(r),this.syncProvider({...c,chainNamespace:r}),this.setStatus("connected",r),this.syncConnectedWalletInfo(r),H.removeDisconnectedConnectorId(e.id,r),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,n){var a;const r=e.type===je.CONNECTOR_TYPE_AUTH,s=yr.getOtherAuthNamespaces((a=n==null?void 0:n.connectedCaipNetwork)==null?void 0:a.chainNamespace),i=I.state.activeCaipNetwork,o=this.getAdapter(i==null?void 0:i.chainNamespace);r&&(await Promise.all(s.map(async c=>{var l,u,d;try{const f=Ye.getProvider(c),h=this.getCaipNetwork(c),g=this.getAdapter(c);await(g==null?void 0:g.connect({...e,provider:f,socialUri:void 0,chainId:h==null?void 0:h.id,rpcUrl:(d=(u=(l=h==null?void 0:h.rpcUrls)==null?void 0:l.default)==null?void 0:u.http)==null?void 0:d[0]}))&&(H.addConnectedNamespace(c),H.removeDisconnectedConnectorId(e.id,c),this.setStatus("connected",c),this.syncConnectedWalletInfo(c))}catch(f){ct.warn(nt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,nt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(c,f instanceof Error?f.message:void 0),nt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await(o==null?void 0:o.switchNetwork({caipNetwork:i})))}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Ye.getProviderId(I.state.activeChain)===je.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Ye.getProviderId(n);if(e.chainNamespace===I.state.activeChain){const i=this.getAdapter(n);await(i==null?void 0:i.switchNetwork({caipNetwork:e}))}else if(this.setCaipNetwork(e),s===je.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const i=this.getAddressByChainNamespace(n);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=At.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i,o;const s=e==null?void 0:e.find(a=>a.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:(o=this.caipNetworks)==null?void 0:o.filter(({chainNamespace:a})=>a===r)}),n[r]=s):n[r]=new BZ({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);const n=this.getAdapter(e);if(!n)throw new Error("adapter not found");await n.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=H.getConnectionStatus();F.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(H.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{var l,u;const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),a=I.state.activeChain===e,c=(u=(l=I.state.chains.get(e))==null?void 0:l.accountState)==null?void 0:u.address;if(o){const d=a&&s?s:c;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(X.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=this.getAddress(e),i=I.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{var u,d;this.handlePreviousConnectorConnection(o);const a=I.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o==null?void 0:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=(d=(u=I.getNetworkData(e))==null?void 0:u.caipNetwork)==null?void 0:d.id,l=i||c;a&&l?this.syncAccount({address:s,chainId:l,chainNamespace:e}):!a&&l?(this.syncAccountInfo(s,l,e),this.syncBalance({address:s,chainId:l,chainNamespace:e})):this.syncAccountInfo(s,i,e),H.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){var c;const n=e==null?void 0:e.chain,r=e==null?void 0:e.id,s=V.getConnectorId(n),i=(c=F.state.remoteFeatures)==null?void 0:c.multiWallet,a=n&&r&&s&&s!==r&&!i;try{a&&await X.disconnect({id:s,namespace:n})}catch(l){console.warn("Error disconnecting previous connector",l)}}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>X.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();this.getCaipAddress()||H.deleteRecentWallet();const n=H.getRecentWallet();Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:ee.isMobile()?"mobile":"qrcode",name:(n==null?void 0:n.name)||"Unknown",reconnect:!0,view:me.state.view,walletRank:n==null?void 0:n.order}})}async syncNamespaceConnection(e){try{e===B.CHAIN.EVM&&ee.isSafeApp()&&V.setConnectorId(B.CONNECTOR_ID.SAFE,e);const n=V.getConnectorId(e);switch(this.setStatus("connecting",e),n){case B.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case B.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};I.resetAccount(n),I.resetNetwork(n),H.removeConnectedNamespace(n);const s=Array.from(I.state.chains.keys());(n?[n]:s).forEach(o=>H.addDisconnectedConnectorId(V.getConnectorId(o)||"",o)),V.removeConnectorId(n),Ye.resetChain(n),this.setUser(null,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(null,n),r!==!1&&Oe.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getAdapter(e),r=this.getCaipAddress(e),s=this.getCaipNetwork(e);return n==null?void 0:n.syncConnections({connectToFirstConnector:!r,caipNetwork:s})}))}async syncAdapterConnection(e){var a,c,l,u,d;const n=this.getAdapter(e),r=this.getCaipNetwork(e),s=V.getConnectorId(e),o=V.getConnectors(e).find(f=>f.id===s);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(r!=null&&r.id))throw new Error("CaipNetwork not found");const f=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:r.id,rpcUrl:(l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));f?(this.syncProvider({...f,chainNamespace:e}),await this.syncAccount({...f,chainNamespace:e}),this.setStatus("connected",e),Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:f.address,properties:{method:"browser",name:((u=o.info)==null?void 0:u.name)||o.name||"Unknown",reconnect:!0,view:me.state.view,walletRank:(d=o==null?void 0:o.explorerWallet)==null?void 0:d.order}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var d,f,h,g,p;const o=this.getAdapter(i);if(!o)return;const a=((g=(h=(f=(d=this.universalProvider)==null?void 0:d.session)==null?void 0:f.namespaces)==null?void 0:h[i])==null?void 0:g.accounts)||[],c=(p=I.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(m=>{const{chainId:w}=At.parseCaipAddress(m);return w===(c==null?void 0:c.toString())})||a[0];if(l){const m=At.validateCaipAddress(l),{chainId:w,address:_}=At.parseCaipAddress(m);if(Ye.setProviderId(i,je.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&I.state.activeCaipNetwork&&o.namespace!==B.CHAIN.EVM){const b=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:I.state.activeCaipNetwork});Ye.setProvider(i,b)}else Ye.setProvider(i,this.universalProvider);V.setConnectorId(B.CONNECTOR_ID.WALLET_CONNECT,i),H.addConnectedNamespace(i),await this.syncAccount({address:_,chainId:w,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);const u=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(i),I.setApprovedCaipNetworksData(i,{approvedCaipNetworkIds:u.approvedCaipNetworkIds,supportsAllNetworks:u.supportsAllNetworks})});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Ye.setProviderId(s,e),Ye.setProvider(s,n),V.setConnectorId(r,s)}async syncAccount(e){var d,f;const n=e.chainNamespace===I.state.activeChain,r=I.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=H.getActiveNetworkProps(),c=(r==null?void 0:r.id)||a,l=((d=I.state.activeCaipNetwork)==null?void 0:d.name)===B.UNSUPPORTED_NETWORK_NAME,u=I.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let h=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),g=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!h&&!g){const w=this.getApprovedCaipNetworkIds()||[],_=w.find(A=>{var C;return((C=At.parseCaipNetworkId(A))==null?void 0:C.chainId)===c.toString()}),b=w.find(A=>{var C;return((C=At.parseCaipNetworkId(A))==null?void 0:C.chainNamespace)===o});h=this.getCaipNetworks().find(A=>A.caipNetworkId===_),g=this.getCaipNetworks().find(A=>A.caipNetworkId===b||"deprecatedCaipNetworkId"in A&&A.deprecatedCaipNetworkId===b)}const p=h||g;(p==null?void 0:p.chainNamespace)===I.state.activeChain?F.state.enableNetworkSwitch&&!F.state.allowUnsupportedChain&&((f=I.state.activeCaipNetwork)==null?void 0:f.name)===B.UNSUPPORTED_NETWORK_NAME?I.showUnsupportedChainUI():this.setCaipNetwork(p):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o);const m=this.getAddress(o);yr.isLowerCaseMatch(s,m)||this.syncAccountInfo(s,p==null?void 0:p.id,o),n?await this.syncBalance({address:s,chainId:p==null?void 0:p.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=V.getConnectorId(e),r=Ye.getProviderId(e);if(r===je.CONNECTOR_TYPE_ANNOUNCED||r===je.CONNECTOR_TYPE_INJECTED){if(n){const o=this.getConnectors().find(a=>{var d,f;const c=a.id===n,l=((d=a.info)==null?void 0:d.rdns)===n,u=(f=a.connectors)==null?void 0:f.some(h=>{var g;return h.id===n||((g=h.info)==null?void 0:g.rdns)===n});return c||l||!!u});if(o){const{info:a,name:c,imageUrl:l}=o,u=l||this.getConnectorImage(o);this.setConnectedWalletInfo({name:c,icon:u,...a},e)}}}else if(r===je.CONNECTOR_TYPE_WALLET_CONNECT){const i=Ye.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&(n===B.CONNECTOR_ID.COINBASE_SDK||n===B.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(l=>l.id===n),o=(i==null?void 0:i.name)||"Coinbase Wallet",a=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),c=i==null?void 0:i.info;this.setConnectedWalletInfo({...c,name:o,icon:a},e)}}async syncBalance(e){!Cc.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=I.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var s,i,o,a,c,l,u,d,f,h;const e=ZB.createLogger((g,...p)=>{g&&this.handleAlertError(g),console.error(...p)}),n={projectId:(s=this.options)==null?void 0:s.projectId,metadata:{name:(i=this.options)!=null&&i.metadata?(o=this.options)==null?void 0:o.metadata.name:"",description:(a=this.options)!=null&&a.metadata?(c=this.options)==null?void 0:c.metadata.description:"",url:(l=this.options)!=null&&l.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(d=this.options)!=null&&d.metadata?(f=this.options)==null?void 0:f.metadata.icons:[""]},logger:e};F.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await oZ.init(n);const r=this.universalProvider.disconnect.bind(this.universalProvider);this.universalProvider.disconnect=async()=>{try{return await r()}catch(g){if(g instanceof Error&&g.message.includes("Missing or invalid. Record was recently deleted"))return;throw g}},F.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{ws.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{X.setUri(n)},onConnect:n=>{const{address:r}=ee.getAccount(n[0]);X.finalizeWcConnection(r)},onDisconnect:()=>{I.state.noAdapters&&this.resetAccount(e),X.resetWcConnection()},onChainChanged:n=>{const r=I.state.activeChain,s=r&&V.state.activeConnectorIds[r]===B.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(I.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=I.state.activeChain,s=r&&V.state.activeConnectorIds[r]===B.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(I.state.noAdapters||s)){const i=n==null?void 0:n[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ee.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ce.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){const e=I.getAllApprovedCaipNetworkIds(),n=I.getAllRequestedCaipNetworks();return ee.sortRequestedNetworks(e,n).filter(s=>I.isCaipNetworkDisabled(s))}handleAlertError(e){const n=Object.entries(nt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=nt.ALERT_ERRORS[o];a&&(ct.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s,i;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:(i=this.caipNetworks)==null?void 0:i.filter(({chainNamespace:o})=>o===n)}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&X.setUri(e.uri);const{isSwap:n,isSend:r}=this.toModalOptions();return n(e)?Oe.open({...e,data:{swap:e.arguments}}):r(e)&&e.arguments?this.openSend(e.arguments):Oe.open(e)}async close(){await this.injectModalUi(),Oe.close()}setLoading(e,n){Oe.setLoading(e,n)}async disconnect(e){await X.disconnect({namespace:e})}getSIWX(){return F.state.siwx}getError(){return""}getChainId(){var e;return(e=I.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e,{throwOnFailure:n=!1}={}){const r=this.getCaipNetworks().find(s=>s.id===e.id);if(!r){ct.open(nt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await I.switchActiveNetwork(r,{throwOnFailure:n})}getWalletProvider(){return I.state.activeChain?Ye.state.providers[I.state.activeChain]:null}getWalletProviderType(){return Ye.getProviderId(I.state.activeChain)}subscribeProviders(e){return Ye.subscribeProviders(e)}getThemeMode(){return gn.state.themeMode}getThemeVariables(){return gn.state.themeVariables}setThemeMode(e){gn.setThemeMode(e),tg(gn.state.themeMode)}setTermsConditionsUrl(e){F.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){F.setPrivacyPolicyUrl(e)}setThemeVariables(e){gn.setThemeVariables(e),UZ(gn.state.themeVariables)}subscribeTheme(e){return gn.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?X.subscribe(e):(ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){var r,s;if(e)return(s=(r=I.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.connectedWalletInfo;const n=I.getAccountData();return n==null?void 0:n.connectedWalletInfo}getAccount(e){const n=e||I.state.activeChain,r=V.getAuthConnector(n),s=I.getAccountData(n),i=H.getConnectedConnectorId(I.state.activeChain),o=X.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u,publicKey:d})=>ee.createAccount(n,l,u||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ee.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===B.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:H.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:nn(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?I.subscribeChainProp("accountState",r,n):I.subscribe(r),V.subscribe(r)}subscribeNetwork(e){return I.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?I.subscribeChainProp("accountState",r=>e(r==null?void 0:r.connectedWalletInfo),n):I.subscribeChainProp("accountState",r=>e(r==null?void 0:r.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){I.subscribeChainProp("accountState",n=>e(n==null?void 0:n.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){I.subscribeKey("activeCaipNetwork",e)}getState(){return mr.state}getRemoteFeatures(){return F.state.remoteFeatures}subscribeState(e){return mr.subscribe(e)}subscribeRemoteFeatures(e){return F.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Br.showError(e)}showSuccessMessage(e){Br.showSuccess(e)}getEvent(){return{...Ce.state}}subscribeEvents(e){return Ce.subscribe(e)}replace(e){me.replace(e)}redirect(e){me.push(e)}popTransactionStack(e){me.popTransactionStack(e)}isOpen(){return Oe.state.open}isTransactionStackEmpty(){return me.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){F.setFeatures(e)}updateRemoteFeatures(e){F.setRemoteFeatures(e)}updateOptions(e){const r={...F.state||{},...e};F.setOptions(r)}setConnectMethodsOrder(e){F.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){F.setWalletFeaturesOrder(e)}setCollapseWallets(e){F.setCollapseWallets(e)}setSocialsOrder(e){F.setSocialsOrder(e)}getConnectMethodsOrder(){return ac.getConnectOrderMethod(F.state.features,V.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||I.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&I.removeNetwork(e,n)}}let IE=!1;class jZ extends FZ{async onAuthProviderConnected(e){const n=yr.userChainIdToChainNamespace(e==null?void 0:e.chainId);if(e.message&&e.signature&&e.siwxMessage&&await $n.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===B.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=F.state.defaultAccountTypes[n],i=nn(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:l,...u}=e,d=I.getAccountData(n);this.setUser({...(d==null?void 0:d.user)||{},...u},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:n})]),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Un.checkIfRequestExists(n)?Un.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(dt.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(dt.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Un.checkIfRequestIsSafe(r),i=this.getAddress(),o=I.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=I.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");V.getConnectorId(n)===B.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=I.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=gn.getSnapshot();await e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:_c(n.themeVariables,n.themeMode)})}async syncAuthConnector(e,n){var u,d,f,h,g,p,m,w,_;const r=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===I.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername(),c=((u=I.getAccountData(n))==null?void 0:u.user)||{};this.setUser({...c,username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:l}=await e.isConnected();if(n&&r&&s)if(l&&((d=this.connectionControllerClient)!=null&&d.connectExternal)){await e.init(),await this.syncAuthConnectorTheme(e),await((g=this.connectionControllerClient)==null?void 0:g.connectExternal({id:B.CONNECTOR_ID.AUTH,info:{name:B.CONNECTOR_ID.AUTH},type:je.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=(f=I.getNetworkData(n))==null?void 0:f.caipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n);const b=H.getConnectedSocialProvider();b?Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:b,reconnect:!0}}):Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:((_=(w=(m=(p=this.universalProvider)==null?void 0:p.session)==null?void 0:m.peer)==null?void 0:w.metadata)==null?void 0:_.name)||"Unknown",reconnect:!0,view:me.state.view,walletRank:void 0}})}else V.getConnectorId(n)===B.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),H.removeConnectedNamespace(n));this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ee.isTelegram())return;const r=H.getTelegramSocialProvider();if(!r||!ee.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;r&&I.setAccountProp("socialProvider",r,e),await((n=this.authProvider)==null?void 0:n.init());const o=V.getAuthConnector();r&&o&&(this.setLoading(!0,e),await X.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),H.setConnectedSocialProvider(r),H.removeTelegramSocialProvider(),Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,f;if(!B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=yr.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=to.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(f=this.getCaipNetwork(a))==null?void 0:f.caipNetworkId,abortController:nt.EmbeddedWalletAbortController,onTimeout:h=>{h==="iframe_load_failed"?ct.open(nt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):h==="iframe_request_timeout"?ct.open(nt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):h==="unverified_domain"&&ct.open(nt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:h=>gs(h),getCaipNetworks:h=>I.getCaipNetworks(h)}),mr.subscribeOpen(h=>{var g;!h&&this.isTransactionStackEmpty()&&((g=this.authProvider)==null||g.rejectRpcRequests())}));const c=e===I.state.activeChain&&F.state.enableReconnect;F.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&de.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a,c;if(!e)return;const n=I.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&((o=I.getAccountData(r))!=null&&o.caipAddress)){const l=this.getAdapter(r);await(l==null?void 0:l.switchNetwork({caipNetwork:e})),this.setCaipNetwork(e)}else{const u=Ye.getProviderId(n)===je.CONNECTOR_TYPE_AUTH,d=Ye.getProviderId(r),f=d===je.CONNECTOR_TYPE_AUTH,h=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((u&&d===void 0||f)&&h)try{if(I.state.activeChain=e.chainNamespace,s){const g=this.getAdapter(r);await(g==null?void 0:g.switchNetwork({caipNetwork:e}))}else await((c=(a=this.connectionControllerClient)==null?void 0:a.connectExternal)==null?void 0:c.call(a,{id:B.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:je.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e}))}else if(d===je.CONNECTOR_TYPE_WALLET_CONNECT){if(!I.state.noAdapters){const g=this.getAdapter(r);await(g==null?void 0:g.switchNetwork({caipNetwork:e}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),mr.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var a;const s=`${r}:${n}`,i=(a=this.caipNetworks)==null?void 0:a.find(c=>c.caipNetworkId===s);if(i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=V.getConnectorId(r)===B.CONNECTOR_ID.AUTH;try{const{name:c,avatar:l}=await this.fetchIdentity({address:e});!c&&o?await this.syncReownName(e,r):(this.setProfileName(c,r),this.setProfileImage(l,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Ye.getProviderId(e);if(n===je.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=H.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ee.isClient()&&!IE)try{const e={...ke.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ee.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!F.state.disableAppend&&!F.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}IE=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ee.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Ct(()=>import("./embedded-wallet.chunk.js"),__vite__mapDeps([6,7,8,9,10,11,12,13,14,15,16,17,18]))),n.email&&r.push(Ct(()=>import("./email.chunk.js"),__vite__mapDeps([19,7,20,17,11,16,9,10,15,21,13]))),n.socials&&r.push(Ct(()=>import("./socials.chunk.js"),__vite__mapDeps([22,7,9,23,10,24,16,25,15,11,26,8,27]))),n.swaps&&n.swaps.length>0&&r.push(Ct(()=>import("./swaps.chunk.js"),__vite__mapDeps([28,7,15,11,16,9,29,30,31,27,32,8,13,10]))),e.send&&r.push(Ct(()=>import("./send.chunk.js"),__vite__mapDeps([33,7,15,11,16,9,34,10,35,17,32,8,27,31,13,36,37]))),e.receive&&r.push(Ct(()=>import("./receive.chunk.js"),__vite__mapDeps([38,7,9,8,26]))),n.onramp&&n.onramp.length>0&&r.push(Ct(()=>import("./onramp.chunk.js"),__vite__mapDeps([39,7,9,40,11,23,10,8,41,42,17,15,16,25,13]))),n.payWithExchange&&r.push(Ct(()=>import("./pay-with-exchange.chunk.js"),__vite__mapDeps([43,7,9,8,14,40,11,27,15,35,10,17,44,16,13,36,34]))),n.activity&&r.push(Ct(()=>import("./transactions.chunk.js"),__vite__mapDeps([45,7,46,16,9,17,8,27]))),(e.pay||n.payments)&&r.push(Ct(()=>import("./index.chunk35.js"),__vite__mapDeps([47,7,9,15,11,48,14,8,40,49,34,50,16,25]))),n.emailCapture&&r.push(Ct(()=>import("./data-capture.chunk.js"),__vite__mapDeps([51,7,20,17,11,52]))),await Promise.all([...r,Ct(()=>import("./index.chunk37.js"),__vite__mapDeps([53,7,9,8,11,37,16,54,42,17,12,50,14,40,15,44,46,27,36,29,30,34,10,13,49,21,23,24,25,26,18,41])),Ct(()=>import("./w3m-modal.chunk.js"),__vite__mapDeps([55,7,9,48,8,12,11,16,30,54,42,17,50,31,15]))])}}const zZ="1.8.14";function HZ(t){return new jZ({...t,sdkVersion:ee.generateSdkVersion(t.adapters??[],"html",zZ)})}const qZ={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},WZ={block:YO({format(t){var n;return{transactions:(n=t.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const s=nf(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?pr(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:KO({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?pr(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:tP({format(t){return{l1GasPrice:t.l1GasPrice?pr(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?pr(t.l1GasUsed):null,l1Fee:t.l1Fee?pr(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function VZ(t,e){return YZ(t)?GZ(t):cP(t,e)}const KZ={transaction:VZ};function GZ(t){ZZ(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,l=[e,r,a??"0x",o?Er(o):"0x",c?Er(c):"0x",s?Er(s):"0x",i?"0x1":"0x",n??"0x"];return Ns(["0x7e",vi(l)])}function YZ(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function ZZ(t){const{from:e,to:n}=t;if(e&&!Ft(e))throw new _n({address:e});if(n&&!Ft(n))throw new _n({address:n})}const SE={blockTime:2e3,contracts:qZ,formatters:WZ,serializers:KZ},ec=1,WI=Dg({...SE,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...SE.contracts,disputeGameFactory:{[ec]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[ec]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[ec]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[ec]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:ec});({...WI});const JZ=Dg({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Si(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}Si({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});Si({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Si({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Si({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Si({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});Si({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});Si({id:"-239",name:"TON",network:"ton-mainnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://tonscan.org"}},testnet:!1,chainNamespace:"ton",caipNetworkId:"ton:-239"});Si({id:"-3",name:"TON Testnet",network:"ton-testnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://testnet.tonscan.org"}},testnet:!0,chainNamespace:"ton",caipNetworkId:"ton:-3"});function Qn(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Wu="2.21.2",XZ=()=>`@wagmi/core@${Wu}`;var VI=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Fd,KI;class Ar extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return XZ()}constructor(e,n={}){var i;super(),Fd.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof Ar?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Ar&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return VI(this,Fd,"m",KI).call(this,this,e)}}Fd=new WeakSet,KI=function t(e,n){return n!=null&&n(e)?e:e.cause?VI(this,Fd,"m",t).call(this,e.cause,n):e};class El extends Ar{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class QZ extends Ar{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class eJ extends Ar{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class tJ extends Ar{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class nJ extends Ar{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class rJ extends Ar{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function dp(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new QZ;try{t.setState(a=>({...a,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(a=>({...a,connections:new Map(a.connections).set(n.uid,{accounts:i.withCapabilities?o.accounts.map(c=>typeof c=="object"?c.address:c):o.accounts,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:i.withCapabilities?o.accounts.map(a=>typeof a=="object"?a:{address:a,capabilities:{}}):o.accounts,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function kf(t,e={}){const{assertChainId:n=!0}=e;let r;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new rJ({connector:u});const[d,f]=await Promise.all([u.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),u.getChainId()]);r={accounts:d,chainId:f,connector:u}}else r=t.state.connections.get(t.state.current);if(!r)throw new eJ;const s=e.chainId??r.chainId,i=await r.connector.getChainId();if(n&&i!==s)throw new nJ({connectionChainId:s,connectorChainId:i});const o=r.connector;if(o.getClient)return o.getClient({chainId:s});const a=Gr(e.account??r.accounts[0]);if(a&&(a.address=qi(a.address)),e.account&&!r.accounts.some(u=>u.toLowerCase()===a.address.toLowerCase()))throw new tJ({address:a.address,connector:o});const c=t.chains.find(u=>u.id===s),l=await r.connector.getProvider({chainId:s});return xC({account:a,chain:c,name:"Connector Client",transport:u=>xP(l)({...u,retryCount:0})})}async function ng(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}function GI(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(pO[t])}async function sJ(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await kf(t,{account:e.account,assertChainId:!1,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Qn(o,aC,"estimateGas")({...s,account:i})}function ca(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function iJ(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Qn(o,CP,"multicall")({allowFailure:n,contracts:s,...i})}function oJ(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Qn(s,CC,"readContract")(r)}async function aJ(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[f,h]of o.entries()){const g=h.chainId??t.state.chainId;c[g]||(c[g]=[]),(a=c[g])==null||a.push({contract:h,index:f})}const l=()=>Object.entries(c).map(([f,h])=>iJ(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(f,10),contracts:h.map(({contract:g})=>g)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(f=>f.map(({index:h})=>h));return u.reduce((f,h,g)=>(f&&(f[d[g]]=h),f),[])}catch(c){if(c instanceof zv)throw c;const l=()=>o.map(u=>oJ(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function cJ(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await xE(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(f){if(f.name==="ContractFunctionExecutionError"){const h=await xE(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),g=vv(Jn(h.symbol,{dir:"right"}));return{...h,symbol:g}}throw f}const c=t.getClient({chainId:i}),u=await Qn(c,rP,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(f=>f.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Co(u,GI(a)),symbol:d.nativeCurrency.symbol,value:u}}async function xE(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await aJ(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Co(c??"0",GI(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function vl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vl(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!vl(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Tu=[];function cs(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||vl(Tu,e)?Tu:(Tu=e,e)}async function lJ(t,e){const{account:n,chainId:r,...s}=e,i=n??ca(t).address,o=t.getClient({chainId:r});return Qn(o,Og,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let fp=!1;async function hp(t,e={}){var l,u;if(fp)return[];fp=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let f;typeof d=="function"?f=t._internal.connectors.setup(d):f=d,n.push(f)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,f)=>(s[d.id]??10)-(s[f.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const f=await d.getProvider().catch(()=>{});if(!f||c.some(p=>p===f)||!await d.isAuthorized())continue;const g=await d.connect({isReconnecting:!0}).catch(()=>null);g&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(p=>{const m=new Map(o?p.connections:new Map).set(d.uid,{accounts:g.accounts,chainId:g.chainId,connector:d});return{...p,current:o?p.current:d.uid,connections:m}}),a.push({accounts:g.accounts,chainId:g.chainId,connector:d}),c.push(f),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),fp=!1,a}async function uJ(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await kf(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await Qn(o,AC,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function dJ(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await kf(t,{account:n,connector:r}),Qn(i,SP,"signMessage")({...s,...n?{account:n}:{}})}class Js extends Ar{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class fJ extends Ar{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function TE(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new fJ({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new El;return t.setState(a=>({...a,chainId:r})),i}async function hJ(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Qn(i,AP,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Qn(i,NC,"getTransaction")({hash:a.transactionHash}),d=await Qn(i,EC,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),f=d!=null&&d.data?vv(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(f)}return{...a,chainId:i.chain.id}}function YI(t,e){const{onChange:n}=e;return t.subscribe(()=>ca(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return vl(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function pJ(t,e){const{onChange:n}=e;return t.subscribe(()=>cs(t),n,{equalityFn:vl})}function gJ(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function mJ(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Qn(l,IP,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function yJ(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await kf(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await Qn(o,dd,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function eee(t){return t}$f.type="injected";function $f(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...bJ[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:$f.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u,withCapabilities:d}={}){var g,p,m,w,_,b;const f=await this.getProvider();if(!f)throw new Js;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(m=(p=(g=(await f.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:g.caveats)==null?void 0:p[0])==null?void 0:m.value)==null?void 0:w.map(C=>qi(C)),h.length>0&&(h=await this.getAccounts())}catch(A){const C=A;if(C.code===lt.code)throw new lt(C);if(C.code===di.code)throw C}try{!(h!=null&&h.length)&&!u&&(h=(await f.request({method:"eth_requestAccounts"})).map(S=>qi(S))),o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a));let A=await this.getChainId();if(l&&A!==l){const C=await this.switchChain({chainId:l}).catch(S=>{if(S.code===lt.code)throw S;return{id:A}});A=(C==null?void 0:C.id)??A}return e&&await((_=c.storage)==null?void 0:_.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:d?h.map(C=>({address:C,capabilities:{}})):h,chainId:A}}catch(A){const C=A;throw C.code===lt.code?new lt(C):C.code===di.code?new di(C):C}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Js;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await TC(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Js;return(await l.request({method:"eth_accounts"})).map(d=>qi(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Js;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Vu(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const g=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",g),!!await this.getProvider()),p=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(g()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(g()),p))]))return!0}throw new Js}return!!(await fd(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var g,p,m,w;const d=await this.getProvider();if(!d)throw new Js;const f=c.chains.find(_=>_.id===u);if(!f)throw new Vr(new El);const h=new Promise(_=>{const b=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",b),_())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:re(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),h]),f}catch(_){const b=_;if(b.code===4902||((p=(g=b==null?void 0:b.data)==null?void 0:g.originalError)==null?void 0:p.code)===4902)try{const{default:A,...C}=f.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:A&&(S=[A.url,...Object.values(C).map(O=>O.url)]);let x;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?x=l.rpcUrls:x=[((w=f.rpcUrls.default)==null?void 0:w.http[0])??""];const $={blockExplorerUrls:S,chainId:re(u),chainName:(l==null?void 0:l.chainName)??f.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??f.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[$]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new lt(new Error("User rejected switch after adding network."))}),h]),f}catch(A){throw new lt(A)}throw b.code===lt.code?new lt(b):new Vr(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>qi(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const bJ={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Vu(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Vu(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Vu(t,"isPhantom")}}};function Vu(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function wJ(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function EJ(){const t=new Set;let e=[];const n=()=>wJ(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const vJ=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=f=>{const h=o(f);if(!u(d,h)){const g=d;a(d=h,g)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},CJ=vJ;function _J(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const rg=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return rg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return rg(r)(n)}}}},AJ=(t,e)=>(n,r,s)=>{let i={storage:_J(()=>localStorage),partialize:p=>p,version:0,merge:(p,m)=>({...m,...p}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...p)},r,s);const u=()=>{const p=i.partialize({...r()});return l.setItem(i.name,{state:p,version:i.version})},d=s.setState;s.setState=(p,m)=>{d(p,m),u()};const f=t((...p)=>{n(...p),u()},r,s);s.getInitialState=()=>f;let h;const g=()=>{var p,m;if(!l)return;o=!1,a.forEach(_=>{var b;return _((b=r())!=null?b:f)});const w=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(p=r())!=null?p:f))||void 0;return rg(l.getItem.bind(l))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var b;const[A,C]=_;if(h=i.merge(C,(b=r())!=null?b:f),n(h,!0),A)return u()}).then(()=>{w==null||w(h,void 0),h=r(),o=!0,c.forEach(_=>_(h))}).catch(_=>{w==null||w(void 0,_)})};return s.persist={setOptions:p=>{i={...i,...p},p.storage&&(l=p.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},i.skipHydration||g(),h||f},IJ=AJ,NE=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},pp=t=>t?NE(t):NE;class SJ{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new K$})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function xJ(t){return new SJ(t)}function TJ(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function OE(t,e){return t.slice(0,e).join(".")||"."}function PE(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function NJ(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=PE(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=PE(s,c);if(u!==0)return r?e.call(this,a,c,OE(i,u)):`[ref=${OE(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function OJ(t,e,n,r){return JSON.stringify(t,NJ((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function PJ(t){const{deserialize:e=TJ,key:n="wagmi",serialize:r=OJ,storage:s=ZI}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const ZI={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function RJ(){const t=typeof window<"u"&&window.localStorage?window.localStorage:ZI;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const sg=256;let Nu=sg,Ou;function kJ(t=11){if(!Ou||Nu+t>sg*2){Ou="",Nu=0;for(let e=0;e<sg;e++)Ou+=(256+Math.random()*256|0).toString(16).substring(1)}return Ou.substring(Nu,Nu+++t)}function $J(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=PJ({storage:RJ()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?EJ():void 0,a=pp(()=>i.chains),c=pp(()=>{const C=[],S=new Set;for(const x of i.connectors??[]){const $=l(x);if(C.push($),!s&&$.rdns){const O=typeof $.rdns=="string"?[$.rdns]:$.rdns;for(const L of O)S.add(L)}}if(!s&&o){const x=o.getProviders();for(const $ of x)S.has($.info.rdns)||C.push(l(u($)))}return C});function l(C){var $;const S=xJ(kJ()),x={...C({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",b),($=x.setup)==null||$.call(x),x}function u(C){const{info:S}=C,x=C.provider;return $f({target:{...S,id:S.rdns,provider:x}})}const d=new Map;function f(C={}){const S=C.chainId??m.getState().chainId,x=a.getState().find(O=>O.id===S);if(C.chainId&&!x)throw new El;{const O=d.get(m.getState().chainId);if(O&&!x)return O;if(!x)throw new El}{const O=d.get(S);if(O)return O}let $;if(i.client)$=i.client({chain:x});else{const O=x.id,L=a.getState().map(P=>P.id),M={},U=Object.entries(i);for(const[P,D]of U)if(!(P==="chains"||P==="client"||P==="connectors"||P==="transports"))if(typeof D=="object")if(O in D)M[P]=D[O];else{if(L.some(v=>v in D))continue;M[P]=D}else M[P]=D;$=xC({...M,chain:x,batch:M.batch??{multicall:!0},transport:P=>i.transports[O]({...P,connectors:c})})}return d.set(S,$),$}function h(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const p="0.0.0-canary-";Wu.startsWith(p)?g=Number.parseInt(Wu.replace(p,""),10):g=Number.parseInt(Wu.split(".")[0]??"0",10);const m=pp(CJ(n?IJ(h,{migrate(C,S){if(S===g)return C;const x=h(),$=w(C,x.chainId);return{...x,chainId:$}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([S,x])=>{const{id:$,name:O,type:L,uid:M}=x.connector;return[S,{...x,connector:{id:$,name:O,type:L,uid:M}}]})},chainId:C.chainId,current:C.current}},merge(C,S){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=w(C,S.chainId);return{...S,...C,chainId:x}},skipHydration:s,storage:n,version:g}):h));m.setState(h());function w(C,S){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:S}r&&m.subscribe(({connections:C,current:S})=>{var x;return S?(x=C.get(S))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return m.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const S=new Set,x=new Set;for(const O of c.getState())if(S.add(O.id),O.rdns){const L=typeof O.rdns=="string"?[O.rdns]:O.rdns;for(const M of L)x.add(M)}const $=[];for(const O of C){if(x.has(O.info.rdns))continue;const L=l(u(O));S.has(L.id)||$.push(L)}n&&!m.persist.hasHydrated()||c.setState(O=>[...O,...$],!0)});function _(C){m.setState(S=>{const x=S.connections.get(C.uid);return x?{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:S})}function b(C){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(S=>{const x=c.getState().find($=>$.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",_),x.emitter.listenerCount("change")||x.emitter.on("change",_),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):S})}function A(C){m.setState(S=>{const x=S.connections.get(C.uid);if(x){const O=x.connector;O.emitter.listenerCount("change")&&x.connector.emitter.off("change",_),O.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),O.emitter.listenerCount("connect")||x.connector.emitter.on("connect",b)}if(S.connections.delete(C.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const $=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:$.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:f,get state(){return m.getState()},setState(C){let S;typeof C=="function"?S=C(m.getState()):S=C;const x=h();typeof S!="object"&&(S=x),Object.keys(x).some(O=>!(O in S))&&(S=x),m.setState(S,!0)},subscribe(C,S,x){return m.subscribe(C,S,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const C=m.getState(),S=C.connections;let x=C.current;for(const[,$]of S){const O=$.connector;O.isAuthorized&&await O.isAuthorized()||(S.delete(O.uid),x===O.uid&&(x=null))}m.setState($=>({...$,connections:S,current:x}))},store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const S=typeof C=="function"?C(a.getState()):C;if(S.length!==0)return a.setState(S,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:_,connect:b,disconnect:A}}}}function DJ(t){let e=[],n,r;function s(a){var u,d;const c=I.getCaipNetworks(B.CHAIN.EVM);let l=Number(Cc.parseEvmChainId(a));if(!c.some(f=>String(f.id)===String(a))){const f=((u=I.getActiveCaipNetwork(B.CHAIN.EVM))==null?void 0:u.id)||((d=c[0])==null?void 0:d.id);f&&Number.isInteger(Number(f))&&(l=Number(f))}if(!l)throw new Error("ChainId not found in networks");return l}function i(){var a;return n||(n=to.getInstance({projectId:t.options.projectId,chainId:(a=gs())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ct.open(nt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ct.open(nt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ct.open(nt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:nt.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>gs(c),getCaipNetworks:c=>I.getCaipNetworks(c)})),n}async function o(a={}){var p;const c=i();let l=a.chainId;if(a.isReconnecting){const m=Cc.parseEvmChainId(c.getLastUsedChainId()||""),w=(p=t.chains)==null?void 0:p[0].id;if(l=m||w,!l)throw new Error("ChainId not found in provider")}const u=nn("eip155"),{address:d,chainId:f,accounts:h}=await $n.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:B.CHAIN.EVM});e=(h==null?void 0:h.map(m=>m.address))||[d];const g=s(f);return{accounts:e,account:d,chainId:g,chain:{id:g,unsupported:!1}}}return a=>({id:B.CONNECTOR_ID.AUTH,name:B.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:B.CHAIN.EVM,async connect(c={}){if(r){const u=await r;return{accounts:c.withCapabilities?u.accounts.map(d=>({address:d,capabilities:{}})):u.accounts,chainId:u.chainId}}r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,{accounts:c.withCapabilities?l.accounts.map(u=>({address:u,capabilities:{}})):l.accounts,chainId:l.chainId}},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=to.getInstance({projectId:t.options.projectId,chainId:(c=gs())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:nt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ct.open(nt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ct.open(nt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ct.open(nt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>gs(l),getCaipNetworks:l=>I.getCaipNetworks(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=I.state.activeChain===B.CHAIN.EVM;if(B.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(f=>V.getConnectorId(f)===B.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(g=>g.id===c);if(!u)throw new Vr(new Error("chain not found on connector."));const d=await this.getProvider(),f=nn("eip155"),h=await d.connect({chainId:c,preferredAccountType:f});return e=((l=h==null?void 0:h.accounts)==null?void 0:l.map(g=>g.address))||[h.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Vr(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(qi)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}Mm.type="walletConnect";function Mm(t){const e=t.isNewChainsStale??!0;let n,r,s,i,o,a,c;return l=>({id:"walletConnect",name:"WalletConnect",type:Mm.type,provider:t.universalProvider,async setup(){const u=await this.getProvider().catch(()=>null);u&&(i||(i=this.onConnect.bind(this),u.on("connect",i)),a||(a=this.onSessionDelete.bind(this),u.on("session_delete",a)))},async connect({...u}={}){var d,f,h;try{const g=I.getCaipNetworks(),p=await this.getProvider();if(!p)throw new Js;o||(o=this.onDisplayUri,p.on("display_uri",o));const m=await this.isChainsStale();p.session&&m&&await p.disconnect();const w=F.state.universalProviderConfigOverride;if(!p.session||m){const $=ws.createNamespaces(g,w);await p.connect({optionalNamespaces:$,..."pairingTopic"in u?{pairingTopic:u.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const _=await this.getAccounts(),b=await this.getChainId(),A=(h=(f=(d=p.session)==null?void 0:d.namespaces)==null?void 0:f.eip155)==null?void 0:h.chains,C=A==null?void 0:A.some($=>Number($.split(":")[1])===b);let S=1;C?S=b:A!=null&&A[0]&&(S=Number(A[0].split(":")[1])),o&&(p.removeListener("display_uri",o),o=void 0),i&&(p.removeListener("connect",i),i=void 0),r||(r=this.onAccountsChanged.bind(this),p.on("accountsChanged",r)),s||(s=this.onChainChanged.bind(this),p.on("chainChanged",s)),c||(c=this.onDisconnect.bind(this),p.on("disconnect",c)),a||(a=this.onSessionDelete.bind(this),p.on("session_delete",a));const x=w==null?void 0:w.defaultChain;return p.setDefaultChain(x??`eip155:${S}`),{accounts:_,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new lt(g):g}},async disconnect(){const u=await this.getProvider();try{await(u==null?void 0:u.disconnect())}catch(d){if(!/No matching key/i.test(d.message))throw d}finally{s&&(u==null||u.removeListener("chainChanged",s),s=void 0),c&&(u==null||u.removeListener("disconnect",c),c=void 0),i||(i=this.onConnect.bind(this),u==null||u.on("connect",i)),r&&(u==null||u.removeListener("accountsChanged",r),r=void 0),a&&(u==null||u.removeListener("session_delete",a),a=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,m,w;const u=await this.getProvider();if(!((p=u==null?void 0:u.session)!=null&&p.namespaces))return[];const d=(w=(m=u==null?void 0:u.session)==null?void 0:m.namespaces[B.CHAIN.EVM])==null?void 0:w.accounts,f=(d==null?void 0:d.map(_=>_.split(":")[2]))??[],h=new Set;return f.filter(_=>{const b=_==null?void 0:_.toLowerCase();return h.has(b)?!1:(h.add(b),!0)})},async getProvider({chainId:u}={}){var h,g;n||(n=t.universalProvider,n==null||n.events.setMaxListeners(Number.POSITIVE_INFINITY));const d=H.getActiveNamespace(),f=(h=I.getActiveCaipNetwork())==null?void 0:h.id;if(u&&f!==u&&d){const p=H.getStoredActiveCaipNetworkId(),m=d?I.getCaipNetworks(d):[],w=m==null?void 0:m.find(_=>_.id===p);w&&w.chainNamespace===B.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return n},async getChainId(){var g,p,m,w;const u=(g=I.getActiveCaipNetwork(B.CHAIN.EVM))==null?void 0:g.id;if(u)return u;const f=(w=(m=(p=(await this.getProvider()).session)==null?void 0:p.namespaces[B.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:w[0],h=I.getCaipNetworks().find(_=>_.id===f);return h==null?void 0:h.id},async isAuthorized(){try{const[u,d]=await Promise.all([this.getAccounts(),this.getProvider()]);return u.length?await this.isChainsStale()&&d.session?(await d.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:d}){var g,p,m,w;const f=await this.getProvider();if(!f)throw new Js;const h=I.getCaipNetworks().find(_=>_.id===d);if(!h)throw new Vr(new El);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:re(d)}]}),h!=null&&h.caipNetworkId&&f.setDefaultChain(h==null?void 0:h.caipNetworkId),l.emitter.emit("change",{chainId:Number(d)});const _=await this.getRequestedChainsIds();return this.setRequestedChainsIds([..._,d]),{...h,id:h.id}}catch(_){const b=_;if(/(?:user rejected)/iu.test(b.message))throw new lt(b);try{let A;u!=null&&u.blockExplorerUrls?A=u.blockExplorerUrls:A=(g=h.blockExplorers)!=null&&g.default.url?[(p=h.blockExplorers)==null?void 0:p.default.url]:[];const C=((w=(m=h.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:w.http)||[],S={blockExplorerUrls:A,chainId:re(d),chainName:h.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:h.nativeCurrency,rpcUrls:C};await f.request({method:"wallet_addEthereumChain",params:[S]});const x=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...x,d]),{...h,id:h.id}}catch(A){throw new lt(A)}}},onAccountsChanged(u){u.length===0?this.onDisconnect():l.emitter.emit("change",{accounts:u.map(d=>qi(d))})},onChainChanged(u){const d=Number(u);l.emitter.emit("change",{chainId:d})},onConnect(u){this.setRequestedChainsIds(I.getCaipNetworks().map(d=>Number(d.id)))},async onDisconnect(u){this.setRequestedChainsIds([]),l.emitter.emit("disconnect");const d=await this.getProvider();r&&(d.removeListener("accountsChanged",r),r=void 0),s&&(d.removeListener("chainChanged",s),s=void 0),c&&(d.removeListener("disconnect",c),c=void 0),a&&(d.removeListener("session_delete",a),a=void 0),i||(i=this.onConnect.bind(this),d.on("connect",i))},onDisplayUri(u){l.emitter.emit("message",{type:"display_uri",data:u})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,h,g;if(!((f=n==null?void 0:n.session)!=null&&f.namespaces))return[];const u=(g=(h=n==null?void 0:n.session)==null?void 0:h.namespaces[B.CHAIN.EVM])==null?void 0:g.accounts;return(u==null?void 0:u.map(p=>Number.parseInt(p.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var d;const u=await((d=l.storage)==null?void 0:d.getItem(this.requestedChainsStorageKey))??[];return[...new Set(u)]},async isChainsStale(){if(!e)return!1;const u=l.chains.map(h=>h.id),d=this.getNamespaceChainsIds();if(d.length&&!d.some(h=>u.includes(h)))return!1;const f=await this.getRequestedChainsIds();return!u.every(h=>f.includes(Number(h)))},async setRequestedChainsIds(u){var d;await((d=l.storage)==null?void 0:d.setItem(this.requestedChainsStorageKey,u))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const tc=Xe({pendingTransactions:0}),RE={state:tc,subscribeKey(t,e){return kt(tc,t,e)},increase(t){tc[t]+=1},decrease(t){tc[t]-=1},reset(t){tc[t]=0}};async function UJ(t){if(ee.isSafeApp()){const{safe:e}=await Ct(async()=>{const{safe:n}=await import("./index.chunk22.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function BJ(t){try{const{baseAccount:e}=await Ct(async()=>{const{baseAccount:n}=await import("./index.chunk22.js");return{baseAccount:n}},[]);if(e&&!t.some(n=>n.id==="baseAccount"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const LJ={enable:!1,pollingInterval:3e4};class MJ extends rA{constructor(e){const n=Ur.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=B.CHAIN.EVM,this.adapterType=B.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...LJ,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===B.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ee.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=ca(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ee.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=ca(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===B.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ur.getCaipNetworkId(s);i?n[s.id]=Ur.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ur.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=$J({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=mJ(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),RE.increase("pendingTransactions")}});const e=RE.subscribeKey("pendingTransactions",n=>{var r;n>=B.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){pJ(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===B.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:this.toChecksummedAddress(i)})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:H.getConnectedSocialProvider(),username:H.getConnectedSocialUsername()}:void 0}}))}}),YI(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}})}async addThirdPartyConnectors(){const e=[],{enableCoinbase:n}=F.state||{};if(n!==!1){const s=await BJ(this.wagmiConfig.connectors);s&&e.push(s)}const r=await UJ(this.wagmiConfig.connectors);r&&e.push(r),await Promise.all(e.map(s=>{const i=this.configureInternalConnector(s);return this.addWagmiConnector(i)}))}addWagmiConnectors(){const e=[];F.state.enableInjected!==!1&&e.push($f({shimDisconnect:!0}));const{features:n,remoteFeatures:r,projectId:s,enableAuthLogger:i}=F.state,o=(r==null?void 0:r.email)??(n==null?void 0:n.email)??!0,a=(r==null?void 0:r.socials)??(n==null?void 0:n.socials),c=Array.isArray(a)&&(a==null?void 0:a.length)>0;(o||c)&&e.push(DJ({chains:this.wagmiChains,options:{projectId:s,enableAuthLogger:i}})),e.forEach(l=>{this.configureInternalConnector(l)})}configureInternalConnector(e){const n=this.wagmiConfig._internal.connectors.setup(e);return this.wagmiConfig._internal.connectors.setState(r=>[...r,n]),n}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:this.toChecksummedAddress(e),chainId:n,connector:{id:r.id,name:tn.ConnectorNamesMap[r.id]??r.name,imageId:tn.ConnectorImageIds[r.id],type:tn.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===B.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await dJ(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var a;const{chainId:n,address:r}=ca(this.wagmiConfig),s=(a=this.wagmiChains)==null?void 0:a.find(c=>c.id===n),i={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chain:s,type:"legacy",parameters:["nonce"]};await lJ(this.wagmiConfig,i);const o=await uJ(this.wagmiConfig,i);return await hJ(this.wagmiConfig,{hash:o,timeout:25e3}),{hash:o}}async writeContract(e){var a;const{caipNetwork:n,...r}=e,s=Number(Cc.caipNetworkIdToNumber(n.caipNetworkId)),i=(a=this.wagmiChains)==null?void 0:a.find(c=>c.id===s);return{hash:await yJ(this.wagmiConfig,{chain:i,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await sJ(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return vP(e.value,e.decimals)}formatUnits(e){return Co(e.value,e.decimals)}async addWagmiConnector(e){if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");const{enableEIP6963:n}=F.state||{};if(e.type===B.CONNECTOR_ID.INJECTED&&n===!1||e.id===B.CONNECTOR_ID.AUTH||e.id===B.CONNECTOR_ID.WALLET_CONNECT)return;let r;e.id!==B.CONNECTOR_ID.BASE_ACCOUNT&&(r=await e.getProvider().catch(()=>{}));const s=kn.state.connectorImages;this.addConnector({id:e.id,explorerId:tn.ConnectorExplorerIds[e.id],imageUrl:(s==null?void 0:s[e.id])??e.icon,name:tn.ConnectorNamesMap[e.id]??e.name,imageId:tn.ConnectorImageIds[e.id],type:tn.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===B.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(){gJ(this.wagmiConfig,{onChange:e=>{e.forEach(n=>this.addWagmiConnector(n))}}),this.addWagmiConnectors(),await Promise.all(this.wagmiConfig.connectors.map(e=>this.addWagmiConnector(e))),await this.addThirdPartyConnectors()}async syncConnections(){const e=this.connectors.filter(n=>{const{hasDisconnected:r,hasConnected:s}=yr.getConnectorStorageInfo(n.id,this.namespace);return!r&&s}).map(n=>this.getWagmiConnector(n.id)).filter(Boolean);await hp(this.wagmiConfig,{connectors:e})}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=cs(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ee.isSafeApp()&&n===B.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const f=await dp(this.wagmiConfig,{connector:d,chainId:Number(r)}),h=await d.getProvider();return{chainId:Number(r),address:this.toChecksummedAddress(f.accounts[0]),provider:h,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:this.toChecksummedAddress(i==null?void 0:i.accounts[0]),provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){try{const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await dp(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await TE(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}catch(n){throw n instanceof lt?new Wo(n):fr.isUserRejectedRequestError(n)?new Wo(n):n}}async connect(e){var n,r,s,i,o;try{const{id:a,address:c,provider:l,type:u,info:d,chainId:f,socialUri:h}=e,g=this.getWagmiConnector(a);if(!g)throw new Error("connectionControllerClient:connectExternal - connector is undefined");l&&d&&g.id===B.CONNECTOR_ID.EIP6963&&((n=g.setEip6963Wallet)==null||n.call(g,{provider:l,info:d}));const p=(s=(r=this.wagmiConfig.state)==null?void 0:r.connections)==null?void 0:s.get(g.uid);if(p){await((i=this.wagmiConfig.storage)==null?void 0:i.setItem("recentConnectorId",g.id));const _=[...p.accounts].sort((b,A)=>yr.isLowerCaseMatch(b,c)?-1:yr.isLowerCaseMatch(A,c)?1:0);return(o=this.wagmiConfig)==null||o.setState(b=>({...b,connections:new Map(b.connections).set(g.uid,{accounts:_,chainId:p.chainId,connector:p.connector}),current:g.uid,status:"connected"})),{address:this.toChecksummedAddress(_[0]),chainId:p.chainId,provider:l,type:u,id:a}}const m=await dp(this.wagmiConfig,{connector:g,chainId:f?Number(f):void 0,socialUri:h}),w=l??await g.getProvider();return{address:this.toChecksummedAddress(m.accounts[0]),chainId:m.chainId,provider:w,type:u,id:a}}catch(a){throw a instanceof lt?new Wo(a):fr.isUserRejectedRequestError(a)?new Wo(a):a}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:this.toChecksummedAddress(n)})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await hp(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=H.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await cJ(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});H.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=cs(this.wagmiConfig).find(i=>yr.isLowerCaseMatch(i.connector.id,e.id));return await ng(this.wagmiConfig,{connector:n}),F.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:this.toChecksummedAddress(i)})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=cs(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await ng(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:this.toChecksummedAddress(s)})),connectorId:r.connector.id}))}}async switchNetwork(e){var h,g,p,m,w;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(_=>_.id.toString()===n.id.toString());if(!r)throw new Error("connectionControllerClient:switchNetwork - wagmiChain is undefined");const{name:s,nativeCurrency:i,rpcUrls:o,blockExplorers:a,id:c}=r,l=((p=(g=(h=n.rpcUrls)==null?void 0:h.chainDefault)==null?void 0:g.http)==null?void 0:p[0])??o.default.http[0]??"",u=(a==null?void 0:a.default.url)??((w=(m=n.blockExplorers)==null?void 0:m.default)==null?void 0:w.url)??"",d=i??n.nativeCurrency,f=s??n.name;await TE(this.wagmiConfig,{chainId:c,addEthereumChainParameter:{chainName:f,nativeCurrency:d,rpcUrls:[l],blockExplorerUrls:[u]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=cs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=cs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=cs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=cs(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:B.CONNECTOR_ID.AUTH,type:"AUTH",name:B.CONNECTOR_NAMES.AUTH,provider:e,imageId:tn.ConnectorImageIds[B.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){e.on("connect",()=>{const r=cs(this.wagmiConfig),s=this.getWagmiConnector("walletConnect");if(s&&!r.find(i=>i.connector.id===s.id)){if(I.state.activeChain==="eip155")return;hp(this.wagmiConfig,{connectors:[s]})}});const n=Mm({universalProvider:e});return this.configureInternalConnector(n),this.addConnector(new sA({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}toChecksummedAddress(e){return Sl(e.toLowerCase())}}const JI="fd1a1f2a6addc16ab345942ee57a3531",XI=[JZ,WI],QI=new MJ({projectId:JI,networks:XI}),FJ={name:"Launchpad",description:"Crypto Token Launchpad Platform",url:"https://yourdomain.com",icons:["https://yourdomain.com/logo.png"]},eS=HZ({adapters:[QI],networks:XI,metadata:FJ,projectId:JI,features:{analytics:!0,email:!1,socials:[]}}),Fm=QI.wagmiConfig;function jJ(){eS.open()}function zJ(){eS.open({view:"Networks"})}function tS(){return ca(Fm)}function HJ(){ng(Fm)}function nS(t){return YI(Fm,{onChange:t})}window.addEventListener("DOMContentLoaded",()=>{console.log("Wallet integration initialized"),nS(e=>{kE(e)});const t=tS();kE(t)});function kE(t){const e=document.getElementById("connect-wallet-btn"),n=document.getElementById("wallet-address"),r=document.getElementById("disconnect-wallet-btn");t.isConnected&&t.address?(e&&(e.style.display="none"),n&&(n.textContent=`${t.address.slice(0,6)}...${t.address.slice(-4)}`,n.style.display="inline-block"),r&&(r.style.display="inline-block")):(e&&(e.style.display="inline-block"),n&&(n.style.display="none"),r&&(r.style.display="none"))}window.WalletConnect={openConnectModal:jJ,openNetworkModal:zJ,getWalletAccount:tS,disconnectWallet:HJ,onAccountChange:nS};export{iX as $,HT as A,fy as B,IT as C,pv as D,Kd as E,qT as F,WT as G,VT as H,XJ as I,eX as J,tX as K,gv as L,nX as M,KT as N,mv as O,id as P,GT as Q,rX as R,wT as S,sX as T,_T as U,xp as V,yv as W,JT as X,ZT as Y,XT as Z,QT as _,QJ as a,Xc as a$,_n as a0,q as a1,Kv as a2,zp as a3,D3 as a4,U3 as a5,gC as a6,rf as a7,IO as a8,zv as a9,cc as aA,vg as aB,_y as aC,rl as aD,nl as aE,tl as aF,Zc as aG,Qc as aH,uo as aI,qc as aJ,Hc as aK,jc as aL,Vc as aM,ga as aN,zc as aO,Wi as aP,Fc as aQ,Yc as aR,Mn as aS,Wc as aT,di as aU,In as aV,Vr as aW,pa as aX,Kc as aY,el as aZ,OO as a_,SO as aa,xO as ab,TO as ac,Eg as ad,wv as ae,bv as af,Ev as ag,tN as ah,nN as ai,rN as aj,FO as ak,WO as al,Sg as am,VO as an,Vi as ao,fo as ap,Op as aq,$p as ar,Dp as as,Up as at,kp as au,Pp as av,Rp as aw,sl as ax,Bp as ay,Qd as az,CT as b,Cv as b$,Jc as b0,Gc as b1,lt as b2,gO as b3,mO as b4,bO as b5,wO as b6,EO as b7,vO as b8,CO as b9,Dg as bA,yC as bB,ha as bC,BN as bD,Ns as bE,wi as bF,Ia as bG,eN as bH,ui as bI,yt as bJ,Lc as bK,Dv as bL,LN as bM,Jn as bN,tO as bO,nO as bP,bs as bQ,rO as bR,pr as bS,uX as bT,Ei as bU,vv as bV,aN as bW,Wr as bX,cN as bY,_v as bZ,Yd as b_,Fv as ba,jv as bb,_O as bc,OP as bd,EP as be,Xd as bf,dO as bg,f3 as bh,Pg as bi,Uv as bj,mC as bk,Jd as bl,mg as bm,p3 as bn,YN as bo,Sl as bp,qi as bq,Ft as br,d3 as bs,xg as bt,Tg as bu,Xv as bv,o3 as bw,rC as bx,u3 as by,J3 as bz,vT as c,si as c$,cn as c0,re as c1,Gd as c2,Er as c3,vi as c4,cd as c5,YO as c6,Yv as c7,cC as c8,KO as c9,vn as cA,Co as cB,vP as cC,Xe as cD,fQ as cE,I as cF,Ce as cG,ee as cH,Br as cI,dQ as cJ,hQ as cK,uQ as cL,ke as cM,F as cN,OS as cO,kC as cP,be as cQ,pQ as cR,kt as cS,Mt as cT,Pt as cU,ZQ as cV,XQ as cW,QQ as cX,qu as cY,GQ as cZ,DZ as c_,nf as ca,Gv as cb,tP as cc,IC as cd,Ig as ce,zO as cf,Il as cg,i3 as ch,Rv as ci,dg as cj,DN as ck,gg as cl,V3 as cm,fd as cn,TC as co,UO as cp,DO as cq,Xn as cr,tf as cs,$g as ct,oP as cu,aP as cv,sC as cw,sf as cx,cP as cy,bg as cz,ET as d,$n as d$,nr as d0,me as d1,X as d2,B as d3,nn as d4,dt as d5,t8 as d6,ct as d7,Bg as d8,V as d9,Bc as dA,ad as dB,fa as dC,od as dD,pX as dE,fX as dF,r3 as dG,UE as dH,rr as dI,_a as dJ,je as dK,de as dL,Qx as dM,nt as dN,At as dO,Ye as dP,$S as dQ,_c as dR,vt as dS,Se as dT,fc as dU,Gp as dV,kn as dW,ho as dX,fr as dY,$r as dZ,ku as d_,eee as da,El as db,Ct as dc,Js as dd,$f as de,wg as df,EC as dg,Oe as dh,aZ as di,PC as dj,gn as dk,bi as dl,BX as dm,JN as dn,vc as dp,H as dq,YQ as dr,Un as ds,MN as dt,bX as du,ue as dv,fe as dw,Iv as dx,dX as dy,ug as dz,bT as e,Q3 as e$,JQ as e0,$C as e1,MI as e2,Q0 as e3,va as e4,TT as e5,FT as e6,ov as e7,hr as e8,lo as e9,Wv as eA,Zd as eB,PN as eC,ma as eD,ds as eE,AX as eF,dC as eG,SX as eH,x3 as eI,xX as eJ,TX as eK,Ra as eL,v3 as eM,IX as eN,NC as eO,P3 as eP,Vv as eQ,Cg as eR,OX as eS,tT as eT,pC as eU,zX as eV,il as eW,wX as eX,IP as eY,_P as eZ,AP as e_,JJ as ea,GN as eb,et as ec,aC as ed,Gr as ee,Rg as ef,I3 as eg,Sa as eh,Fp as ei,NX as ej,S3 as ek,ld as el,_C as em,Y3 as en,G3 as eo,Z3 as ep,eP as eq,bC as er,jX as es,LX as et,CC as eu,FX as ev,MX as ew,_g as ex,B3 as ey,yX as ez,ST as f,Og as f0,CP as f1,Xf as f2,ZO as f3,EX as f4,Zv as f5,vX as f6,iC as f7,rP as f8,nP as f9,kg as fa,K$ as fb,xl as fc,KC as fd,aR as fe,cR as ff,eb as fg,op as fh,hd as fi,yr as fj,ac as fk,Ur as fl,r8 as fm,Cc as fn,gs as fo,Aa as g,AT as h,mT as i,xC as j,Ug as k,xP as l,Dy as m,Jl as n,Kl as o,dv as p,HX as q,jp as r,TP as s,k3 as t,$3 as u,qX as v,ef as w,fO as x,hO as y,pO as z};
