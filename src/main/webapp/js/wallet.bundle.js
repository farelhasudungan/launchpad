const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ccip.chunk.js","localBatchGatewayRequest.chunk.js","index.chunk.js","parseSignature.chunk.js","secp256k1.chunk.js","hashTypedData.chunk.js","embedded-wallet.chunk.js","index.chunk3.js","index.chunk4.js","if-defined.chunk.js","ref.chunk.js","index.chunk18.js","HelpersUtil.chunk.js","index.chunk11.js","index.chunk15.js","index.chunk21.js","index.chunk8.js","index.chunk9.js","NavigationUtil.chunk.js","email.chunk.js","index.chunk32.js","index.chunk10.js","socials.chunk.js","index.chunk30.js","index.chunk29.js","index.chunk14.js","index.chunk28.js","index.chunk5.js","swaps.chunk.js","index.chunk26.js","index.chunk27.js","SwapController.chunk.js","index.chunk2.js","send.chunk.js","index.chunk16.js","index.chunk6.js","index.chunk13.js","index.chunk12.js","receive.chunk.js","onramp.chunk.js","index.chunk17.js","index.chunk36.js","index.chunk33.js","pay-with-exchange.chunk.js","ExchangeController.chunk.js","transactions.chunk.js","index.chunk7.js","index.chunk35.js","index.chunk19.js","index.chunk31.js","index.chunk20.js","data-capture.chunk.js","features.chunk.js","index.chunk37.js","index.chunk34.js","w3m-modal.chunk.js"])))=>i.map(i=>d[i]);
const tI=Symbol(),um=Object.getPrototypeOf,Hf=new WeakMap,nI=t=>t&&(Hf.has(t)?Hf.get(t):um(t)===Object.prototype||um(t)===Array.prototype),rI=t=>nI(t)&&t[tI]||null,dm=(t,e=!0)=>{Hf.set(t,e)},xu={},S0=t=>typeof t=="object"&&t!==null,sI=t=>S0(t)&&!ol.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),M1=(t,e)=>{const n=zf.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return dm(r,!0),zf.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(ol.has(i))dm(i,!1);else if(ci.has(i)){const[c,l]=ci.get(i);a.value=M1(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},iI=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(hm(l,o)||ac.has(o)&&hm(l,ac.get(o))))return!0;n(i),S0(o)&&(o=rI(o)||o);const u=!ci.has(o)&&aI(o)?Xe(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),ci=new WeakMap,ol=new WeakSet,zf=new WeakMap,hu=[1],ac=new WeakMap;let hm=Object.is,oI=(t,e)=>new Proxy(t,e),aI=sI,cI=M1,lI=iI;function Xe(t={}){if(!S0(t))throw new Error("object required");const e=ac.get(t);if(e)return e;let n=hu[0];const r=new Set,s=(m,w=++hu[0])=>{n!==w&&(i=n=w,r.forEach(_=>_(m,w)))};let i=n;const o=(m=hu[0])=>(i!==m&&(i=m,c.forEach(([w])=>{const _=w[1](m);_>n&&(n=_)})),n),a=m=>(w,_)=>{const b=[...w];b[1]=[m,...b[1]],s(b,_)},c=new Map,l=(m,w)=>{const _=!ol.has(w)&&ci.get(w);if(_){if((xu?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const b=_[2](a(m));c.set(m,[_,b])}else c.set(m,[_])}},u=m=>{var w;const _=c.get(m);_&&(c.delete(m),(w=_[1])==null||w.call(_))},d=m=>(r.add(m),r.size===1&&c.forEach(([_,b],A)=>{if((xu?"production":void 0)!=="production"&&b)throw new Error("remove already exists");const C=_[2](a(A));c.set(A,[_,C])}),()=>{r.delete(m),r.size===0&&c.forEach(([_,b],A)=>{b&&(b(),c.set(A,[_]))})});let h=!0;const f=lI(()=>h,l,u,s),p=oI(t,f);ac.set(t,p);const g=[t,o,d];return ci.set(p,g),Reflect.ownKeys(t).forEach(m=>{const w=Object.getOwnPropertyDescriptor(t,m);"value"in w&&w.writable&&(p[m]=t[m])}),h=!1,p}function Mt(t,e,n){const r=ci.get(t);(xu?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function cc(t){const e=ci.get(t);(xu?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return cI(n,r())}function lc(t){return ol.add(t),t}function uI(){return{proxyStateMap:ci,refSet:ol,snapCache:zf,versionHolder:hu,proxyCache:ac}}function kt(t,e,n,r){let s=t[e];return Mt(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:dI,snapCache:hI}=uI(),Nl=t=>dI.has(t);function fI(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=hI.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return Nl(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!Nl(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!Nl(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!Nl(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Xe(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var fm={};const B={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof fm<"u"?fm.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:typeof process<"u"&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},uc={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=B.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},F1=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var gI=20,mI=1,Zi=1e6,pm=1e6,yI=-7,bI=21,wI=!1,al="[big.js] ",uo=al+"Invalid ",wd=uo+"decimal places",EI=uo+"rounding mode",j1=al+"Division by zero",Ve={},Mr=void 0,vI=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function H1(){function t(e){var n=this;if(!(n instanceof t))return e===Mr?H1():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(uo+"value");e=e===0&&1/e<0?"-0":String(e)}CI(n,e)}n.constructor=t}return t.prototype=Ve,t.DP=gI,t.RM=mI,t.NE=yI,t.PE=bI,t.strict=wI,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function CI(t,e){var n,r,s;if(!vI.test(e))throw Error(uo+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function ho(t,e,n,r){var s=t.c;if(n===Mr&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(EI);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Mr))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Mr||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function fo(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Ve.abs=function(){var t=new this.constructor(this);return t.s=1,t};Ve.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Ve.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Zi)throw Error(wd);if(!s[0])throw Error(j1);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),m=g.length,w=t,_=w.c=[],b=0,A=o+(w.e=e.e-t.e)+1;for(w.s=i,i=A<0?0:A,h.unshift(0);m++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(m=g.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=m==a?s:h;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}_[b++]=u?l:++l,g[0]&&u?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Mr)&&i--);return!_[0]&&b!=1&&(_.shift(),w.e--,A--),b>A&&ho(w,A,n.RM,g[0]!==Mr),w};Ve.eq=function(t){return this.cmp(t)===0};Ve.gt=function(t){return this.cmp(t)>0};Ve.gte=function(t){return this.cmp(t)>-1};Ve.lt=function(t){return this.cmp(t)<0};Ve.lte=function(t){return this.cmp(t)<1};Ve.minus=Ve.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Ve.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(j1);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Ve.plus=Ve.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Ve.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-pm||t>pm)throw Error(uo+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Ve.prec=function(t,e){if(t!==~~t||t<1||t>Zi)throw Error(uo+"precision");return ho(new this.constructor(this),t,e)};Ve.round=function(t,e){if(t===Mr)t=0;else if(t!==~~t||t<-Zi||t>Zi)throw Error(wd);return ho(new this.constructor(this),t+this.e+1,e)};Ve.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(al+"No square root");i=Math.sqrt(+fo(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return ho(t,(s.DP-=4)+t.e+1,s.RM)};Ve.times=Ve.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Ve.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Mr){if(t!==~~t||t<0||t>Zi)throw Error(wd);for(n=ho(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return fo(n,!0,!!r)};Ve.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Mr){if(t!==~~t||t<0||t>Zi)throw Error(wd);for(n=ho(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return fo(n,!1,!!r)};Ve[Symbol.for("nodejs.util.inspect.custom")]=Ve.toJSON=Ve.toString=function(){var t=this,e=t.constructor;return fo(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Ve.toNumber=function(){var t=+fo(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(al+"Imprecise conversion");return t};Ve.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Mr){if(t!==~~t||t<1||t>Zi)throw Error(uo+"precision");for(n=ho(new r(n),t,e);n.c.length<t;)n.c.push(0)}return fo(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Ve.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(al+"valueOf disallowed");return fo(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ts=H1();const _I={bigNumber(t){return t?new Ts(t):new Ts(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ts(0);const n=new Ts(t),r=new Ts(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new Ts(0).toFixed(e):new Ts(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new Ts(e).toNumber()}},AI=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],II=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],SI=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],NI={getERC20Abi:t=>B.USDT_CONTRACT_ADDRESSES.includes(t)?SI:AI,getSwapAbi:()=>II},At={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},dr={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.message=="string",r=typeof e.code=="number";return n&&r}return!1}catch{return!1}},isUserRejectedMessage(t){return t.toLowerCase().includes("user rejected")||t.toLowerCase().includes("user cancelled")||t.toLowerCase().includes("user canceled")},isUserRejectedRequestError(t){if(dr.isRpcProviderError(t)){const e=t.code===dr.RPC_ERROR_CODE.USER_REJECTED_REQUEST,n=t.code===dr.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e||n||dr.isUserRejectedMessage(t.message)}return t instanceof Error?dr.isUserRejectedMessage(t.message):!1}};let xI=class extends Error{constructor(e,n){super(n.message,{cause:e}),this.name=dr.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=n.code}},$o=class extends xI{constructor(e){super(e,{code:dr.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=dr.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}};const he={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function uh(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ue={setItem(t,e){Wa()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Wa())return localStorage.getItem(t)||void 0},removeItem(t){Wa()&&localStorage.removeItem(t)},clear(){Wa()&&localStorage.clear()}};function Wa(){return typeof window<"u"&&typeof localStorage<"u"}function dc(t,e){const n=(t==null?void 0:t["--apkt-accent"])??(t==null?void 0:t["--w3m-accent"]);return e==="light"?{"--w3m-accent":n||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":n||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}var gm={};const dh=(typeof process<"u"&&typeof gm<"u"?gm.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",z1=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],TI="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ke={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:dh,SECURE_SITE_DASHBOARD:`${dh}/dashboard`,SECURE_SITE_FAVICON:`${dh}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USDâ‚®0"]},BALANCE_SUPPORTED_CHAINS:[B.CHAIN.EVM,B.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[B.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[B.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[B.CHAIN.EVM,B.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[B.CHAIN.EVM,B.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[B.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[B.CHAIN.EVM,B.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},z={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=z.getActiveNamespace(),e=z.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ue.setItem(he.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ue.getItem(he.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ue.removeItem(he.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ue.setItem(he.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ue.setItem(he.ACTIVE_CAIP_NETWORK_ID,t),z.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ue.getItem(he.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ue.removeItem(he.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=uh(t);ue.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=z.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ue.setItem(he.RECENT_WALLETS,JSON.stringify(e)),ue.setItem(he.RECENT_WALLET,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ue.getItem(he.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const t=ue.getItem(he.RECENT_WALLET);return t?JSON.parse(t):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{ue.removeItem(he.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(t,e){try{const n=uh(t);ue.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ue.getItem(he.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=uh(t);return ue.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{ue.setItem(he.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ue.getItem(he.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ue.removeItem(he.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ue.getItem(he.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ue.getItem(he.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ue.setItem(he.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ue.getItem(he.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ue.getItem(he.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ue.setItem(he.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=z.getConnectedNamespaces();e.includes(t)||(e.push(t),z.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=z.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),z.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ue.getItem(he.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ue.setItem(he.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ue.removeItem(he.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ue.getItem(he.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=z.getBalanceCache();ue.setItem(he.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=z.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;z.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=z.getBalanceCache();e[t.caipAddress]=t,ue.setItem(he.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ue.getItem(he.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=z.getBalanceCache();ue.setItem(he.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=z.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),z.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=z.getNativeBalanceCache();e[t.caipAddress]=t,ue.setItem(he.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ue.getItem(he.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=z.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;z.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=z.getEnsCache();e[t.address]=t,ue.setItem(he.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=z.getEnsCache();ue.setItem(he.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ue.getItem(he.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=z.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;z.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=z.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ue.setItem(he.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=z.getIdentityCache();ue.setItem(he.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},getTonWalletsCache(){try{const t=ue.getItem(he.TON_WALLETS_CACHE),e=t?JSON.parse(t):void 0;if(e&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.tonWallets))return e;z.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(t){try{const e=z.getTonWalletsCache()||{timestamp:0,wallets:[]};e.timestamp=new Date().getTime(),e.wallets=t,ue.setItem(he.TON_WALLETS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ton wallets cache",t)}},removeTonWalletsCache(){try{ue.removeItem(he.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{ue.removeItem(he.PORTFOLIO_CACHE),ue.removeItem(he.NATIVE_BALANCE_CACHE),ue.removeItem(he.ENS_CACHE),ue.removeItem(he.IDENTITY_CACHE),ue.removeItem(he.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ue.setItem(he.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ue.getItem(he.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=z.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===B.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};ue.setItem(he.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ue.getItem(he.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=z.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),ue.setItem(he.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=ue.getItem(he.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=z.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),ue.setItem(he.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=z.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),ue.setItem(he.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(z.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=ue.getItem(he.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){var n;try{const s=(n=z.getTransactionsCache()[t])==null?void 0:n[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;z.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=z.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},ue.setItem(he.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=z.getTransactionsCache(),r=(n==null?void 0:n[t])||{},{[e]:s,...i}=r;ue.setItem(he.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=ue.getItem(he.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=z.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;z.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=z.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},ue.setItem(he.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=z.getTokenPriceCache();ue.setItem(he.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t==null?void 0:t.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=ue.getItem(he.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=z.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,ue.setItem(he.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},ee={getWindow(){if(!(typeof window>"u"))return window},isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ee.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ke.TEN_SEC_MS:!0},isAllowedRetry(t,e=ke.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ee.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ke.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ee.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ee.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?z.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ee.wait(2e3)])},parseBalance(t,e){let n="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const l=(Math.floor(c*1e3)/1e3).toFixed(3);l&&(n=l)}}const[r,s]=n.split("."),i=r||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return B.W3M_API_URL},getBlockchainApiUrl(){return B.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return B.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ke.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in B.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};var Jo={};const OI="https://secure.walletconnect.org/sdk",RI=(typeof process<"u"&&typeof Jo<"u"?Jo.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||OI,PI=(typeof process<"u"&&typeof Jo<"u"?Jo.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",kI=(typeof process<"u"&&typeof Jo<"u"?Jo.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",le={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},dt={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},mm={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},vt={set(t,e){Bn.isClient&&localStorage.setItem(`${le.STORAGE_KEY}${t}`,e)},get(t){return Bn.isClient?localStorage.getItem(`${le.STORAGE_KEY}${t}`):null},delete(t,e){Bn.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${le.STORAGE_KEY}${t}`))}},xl=30*1e3,Bn={checkIfAllowedToTriggerEmail(){const t=vt.get(le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<xl){const n=Math.ceil((xl-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=vt.get(le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<xl)return Math.ceil((xl-e)/1e3)}return 0},checkIfRequestExists(t){return dt.NOT_SAFE_RPC_METHODS.includes(t.method)||dt.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(mm.transactionHash))||(t==null?void 0:t.match(mm.signedMessage)))?le.RPC_RESPONSE_TYPE_TX:le.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return dt.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var He;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(He||(He={}));var Wf;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Wf||(Wf={}));const se=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zs=t=>{switch(typeof t){case"undefined":return se.undefined;case"string":return se.string;case"number":return isNaN(t)?se.nan:se.number;case"boolean":return se.boolean;case"function":return se.function;case"bigint":return se.bigint;case"symbol":return se.symbol;case"object":return Array.isArray(t)?se.array:t===null?se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?se.promise:typeof Map<"u"&&t instanceof Map?se.map:typeof Set<"u"&&t instanceof Set?se.set:typeof Date<"u"&&t instanceof Date?se.date:se.object;default:return se.unknown}},Y=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),DI=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class yr extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}yr.create=t=>new yr(t);const hc=(t,e)=>{let n;switch(t.code){case Y.invalid_type:t.received===se.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,He.jsonStringifyReplacer)}`;break;case Y.unrecognized_keys:n=`Unrecognized key(s) in object: ${He.joinValues(t.keys,", ")}`;break;case Y.invalid_union:n="Invalid input";break;case Y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${He.joinValues(t.options)}`;break;case Y.invalid_enum_value:n=`Invalid enum value. Expected ${He.joinValues(t.options)}, received '${t.received}'`;break;case Y.invalid_arguments:n="Invalid function arguments";break;case Y.invalid_return_type:n="Invalid function return type";break;case Y.invalid_date:n="Invalid date";break;case Y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:He.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Y.custom:n="Invalid input";break;case Y.invalid_intersection_types:n="Intersection results could not be merged";break;case Y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Y.not_finite:n="Number must be finite";break;default:n=e.defaultError,He.assertNever(t)}return{message:n}};let W1=hc;function $I(t){W1=t}function Tu(){return W1}const Ou=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},UI=[];function ce(t,e){const n=Ou({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tu(),hc].filter(r=>!!r)});t.common.issues.push(n)}class Jt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return ve;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Jt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ve;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const ve=Object.freeze({status:"aborted"}),q1=t=>({status:"dirty",value:t}),an=t=>({status:"valid",value:t}),qf=t=>t.status==="aborted",Vf=t=>t.status==="dirty",fc=t=>t.status==="valid",Ru=t=>typeof Promise<"u"&&t instanceof Promise;var ye;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));class Hr{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ym=(t,e)=>{if(fc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new yr(t.common.issues);return this._error=n,this._error}}};function Ae(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ne{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Zs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Jt,ctx:{common:e.parent.common,data:e.data,parsedType:Zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Ru(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zs(e)},i=this._parseSync({data:e,path:s.path,parent:s});return ym(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Ru(s)?s:Promise.resolve(s));return ym(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Y.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new vr({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ms.create(this,this._def)}nullable(){return Qi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return br.create(this,this._def)}promise(){return Qo.create(this,this._def)}or(e){return yc.create([this,e],this._def)}and(e){return bc.create(this,e,this._def)}transform(e){return new vr({...Ae(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new _c({...Ae(this._def),innerType:this,defaultValue:n,typeName:we.ZodDefault})}brand(){return new K1({typeName:we.ZodBranded,type:this,...Ae(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new $u({...Ae(this._def),innerType:this,catchValue:n,typeName:we.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return cl.create(this,e)}readonly(){return Bu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const BI=/^c[^\s-]{8,}$/i,LI=/^[a-z][a-z0-9]*$/,MI=/^[0-9A-HJKMNP-TV-Z]{26}$/,FI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jI=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,HI="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hh;const zI=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,WI=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,qI=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function VI(t,e){return!!((e==="v4"||!e)&&zI.test(t)||(e==="v6"||!e)&&WI.test(t))}class pr extends Ne{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==se.string){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.string,received:i.parsedType}),ve}const r=new Jt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ce(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ce(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")jI.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"email",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")hh||(hh=new RegExp(HI,"u")),hh.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"emoji",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")FI.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"uuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")BI.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")LI.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid2",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")MI.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ulid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ce(s,{validation:"url",code:Y.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"regex",code:Y.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?qI(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?VI(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ip",code:Y.invalid_string,message:i.message}),r.dirty()):He.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Y.invalid_string,...ye.errToObj(r)})}_addCheck(e){return new pr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ye.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ye.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ye.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ye.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ye.errToObj(n)})}nonempty(e){return this.min(1,ye.errToObj(e))}trim(){return new pr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}pr.create=t=>{var e;return new pr({checks:[],typeName:we.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ae(t)})};function KI(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class li extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==se.number){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.number,received:i.parsedType}),ve}let r;const s=new Jt;for(const i of this._def.checks)i.kind==="int"?He.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?KI(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.not_finite,message:i.message}),s.dirty()):He.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ye.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ye.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ye.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ye.toString(n))}setLimit(e,n,r,s){return new li({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ye.toString(s)}]})}_addCheck(e){return new li({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}li.create=t=>new li({checks:[],typeName:we.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ae(t)});class ui extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==se.bigint){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.bigint,received:i.parsedType}),ve}let r;const s=new Jt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):He.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ye.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ye.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ye.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ye.toString(n))}setLimit(e,n,r,s){return new ui({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ye.toString(s)}]})}_addCheck(e){return new ui({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ui.create=t=>{var e;return new ui({checks:[],typeName:we.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ae(t)})};class pc extends Ne{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==se.boolean){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.boolean,received:r.parsedType}),ve}return an(e.data)}}pc.create=t=>new pc({typeName:we.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ae(t)});class Ji extends Ne{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==se.date){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_type,expected:se.date,received:i.parsedType}),ve}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ce(i,{code:Y.invalid_date}),ve}const r=new Jt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Y.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):He.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ji({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ji.create=t=>new Ji({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:we.ZodDate,...Ae(t)});class Pu extends Ne{_parse(e){if(this._getType(e)!==se.symbol){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.symbol,received:r.parsedType}),ve}return an(e.data)}}Pu.create=t=>new Pu({typeName:we.ZodSymbol,...Ae(t)});class gc extends Ne{_parse(e){if(this._getType(e)!==se.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.undefined,received:r.parsedType}),ve}return an(e.data)}}gc.create=t=>new gc({typeName:we.ZodUndefined,...Ae(t)});class mc extends Ne{_parse(e){if(this._getType(e)!==se.null){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.null,received:r.parsedType}),ve}return an(e.data)}}mc.create=t=>new mc({typeName:we.ZodNull,...Ae(t)});class Xo extends Ne{constructor(){super(...arguments),this._any=!0}_parse(e){return an(e.data)}}Xo.create=t=>new Xo({typeName:we.ZodAny,...Ae(t)});class Vi extends Ne{constructor(){super(...arguments),this._unknown=!0}_parse(e){return an(e.data)}}Vi.create=t=>new Vi({typeName:we.ZodUnknown,...Ae(t)});class Cs extends Ne{_parse(e){const n=this._getOrReturnCtx(e);return ce(n,{code:Y.invalid_type,expected:se.never,received:n.parsedType}),ve}}Cs.create=t=>new Cs({typeName:we.ZodNever,...Ae(t)});class ku extends Ne{_parse(e){if(this._getType(e)!==se.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.void,received:r.parsedType}),ve}return an(e.data)}}ku.create=t=>new ku({typeName:we.ZodVoid,...Ae(t)});class br extends Ne{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==se.array)return ce(n,{code:Y.invalid_type,expected:se.array,received:n.parsedType}),ve;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ce(n,{code:o?Y.too_big:Y.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ce(n,{code:Y.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ce(n,{code:Y.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Hr(n,o,n.path,a)))).then(o=>Jt.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Hr(n,o,n.path,a)));return Jt.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new br({...this._def,minLength:{value:e,message:ye.toString(n)}})}max(e,n){return new br({...this._def,maxLength:{value:e,message:ye.toString(n)}})}length(e,n){return new br({...this._def,exactLength:{value:e,message:ye.toString(n)}})}nonempty(e){return this.min(1,e)}}br.create=(t,e)=>new br({type:t,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Ae(e)});function Po(t){if(t instanceof it){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ms.create(Po(r))}return new it({...t._def,shape:()=>e})}else return t instanceof br?new br({...t._def,type:Po(t.element)}):t instanceof ms?ms.create(Po(t.unwrap())):t instanceof Qi?Qi.create(Po(t.unwrap())):t instanceof zr?zr.create(t.items.map(e=>Po(e))):t}class it extends Ne{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=He.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==se.object){const l=this._getOrReturnCtx(e);return ce(l,{code:Y.invalid_type,expected:se.object,received:l.parsedType}),ve}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Cs&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Hr(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Cs){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ce(s,{code:Y.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Hr(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Jt.mergeObjectSync(r,l)):Jt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new it({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ye.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new it({...this._def,unknownKeys:"strip"})}passthrough(){return new it({...this._def,unknownKeys:"passthrough"})}extend(e){return new it({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new it({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:we.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new it({...this._def,catchall:e})}pick(e){const n={};return He.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new it({...this._def,shape:()=>n})}omit(e){const n={};return He.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new it({...this._def,shape:()=>n})}deepPartial(){return Po(this)}partial(e){const n={};return He.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new it({...this._def,shape:()=>n})}required(e){const n={};return He.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ms;)i=i._def.innerType;n[r]=i}}),new it({...this._def,shape:()=>n})}keyof(){return V1(He.objectKeys(this.shape))}}it.create=(t,e)=>new it({shape:()=>t,unknownKeys:"strip",catchall:Cs.create(),typeName:we.ZodObject,...Ae(e)});it.strictCreate=(t,e)=>new it({shape:()=>t,unknownKeys:"strict",catchall:Cs.create(),typeName:we.ZodObject,...Ae(e)});it.lazycreate=(t,e)=>new it({shape:t,unknownKeys:"strip",catchall:Cs.create(),typeName:we.ZodObject,...Ae(e)});class yc extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new yr(a.ctx.common.issues));return ce(n,{code:Y.invalid_union,unionErrors:o}),ve}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new yr(c));return ce(n,{code:Y.invalid_union,unionErrors:a}),ve}}get options(){return this._def.options}}yc.create=(t,e)=>new yc({options:t,typeName:we.ZodUnion,...Ae(e)});const fu=t=>t instanceof Ec?fu(t.schema):t instanceof vr?fu(t.innerType()):t instanceof vc?[t.value]:t instanceof di?t.options:t instanceof Cc?Object.keys(t.enum):t instanceof _c?fu(t._def.innerType):t instanceof gc?[void 0]:t instanceof mc?[null]:null;class Ed extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.object)return ce(n,{code:Y.invalid_type,expected:se.object,received:n.parsedType}),ve;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ce(n,{code:Y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=fu(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Ed({typeName:we.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ae(r)})}}function Kf(t,e){const n=Zs(t),r=Zs(e);if(t===e)return{valid:!0,data:t};if(n===se.object&&r===se.object){const s=He.objectKeys(e),i=He.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Kf(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===se.array&&r===se.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Kf(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===se.date&&r===se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bc extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(qf(i)||qf(o))return ve;const a=Kf(i.value,o.value);return a.valid?((Vf(i)||Vf(o))&&n.dirty(),{status:n.value,value:a.data}):(ce(r,{code:Y.invalid_intersection_types}),ve)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}bc.create=(t,e,n)=>new bc({left:t,right:e,typeName:we.ZodIntersection,...Ae(n)});class zr extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.array)return ce(r,{code:Y.invalid_type,expected:se.array,received:r.parsedType}),ve;if(r.data.length<this._def.items.length)return ce(r,{code:Y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ve;!this._def.rest&&r.data.length>this._def.items.length&&(ce(r,{code:Y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Hr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Jt.mergeArray(n,o)):Jt.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new zr({...this._def,rest:e})}}zr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zr({items:t,typeName:we.ZodTuple,rest:null,...Ae(e)})};class wc extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.object)return ce(r,{code:Y.invalid_type,expected:se.object,received:r.parsedType}),ve;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Hr(r,a,r.path,a)),value:o._parse(new Hr(r,r.data[a],r.path,a))});return r.common.async?Jt.mergeObjectAsync(n,s):Jt.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ne?new wc({keyType:e,valueType:n,typeName:we.ZodRecord,...Ae(r)}):new wc({keyType:pr.create(),valueType:e,typeName:we.ZodRecord,...Ae(n)})}}class Du extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.map)return ce(r,{code:Y.invalid_type,expected:se.map,received:r.parsedType}),ve;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Hr(r,a,r.path,[l,"key"])),value:i._parse(new Hr(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return ve;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return ve;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}Du.create=(t,e,n)=>new Du({valueType:e,keyType:t,typeName:we.ZodMap,...Ae(n)});class Xi extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==se.set)return ce(r,{code:Y.invalid_type,expected:se.set,received:r.parsedType}),ve;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ce(r,{code:Y.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ce(r,{code:Y.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return ve;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Hr(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Xi({...this._def,minSize:{value:e,message:ye.toString(n)}})}max(e,n){return new Xi({...this._def,maxSize:{value:e,message:ye.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Xi.create=(t,e)=>new Xi({valueType:t,minSize:null,maxSize:null,typeName:we.ZodSet,...Ae(e)});class Fo extends Ne{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.function)return ce(n,{code:Y.invalid_type,expected:se.function,received:n.parsedType}),ve;function r(a,c){return Ou({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tu(),hc].filter(l=>!!l),issueData:{code:Y.invalid_arguments,argumentsError:c}})}function s(a,c){return Ou({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Tu(),hc].filter(l=>!!l),issueData:{code:Y.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Qo){const a=this;return an(async function(...c){const l=new yr([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return an(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new yr([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new yr([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Fo({...this._def,args:zr.create(e).rest(Vi.create())})}returns(e){return new Fo({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Fo({args:e||zr.create([]).rest(Vi.create()),returns:n||Vi.create(),typeName:we.ZodFunction,...Ae(r)})}}class Ec extends Ne{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ec.create=(t,e)=>new Ec({getter:t,typeName:we.ZodLazy,...Ae(e)});class vc extends Ne{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ce(n,{received:n.data,code:Y.invalid_literal,expected:this._def.value}),ve}return{status:"valid",value:e.data}}get value(){return this._def.value}}vc.create=(t,e)=>new vc({value:t,typeName:we.ZodLiteral,...Ae(e)});function V1(t,e){return new di({values:t,typeName:we.ZodEnum,...Ae(e)})}class di extends Ne{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ce(n,{expected:He.joinValues(r),received:n.parsedType,code:Y.invalid_type}),ve}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ce(n,{received:n.data,code:Y.invalid_enum_value,options:r}),ve}return an(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return di.create(e)}exclude(e){return di.create(this.options.filter(n=>!e.includes(n)))}}di.create=V1;class Cc extends Ne{_parse(e){const n=He.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==se.string&&r.parsedType!==se.number){const s=He.objectValues(n);return ce(r,{expected:He.joinValues(s),received:r.parsedType,code:Y.invalid_type}),ve}if(n.indexOf(e.data)===-1){const s=He.objectValues(n);return ce(r,{received:r.data,code:Y.invalid_enum_value,options:s}),ve}return an(e.data)}get enum(){return this._def.values}}Cc.create=(t,e)=>new Cc({values:t,typeName:we.ZodNativeEnum,...Ae(e)});class Qo extends Ne{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==se.promise&&n.common.async===!1)return ce(n,{code:Y.invalid_type,expected:se.promise,received:n.parsedType}),ve;const r=n.parsedType===se.promise?n.data:Promise.resolve(n.data);return an(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Qo.create=(t,e)=>new Qo({type:t,typeName:we.ZodPromise,...Ae(e)});class vr extends Ne{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ce(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!fc(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>fc(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);He.assertNever(s)}}vr.create=(t,e,n)=>new vr({schema:t,typeName:we.ZodEffects,effect:e,...Ae(n)});vr.createWithPreprocess=(t,e,n)=>new vr({schema:e,effect:{type:"preprocess",transform:t},typeName:we.ZodEffects,...Ae(n)});class ms extends Ne{_parse(e){return this._getType(e)===se.undefined?an(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ms.create=(t,e)=>new ms({innerType:t,typeName:we.ZodOptional,...Ae(e)});class Qi extends Ne{_parse(e){return this._getType(e)===se.null?an(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qi.create=(t,e)=>new Qi({innerType:t,typeName:we.ZodNullable,...Ae(e)});class _c extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===se.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}_c.create=(t,e)=>new _c({innerType:t,typeName:we.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ae(e)});class $u extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ru(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new yr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new yr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}$u.create=(t,e)=>new $u({innerType:t,typeName:we.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ae(e)});class Uu extends Ne{_parse(e){if(this._getType(e)!==se.nan){const r=this._getOrReturnCtx(e);return ce(r,{code:Y.invalid_type,expected:se.nan,received:r.parsedType}),ve}return{status:"valid",value:e.data}}}Uu.create=t=>new Uu({typeName:we.ZodNaN,...Ae(t)});const GI=Symbol("zod_brand");class K1 extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class cl extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ve:i.status==="dirty"?(n.dirty(),q1(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ve:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new cl({in:e,out:n,typeName:we.ZodPipeline})}}class Bu extends Ne{_parse(e){const n=this._def.innerType._parse(e);return fc(n)&&(n.value=Object.freeze(n.value)),n}}Bu.create=(t,e)=>new Bu({innerType:t,typeName:we.ZodReadonly,...Ae(e)});const G1=(t,e={},n)=>t?Xo.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Xo.create(),YI={object:it.lazycreate};var we;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(we||(we={}));const ZI=(t,e={message:`Input not instance of ${t.name}`})=>G1(n=>n instanceof t,e),Y1=pr.create,Z1=li.create,JI=Uu.create,XI=ui.create,J1=pc.create,QI=Ji.create,eS=Pu.create,tS=gc.create,nS=mc.create,rS=Xo.create,sS=Vi.create,iS=Cs.create,oS=ku.create,aS=br.create,cS=it.create,lS=it.strictCreate,uS=yc.create,dS=Ed.create,hS=bc.create,fS=zr.create,pS=wc.create,gS=Du.create,mS=Xi.create,yS=Fo.create,bS=Ec.create,wS=vc.create,ES=di.create,vS=Cc.create,CS=Qo.create,bm=vr.create,_S=ms.create,AS=Qi.create,IS=vr.createWithPreprocess,SS=cl.create,NS=()=>Y1().optional(),xS=()=>Z1().optional(),TS=()=>J1().optional(),OS={string:t=>pr.create({...t,coerce:!0}),number:t=>li.create({...t,coerce:!0}),boolean:t=>pc.create({...t,coerce:!0}),bigint:t=>ui.create({...t,coerce:!0}),date:t=>Ji.create({...t,coerce:!0})},RS=ve;var E=Object.freeze({__proto__:null,defaultErrorMap:hc,setErrorMap:$I,getErrorMap:Tu,makeIssue:Ou,EMPTY_PATH:UI,addIssueToContext:ce,ParseStatus:Jt,INVALID:ve,DIRTY:q1,OK:an,isAborted:qf,isDirty:Vf,isValid:fc,isAsync:Ru,get util(){return He},get objectUtil(){return Wf},ZodParsedType:se,getParsedType:Zs,ZodType:Ne,ZodString:pr,ZodNumber:li,ZodBigInt:ui,ZodBoolean:pc,ZodDate:Ji,ZodSymbol:Pu,ZodUndefined:gc,ZodNull:mc,ZodAny:Xo,ZodUnknown:Vi,ZodNever:Cs,ZodVoid:ku,ZodArray:br,ZodObject:it,ZodUnion:yc,ZodDiscriminatedUnion:Ed,ZodIntersection:bc,ZodTuple:zr,ZodRecord:wc,ZodMap:Du,ZodSet:Xi,ZodFunction:Fo,ZodLazy:Ec,ZodLiteral:vc,ZodEnum:di,ZodNativeEnum:Cc,ZodPromise:Qo,ZodEffects:vr,ZodTransformer:vr,ZodOptional:ms,ZodNullable:Qi,ZodDefault:_c,ZodCatch:$u,ZodNaN:Uu,BRAND:GI,ZodBranded:K1,ZodPipeline:cl,ZodReadonly:Bu,custom:G1,Schema:Ne,ZodSchema:Ne,late:YI,get ZodFirstPartyTypeKind(){return we},coerce:OS,any:rS,array:aS,bigint:XI,boolean:J1,date:QI,discriminatedUnion:dS,effect:bm,enum:ES,function:yS,instanceof:ZI,intersection:hS,lazy:bS,literal:wS,map:gS,nan:JI,nativeEnum:vS,never:iS,null:nS,nullable:AS,number:Z1,object:cS,oboolean:TS,onumber:xS,optional:_S,ostring:NS,pipeline:SS,preprocess:IS,promise:CS,record:pS,set:mS,strictObject:lS,string:Y1,symbol:eS,transformer:bm,tuple:fS,undefined:tS,union:uS,unknown:sS,void:oS,NEVER:RS,ZodIssueCode:Y,quotelessJson:DI,ZodError:yr});const ot=E.object({message:E.string()});function ie(t){return E.literal(le[t])}const vd=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const PS=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),kS=E.object({email:E.string().email()}),DS=E.object({otp:E.string()}),$S=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(vd),rpcUrl:E.optional(E.string())}),US=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(vd),rpcUrl:E.optional(E.string())}),BS=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),LS=E.object({email:E.string().email()}),MS=E.object({otp:E.string()}),FS=E.object({otp:E.string()}),jS=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),HS=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),zS=E.object({type:E.string()}),WS=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),qS=E.object({url:E.string()}),VS=E.object({userName:E.string()}),KS=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([dt.ACCOUNT_TYPES.EOA,dt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(vd)}),GS=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),YS=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([dt.ACCOUNT_TYPES.EOA,dt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(vd)}),ZS=E.object({uri:E.string()}),JS=E.object({isConnected:E.boolean()}),XS=E.object({chainId:E.string().or(E.number())}),QS=E.object({chainId:E.string().or(E.number())}),e5=E.object({newEmail:E.string().email()}),t5=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const n5=E.object({version:E.string().optional()}),r5=E.object({type:E.string(),address:E.string()}),s5=E.any(),i5=E.object({method:E.literal("eth_accounts")}),o5=E.object({method:E.literal("eth_blockNumber")}),a5=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),c5=E.object({method:E.literal("eth_chainId")}),l5=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),u5=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),d5=E.object({method:E.literal("eth_gasPrice")}),h5=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),f5=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),p5=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),g5=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),m5=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),y5=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),b5=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),w5=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),E5=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),v5=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),C5=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),_5=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),A5=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),I5=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),S5=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),N5=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),x5=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),T5=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),O5=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),R5=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),P5=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),k5=E.object({method:E.literal("eth_newBlockFilter")}),D5=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),$5=E.object({method:E.literal("eth_newPendingTransactionFilter")}),U5=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),B5=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),L5=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),wm=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),M5=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),F5=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),j5=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),H5=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),z5=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),W5=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),q5=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),V5=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),K5=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),G5=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),Y5=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),Z5=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),Em=E.object({token:E.string()}),oe=E.object({id:E.string().optional()}),fh={appEvent:oe.extend({type:ie("APP_SWITCH_NETWORK"),payload:PS}).or(oe.extend({type:ie("APP_CONNECT_EMAIL"),payload:kS})).or(oe.extend({type:ie("APP_CONNECT_DEVICE")})).or(oe.extend({type:ie("APP_CONNECT_OTP"),payload:DS})).or(oe.extend({type:ie("APP_CONNECT_SOCIAL"),payload:$S})).or(oe.extend({type:ie("APP_GET_FARCASTER_URI")})).or(oe.extend({type:ie("APP_CONNECT_FARCASTER")})).or(oe.extend({type:ie("APP_GET_USER"),payload:E.optional(US)})).or(oe.extend({type:ie("APP_GET_SOCIAL_REDIRECT_URI"),payload:BS})).or(oe.extend({type:ie("APP_SIGN_OUT")})).or(oe.extend({type:ie("APP_IS_CONNECTED"),payload:E.optional(Em)})).or(oe.extend({type:ie("APP_GET_CHAIN_ID")})).or(oe.extend({type:ie("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(oe.extend({type:ie("APP_INIT_SMART_ACCOUNT")})).or(oe.extend({type:ie("APP_SET_PREFERRED_ACCOUNT"),payload:zS})).or(oe.extend({type:ie("APP_RPC_REQUEST"),payload:wm.or(Z5).or(i5).or(o5).or(a5).or(c5).or(l5).or(u5).or(d5).or(h5).or(f5).or(p5).or(g5).or(m5).or(y5).or(b5).or(w5).or(E5).or(v5).or(C5).or(_5).or(A5).or(I5).or(S5).or(N5).or(x5).or(T5).or(O5).or(R5).or(P5).or(k5).or(D5).or($5).or(U5).or(B5).or(L5).or(wm).or(M5).or(F5).or(j5).or(H5).or(z5).or(W5).or(V5).or(q5).or(K5).or(G5).or(Y5).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(oe.extend({type:ie("APP_UPDATE_EMAIL"),payload:LS})).or(oe.extend({type:ie("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:MS})).or(oe.extend({type:ie("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:FS})).or(oe.extend({type:ie("APP_SYNC_THEME"),payload:jS})).or(oe.extend({type:ie("APP_SYNC_DAPP_DATA"),payload:HS})).or(oe.extend({type:ie("APP_RELOAD")})).or(oe.extend({type:ie("APP_RPC_ABORT")})),frameEvent:oe.extend({type:ie("FRAME_SWITCH_NETWORK_ERROR"),payload:ot}).or(oe.extend({type:ie("FRAME_SWITCH_NETWORK_SUCCESS"),payload:QS})).or(oe.extend({type:ie("FRAME_CONNECT_EMAIL_SUCCESS"),payload:WS})).or(oe.extend({type:ie("FRAME_CONNECT_EMAIL_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:qS})).or(oe.extend({type:ie("FRAME_GET_FARCASTER_URI_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:VS})).or(oe.extend({type:ie("FRAME_CONNECT_FARCASTER_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_OTP_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_OTP_SUCCESS")})).or(oe.extend({type:ie("FRAME_CONNECT_DEVICE_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_CONNECT_DEVICE_SUCCESS")})).or(oe.extend({type:ie("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:KS})).or(oe.extend({type:ie("FRAME_CONNECT_SOCIAL_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_USER_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_USER_SUCCESS"),payload:YS})).or(oe.extend({type:ie("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:ZS})).or(oe.extend({type:ie("FRAME_SIGN_OUT_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SIGN_OUT_SUCCESS")})).or(oe.extend({type:ie("FRAME_IS_CONNECTED_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_IS_CONNECTED_SUCCESS"),payload:JS})).or(oe.extend({type:ie("FRAME_GET_CHAIN_ID_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_GET_CHAIN_ID_SUCCESS"),payload:XS})).or(oe.extend({type:ie("FRAME_RPC_REQUEST_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_RPC_REQUEST_SUCCESS"),payload:s5})).or(oe.extend({type:ie("FRAME_SESSION_UPDATE"),payload:Em})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_SUCCESS"),payload:GS})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:e5})).or(oe.extend({type:ie("FRAME_SYNC_THEME_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SYNC_THEME_SUCCESS")})).or(oe.extend({type:ie("FRAME_SYNC_DAPP_DATA_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(oe.extend({type:ie("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:t5})).or(oe.extend({type:ie("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:r5})).or(oe.extend({type:ie("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_READY"),payload:n5})).or(oe.extend({type:ie("FRAME_RELOAD_ERROR"),payload:ot})).or(oe.extend({type:ie("FRAME_RELOAD_SUCCESS")}))};function ph(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function J5({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=B.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(RI);i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",kI),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r);const o=vt.get("dapp_smart_account_version");return o&&(o==="v6"||o==="v7")&&(console.warn(">> AppKit - Forcing smart account version",o),i.searchParams.set("smartAccountVersion",o)),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class X5{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=B.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,l)=>{function u({data:d}){var f;if(!ph(le.FRAME_EVENT_KEY,d))return;const h=fh.frameEvent.safeParse(d);if(!h.success){console.warn("W3mFrame: invalid frame event",h.error.message);return}((f=h.data)==null?void 0:f.id)===a&&(c(h.data),window.removeEventListener("message",u))}Bn.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{Bn.isClient&&window.addEventListener("message",({data:c})=>{if(!ph(le.FRAME_EVENT_KEY,c))return;const l=fh.frameEvent.safeParse(c);l.success?a(l.data):console.warn("W3mFrame: invalid frame event",l.error.message)})},onAppEvent:a=>{Bn.isClient&&window.addEventListener("message",({data:c})=>{if(!ph(le.APP_EVENT_KEY,c))return;const l=fh.appEvent.safeParse(c);l.success||console.warn("W3mFrame: invalid app event",l.error.message),a(c)})},postAppEvent:a=>{var c;if(Bn.isClient){if(!((c=this.iframe)!=null&&c.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(Bn.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),Bn.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=J5({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{var c;(c=this.frameLoadPromiseResolver)==null||c.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{var l;c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(l=this.frameLoadPromiseResolver)==null||l.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}var Cd={exports:{}};function Q5(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var e6=t6;function t6(t,e,n){var r=n&&n.stringify||Q5,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const vm=e6;Cd.exports=_s;const Ac=m6().console||{},n6={mapHttpRequest:Tl,mapHttpResponse:Tl,wrapRequestSerializer:gh,wrapResponseSerializer:gh,wrapErrorSerializer:gh,req:Tl,res:Tl,err:_m,errWithCause:_m};function ni(t,e){return t==="silent"?1/0:e.levels.values[t]}const N0=Symbol("pino.logFuncs"),Gf=Symbol("pino.hierarchy"),r6={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Cm(t,e){const n={logger:e,parent:t[Gf]};e[Gf]=n}function s6(t,e,n){const r={};e.forEach(s=>{r[s]=n[s]?n[s]:Ac[s]||Ac[r6[s]||"log"]||jo}),t[N0]=r}function i6(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function _s(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Ac;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=i6(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof n=="function"&&a.forEach(function(g){n[g]=n}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const c=t.level||"info",l=Object.create(n);l.log||(l.log=jo),s6(l,a,n),Cm({},l),Object.defineProperty(l,"levelVal",{get:d}),Object.defineProperty(l,"level",{get:h,set:f});const u={transmit:e,serialize:s,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:f6(t),messageKey:t.messageKey||"msg",onChild:t.onChild||jo};l.levels=o6(t),l.level=c,l.isLevelEnabled=function(g){return this.levels.values[g]?this.levels.values[g]>=this.levels.values[this.level]:!1},l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=jo,l.serializers=r,l._serialize=s,l._stdErrSerialize=i,l.child=function(...g){return p.call(this,u,...g)},e&&(l._logEvent=Yf());function d(){return ni(this.level,this)}function h(){return this._level}function f(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,vi(this,u,l,"error"),vi(this,u,l,"fatal"),vi(this,u,l,"warn"),vi(this,u,l,"info"),vi(this,u,l,"debug"),vi(this,u,l,"trace"),o.forEach(m=>{vi(this,u,l,m)})}function p(g,m,w){if(!m)throw new Error("missing bindings for child Pino");w=w||{},s&&m.serializers&&(w.serializers=m.serializers);const _=w.serializers;if(s&&_){var b=Object.assign({},r,_),A=t.browser.serialize===!0?Object.keys(b):s;delete m.serializers,x0([m],A,b,this._stdErrSerialize)}function C(N){this._childLevel=(N._childLevel|0)+1,this.bindings=m,b&&(this.serializers=b,this._serialize=A),e&&(this._logEvent=Yf([].concat(N._logEvent.bindings,m)))}C.prototype=this;const S=new C(this);return Cm(this,S),S.child=function(...N){return p.call(this,g,...N)},S.level=w.level||this.level,g.onChild(S),S}return l}function o6(t){const e=t.customLevels||{},n=Object.assign({},_s.levels.values,e),r=Object.assign({},_s.levels.labels,a6(e));return{values:n,labels:r}}function a6(t){const e={};return Object.keys(t).forEach(function(n){e[t[n]]=n}),e}_s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};_s.stdSerializers=n6;_s.stdTimeFunctions=Object.assign({},{nullTime:X1,epochTime:Q1,unixTime:p6,isoTime:g6});function c6(t){const e=[];t.bindings&&e.push(t.bindings);let n=t[Gf];for(;n.parent;)n=n.parent,n.logger.bindings&&e.push(n.logger.bindings);return e.reverse()}function vi(t,e,n,r){if(Object.defineProperty(t,r,{value:ni(t.level,n)>ni(r,n)?jo:n[N0][r],writable:!0,enumerable:!0,configurable:!0}),t[r]===jo){if(!e.transmit)return;const i=e.transmit.level||t.level,o=ni(i,n);if(ni(r,n)<o)return}t[r]=u6(t,e,n,r);const s=c6(t);s.length!==0&&(t[r]=l6(s,t[r]))}function l6(t,e){return function(){return e.apply(this,[...t,...arguments])}}function u6(t,e,n,r){return function(s){return function(){const o=e.timestamp(),a=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ac?Ac:this;for(var l=0;l<a.length;l++)a[l]=arguments[l];var u=!1;if(e.serialize&&(x0(a,this._serialize,this.serializers,this._stdErrSerialize),u=!0),e.asObject||e.formatters?s.call(c,...d6(this,r,a,o,e)):s.apply(c,a),e.transmit){const d=e.transmit.level||t._level,h=ni(d,n),f=ni(r,n);if(f<h)return;h6(this,{ts:o,methodLevel:r,methodValue:f,transmitValue:n.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:ni(t._level,n)},a,u)}}}(t[N0][r])}function d6(t,e,n,r,s){const{level:i,log:o=d=>d}=s.formatters||{},a=n.slice();let c=a[0];const l={};let u=(t._childLevel|0)+1;if(u<1&&(u=1),r&&(l.time=r),i){const d=i(e,t.levels.values[e]);Object.assign(l,d)}else l.level=t.levels.values[e];if(s.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());return[o(l),...a]}else{if(c!==null&&typeof c=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(l,a.shift());c=a.length?vm(a.shift(),a):void 0}else typeof c=="string"&&(c=vm(a.shift(),a));return c!==void 0&&(l[s.messageKey]=c),[o(l)]}}function x0(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=_s.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s])&&e)for(const i in t[s])e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function h6(t,e,n,r=!1){const s=e.send,i=e.ts,o=e.methodLevel,a=e.methodValue,c=e.val,l=t._logEvent.bindings;r||x0(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(u){return l.indexOf(u)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,s(o,t._logEvent,c),t._logEvent=Yf(l)}function Yf(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function _m(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function f6(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?X1:Q1}function Tl(){return{}}function gh(t){return t}function jo(){}function X1(){return!1}function Q1(){return Date.now()}function p6(){return Math.round(Date.now()/1e3)}function g6(){return new Date(Date.now()).toISOString()}function m6(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}Cd.exports.default=_s;Cd.exports.pino=_s;var ko=Cd.exports;const eE=bd(ko),y6=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),b6=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function eo(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return b6(t)}catch{return t}}function As(t){return typeof t=="string"?t:y6(t)||""}const w6={level:"info"},_d="custom_context",T0=1e3*1024;var E6=Object.defineProperty,v6=(t,e,n)=>e in t?E6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Js=(t,e,n)=>v6(t,typeof e!="symbol"?e+"":e,n);let C6=class{constructor(e){Js(this,"nodeValue"),Js(this,"sizeInBytes"),Js(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Am=class{constructor(e){Js(this,"lengthInNodes"),Js(this,"sizeInBytes"),Js(this,"head"),Js(this,"tail"),Js(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new C6(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};var _6=Object.defineProperty,A6=(t,e,n)=>e in t?_6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ol=(t,e,n)=>A6(t,typeof e!="symbol"?e+"":e,n);let tE=class{constructor(e,n=T0){Ol(this,"logs"),Ol(this,"level"),Ol(this,"levelValue"),Ol(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=ko.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Am(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===ko.levels.values.error?console.error(e):n===ko.levels.values.warn?console.warn(e):n===ko.levels.values.debug?console.debug(e):n===ko.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(As({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Am(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(As({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var I6=Object.defineProperty,S6=(t,e,n)=>e in t?I6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N6=(t,e,n)=>S6(t,e+"",n);let x6=class{constructor(e,n=T0){N6(this,"baseChunkLogger"),this.baseChunkLogger=new tE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var T6=Object.defineProperty,O6=(t,e,n)=>e in t?T6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R6=(t,e,n)=>O6(t,e+"",n);let P6=class{constructor(e,n=T0){R6(this,"baseChunkLogger"),this.baseChunkLogger=new tE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var k6=Object.defineProperty,D6=Object.defineProperties,$6=Object.getOwnPropertyDescriptors,Im=Object.getOwnPropertySymbols,U6=Object.prototype.hasOwnProperty,B6=Object.prototype.propertyIsEnumerable,Sm=(t,e,n)=>e in t?k6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lu=(t,e)=>{for(var n in e||(e={}))U6.call(e,n)&&Sm(t,n,e[n]);if(Im)for(var n of Im(e))B6.call(e,n)&&Sm(t,n,e[n]);return t},Mu=(t,e)=>D6(t,$6(e));function O0(t){return Mu(Lu({},t),{level:(t==null?void 0:t.level)||w6.level})}function L6(t,e,n=_d){return t[n]=e,t}function An(t,e=_d){return t[e]||""}function M6(t,e,n=_d){const r=An(t,n);return r.trim()?`${r}/${e}`:e}function In(t,e,n=_d){const r=M6(t,e,n),s=t.child({context:r});return L6(s,r,n)}function F6(t){var e,n;const r=new x6((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:eE(Mu(Lu({},t.opts),{level:"trace",browser:Mu(Lu({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function j6(t){var e;const n=new P6((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:eE(Mu(Lu({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Ad(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?F6(t):j6(t)}class H6{constructor(e){var i;const n=O0({level:PI}),{logger:r,chunkLoggerController:s}=Ad({opts:n});this.logger=In(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class z6{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c,metadata:l,sdkVersion:u,sdkType:d}){this.openRpcRequests=new Map,this.isInitialized=!1,r&&(this.w3mLogger=new H6(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const h=this.getRpcUrl(n);this.projectId=e,this.sdkVersion=u,this.sdkType=d,this.metadata=l,this.w3mFrame=new X5({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:h,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!vt.get(le.EMAIL_LOGIN_USED_KEY)}getEmail(){return vt.get(le.EMAIL)}getUsername(){return vt.get(le.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:le.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Bn.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:le.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:le.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:le.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:le.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:le.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:le.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:le.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:le.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:le.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:le.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:le.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:le.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:le.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:le.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:le.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:le.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:le.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:le.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:le.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:le.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(dt.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:le.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_IS_CONNECTED_ERROR&&e(),n.type===le.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===le.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===le.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:dt.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:n,method:r})=>{dt.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:le.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[le.APP_SYNC_DAPP_DATA,le.APP_SYNC_THEME,le.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[le.APP_CONNECT_EMAIL,le.APP_CONNECT_DEVICE,le.APP_CONNECT_OTP,le.APP_CONNECT_SOCIAL,le.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests.set(u,{...m.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});const h=(m,w)=>{var _,b,A;m.id===u&&((b=w==null?void 0:(_=w.logger).info)==null||b.call(_,{framEvent:m,id:u},"Received frame response"),this.openRpcRequests.delete(m.id),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((A=m.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){vt.set(le.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){vt.set(le.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&vt.set(le.EMAIL,e),vt.set(le.EMAIL_LOGIN_USED_KEY,"true"),vt.delete(le.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){vt.delete(le.EMAIL_LOGIN_USED_KEY),vt.delete(le.EMAIL),vt.delete(le.LAST_USED_CHAIN_KEY),vt.delete(le.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&vt.set(le.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=vt.get(le.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){vt.set(le.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var i,o;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(i=At.parseCaipNetworkId(e))==null?void 0:i.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n),s=e?r.find(a=>String(a.id)===String(e)||a.caipNetworkId===e):r[0];return(o=s==null?void 0:s.rpcUrls.default.http)==null?void 0:o[0]}}const W6="1.1.0";let Sn=class Zf extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Zf?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Zf&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${W6}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Ss(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const nE=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,rE=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,sE=/^\(.+?\).*?$/,Nm=/^tuple(?<array>(\[(\d*)\])*)$/;function Jf(t){let e=t.type;if(Nm.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Jf(i),s<n-1&&(e+=", ")}const r=Ss(Nm,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Jf({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Ea(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Jf(s),r!==n-1&&(e+=", ")}return e}function q6(t){var e;return t.type==="function"?`function ${t.name}(${Ea(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Ea(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Ea(t.inputs)})`:t.type==="error"?`error ${t.name}(${Ea(t.inputs)})`:t.type==="constructor"?`constructor(${Ea(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const iE=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function V6(t){return iE.test(t)}function K6(t){return Ss(iE,t)}const oE=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function G6(t){return oE.test(t)}function Y6(t){return Ss(oE,t)}const aE=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Z6(t){return aE.test(t)}function J6(t){return Ss(aE,t)}const cE=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function lE(t){return cE.test(t)}function X6(t){return Ss(cE,t)}const uE=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Q6(t){return uE.test(t)}function eN(t){return Ss(uE,t)}const dE=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function tN(t){return dE.test(t)}function nN(t){return Ss(dE,t)}const rN=/^receive\(\) external payable$/;function sN(t){return rN.test(t)}const XG=new Set(["memory","indexed","storage","calldata"]),iN=new Set(["indexed"]),Xf=new Set(["calldata","memory","storage"]);class QG extends Sn{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class oN extends Sn{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class aN extends Sn{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class eY extends Sn{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class cN extends Sn{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class lN extends Sn{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class uN extends Sn{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class dN extends Sn{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class hN extends Sn{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ha extends Sn{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class fN extends Sn{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class pN extends Sn{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class gN extends Sn{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class mN extends Sn{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function yN(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const mh=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function bN(t,e={}){if(Z6(t))return wN(t,e);if(G6(t))return EN(t,e);if(V6(t))return vN(t,e);if(Q6(t))return CN(t,e);if(tN(t))return _N(t);if(sN(t))return{type:"receive",stateMutability:"payable"};throw new fN({signature:t})}function wN(t,e={}){const n=J6(t);if(!n)throw new ha({signature:t,type:"function"});const r=hr(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(to(r[a],{modifiers:Xf,structs:e,type:"function"}));const o=[];if(n.returns){const a=hr(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(to(a[l],{modifiers:Xf,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function EN(t,e={}){const n=Y6(t);if(!n)throw new ha({signature:t,type:"event"});const r=hr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(to(r[o],{modifiers:iN,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function vN(t,e={}){const n=K6(t);if(!n)throw new ha({signature:t,type:"error"});const r=hr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(to(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function CN(t,e={}){const n=eN(t);if(!n)throw new ha({signature:t,type:"constructor"});const r=hr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(to(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function _N(t){const e=nN(t);if(!e)throw new ha({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const AN=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,IN=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,SN=/^u?int$/;function to(t,e){var d,h;const n=yN(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(mh.has(n))return mh.get(n);const r=sE.test(t),s=Ss(r?IN:AN,t);if(!s)throw new cN({param:t});if(s.name&&xN(s.name))throw new lN({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=hr(s.type),p=[],g=f.length;for(let m=0;m<g;m++)p.push(to(f[m],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(SN.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!hE(c))throw new aN({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new uN({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Xf.has(s.modifier)&&!TN(c,!!s.array))throw new dN({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return mh.set(n,u),u}function hr(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?hr(a,[...e,n.trim()]):hr(a,e,`${n}${o}`,r);case"(":return hr(a,e,`${n}${o}`,r+1);case")":return hr(a,e,`${n}${o}`,r-1);default:return hr(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new mN({current:n,depth:r});return e.push(n.trim()),e}function hE(t){return t==="address"||t==="bool"||t==="function"||t==="string"||nE.test(t)||rE.test(t)}const NN=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function xN(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||nE.test(t)||rE.test(t)||NN.test(t)}function TN(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function ON(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!lE(a))continue;const c=X6(a);if(!c)throw new ha({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=to(p,{type:"struct"});u.push(g)}if(!u.length)throw new pN({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=fE(c,e)}return r}const RN=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function fE(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(sE.test(o.type))r.push(o);else{const c=Ss(RN,o.type);if(!(c!=null&&c.type))throw new hN({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new gN({type:u});r.push({...o,type:`tuple${l??""}`,components:fE(e[u]??[],e,new Set([...n,u]))})}else if(hE(u))r.push(o);else throw new oN({type:u})}}return r}function pE(t){const e=ON(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];lE(i)||n.push(bN(i,e))}return n}function et(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function hi(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new zN(t.type);return`${t.name}(${Id(t.inputs,{includeName:e})})`}function Id(t,{includeName:e=!1}={}){return t?t.map(n=>PN(n,{includeName:e})).join(e?", ":","):""}function PN(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Id(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function fi(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function yt(t){return fi(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const gE="2.39.3";let va={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${gE}`},W=class Qf extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Qf?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Qf&&n.cause.docsPath||n.docsPath,i=(a=va.getDocsUrl)==null?void 0:a.call(va,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...va.version?[`Version: ${va.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=gE}walk(e){return mE(this,e)}};function mE(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?mE(t.cause,e):e?null:t}class kN extends W{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class xm extends W{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class yE extends W{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Id(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Sd extends W{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class DN extends W{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class $N extends W{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${yt(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class UN extends W{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class tY extends W{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class nY extends W{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class bE extends W{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class BN extends W{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class wE extends W{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class rY extends W{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Fu extends W{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class LN extends W{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class sY extends W{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class MN extends W{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${hi(e.abiItem)}\`, and`,`\`${n.type}\` in \`${hi(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class iY extends W{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class ep extends W{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Id(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class EE extends W{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${hi(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class FN extends W{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class jN extends W{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class HN extends W{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class zN extends W{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class oY extends W{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}let vE=class extends W{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},CE=class extends W{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Tm extends W{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function fa(t,{dir:e,size:n=32}={}){return typeof t=="string"?si(t,{dir:e,size:n}):WN(t,{dir:e,size:n})}function si(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new CE({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function WN(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new CE({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let _E=class extends W{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class qN extends W{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class VN extends W{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let KN=class extends W{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Zn(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function er(t,{size:e}){if(yt(t)>e)throw new KN({givenSize:yt(t),maxSize:e})}function fr(t,e={}){const{signed:n}=e;e.size&&er(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function dY(t,e={}){let n=t;if(e.size&&(er(n,{size:e.size}),n=Zn(n)),Zn(n)==="0x00")return!1;if(Zn(n)==="0x01")return!0;throw new VN(n)}function pi(t,e={}){return Number(fr(t,e))}function AE(t,e={}){let n=Wr(t);return e.size&&(er(n,{size:e.size}),n=Zn(n,{dir:"right"})),new TextDecoder().decode(n)}const GN=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wr(t,e={}){return typeof t=="number"||typeof t=="bigint"?re(t,e):typeof t=="string"?Nd(t,e):typeof t=="boolean"?IE(t,e):cn(t,e)}function IE(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(er(n,{size:e.size}),fa(n,{size:e.size})):n}function cn(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=GN[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(er(r,{size:e.size}),fa(r,{dir:"right",size:e.size})):r}function re(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new _E({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?fa(a,{size:r}):a}const YN=new TextEncoder;function Nd(t,e={}){const n=YN.encode(t);return cn(n,e)}const ZN=new TextEncoder;function xd(t,e={}){return typeof t=="number"||typeof t=="bigint"?XN(t,e):typeof t=="boolean"?JN(t,e):fi(t)?Wr(t,e):SE(t,e)}function JN(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(er(n,{size:e.size}),fa(n,{size:e.size})):n}const Yr={zero:48,nine:57,A:65,F:70,a:97,f:102};function Om(t){if(t>=Yr.zero&&t<=Yr.nine)return t-Yr.zero;if(t>=Yr.A&&t<=Yr.F)return t-(Yr.A-10);if(t>=Yr.a&&t<=Yr.f)return t-(Yr.a-10)}function Wr(t,e={}){let n=t;e.size&&(er(n,{size:e.size}),n=fa(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=Om(r.charCodeAt(a++)),l=Om(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new W(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function XN(t,e){const n=re(t,e);return Wr(n)}function SE(t,e={}){const n=ZN.encode(t);return typeof e.size=="number"?(er(n,{size:e.size}),fa(n,{dir:"right",size:e.size})):n}const Rl=BigInt(2**32-1),Rm=BigInt(32);function QN(t,e=!1){return e?{h:Number(t&Rl),l:Number(t>>Rm&Rl)}:{h:Number(t>>Rm&Rl)|0,l:Number(t&Rl)|0}}function ex(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=QN(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const tx=(t,e,n)=>t<<n|e>>>32-n,nx=(t,e,n)=>e<<n|t>>>32-n,rx=(t,e,n)=>e<<n-32|t>>>64-n,sx=(t,e,n)=>t<<n-32|e>>>64-n,vo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ix(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ju(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ea(t,...e){if(!ix(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function hY(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ju(t.outputLen),ju(t.blockLen)}function Hu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NE(t,e){ea(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ox(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ic(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function yh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ar(t,e){return t<<32-e|t>>>e}const ax=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cx(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function lx(t){for(let e=0;e<t.length;e++)t[e]=cx(t[e]);return t}const Pm=ax?t=>t:lx;function ux(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function R0(t){return typeof t=="string"&&(t=ux(t)),ea(t),t}function fY(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ea(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let xE=class{};function TE(t){const e=r=>t().update(R0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function gY(t=32){if(vo&&typeof vo.getRandomValues=="function")return vo.getRandomValues(new Uint8Array(t));if(vo&&typeof vo.randomBytes=="function")return Uint8Array.from(vo.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const dx=BigInt(0),Ca=BigInt(1),hx=BigInt(2),fx=BigInt(7),px=BigInt(256),gx=BigInt(113),OE=[],RE=[],PE=[];for(let t=0,e=Ca,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],OE.push(2*(5*r+n)),RE.push((t+1)*(t+2)/2%64);let s=dx;for(let i=0;i<7;i++)e=(e<<Ca^(e>>fx)*gx)%px,e&hx&&(s^=Ca<<(Ca<<BigInt(i))-Ca);PE.push(s)}const kE=ex(PE,!0),mx=kE[0],yx=kE[1],km=(t,e,n)=>n>32?rx(t,e,n):tx(t,e,n),Dm=(t,e,n)=>n>32?sx(t,e,n):nx(t,e,n);function bx(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=km(l,u,1)^n[a],h=Dm(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=RE[o],c=km(s,i,a),l=Dm(s,i,a),u=OE[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=mx[r],t[1]^=yx[r]}Ic(n)}let wx=class DE extends xE{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ju(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ox(this.state)}clone(){return this._cloneInto()}keccak(){Pm(this.state32),bx(this.state32,this.rounds),Pm(this.state32),this.posOut=0,this.pos=0}update(e){Hu(this),e=R0(e),ea(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Hu(this,!1),ea(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ju(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(NE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ic(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new DE(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Ex=(t,e,n)=>TE(()=>new wx(e,t,n)),vx=Ex(1,136,256/8);function ll(t,e){const n=e||"hex",r=vx(fi(t,{strict:!1})?xd(t):t);return n==="bytes"?r:wr(r)}const Cx=t=>ll(xd(t));function _x(t){return Cx(t)}function Ax(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new W("Unable to normalize signature.");return s}const Ix=t=>{const e=typeof t=="string"?t:q6(t);return Ax(e)};function $E(t){return _x(Ix(t))}const P0=$E;let _n=class extends W{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Td=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const bh=new Td(8192);function ul(t,e){if(bh.has(`${t}.${e}`))return bh.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=ll(SE(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return bh.set(`${t}.${e}`,i),i}function Ui(t,e){if(!Ft(t,{strict:!1}))throw new _n({address:t});return ul(t,e)}const Sx=/^0x[a-fA-F0-9]{40}$/,wh=new Td(8192);function Ft(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(wh.has(r))return wh.get(r);const s=Sx.test(t)?t.toLowerCase()===t?!0:n?ul(t)===t:!0:!1;return wh.set(r,s),s}function ta(t){return typeof t[0]=="string"?Ns(t):Nx(t)}function Nx(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ns(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Sc(t,e,n,{strict:r}={}){return fi(t,{strict:!1})?xx(t,e,n,{strict:r}):LE(t,e,n,{strict:r})}function UE(t,e){if(typeof e=="number"&&e>0&&e>yt(t)-1)throw new vE({offset:e,position:"start",size:yt(t)})}function BE(t,e,n){if(typeof e=="number"&&typeof n=="number"&&yt(t)!==n-e)throw new vE({offset:n,position:"end",size:yt(t)})}function LE(t,e,n,{strict:r}={}){UE(t,e);const s=t.slice(e,n);return r&&BE(s,e,n),s}function xx(t,e,n,{strict:r}={}){UE(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&BE(s,e,n),s}const bY=/^(.*)\[([0-9]*)\]$/,wY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Tx=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function ME(t,e){if(t.length!==e.length)throw new UN({expectedLength:t.length,givenLength:e.length});const n=Ox({params:t,values:e}),r=D0(n);return r.length===0?"0x":r}function Ox({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(k0({param:t[r],value:e[r]}));return n}function k0({param:t,value:e}){const n=$0(t.type);if(n){const[r,s]=n;return Px(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Bx(e,{param:t});if(t.type==="address")return Rx(e);if(t.type==="bool")return Dx(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Tx.exec(t.type)??[];return $x(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return kx(e,{param:t});if(t.type==="string")return Ux(e);throw new FN(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function D0(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=yt(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(re(e+s,{size:32})),r.push(a),s+=yt(a)):n.push(a)}return ta([...n,...r])}function Rx(t){if(!Ft(t))throw new _n({address:t});return{dynamic:!1,encoded:si(t.toLowerCase())}}function Px(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new HN(t);if(!r&&t.length!==e)throw new DN({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=k0({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=D0(i);if(r){const a=re(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?ta([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:ta(i.map(({encoded:o})=>o))}}function kx(t,{param:e}){const[,n]=e.type.split("bytes"),r=yt(t);if(!n){let s=t;return r%32!==0&&(s=si(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:ta([si(re(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new $N({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:si(t,{dir:"right"})}}function Dx(t){if(typeof t!="boolean")throw new W(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:si(IE(t))}}function $x(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new _E({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:re(t,{size:32,signed:e})}}function Ux(t){const e=Nd(t),n=Math.ceil(yt(e)/32),r=[];for(let s=0;s<n;s++)r.push(si(Sc(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ta([si(re(yt(e),{size:32})),...r])}}function Bx(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=k0({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?D0(r):ta(r.map(({encoded:s})=>s))}}function $0(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const U0=t=>Sc($E(t),0,4);function B0(t){const{abi:e,args:n=[],name:r}=t,s=fi(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?U0(a)===r:a.type==="event"?P0(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?tp(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=FE(a.inputs,o.inputs,n);if(l)throw new MN({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function tp(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ft(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>tp(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>tp(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function FE(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return FE(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ft(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ft(n[r],{strict:!1}):!1)return o}}function Lx(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}function Kr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const $m="/docs/contract/encodeFunctionData";function Mx(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=B0({abi:e,args:n,name:r});if(!i)throw new Fu(r,{docsPath:$m});s=i}if(s.type!=="function")throw new Fu(void 0,{docsPath:$m});return{abi:[s],functionName:U0(hi(s))}}function Od(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Mx(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?ME(s.inputs,e??[]):void 0;return Ns([i,o??"0x"])}const Fx={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},jx={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Hx={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Um extends W{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class jE extends W{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class zx extends W{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Wx={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new zx({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new jE({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Um({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Um({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function L0(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Wx);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function qx(t,e={}){typeof e.size<"u"&&er(t,{size:e.size});const n=cn(t,e);return fr(n,e)}function Vx(t,e={}){let n=t;if(typeof e.size<"u"&&(er(n,{size:e.size}),n=Zn(n)),n.length>1||n[0]>1)throw new qN(n);return!!n[0]}function ys(t,e={}){typeof e.size<"u"&&er(t,{size:e.size});const n=cn(t,e);return pi(n,e)}function Kx(t,e={}){let n=t;return typeof e.size<"u"&&(er(n,{size:e.size}),n=Zn(n,{dir:"right"})),new TextDecoder().decode(n)}function Rd(t,e){const n=typeof e=="string"?Wr(e):e,r=L0(n);if(yt(n)===0&&t.length>0)throw new Sd;if(yt(e)&&yt(e)<32)throw new yE({data:typeof e=="string"?e:cn(e),params:t,size:yt(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Ho(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Ho(t,e,{staticPosition:n}){const r=$0(e.type);if(r){const[s,i]=r;return Yx(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Qx(t,e,{staticPosition:n});if(e.type==="address")return Gx(t);if(e.type==="bool")return Zx(t);if(e.type.startsWith("bytes"))return Jx(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Xx(t,e);if(e.type==="string")return eT(t,{staticPosition:n});throw new jN(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Bm=32,np=32;function Gx(t){const e=t.readBytes(32);return[ul(cn(LE(e,-20))),32]}function Yx(t,e,{length:n,staticPosition:r}){if(!n){const o=ys(t.readBytes(np)),a=r+o,c=a+Bm;t.setPosition(a);const l=ys(t.readBytes(Bm)),u=Nc(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Ho(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(Nc(e)){const o=ys(t.readBytes(np)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Ho(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Ho(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Zx(t){return[Vx(t.readBytes(32),{size:32}),32]}function Jx(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ys(t.readBytes(32));t.setPosition(n+o);const a=ys(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[cn(c),32]}return[cn(t.readBytes(Number.parseInt(s,10),32)),32]}function Xx(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?qx(s,{signed:n}):ys(s,{signed:n}),32]}function Qx(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Nc(e)){const o=ys(t.readBytes(np)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Ho(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Ho(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function eT(t,{staticPosition:e}){const n=ys(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ys(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Kx(Zn(i));return t.setPosition(e+32),[o,32]}function Nc(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Nc);const n=$0(t.type);return!!(n&&Nc({...t,type:n[1]}))}function tT(t){const{abi:e,data:n}=t,r=Sc(n,0,4);if(r==="0x")throw new Sd;const i=[...e||[],jx,Hx].find(o=>o.type==="error"&&r===U0(hi(o)));if(!i)throw new bE(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Rd(i.inputs,Sc(n,4)):void 0,errorName:i.name}}const Jn=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function HE({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Jn(e[i]):e[i]}`).join(", ")})`}const nT={gwei:9,wei:18},rT={ether:-9,wei:9},sT={ether:-18,gwei:-9};function po(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function M0(t,e="wei"){return po(t,nT[e])}function vn(t,e="wei"){return po(t,rT[e])}class iT extends W{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class oT extends W{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Lm(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function aT(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Lm(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Lm(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function dl(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class cT extends W{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class lT extends W{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class uT extends W{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",dl(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class dT extends W{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class hT extends W{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=dl({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${M0(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${vn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${vn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${vn(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class zE extends W{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class WE extends W{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class EY extends W{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class fT extends W{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const pT=t=>t,F0=t=>t;class gT extends W{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var m;const p=n?Kr(n):void 0;let g=dl({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${M0(h)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${vn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${vn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${vn(l)} gwei`,nonce:u});f&&(g+=`
${aT(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class qE extends W{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=B0({abi:n,args:r,name:o}),l=c?HE({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?hi(c,{includeName:!0}):void 0,d=dl({address:s&&pT(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class mT extends W{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=tT({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=Fx[f]}else{const f=u?hi(u,{includeName:!0}):void 0,p=u&&h?HE({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof bE&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class yT extends W{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class bT extends W{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class j0 extends W{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Za extends W{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${F0(o)}`,e&&`Request body: ${Jn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class H0 extends W{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${F0(r)}`,`Request body: ${Jn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Mm extends W{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${F0(n)}`,`Request body: ${Jn(e)}`],name:"TimeoutError"})}}const wT=-1;class Nn extends W{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof H0?e.code:n??wT}}class Mn extends Nn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class xc extends Nn{constructor(e){super(e,{code:xc.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(xc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Tc extends Nn{constructor(e){super(e,{code:Tc.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Tc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Oc extends Nn{constructor(e,{method:n}={}){super(e,{code:Oc.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Oc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Rc extends Nn{constructor(e){super(e,{code:Rc.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Rc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class no extends Nn{constructor(e){super(e,{code:no.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(no,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class na extends Nn{constructor(e){super(e,{code:na.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(na,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Pc extends Nn{constructor(e){super(e,{code:Pc.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Pc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ii extends Nn{constructor(e){super(e,{code:ii.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ii,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ra extends Nn{constructor(e){super(e,{code:ra.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ra,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Bi extends Nn{constructor(e,{method:n}={}){super(e,{code:Bi.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Bi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class sa extends Nn{constructor(e){super(e,{code:sa.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(sa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class kc extends Nn{constructor(e){super(e,{code:kc.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(kc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class lt extends Mn{constructor(e){super(e,{code:lt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(lt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Dc extends Mn{constructor(e){super(e,{code:Dc.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Dc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class $c extends Mn{constructor(e,{method:n}={}){super(e,{code:$c.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty($c,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Uc extends Mn{constructor(e){super(e,{code:Uc.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Uc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Bc extends Mn{constructor(e){super(e,{code:Bc.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Bc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class qr extends Mn{constructor(e){super(e,{code:qr.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(qr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Lc extends Mn{constructor(e){super(e,{code:Lc.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Lc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Mc extends Mn{constructor(e){super(e,{code:Mc.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Mc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Fc extends Mn{constructor(e){super(e,{code:Fc.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Fc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class jc extends Mn{constructor(e){super(e,{code:jc.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Hc extends Mn{constructor(e){super(e,{code:Hc.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Hc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class zc extends Mn{constructor(e){super(e,{code:zc.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Wc extends Mn{constructor(e){super(e,{code:Wc.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Wc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ET extends Nn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const vT=3;function zu(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof j0?t:t instanceof W?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof Sd?new yT({functionName:i}):[vT,no.code].includes(c)&&(l||u||d||h)||c===na.code&&u==="execution reverted"&&l?new mT({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof H0?u:h??d}):t;return new qE(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function CT(t){const e=ll(`0x${t.substring(4)}`).substring(26);return ul(`0x${e}`)}const _T="modulepreload",AT=function(t){return"/js/"+t},Fm={},Ct=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=AT(c),c in Fm)return;Fm[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":_T,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function IT({hash:t,signature:e}){const n=fi(t)?t:wr(t),{secp256k1:r}=await Ct(async()=>{const{secp256k1:o}=await import("./secp256k1.chunk.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=jm(f);return new r.Signature(fr(l),fr(u)).addRecoveryBit(p)}const o=fi(e)?e:wr(e);if(yt(o)!==65)throw new Error("invalid signature length");const a=pi(`0x${o.slice(130)}`),c=jm(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function jm(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function ST({hash:t,signature:e}){return CT(await IT({hash:t,signature:e}))}function gi(t,e="hex"){const n=VE(t),r=L0(new Uint8Array(n.length));return n.encode(r),e==="hex"?cn(r.bytes):r.bytes}function VE(t){return Array.isArray(t)?NT(t.map(e=>VE(e))):xT(t)}function NT(t){const e=t.reduce((s,i)=>s+i.length,0),n=KE(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function xT(t){const e=typeof t=="string"?Wr(t):t,n=KE(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function KE(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new W("Length is too large.")}function TT(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ll(Ns(["0x05",gi([e?re(e):"0x",s,n?re(n):"0x"])]));return r==="bytes"?Wr(i):i}async function GE(t){const{authorization:e,signature:n}=t;return ST({hash:TT(e),signature:n??e})}class OT extends W{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=dl({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${M0(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${vn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${vn(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${vn(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Li extends W{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Li,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Li,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ro extends W{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${vn(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(ro,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class rp extends W{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${vn(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(rp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class sp extends W{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(sp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class ip extends W{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(ip,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class op extends W{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(op,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class ap extends W{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(ap,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class cp extends W{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(cp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class lp extends W{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(lp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class up extends W{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(up,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class qc extends W{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${vn(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${vn(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(qc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Pd extends W{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function z0(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof W?t.walk(s=>(s==null?void 0:s.code)===Li.code):t;return r instanceof W?new Li({cause:t,message:r.details}):Li.nodeMessage.test(n)?new Li({cause:t,message:t.details}):ro.nodeMessage.test(n)?new ro({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rp.nodeMessage.test(n)?new rp({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):sp.nodeMessage.test(n)?new sp({cause:t,nonce:e==null?void 0:e.nonce}):ip.nodeMessage.test(n)?new ip({cause:t,nonce:e==null?void 0:e.nonce}):op.nodeMessage.test(n)?new op({cause:t,nonce:e==null?void 0:e.nonce}):ap.nodeMessage.test(n)?new ap({cause:t}):cp.nodeMessage.test(n)?new cp({cause:t,gas:e==null?void 0:e.gas}):lp.nodeMessage.test(n)?new lp({cause:t,gas:e==null?void 0:e.gas}):up.nodeMessage.test(n)?new up({cause:t}):qc.nodeMessage.test(n)?new qc({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Pd({cause:t})}function RT(t,{docsPath:e,...n}){const r=(()=>{const s=z0(t,n);return s instanceof Pd?t:s})();return new OT(r,{docsPath:e,...n})}function W0(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}function q0(t,e){return({exclude:n,format:r})=>({exclude:n,format:(s,i)=>{const o=e(s,i);if(n)for(const a of n)delete o[a];return{...o,...r(s,i)}},type:t})}const PT={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function V0(t,e){const n={};return typeof t.authorizationList<"u"&&(n.authorizationList=kT(t.authorizationList)),typeof t.accessList<"u"&&(n.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(n.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?n.blobs=t.blobs.map(r=>cn(r)):n.blobs=t.blobs),typeof t.data<"u"&&(n.data=t.data),t.account&&(n.from=t.account.address),typeof t.from<"u"&&(n.from=t.from),typeof t.gas<"u"&&(n.gas=re(t.gas)),typeof t.gasPrice<"u"&&(n.gasPrice=re(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=re(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(n.maxFeePerGas=re(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=re(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(n.nonce=re(t.nonce)),typeof t.to<"u"&&(n.to=t.to),typeof t.type<"u"&&(n.type=PT[t.type]),typeof t.value<"u"&&(n.value=re(t.value)),n}function kT(t){return t.map(e=>({address:e.address,r:e.r?re(BigInt(e.r)):e.r,s:e.s?re(BigInt(e.s)):e.s,chainId:re(e.chainId),nonce:re(e.nonce),...typeof e.yParity<"u"?{yParity:re(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:re(e.v)}:{}}))}function Hm(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new Tm({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Tm({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function DT(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=re(e)),n!==void 0&&(o.nonce=re(n)),r!==void 0&&(o.state=Hm(r)),s!==void 0){if(o.state)throw new oT;o.stateDiff=Hm(s)}return o}function YE(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ft(n,{strict:!1}))throw new _n({address:n});if(e[n])throw new iT({address:n});e[n]=DT(r)}return e}const kd=2n**256n-1n;function Dd(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Kr(e):void 0;if(o&&!Ft(o.address))throw new _n({address:o.address});if(i&&!Ft(i))throw new _n({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new cT;if(r&&r>kd)throw new ro({maxFeePerGas:r});if(s&&r&&s>r)throw new qc({maxFeePerGas:r,maxPriorityFeePerGas:s})}class $T extends W{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class K0 extends W{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class UT extends W{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${vn(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ZE extends W{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const JE={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function $d(t,e){const n={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?pi(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?pi(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?JE[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(n.authorizationList=LT(t.authorizationList)),n.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const BT=q0("transaction",$d);function LT(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function XE(t,e){const n=(t.transactions??[]).map(r=>typeof r=="string"?r:$d(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:n,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const MT=q0("block",XE);async function Vc(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){var l,u,d;const i=s??!1,o=n!==void 0?re(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new ZE({blockHash:e,blockNumber:n});return(((d=(u=(l=t.chain)==null?void 0:l.formatters)==null?void 0:u.block)==null?void 0:d.format)||XE)(a,"getBlock")}async function QE(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function vY(t,e){return ev(t,e)}async function ev(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await et(t,Vc,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return fr(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):et(t,Vc,"getBlock")({}),et(t,QE,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new K0;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function CY(t,e){return dp(t,e)}async function dp(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new $T;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await et(t,Vc,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new K0;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await ev(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await et(t,QE,"getGasPrice")({}))}}async function FT(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?re(r):n]},{dedupe:!!r});return pi(s)}function G0(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Wr(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>cn(i))}function Y0(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Wr(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Wr(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>cn(o))}function jT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function HT(t,e,n){return t&e^~t&n}function zT(t,e,n){return t&e^t&n^e&n}let WT=class extends xE{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=yh(this.buffer)}update(e){Hu(this),e=R0(e),ea(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=yh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Hu(this),NE(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ic(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;jT(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=yh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Os=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qT=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rs=new Uint32Array(64);let VT=class extends WT{constructor(e=32){super(64,e,8,!1),this.A=Os[0]|0,this.B=Os[1]|0,this.C=Os[2]|0,this.D=Os[3]|0,this.E=Os[4]|0,this.F=Os[5]|0,this.G=Os[6]|0,this.H=Os[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Rs[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Rs[d-15],f=Rs[d-2],p=Ar(h,7)^Ar(h,18)^h>>>3,g=Ar(f,17)^Ar(f,19)^f>>>10;Rs[d]=g+Rs[d-7]+p+Rs[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ar(a,6)^Ar(a,11)^Ar(a,25),f=u+h+HT(a,c,l)+qT[d]+Rs[d]|0,g=(Ar(r,2)^Ar(r,13)^Ar(r,22))+zT(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ic(Rs)}destroy(){this.set(0,0,0,0,0,0,0,0),Ic(this.buffer)}};const KT=TE(()=>new VT),GT=KT;function YT(t,e){return GT(fi(t,{strict:!1})?xd(t):t)}function ZT(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=YT(e);return s.set([n],0),r==="bytes"?s:cn(s)}function tv(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(ZT({commitment:i,to:r,version:n}));return s}const zm=6,nv=32,Z0=4096,rv=nv*Z0,Wm=rv*zm-1-1*Z0*zm,sv=1;class JT extends W{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class iv extends W{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class XT extends W{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class QT extends W{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${sv}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function e3(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?Wr(t.data):t.data,r=yt(n);if(!r)throw new iv;if(r>Wm)throw new JT({maxSize:Wm,size:r});const s=[];let i=!0,o=0;for(;i;){const a=L0(new Uint8Array(rv));let c=0;for(;c<Z0;){const l=n.slice(o,o+(nv-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>cn(a.bytes))}function ov(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??e3({data:e,to:r}),i=t.commitments??G0({blobs:s,kzg:n,to:r}),o=t.proofs??Y0({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function av(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new uT({transaction:t})}async function cv(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return pi(e)}const lv=["blobVersionedHashes","chainId","fees","gas","nonce","type"],qm=new Map;async function J0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=lv,type:u}=e,d=n&&Kr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await et(t,Vc,"getBlock")({blockTag:"latest"}),f)}let g;async function m(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await et(t,cv,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await m();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await et(t,FT,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=G0({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const _=tv({commitments:w,to:"hex"});h.blobVersionedHashes=_}if(l.includes("sidecars")){const _=Y0({blobs:r,commitments:w,kzg:o}),b=ov({blobs:r,commitments:w,proofs:_,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=av(h)}catch{let w=qm.get(t.uid);if(typeof w>"u"){const _=await p();w=typeof(_==null?void 0:_.baseFeePerGas)=="bigint",qm.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:_,maxPriorityFeePerGas:b}=await dp(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new UT({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=_}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new K0;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:_}=await dp(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=_}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await et(t,uv,"estimateGas")({...h,account:d,prepare:(d==null?void 0:d.type)==="local"?[]:["blobVersionedHashes"]})),Dd(h),delete h.parameters,h}async function uv(t,e){var o,a,c;const{account:n=t.account,prepare:r=!0}=e,s=n?Kr(n):void 0,i=(()=>{if(Array.isArray(r))return r;if((s==null?void 0:s.type)!=="local")return["blobVersionedHashes"]})();try{const{accessList:l,authorizationList:u,blobs:d,blobVersionedHashes:h,blockNumber:f,blockTag:p,data:g,gas:m,gasPrice:w,maxFeePerBlobGas:_,maxFeePerGas:b,maxPriorityFeePerGas:A,nonce:C,value:S,stateOverride:N,...D}=r?await J0(t,{...e,parameters:i}):e,L=(typeof f=="bigint"?re(f):void 0)||p,M=YE(N),U=await(async()=>{if(D.to)return D.to;if(u&&u.length>0)return await GE({authorization:u[0]}).catch(()=>{throw new W("`to` is required. Could not infer from `authorizationList`")})})();Dd(e);const R=(c=(a=(o=t.chain)==null?void 0:o.formatters)==null?void 0:a.transactionRequest)==null?void 0:c.format,y=(R||V0)({...W0(D,{format:R}),account:s,accessList:l,authorizationList:u,blobs:d,blobVersionedHashes:h,data:g,gas:m,gasPrice:w,maxFeePerBlobGas:_,maxFeePerGas:b,maxPriorityFeePerGas:A,nonce:C,to:U,value:S},"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:M?[y,L??t.experimental_blockTag??"latest",M]:L?[y,L]:[y]}))}catch(l){throw RT(l,{...e,account:s,chain:t.chain})}}function t3(t,e){if(!Ft(t,{strict:!1}))throw new _n({address:t});if(!Ft(e,{strict:!1}))throw new _n({address:e});return t.toLowerCase()===e.toLowerCase()}const Vm="/docs/contract/decodeEventLog";function n3(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new BN({docsPath:Vm});const c=e.find(g=>g.type==="event"&&o===P0(hi(g)));if(!(c&&"name"in c)||c.type!=="event")throw new wE(o,{docsPath:Vm});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,m)=>[g,m]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[m,w]=f[g],_=a[g];if(!_)throw new EE({abiItem:c,param:m});h[d?w:m.name||w]=r3({param:m,value:_})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=Rd(p,n);if(g)if(d)for(let m=0;m<u.length;m++)h[m]=h[m]??g.shift();else for(let m=0;m<p.length;m++)h[p[m].name]=g[m]}catch(g){if(i)throw g instanceof yE||g instanceof jE?new ep({abiItem:c,data:n,params:p,size:yt(n)}):g}else if(i)throw new ep({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function r3({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Rd([t],e)||[])[0]}function s3(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===P0(u));if(!c)return null;const l=n3({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!i3({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof wE)return null;if(c instanceof ep||c instanceof EE){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function i3(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?t3(o,a):i.type==="string"||i.type==="bytes"?ll(xd(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function dv(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}const Eh="/docs/contract/decodeFunctionResult";function X0(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=B0({abi:e,args:n,name:r});if(!a)throw new Fu(r,{docsPath:Eh});i=a}if(i.type!=="function")throw new Fu(void 0,{docsPath:Eh});if(!i.outputs)throw new LN(i.name,{docsPath:Eh});const o=Rd(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const o3="0.1.1";function a3(){return o3}let pa=class hp extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof hp){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof hp&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${a3()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return hv(this,e)}};function hv(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?hv(t.cause,e):e?null:t}function Q0(t,e){if(ia(t)>e)throw new b3({givenSize:ia(t),maxSize:e})}function c3(t,e){if(typeof e=="number"&&e>0&&e>ia(t)-1)throw new gv({offset:e,position:"start",size:ia(t)})}function l3(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ia(t)!==n-e)throw new gv({offset:n,position:"end",size:ia(t)})}function fv(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new w3({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const u3="#__bigint";function d3(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+u3:s,n)}const h3=new TextEncoder,f3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function p3(t,e={}){const{strict:n=!1}=e;if(!t)throw new Km(t);if(typeof t!="string")throw new Km(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new Gm(t);if(!t.startsWith("0x"))throw new Gm(t)}function IY(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function SY(t){return t instanceof Uint8Array?fp(t):Array.isArray(t)?fp(new Uint8Array(t)):t}function NY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Q0(n,e.size),pv(n,e.size)):n}function fp(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=f3[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Q0(r,e.size),g3(r,e.size)):r}function us(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new y3({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?pv(c,r):c}function xY(t,e={}){return fp(h3.encode(t),e)}function pv(t,e){return fv(t,{dir:"left",size:e})}function g3(t,e){return fv(t,{dir:"right",size:e})}function TY(t,e,n,r={}){const{strict:s}=r;c3(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&l3(i,e,n),i}function ia(t){return Math.ceil((t.length-2)/2)}function m3(t,e={}){const{signed:n}=e;e.size&&Q0(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function OY(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:m3(t,e))}function RY(t,e={}){const{strict:n=!1}=e;try{return p3(t,{strict:n}),!0}catch{return!1}}let y3=class extends pa{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Km=class extends pa{constructor(e){super(`Value \`${typeof e=="object"?d3(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Gm=class extends pa{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},b3=class extends pa{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},gv=class extends pa{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},w3=class extends pa{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function E3(t){return{address:t.address,amount:us(t.amount),index:us(t.index),validatorIndex:us(t.validatorIndex)}}function v3(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:us(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:us(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:us(t.gasLimit)},...typeof t.number=="bigint"&&{number:us(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:us(t.prevRandao)},...typeof t.time=="bigint"&&{time:us(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(E3)}}}const pp=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],LY=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],mv=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],MY=[...mv,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],FY=[...mv,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],jY=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],HY=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],zY=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],WY=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Pl=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],C3="0x82ad56cb",_3="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",A3="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",qY="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",yv="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class gp extends W{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class I3 extends W{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} â€“ ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} â€“ ${e.name}`],name:"ChainMismatchError"})}}class S3 extends W{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class bv extends W{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Ud extends W{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const vh="/docs/contract/encodeDeployData";function wv(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new kN({docsPath:vh});if(!("inputs"in s))throw new xm({docsPath:vh});if(!s.inputs||s.inputs.length===0)throw new xm({docsPath:vh});const i=ME(s.inputs,n);return Ns([r,i])}function Ev({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new gp({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new gp({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function N3(t,{docsPath:e,...n}){const r=(()=>{const s=z0(t,n);return s instanceof Pd?t:s})();return new gT(r,{docsPath:e,...n})}function vv(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Ch=new Map;function Cv({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>Ch.delete(e),a=()=>c().map(({args:u})=>u),c=()=>Ch.get(e)||[],l=u=>Ch.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=vv();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function _v(t,e){var R,$,y,v;const{account:n=t.account,authorizationList:r,batch:s=!!((R=t.batch)!=null&&R.multicall),blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:_,nonce:b,to:A,value:C,stateOverride:S,...N}=e,D=n?Kr(n):void 0;if(u&&(h||f))throw new W("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new W("Cannot provide both `code` & `to` as parameters.");const O=u&&d,L=h&&f&&A&&d,M=O||L,U=O?Av({code:u,data:d}):L?O3({data:d,factory:h,factoryData:f,to:A}):d;try{Dd(e);const k=(typeof i=="bigint"?re(i):void 0)||o,T=l?v3(l):void 0,P=YE(S),j=(v=(y=($=t.chain)==null?void 0:$.formatters)==null?void 0:y.transactionRequest)==null?void 0:v.format,Q=(j||V0)({...W0(N,{format:j}),accessList:a,account:D,authorizationList:r,blobs:c,data:U,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:_,nonce:b,to:M?void 0:A,value:C},"call");if(s&&x3({request:Q})&&!P&&!T)try{return await T3(t,{...Q,blockNumber:i,blockTag:o})}catch(ae){if(!(ae instanceof bv)&&!(ae instanceof gp))throw ae}const K=(()=>{const ae=[Q,k];return P&&T?[...ae,P,T]:P?[...ae,P]:T?[...ae,{},T]:ae})(),G=await t.request({method:"eth_call",params:K});return G==="0x"?{data:void 0}:{data:G}}catch(x){const k=R3(x),{offchainLookup:T,offchainLookupSignature:P}=await Ct(async()=>{const{offchainLookup:j,offchainLookupSignature:H}=await import("./ccip.chunk.js");return{offchainLookup:j,offchainLookupSignature:H}},__vite__mapDeps([0,1]));if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===P&&A)return{data:await T(t,{data:k,to:A})};throw M&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new bT({factory:h}):N3(x,{...e,account:D,chain:t.chain})}}function x3({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(C3)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function T3(t,e){var g;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,l=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return Ev({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new bv})(),d=(typeof i=="bigint"?re(i):void 0)||o,{schedule:h}=Cv({id:`${t.uid}.${d}`,wait:s,shouldSplitBatch(m){return m.reduce((_,{data:b})=>_+(b.length-2),0)>n*2},fn:async m=>{const w=m.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),_=Od({abi:pp,args:[w],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{...l===null?{data:Av({code:yv,data:_})}:{to:l,data:_}},d]});return X0({abi:pp,args:[w],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:p}]=await h({data:a,to:c});if(!p)throw new j0({data:f});return f==="0x"?{data:void 0}:{data:f}}function Av(t){const{code:e,data:n}=t;return wv({abi:pE(["constructor(bytes, bytes)"]),bytecode:_3,args:[e,n]})}function O3(t){const{data:e,factory:n,factoryData:r,to:s}=t;return wv({abi:pE(["constructor(address, bytes, address, bytes)"]),bytecode:A3,args:[s,e,n,r]})}function R3(t){var n;if(!(t instanceof W))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Iv(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Od({abi:n,args:s,functionName:i});try{const{data:c}=await et(t,_v,"call")({...o,data:a,to:r});return X0({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw zu(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}const _h=new Map,Ym=new Map;let P3=0;function Wu(t,e,n){const r=++P3,s=()=>_h.get(t)||[],i=()=>{const u=s();_h.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=Ym.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(_h.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&Ym.set(t,l),o}async function qu(t){return new Promise(e=>setTimeout(e,t))}function Sv(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await qu(c);const l=async()=>{s&&(await t({unpoll:i}),await qu(r),l())};l()})(),i}const k3=new Map,D3=new Map;function $3(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,k3),r=e(t,D3);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function U3(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=$3(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const B3=t=>`blockNumber.${t}`;async function L3(t,{cacheTime:e=t.cacheTime}={}){const n=await U3(()=>t.request({method:"eth_blockNumber"}),{cacheKey:B3(t.uid),cacheTime:e});return BigInt(n)}async function M3(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>dv(i));return!("abi"in e)||!e.abi?s:s3({abi:e.abi,logs:s,strict:n})}async function F3(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class eg extends W{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Ah extends W{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function j3({chain:t,currentChainId:e}){if(!t)throw new S3;if(e!==t.id)throw new I3({chain:t,currentChainId:e})}function H3(t,{docsPath:e,...n}){const r=(()=>{const s=z0(t,n);return s instanceof Pd?t:s})();return new hT(r,{docsPath:e,...n})}async function z3(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Ih=new Td(128);async function Nv(t,e){var _,b,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...m}=e;if(typeof n>"u")throw new eg({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Kr(n):null;try{Dd(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await GE({authorization:i[0]}).catch(()=>{throw new W("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let N;r!==null&&(N=await et(t,cv,"getChainId")({}),j3({currentChainId:N,chain:r}));const D=(A=(b=(_=t.chain)==null?void 0:_.formatters)==null?void 0:b.transactionRequest)==null?void 0:A.format,L=(D||V0)({...W0(m,{format:D}),accessList:s,account:w,authorizationList:i,blobs:o,chainId:N,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:S,type:p,value:g},"sendTransaction"),M=Ih.get(t.uid),U=M?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:U,params:[L]},{retryCount:0})}catch(R){if(M===!1)throw R;const $=R;if($.name==="InvalidInputRpcError"||$.name==="InvalidParamsRpcError"||$.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[L]},{retryCount:0}).then(y=>(Ih.set(t.uid,!0),y)).catch(y=>{const v=y;throw v.name==="MethodNotFoundRpcError"||v.name==="MethodNotSupportedRpcError"?(Ih.set(t.uid,!1),$):v});throw $}}if((w==null?void 0:w.type)==="local"){const N=await et(t,J0,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:w.nonceManager,parameters:[...lv,"sidecars"],type:p,value:g,...m,to:S}),D=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,O=await w.signTransaction(N,{serializer:D});return await et(t,z3,"sendRawTransaction")({serializedTransaction:O})}throw(w==null?void 0:w.type)==="smart"?new Ah({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ah({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(S){throw S instanceof Ah?S:H3(S,{...e,account:w,chain:e.chain||void 0})}}async function Vu(t,e){return Vu.internal(t,Nv,"sendTransaction",e)}(function(t){async function e(n,r,s,i){const{abi:o,account:a=n.account,address:c,args:l,dataSuffix:u,functionName:d,...h}=i;if(typeof a>"u")throw new eg({docsPath:"/docs/contract/writeContract"});const f=a?Kr(a):null,p=Od({abi:o,args:l,functionName:d});try{return await et(n,r,s)({data:`${p}${u?u.replace("0x",""):""}`,to:c,account:f,...h})}catch(g){throw zu(g,{abi:o,address:c,args:l,docsPath:"/docs/contract/writeContract",functionName:d,sender:f==null?void 0:f.address})}}t.internal=e})(Vu||(Vu={}));function Ku(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await qu(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}const W3={"0x0":"reverted","0x1":"success"};function xv(t,e){const n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>dv(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?pi(t.transactionIndex):null,status:t.status?W3[t.status]:null,type:t.type?JE[t.type]||t.type:null};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}const q3=q0("transactionReceipt",xv),mp=256;let kl=mp,Dl;function Tv(t=11){if(!Dl||kl+t>mp*2){Dl="",kl=0;for(let e=0;e<mp;e++)Dl+=(256+Math.random()*256|0).toString(16).substring(1)}return Dl.substring(kl,kl+++t)}function Ov(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),u=t.pollingInterval??l,d=t.cacheTime??u,h=t.account?Kr(t.account):void 0,{config:f,request:p,value:g}=t.transport({account:h,chain:n,pollingInterval:u}),m={...f,...g},w={account:h,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:u,request:p,transport:m,type:o,uid:Tv(),...a?{experimental_blockTag:a}:{}};function _(b){return A=>{const C=A(b);for(const N in w)delete C[N];const S={...b,...C};return Object.assign(S,{extend:_(S)})}}return Object.assign(w,{extend:_(w)})}async function V3(t){const e=Lx(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function K3(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?re(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}function G3(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!Ft(s))throw new _n({address:s});if(r<0)throw new Ud({chainId:r})}tg(t)}function Y3(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new iv;for(const n of e){const r=yt(n),s=pi(Sc(n,0,1));if(r!==32)throw new XT({hash:n,size:r});if(s!==sv)throw new QT({hash:n,version:s})}}tg(t)}function tg(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new Ud({chainId:e});if(s&&!Ft(s))throw new _n({address:s});if(r&&r>kd)throw new ro({maxFeePerGas:r});if(n&&r&&n>r)throw new qc({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Z3(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new Ud({chainId:e});if(i&&!Ft(i))throw new _n({address:i});if(n||s)throw new W("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>kd)throw new ro({maxFeePerGas:r})}function J3(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!Ft(i))throw new _n({address:i});if(typeof e<"u"&&e<=0)throw new Ud({chainId:e});if(n||s)throw new W("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>kd)throw new ro({maxFeePerGas:r})}function Bd(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new dT({storageKey:s[i]});if(!Ft(r,{strict:!1}))throw new _n({address:r});e.push([r,s])}return e}function X3(t,e){const n=av(t);return n==="eip1559"?tO(t,e):n==="eip2930"?nO(t,e):n==="eip4844"?eO(t,e):n==="eip7702"?Q3(t,e):rO(t,e)}function Q3(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;G3(t);const h=Bd(u),f=sO(n);return Ns(["0x04",gi([re(r),i?re(i):"0x",l?re(l):"0x",c?re(c):"0x",s?re(s):"0x",o??"0x",a?re(a):"0x",d??"0x",h,f,...hl(t,e)])])}function eO(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;Y3(t);let h=t.blobVersionedHashes,f=t.sidecars;if(t.blobs&&(typeof h>"u"||typeof f>"u")){const b=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(S=>cn(S)),A=t.kzg,C=G0({blobs:b,kzg:A});if(typeof h>"u"&&(h=tv({commitments:C})),typeof f>"u"){const S=Y0({blobs:b,commitments:C,kzg:A});f=ov({blobs:b,commitments:C,proofs:S})}}const p=Bd(u),g=[re(n),s?re(s):"0x",l?re(l):"0x",c?re(c):"0x",r?re(r):"0x",i??"0x",o?re(o):"0x",d??"0x",p,a?re(a):"0x",h??[],...hl(t,e)],m=[],w=[],_=[];if(f)for(let b=0;b<f.length;b++){const{blob:A,commitment:C,proof:S}=f[b];m.push(A),w.push(C),_.push(S)}return Ns(["0x03",gi(f?[g,m,w,_]:g)])}function tO(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=t;tg(t);const d=Bd(l),h=[re(n),s?re(s):"0x",c?re(c):"0x",a?re(a):"0x",r?re(r):"0x",i??"0x",o?re(o):"0x",u??"0x",d,...hl(t,e)];return Ns(["0x02",gi(h)])}function nO(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:l}=t;Z3(t);const u=Bd(c),d=[re(n),i?re(i):"0x",l?re(l):"0x",r?re(r):"0x",o??"0x",a?re(a):"0x",s??"0x",u,...hl(t,e)];return Ns(["0x01",gi(d)])}function rO(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;J3(t);let l=[i?re(i):"0x",c?re(c):"0x",r?re(r):"0x",o??"0x",a?re(a):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const f=27n+(e.v===27n?0n:1n);if(e.v!==f)throw new lT({v:e.v});return f})(),d=Zn(e.r),h=Zn(e.s);l=[...l,re(u),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else n>0&&(l=[...l,re(n),"0x","0x"]);return gi(l)}function hl(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=Zn(n.r),o=Zn(n.s);return[typeof s=="number"?s?re(1):"0x":r===0n?"0x":r===1n?re(1):r===27n?"0x":re(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function sO(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,o=n.address;e.push([r?wr(r):"0x",o,s?wr(s):"0x",...hl({},i)])}return e}const $l=new Td(8192);function iO(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if($l.get(n))return $l.get(n);const r=t().finally(()=>$l.delete(n));return $l.set(n,r),r}function oO(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Bi(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Bi(new Error("method not supported"),{method:l});const u=s?Nd(`${c}.${Jn(n)}`):void 0;return iO(()=>Ku(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case xc.code:throw new xc(f);case Tc.code:throw new Tc(f);case Oc.code:throw new Oc(f,{method:n.method});case Rc.code:throw new Rc(f);case no.code:throw new no(f);case na.code:throw new na(f);case Pc.code:throw new Pc(f);case ii.code:throw new ii(f);case ra.code:throw new ra(f);case Bi.code:throw new Bi(f,{method:n.method});case sa.code:throw new sa(f);case kc.code:throw new kc(f);case lt.code:throw new lt(f);case Dc.code:throw new Dc(f);case $c.code:throw new $c(f);case Uc.code:throw new Uc(f);case Bc.code:throw new Bc(f);case qr.code:throw new qr(f);case Lc.code:throw new Lc(f);case Mc.code:throw new Mc(f);case Fc.code:throw new Fc(f);case jc.code:throw new jc(f);case Hc.code:throw new Hc(f);case zc.code:throw new zc(f);case Wc.code:throw new Wc(f);case 5e3:throw new lt(f);default:throw h instanceof W?h:new ET(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Za){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g,10)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>aO(h)}),{enabled:s,id:u})}}function aO(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===sa.code||t.code===no.code:t instanceof Za&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function ng(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Rv(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function cO(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Zm=cO();function lO(t,e={}){return{async request(n){var h;const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:u,signal:d}=c;try{const f=await Rv(async({signal:g})=>{const m={...c,body:Array.isArray(r)?Jn(r.map(A=>({jsonrpc:"2.0",id:A.id??Zm.take(),...A}))):Jn({jsonrpc:"2.0",id:r.id??Zm.take(),...r}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:d||(a>0?g:null)},w=new Request(t,m),_=await(i==null?void 0:i(w,m))??{...m,url:t};return await s(_.url??t,_)},{errorInstance:new Mm({body:r,url:t}),timeout:a,signal:!0});o&&await o(f);let p;if((h=f.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))p=await f.json();else{p=await f.text();try{p=JSON.parse(p||"{}")}catch(g){if(f.ok)throw g;p={error:p}}}if(!f.ok)throw new Za({body:r,details:Jn(p.error)||f.statusText,headers:f.headers,status:f.status,url:t});return p}catch(f){throw f instanceof Za||f instanceof Mm?f:new Za({body:r,cause:f,url:t})}}}}class uO extends W{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function dO(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new uO({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}async function Pv(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i,sender:o,nonce:a}){var h,f,p;const c=r||"latest",l=n!==void 0?re(n):void 0;let u=null;if(s?u=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?u=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,re(i)]},{dedupe:!0}):typeof i=="number"?u=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||c,re(i)]},{dedupe:!!l}):o&&typeof a=="number"&&(u=await t.request({method:"eth_getTransactionBySenderAndNonce",params:[o,re(a)]},{dedupe:!0})),!u)throw new zE({blockHash:e,blockNumber:n,blockTag:c,hash:s,index:i});return(((p=(f=(h=t.chain)==null?void 0:h.formatters)==null?void 0:f.transaction)==null?void 0:p.format)||$d)(u,"getTransaction")}async function Sh(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new WE({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||xv)(n,"getTransactionReceipt")}async function hO(t,e){var _;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:a,stateOverride:c}=e,l=e.contracts,{batchSize:u=e.batchSize??1024,deployless:d=e.deployless??!1}=typeof((_=t.batch)==null?void 0:_.multicall)=="object"?t.batch.multicall:{},h=(()=>{if(e.multicallAddress)return e.multicallAddress;if(d)return null;if(t.chain)return Ev({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),f=[[]];let p=0,g=0;for(let b=0;b<l.length;b++){const{abi:A,address:C,args:S,functionName:N}=l[b];try{const D=Od({abi:A,args:S,functionName:N});g+=(D.length-2)/2,u>0&&g>u&&f[p].length>0&&(p++,g=(D.length-2)/2,f[p]=[]),f[p]=[...f[p],{allowFailure:!0,callData:D,target:C}]}catch(D){const O=zu(D,{abi:A,address:C,args:S,docsPath:"/docs/contract/multicall",functionName:N,sender:n});if(!s)throw O;f[p]=[...f[p],{allowFailure:!0,callData:"0x",target:C}]}}const m=await Promise.allSettled(f.map(b=>et(t,Iv,"readContract")({...h===null?{code:yv}:{address:h},abi:pp,account:n,args:[b],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<m.length;b++){const A=m[b];if(A.status==="rejected"){if(!s)throw A.reason;for(let S=0;S<f[b].length;S++)w.push({status:"failure",error:A.reason,result:void 0});continue}const C=A.value;for(let S=0;S<C.length;S++){const{returnData:N,success:D}=C[S],{callData:O}=f[b][S],{abi:L,address:M,functionName:U,args:R}=l[w.length];try{if(O==="0x")throw new Sd;if(!D)throw new j0({data:N});const $=X0({abi:L,args:R,data:N,functionName:U});w.push(s?{result:$,status:"success"}:$)}catch($){const y=zu($,{abi:L,address:M,args:R,docsPath:"/docs/contract/multicall",functionName:U});if(!s)throw y;w.push({error:y,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new W("multicall results mismatch");return w}function fO(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Jn(["watchBlockNumber",t.uid,e,n,o]);return Wu(d,{onBlockNumber:r,onError:s},h=>Sv(async()=>{var f;try{const p=await et(t,L3,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(c===void 0||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Jn(["watchBlockNumber",t.uid,e,n]);return Wu(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],onData(w){var b;if(!f)return;const _=fr((b=w.result)==null?void 0:b.number);h.onBlockNumber(_,c),c=_},onError(w){var _;(_=h.onError)==null||_.call(h,w)}});p=m,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function pO(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:C})=>~~(1<<C)*200,timeout:c=18e4}=e,l=Jn(["waitForTransactionReceipt",t.uid,s]),u=(()=>{var C;return e.pollingInterval?e.pollingInterval:(C=t.chain)!=null&&C.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval})();let d,h,f,p=!1,g,m;const{promise:w,resolve:_,reject:b}=vv(),A=c?setTimeout(()=>{m==null||m(),g==null||g(),b(new fT({hash:s}))},c):void 0;return g=Wu(l,{onReplaced:i,resolve:_,reject:b},async C=>{if(f=await et(t,Sh,"getTransactionReceipt")({hash:s}).catch(()=>{}),f&&r<=1){clearTimeout(A),C.resolve(f),g==null||g();return}m=et(t,fO,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:u,async onBlockNumber(S){const N=O=>{clearTimeout(A),m==null||m(),O(),g==null||g()};let D=S;if(!p)try{if(f){if(r>1&&(!f.blockNumber||D-f.blockNumber+1n<r))return;N(()=>C.resolve(f));return}if(n&&!d&&(p=!0,await Ku(async()=>{d=await et(t,Pv,"getTransaction")({hash:s}),d.blockNumber&&(D=d.blockNumber)},{delay:a,retryCount:o}),p=!1),f=await et(t,Sh,"getTransactionReceipt")({hash:s}),r>1&&(!f.blockNumber||D-f.blockNumber+1n<r))return;N(()=>C.resolve(f))}catch(O){if(O instanceof zE||O instanceof WE){if(!d){p=!1;return}try{h=d,p=!0;const L=await Ku(()=>et(t,Vc,"getBlock")({blockNumber:D,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:R})=>R instanceof ZE});p=!1;const M=L.transactions.find(({from:R,nonce:$})=>R===h.from&&$===h.nonce);if(!M||(f=await et(t,Sh,"getTransactionReceipt")({hash:M.hash}),r>1&&(!f.blockNumber||D-f.blockNumber+1n<r)))return;let U="replaced";M.to===h.to&&M.value===h.value&&M.input===h.input?U="repriced":M.from===M.to&&M.value===0n&&(U="cancelled"),N(()=>{var R;(R=C.onReplaced)==null||R.call(C,{reason:U,replacedTransaction:h,transaction:M,transactionReceipt:f}),C.resolve(f)})}catch(L){N(()=>C.reject(L))}}else N(()=>C.reject(O))}}})}),w}function gO(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Jn(["watchPendingTransactions",t.uid,e,i]);return Wu(l,{onTransactions:r,onError:n},u=>{let d;const h=Sv(async()=>{var f;try{if(!d)try{d=await et(t,V3,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await et(t,M3,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await et(t,F3,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function mO(t,{account:e=t.account,message:n}){if(!e)throw new eg({docsPath:"/docs/actions/wallet/signMessage"});const r=Kr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Nd(n):n.raw instanceof Uint8Array?wr(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}function rg({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=Tv();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:oO(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function yO(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>rg({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Jm(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=bO,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=rg({key:n,name:r,async request({method:g,params:m}){let w;const _=async(b=0)=>{const A=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:m});return f({method:g,params:m,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:m,transport:A,status:"error"}),i(C)||b===h.length-1||(w??(w=h.slice(b+1).some(S=>{const{include:N,exclude:D}=S({chain:c}).config.methods||{};return N?N.includes(g):D?!D.includes(g):!0})),!w))throw C;return _(b+1)}};return _()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};wO({chain:c,interval:g.interval??l,onTransports:m=>h=m,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function bO(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===ra.code||t.code===lt.code||Li.nodeMessage.test(t.message)||t.code===5e3))}function wO({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const m=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let _,b;try{await(r?r({transport:m}):m.request({method:"net_listening"})),b=1}catch{b=0}finally{_=Date.now()}return{latency:_-w,success:b}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:m})=>m)))),p=o.map((g,m)=>{const w=u.map(S=>S[m].latency),b=1-w.reduce((S,N)=>S+N,0)/w.length/f,A=u.map(S=>S[m].success),C=A.reduce((S,N)=>S+N,0)/A.length;return C===0?[0,m]:[l*b+c*C,m]}).sort((g,m)=>m[0]-g[0]);n(p.map(([,g])=>o[g])),await qu(e),d()};d()}class EO extends W{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ul(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:d}=e;return({chain:h,retryCount:f,timeout:p})=>{const{batchSize:g=1e3,wait:m=0}=typeof n=="object"?n:{},w=e.retryCount??f,_=p??e.timeout??1e4,b=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!b)throw new EO;const A=lO(b,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:l,timeout:_});return rg({key:i,methods:o,name:a,async request({method:C,params:S}){const N={method:C,params:S},{schedule:D}=Cv({id:b,wait:m,shouldSplitBatch(U){return U.length>g},fn:U=>A.request({body:U}),sort:(U,R)=>U.id-R.id}),O=async U=>n?D(U):[await A.request({body:U})],[{error:L,result:M}]=await O(N);if(d)return{error:L,result:M};if(L)throw new H0({body:N,error:L,url:b});return M},retryCount:w,retryDelay:u,timeout:_,type:"http"},{fetchOptions:s,url:b})}}async function _a(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class fl{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await _a(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await _a(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await _a(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await _a(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await _a(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}sendBeacon({body:e,...n}){const r=this.createUrl(n);return navigator.sendBeacon(r.toString(),e?JSON.stringify(e):void 0)}}const yp={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ke.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;let e=t;return ee.isTelegram()&&(ee.isIos()&&(e=e.filter(n=>n!=="google")),ee.isMac()&&(e=e.filter(n=>n!=="x")),ee.isAndroid()&&(e=e.filter(n=>!["facebook","x"].includes(n)))),ee.isMobile()&&(e=e.filter(n=>n!=="facebook")),e},isSocialsEnabled(){var t,e,n,r;return Array.isArray((t=F.state.features)==null?void 0:t.socials)&&((e=F.state.features)==null?void 0:e.socials.length)>0||Array.isArray((n=F.state.remoteFeatures)==null?void 0:n.socials)&&((r=F.state.remoteFeatures)==null?void 0:r.socials.length)>0},isEmailEnabled(){var t,e;return!!((t=F.state.features)!=null&&t.email||(e=F.state.remoteFeatures)!=null&&e.email)}},fe=Xe({features:ke.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ke.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),F={state:fe,subscribeKey(t,e){return kt(fe,t,e)},setOptions(t){Object.assign(fe,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...fe.remoteFeatures,...t};fe.remoteFeatures=e,(n=fe.remoteFeatures)!=null&&n.socials&&(fe.remoteFeatures.socials=yp.filterSocialsByPlatform(fe.remoteFeatures.socials)),(r=fe.features)!=null&&r.pay&&(fe.remoteFeatures.email=!1,fe.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;fe.features||(fe.features=ke.DEFAULT_FEATURES);const e={...fe.features,...t};fe.features=e,(n=fe.features)!=null&&n.pay&&fe.remoteFeatures&&(fe.remoteFeatures.email=!1,fe.remoteFeatures.socials=!1)},setProjectId(t){fe.projectId=t},setCustomRpcUrls(t){fe.customRpcUrls=t},setAllWallets(t){fe.allWallets=t},setIncludeWalletIds(t){fe.includeWalletIds=t},setExcludeWalletIds(t){fe.excludeWalletIds=t},setFeaturedWalletIds(t){fe.featuredWalletIds=t},setTokens(t){fe.tokens=t},setTermsConditionsUrl(t){fe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){fe.privacyPolicyUrl=t},setCustomWallets(t){fe.customWallets=t},setIsSiweEnabled(t){fe.isSiweEnabled=t},setIsUniversalProvider(t){fe.isUniversalProvider=t},setSdkVersion(t){fe.sdkVersion=t},setMetadata(t){fe.metadata=t},setDisableAppend(t){fe.disableAppend=t},setEIP6963Enabled(t){fe.enableEIP6963=t},setDebug(t){fe.debug=t},setEnableWalletGuide(t){fe.enableWalletGuide=t},setEnableAuthLogger(t){fe.enableAuthLogger=t},setEnableWallets(t){fe.enableWallets=t},setPreferUniversalLinks(t){fe.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ke.SIWX_DEFAULTS))t[e]??(t[e]=n);fe.siwx=t},setConnectMethodsOrder(t){fe.features={...fe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){fe.features={...fe.features,walletFeaturesOrder:t}},setSocialsOrder(t){fe.remoteFeatures={...fe.remoteFeatures,socials:t}},setCollapseWallets(t){fe.features={...fe.features,collapseWallets:t}},setEnableEmbedded(t){fe.enableEmbedded=t},setAllowUnsupportedChain(t){fe.allowUnsupportedChain=t},setManualWCControl(t){fe.manualWCControl=t},setEnableNetworkSwitch(t){fe.enableNetworkSwitch=t},setEnableMobileFullScreen(t){fe.enableMobileFullScreen=ee.isMobile()&&t},setEnableReconnect(t){fe.enableReconnect=t},setCoinbasePreference(t){fe.coinbasePreference=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(fe.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){fe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return fe.universalProviderConfigOverride},getSnapshot(){return cc(fe)}},Oi=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),wt=Xe({...Oi}),vO={state:wt,subscribeKey(t,e){return kt(wt,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ee.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){wt.message=Oi.message,wt.variant=Oi.variant,wt.svg=Oi.svg,wt.open=Oi.open,wt.autoClose=Oi.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Oi.autoClose}){wt.open?(wt.open=!1,setTimeout(()=>{wt.message=t,wt.variant=n,wt.svg=e,wt.open=!0,wt.autoClose=r},150)):(wt.message=t,wt.variant=n,wt.svg=e,wt.open=!0,wt.autoClose=r)}},Ur=vO,CO={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},kv=ee.getBlockchainApiUrl(),Qt=Xe({clientId:null,api:new fl({baseUrl:kv,clientId:null}),supportedChains:{http:[],ws:[]}}),be={state:Qt,async get(t){const{st:e,sv:n}=be.getSdkProperties(),r=F.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Qt.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=F.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Qt.supportedChains.http.length||await be.getSupportedNetworks()}catch{return!1}return Qt.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await be.get({path:"v1/supported-chains"});return Qt.supportedChains=t,t}catch{return Qt.supportedChains}},async fetchIdentity({address:t}){const e=z.getIdentityFromCacheForAddress(t);if(e)return e;const n=await be.get({path:`/v1/identity/${t}`,params:{sender:I.state.activeCaipAddress?ee.getPlainAddress(I.state.activeCaipAddress):void 0}});return z.updateIdentityCache({address:t,identity:n,timestamp:Date.now()}),n},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var c;if(!await be.isNetworkSupported((c=I.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return{data:[],next:void 0};const o=z.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await be.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return z.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await be.isNetworkSupported((o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?be.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async getAddressBalance({caipNetworkId:t,address:e}){return Qt.api.post({path:`/v1?chainId=${t}&projectId=${F.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:e}}}).then(n=>n.result)},async fetchTokenPrice({addresses:t}){var s;if(!await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))return{fungibles:[]};const n=z.getTokenPriceCacheForAddresses(t);if(n)return n;const r=await Qt.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:F.state.projectId},headers:{"Content-Type":"application/json"}});return z.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await be.isNetworkSupported((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?be.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=be.getSdkProperties();if(!await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return be.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await be.isNetworkSupported((o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Qt.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ke.CONVERT_SLIPPAGE_TOLERANCE},projectId:F.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=be.getSdkProperties();if(!await be.isNetworkSupported((o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return be.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=be.getSdkProperties();if(!await be.isNetworkSupported((l=I.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ur.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=z.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await be.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return z.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r,s;if(!await be.isNetworkSupported((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId))return[];const n=(s=I.getAccountData())==null?void 0:s.address;return be.get({path:`/v1/profile/reverse/${t}`,params:{sender:n,apiVersion:"2"}})},async getEnsNameSuggestions(t){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await be.isNetworkSupported((i=I.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Qt.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await be.isNetworkSupported((a=I.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Qt.api.post({path:"/v1/generators/onrampurl",params:{projectId:F.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await be.isNetworkSupported((e=I.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await be.get({path:"/v1/onramp/options"})}catch{return CO}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Qt.api.post({path:"/v1/onramp/quote",params:{projectId:F.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await be.isNetworkSupported((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?be.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await be.isNetworkSupported((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Qt.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:F.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Qt.clientId=t,Qt.api=new fl({baseUrl:kv,clientId:t})}},Wn={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},_O={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Wn.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Wn.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===Wn.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Wn.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===B.CHAIN.SOLANA&&t===Wn.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Wn.COINBASE.url}/dapp?cb_url=${r}`),e===B.CHAIN.BITCOIN&&t===Wn.BINANCE.id&&!("binancew3w"in window)){const s=I.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${(s==null?void 0:s.id)??1}`),a=new URL(Wn.BINANCE.deeplink);a.searchParams.set("appId",Wn.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(Wn.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},AO=Object.freeze({enabled:!0,events:[]}),IO=new fl({baseUrl:ee.getAnalyticsUrl(),clientId:null}),SO=5,NO=60*1e3,Ps=Xe({...AO}),xO={state:Ps,subscribeKey(t,e){return kt(Ps,t,e)},async sendError(t,e){if(!Ps.enabled)return;const n=Date.now();if(Ps.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<NO}).length>=SO)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Ps.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=F.state;await IO.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ee.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Ps.enabled=!0},disable(){Ps.enabled=!1},clearEvents(){Ps.events=[]}};class so extends Error{constructor(e,n,r){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=n,this.originalError=r,r&&r instanceof Error&&(this.originalName=r.name),Object.setPrototypeOf(this,so.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,so):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function Xm(t,e){let n="";try{t instanceof Error?n=t.message:typeof t=="string"?n=t:typeof t=="object"&&t!==null?Object.keys(t).length===0?n="Unknown error":n=(t==null?void 0:t.message)||JSON.stringify(t):n=String(t)}catch(s){n="Unknown error",console.error("Error parsing error message",s)}const r=t instanceof so?t:new so(n,e,t);throw xO.sendError(r,r.category),r}function tr(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Xm(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Xm(a,e)}},n[r]=i}else n[r]=s}),n}const xn=Xe({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),TO={state:xn,subscribeNetworkImages(t){return Mt(xn.networkImages,()=>t(xn.networkImages))},subscribeKey(t,e){return kt(xn,t,e)},subscribe(t){return Mt(xn,()=>t(xn))},setWalletImage(t,e){xn.walletImages[t]=e},setNetworkImage(t,e){xn.networkImages[t]=e},setChainImage(t,e){xn.chainImages[t]=e},setConnectorImage(t,e){xn.connectorImages={...xn.connectorImages,[t]:e}},setTokenImage(t,e){xn.tokenImages[t]=e},setCurrencyImage(t,e){xn.currencyImages[t]=e}},Dn=tr(TO),OO={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},Nh=Xe({networkImagePromises:{}}),Dv={async fetchWalletImage(t){if(t)return await de._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Nh.networkImagePromises[t]||(Nh.networkImagePromises[t]=de._fetchNetworkImage(t)),await Nh.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Dn.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Dn.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Dn.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Dn.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Dn.state.connectorImages[t.imageId]},getChainImage(t){return Dn.state.networkImages[OO[t]]},getTokenImage(t){if(t)return Dn.state.tokenImages[t]}},RO=ee.getAnalyticsUrl(),PO=new fl({baseUrl:RO,clientId:null}),kO=["MODAL_CREATED"],DO=45,Qm=1e3*10,at=Xe({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Ce={state:at,subscribe(t){return Mt(at,()=>t(at))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=F.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},shouldFlushEvents(){const t=JSON.stringify(at.pendingEvents).length/1024>DO,e=at.lastFlush+Qm<Date.now();return t||e},_setPendingEvent(t){var e,n;try{let r=(e=I.getAccountData())==null?void 0:e.address;if("address"in t.data&&t.data.address&&(r=t.data.address),kO.includes(t.data.event)||typeof window>"u")return;const s=(n=I.getActiveCaipNetwork())==null?void 0:n.caipNetworkId;this.state.pendingEvents.push({eventId:ee.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:r,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:s}}}),at.reportedErrors.FORBIDDEN=!1,Ce.shouldFlushEvents()&&Ce._submitPendingEvents()}catch(r){console.warn("_setPendingEvent",r)}},sendEvent(t){var n;at.timestamp=Date.now(),at.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];((n=F.state.features)!=null&&n.analytics||e.includes(t.event))&&Ce._setPendingEvent(at),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(t){at.walletImpressions.push(t)},_transformPendingEventsForBatch(t){try{return t.filter(e=>e.props.event!=="WALLET_IMPRESSION_V2")}catch{return t}},_submitPendingEvents(){if(at.lastFlush=Date.now(),!(at.pendingEvents.length===0&&at.walletImpressions.length===0))try{const t=Ce._transformPendingEventsForBatch(at.pendingEvents);at.walletImpressions.length&&t.push({eventId:ee.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...at.walletImpressions]}}),PO.sendBeacon({path:"/batch",params:Ce.getSdkProperties(),body:t}),at.reportedErrors.FORBIDDEN=!1,at.pendingEvents=[],at.walletImpressions=[]}catch{at.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){var t,e,n;at.subscribedToVisibilityChange||typeof document>"u"||(at.subscribedToVisibilityChange=!0,(t=document==null?void 0:document.addEventListener)==null||t.call(document,"visibilitychange",()=>{document.visibilityState==="hidden"&&Ce._submitPendingEvents()}),(e=document==null?void 0:document.addEventListener)==null||e.call(document,"freeze",()=>{Ce._submitPendingEvents()}),(n=window==null?void 0:window.addEventListener)==null||n.call(window,"pagehide",()=>{Ce._submitPendingEvents()}),setInterval(()=>{Ce._submitPendingEvents()},Qm))}},$O=ee.getApiUrl(),en=new fl({baseUrl:$O,clientId:null}),UO=40,ey=4,BO=20,Ee=Xe({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),de={state:Ee,subscribeKey(t,e){return kt(Ee,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=F.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return F.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${en.baseUrl}/getWalletImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});Dn.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${en.baseUrl}/public/getAssetImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});Dn.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${en.baseUrl}/public/getAssetImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});Dn.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${en.baseUrl}/public/getCurrencyImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});Dn.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${en.baseUrl}/public/getTokenImage/${t}`,n=await en.getBlob({path:e,params:de._getSdkProperties()});Dn.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){const e=t.length,n=ee.isMobile()?t==null?void 0:t.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(Wn).map(o=>o.id).includes(s.id)):t,r=e-n.length;return{filteredWallets:n,mobileFilteredOutWalletsLength:r}},async fetchProjectConfig(){return(await en.get({path:"/appkit/v1/config",params:de._getSdkProperties()})).features},async fetchUsage(){try{const t=await en.get({path:"/appkit/v1/project-limits",params:de._getSdkProperties()}),{tier:e,isAboveMauLimit:n,isAboveRpcLimit:r}=t.planLimits,s=e==="starter",i=n||r;de.state.plan={tier:e,hasExceededUsageLimit:s&&i,limits:{isAboveRpcLimit:r,isAboveMauLimit:n}}}catch(t){console.warn("Failed to fetch usage",t)}},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await en.get({path:"/projects/v1/origins",params:de._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===B.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=B.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=I.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!Dv.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>de._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=V.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>de._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchTokenImage(e)))},async fetchWallets(t){var o;const e=t.exclude??[];de._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Wn).map(a=>a.id));const r=await en.get({path:"/getWallets",params:{...de._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(o=t.include)==null?void 0:o.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=de._filterWalletsByPlatform(r==null?void 0:r.data);return{data:s||[],count:r==null?void 0:r.count,mobileFilteredOutWalletsLength:i}},async prefetchWalletRanks(){const t=V.state.connectors;if(!(t!=null&&t.length))return;const e={page:1,entries:20,badge:"certified"};if(e.names=t.map(s=>s.name).join(","),I.state.activeChain===B.CHAIN.EVM){const s=[...t.flatMap(i=>{var o;return((o=i.connectors)==null?void 0:o.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}))||[]}),...t.map(i=>{var o;return(o=i.info)==null?void 0:o.rdns})].filter(i=>typeof i=="string"&&i.length>0);s.length&&(e.rdns=s.join(","))}const{data:n}=await de.fetchWallets(e);Ee.explorerWallets=n,V.extendConnectorsWithExplorerWallets(n);const r=I.getRequestedCaipNetworkIds().join(",");Ee.explorerFilteredWallets=n.filter(s=>{var i;return(i=s.chains)==null?void 0:i.some(o=>r.includes(o))})},async fetchFeaturedWallets(){const{featuredWalletIds:t}=F.state;if(t!=null&&t.length){const e={...de._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??ey,include:t},{data:n}=await de.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>de._fetchWalletImage(i))),Ee.featured=r,Ee.allFeatured=r}},async fetchRecommendedWallets(){try{Ee.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=F.state,r=[...e??[],...n??[]].filter(Boolean),s=I.getRequestedCaipNetworkIds().join(","),i={page:1,entries:ey,include:t,exclude:r,chains:s},{data:o,count:a}=await de.fetchWallets(i),c=z.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>de._fetchWalletImage(d))),Ee.recommended=o,Ee.allRecommended=o,Ee.count=a??0}catch{}finally{Ee.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=F.state,s=I.getRequestedCaipNetworkIds().join(","),i=[...Ee.recommended.map(({id:d})=>d),...n??[],...r??[]].filter(Boolean),o={page:t,entries:UO,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:l}=await de.fetchWallets(o);Ee.mobileFilteredOutWalletsLength=l+(Ee.mobileFilteredOutWalletsLength??0);const u=a.slice(0,BO).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(u.map(d=>de._fetchWalletImage(d))),Ee.wallets=ee.uniqueBy([...Ee.wallets,...de._filterOutExtensions(a)],"id").filter(d=>{var h;return(h=d.chains)==null?void 0:h.some(f=>s.includes(f))}),Ee.count=c>Ee.count?c:Ee.count,Ee.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await de.fetchWallets(e);n&&n.forEach(r=>{Ee.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=F.state,s=I.getRequestedCaipNetworkIds().join(",");Ee.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await de.fetchWallets(i);Ce.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>de._fetchWalletImage(c)),ee.wait(300)]),Ee.search=de._filterOutExtensions(o)},initPromise(t,e){const n=Ee.promises[t];return n||(Ee.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0,fetchWalletRanks:s=!0}={}){const i=[t&&de.initPromise("connectorImages",de.fetchConnectorImages),e&&de.initPromise("featuredWallets",de.fetchFeaturedWallets),n&&de.initPromise("recommendedWallets",de.fetchRecommendedWallets),r&&de.initPromise("networkImages",de.fetchNetworkImages),s&&de.initPromise("walletRanks",de.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=F.state.features)!=null&&t.analytics&&de.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await en.get({path:"/getAnalyticsConfig",params:de._getSdkProperties()});F.setFeatures({analytics:t})}catch{F.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Ee.featured=Ee.allFeatured,Ee.recommended=Ee.allRecommended;return}const e=I.getRequestedCaipNetworkIds().join(",");Ee.featured=Ee.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.recommended=Ee.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.filteredWallets=Ee.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Ee.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ee.featured=Ee.allFeatured,Ee.recommended=Ee.allRecommended;return}const e=I.getRequestedCaipNetworkIds().join(",");Ee.featured=Ee.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.recommended=Ee.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ee.filteredWallets=Ee.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},LO=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],We=Xe({view:"Connect",history:["Connect"],transactionStack:[]}),MO={state:We,subscribeKey(t,e){return kt(We,t,e)},pushTransactionStack(t){We.transactionStack.push(t)},popTransactionStack(t){const e=We.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),me.goBack();break;case"cancel":s==null||s(),me.goBack();break}},push(t,e){let n=t,r=e;de.state.plan.hasExceededUsageLimit&&LO.includes(t)&&(n="UsageExceeded",r=void 0),n!==We.view&&(We.view=n,We.history.push(n),We.data=r)},reset(t,e){We.view=t,We.history=[t],We.data=e},replace(t,e){We.history.at(-1)===t||(We.view=t,We.history[We.history.length-1]=t,We.data=e)},goBack(){var r,s;const t=I.state.activeCaipAddress,e=me.state.view==="ConnectingFarcaster",n=!t&&e;if(We.history.length>1){We.history.pop();const[i]=We.history.slice(-1);i&&(t&&i==="Connect"?We.view="Account":We.view=i)}else Oe.close();(r=We.data)!=null&&r.wallet&&(We.data.wallet=void 0),(s=We.data)!=null&&s.redirectView&&(We.data.redirectView=void 0),setTimeout(()=>{var i,o,a;if(n){I.setAccountProp("farcasterUrl",void 0,I.state.activeChain);const c=V.getAuthConnector();(i=c==null?void 0:c.provider)==null||i.reload();const l=cc(F.state);(a=(o=c==null?void 0:c.provider)==null?void 0:o.syncDappData)==null||a.call(o,{metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType})}},100)},goBackToIndex(t){if(We.history.length>1){We.history=We.history.slice(0,t+1);const[e]=We.history.slice(-1);e&&(We.view=e)}},goBackOrCloseModal(){me.state.history.length>1?me.goBack():Oe.close()}},me=tr(MO),Zr=Xe({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),bp={state:Zr,subscribe(t){return Mt(Zr,()=>t(Zr))},setThemeMode(t){Zr.themeMode=t;try{const e=V.getAuthConnector();if(e){const n=bp.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:dc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Zr.themeVariables={...Zr.themeVariables,...t};try{const e=V.getAuthConnector();if(e){const n=bp.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:dc(Zr.themeVariables,Zr.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return cc(Zr)}},gn=tr(bp),$v=Object.fromEntries(F1.map(t=>[t,void 0])),FO=Object.fromEntries(F1.map(t=>[t,!0])),De=Xe({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:$v,filterByNamespaceMap:FO}),jO={state:De,subscribe(t){return Mt(De,()=>{t(De)})},subscribeKey(t,e){return kt(De,t,e)},initialize(t){t.forEach(e=>{const n=z.getConnectedConnectorId(e);n&&V.setConnectorId(n,e)})},setActiveConnector(t){t&&(De.activeConnector=lc(t))},setConnectors(t){t.filter(s=>!De.allConnectors.some(i=>i.id===s.id&&V.getConnectorName(i.name)===V.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&De.allConnectors.push(lc(s))});const n=V.getEnabledNamespaces(),r=V.getEnabledConnectors(n);De.connectors=V.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(De.filterByNamespaceMap).forEach(e=>{De.filterByNamespaceMap[e]=!1}),t.forEach(e=>{De.filterByNamespaceMap[e]=!0}),V.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){De.filterByNamespaceMap[t]=e,V.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=V.getEnabledNamespaces(),e=V.getEnabledConnectors(t),n=V.areAllNamespacesEnabled();De.connectors=V.mergeMultiChainConnectors(e),n?de.clearFilterByNamespaces():de.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(De.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return De.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(De.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=V.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===B.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=V.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===B.CONNECTOR_ID.AUTH){const s=t,i=cc(F.state),o=gn.getSnapshot().themeMode,a=gn.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:dc(a,o)}),V.setConnectors([t])}else V.setConnectors([t])},getAuthConnector(t){var r;const e=t||I.state.activeChain,n=De.connectors.find(s=>s.id===B.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return De.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return De.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const r=n||I.state.activeChain;return De.allConnectors.filter(i=>i.chain===r).find(i=>{var o;return i.explorerId===t||((o=i.info)==null?void 0:o.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="AUTH")return;const e=t,n=cc(F.state),r=gn.getSnapshot().themeMode,s=gn.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:dc(s,r)})},getConnectorsByNamespace(t){const e=De.allConnectors.filter(n=>n.chain===t);return V.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return I.checkIfSmartAccountEnabled()&&nn(t)===dt.ACCOUNT_TYPES.EOA},selectWalletConnector(t){var r;const e=(r=me.state.data)==null?void 0:r.redirectView,n=V.getConnector({id:t.id,rdns:t.rdns});_O.handleMobileDeeplinkRedirect((n==null?void 0:n.explorerId)||t.id,I.state.activeChain),n?me.push("ConnectingExternal",{connector:n,wallet:t,redirectView:e}):me.push("ConnectingWalletConnect",{wallet:t,redirectView:e})},getConnectors(t){return t?V.getConnectorsByNamespace(t):V.mergeMultiChainConnectors(De.allConnectors)},setFilterByNamespace(t){De.filterByNamespace=t,De.connectors=V.getConnectors(t),de.setFilterByNamespace(t)},setConnectorId(t,e){t&&(De.activeConnectorIds={...De.activeConnectorIds,[e]:t},z.setConnectedConnectorId(e,t))},removeConnectorId(t){De.activeConnectorIds={...De.activeConnectorIds,[t]:void 0},z.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return De.activeConnectorIds[t]},isConnected(t){return t?!!De.activeConnectorIds[t]:Object.values(De.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){De.activeConnectorIds={...$v}},extendConnectorsWithExplorerWallets(t){De.allConnectors.forEach(r=>{const s=t.find(i=>{var o;return i.id===r.id||i.rdns&&i.rdns===((o=r.info)==null?void 0:o.rdns)});s&&(r.explorerWallet=s)});const e=V.getEnabledNamespaces(),n=V.getEnabledConnectors(e);De.connectors=V.mergeMultiChainConnectors(n)}},V=tr(jO),HO=1e3,Aa={checkNamespaceConnectorId(t,e){return V.getConnectorId(t)===e},isSocialProvider(t){return ke.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&V.setActiveConnector(e),s==null||s(ee.isMobile()&&t),r){const l=Oe.subscribeKey("open",u=>{u||(me.state.view!==r&&me.replace(r),l(),a(new Error("Modal closed")))})}const c=I.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Oe.close(),c(),o(At.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=I.subscribeKey("activeCaipAddress",s=>{s&&(Oe.close(),r(),e(At.parseCaipAddress(s)))});X.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i,o=!1,a=null;const c=e||I.state.activeChain,l=I.subscribeKey("activeCaipAddress",u=>{u&&(n&&Oe.close(),l())});return new Promise((u,d)=>{async function h(p){var g;if((g=p.data)!=null&&g.resultUri)if(p.origin===B.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",h,!1);try{const m=V.getAuthConnector(c);if(m&&!o){i&&i.close(),o=!0;const w=p.data.resultUri;Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:t}}),z.setConnectedSocialProvider(t),await X.connectExternal({id:m.id,type:m.type,socialUri:w},m.chain);const _=I.state.activeCaipAddress;if(!_){d(new Error("Failed to connect"));return}u(At.parseCaipAddress(_)),Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}})}}catch(m){Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:ee.parseError(m)}}),d(new Error("Failed to connect"))}}else Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:"Untrusted Origin"}})}async function f(){if(Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"){r==null||r();const p=Oe.subscribeKey("open",m=>{!m&&t==="farcaster"&&(d(new Error("Popup closed")),s==null||s(),p())}),g=V.getAuthConnector();if(g){const m=I.getAccountData(c);if(!(m!=null&&m.farcasterUrl))try{const{url:w}=await g.provider.getFarcasterUri();I.setAccountProp("farcasterUrl",w,c)}catch{d(new Error("Failed to connect to farcaster"))}}}else{const p=V.getAuthConnector();a=ee.returnOpenHref(`${B.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(p){const{uri:g}=await p.provider.getSocialRedirectUri({provider:t});if(a&&g){a.location.href=g,i=a;const m=setInterval(()=>{i!=null&&i.closed&&!o&&(d(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",h,!1)}else a==null||a.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),a==null||a.close()}}}f()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Oe.subscribeKey("open",c=>{c||(me.state.view!==e&&me.replace(e),a(),i(new Error("Modal closed")))})}const o=I.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Oe.close(),o(),s(At.parseCaipAddress(a)))})})},async updateEmail(){const t=z.getConnectedConnectorId(I.state.activeChain),e=V.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==B.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await Oe.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Oe.close(),clearInterval(i),o(),r({email:a}))},HO),o=Oe.subscribeKey("open",a=>{a||(me.state.view!=="Connect"&&me.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return I.checkIfSmartAccountEnabled()&&nn(t)===dt.ACCOUNT_TYPES.EOA}};function Uv(){var r,s;const t=((r=I.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=I.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ke.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function nn(t){var n;return(n=I.getAccountData(t))==null?void 0:n.preferredAccountType}function ps(t){var e,n;return t?(n=(e=I.state.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:I.state.activeCaipNetwork}const Gu={getConnectionStatus(t,e){const n=V.state.activeConnectorIds[e],r=X.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=F.state.remoteFeatures)!=null&&a.multiWallet),n=V.state.activeConnectorIds[t],r=X.getConnections(t),i=(X.state.recentConnections.get(t)??[]).filter(c=>V.getConnectorById(c.connectorId)),o=Gu.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},tt=Xe({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),zO={state:tt,subscribe(t){return Mt(tt,()=>t(tt))},setLastNetworkInView(t){tt.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");tt.loading=!0;try{const n=await be.fetchTransactions({account:t,cursor:tt.next,chainId:(e=I.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=pu.filterSpamTransactions(n.data),s=pu.filterByConnectedChain(r),i=[...tt.transactions,...s];tt.loading=!1,tt.transactions=i,tt.transactionsByYear=pu.groupTransactionsByYearAndMonth(tt.transactionsByYear,s),tt.empty=i.length===0,tt.next=n.next?n.next:void 0}catch{const r=I.state.activeChain;Ce.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:F.state.projectId,cursor:tt.next,isSmartAccount:nn(r)===dt.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ur.showError("Failed to fetch transactions"),tt.loading=!1,tt.empty=!0,tt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){tt.next=void 0},resetTransactions(){tt.transactions=[],tt.transactionsByYear={},tt.lastNetworkInView=void 0,tt.loading=!1,tt.empty=!1,tt.next=void 0}},pu=tr(zO,"API_ERROR"),$e=Xe({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Ci;const WO={state:$e,subscribe(t){return Mt($e,()=>t($e))},subscribeKey(t,e){return kt($e,t,e)},_getClient(){return $e._client},setClient(t){$e._client=lc(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);X.syncStorageConnections(e)},syncStorageConnections(t){const e=z.getConnections(),n=t??Array.from(I.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map($e.recentConnections);i.set(r,s),$e.recentConnections=i}},getConnections(t){return t?$e.connections.get(t)??[]:[]},hasAnyConnection(t){const e=X.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect({cache:t="auto"}={}){var n,r,s,i;const e=ee.isTelegram()||ee.isSafari()&&ee.isIos();if(t==="always"||t==="auto"&&e){if(Ci){await Ci,Ci=void 0;return}if(!ee.isPairingExpired($e==null?void 0:$e.wcPairingExpiry)){const o=$e.wcUri;$e.wcUri=o;return}Ci=(r=(n=X._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n).catch(()=>{}),X.state.status="connecting",await Ci,Ci=void 0,$e.wcPairingExpiry=void 0,X.state.status="connected"}else await((i=(s=X._getClient())==null?void 0:s.connectWalletConnect)==null?void 0:i.call(s))},async connectExternal(t,e,n=!0){var o,a,c;const r=await((a=(o=X._getClient())==null?void 0:o.connectExternal)==null?void 0:a.call(o,t));n&&I.setActiveNamespace(e);const s=V.state.allConnectors.find(l=>l.id===(t==null?void 0:t.id)),i=t.type==="AUTH"?"email":"browser";return Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:i,name:(s==null?void 0:s.name)||"Unknown",view:me.state.view,walletRank:(c=s==null?void 0:s.explorerWallet)==null?void 0:c.order}}),r},async reconnectExternal(t){var n,r;await((r=(n=X._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||I.state.activeChain;e&&V.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Oe.setLoading(!0,I.state.activeChain);const n=V.getAuthConnector();n&&(I.setAccountProp("preferredAccountType",t,e),await n.provider.setPreferredAccount(t),z.setPreferredAccountTypes(Object.entries(I.state.chains).reduce((s,[i,o])=>{const a=i,c=nn(a);return c!==void 0&&(s[a]=c),s},{})),await X.reconnectExternal(n),Oe.setLoading(!1,I.state.activeChain),Ce.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=X._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=X._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=X._getClient())==null?void 0:n.formatUnits(t,e)},updateBalance(t){var e;return(e=X._getClient())==null?void 0:e.updateBalance(t)},async sendTransaction(t){var e;return(e=X._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=X._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=X._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=X._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=X._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=X._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=X._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=X._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=X._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){$e.wcUri=void 0,$e.wcPairingExpiry=void 0,$e.wcLinking=void 0,$e.recentWallet=void 0,$e.status="disconnected",pu.resetTransactions(),z.deleteWalletConnectDeepLink(),z.deleteRecentWallet()},resetUri(){$e.wcUri=void 0,$e.wcPairingExpiry=void 0,Ci=void 0},finalizeWcConnection(t){var r,s;const{wcLinking:e,recentWallet:n}=X.state;e&&z.setWalletConnectDeepLink(e),n&&z.setAppKitRecent(n),t&&Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:((s=(r=me.state.data)==null?void 0:r.wallet)==null?void 0:s.name)||"Unknown",view:me.state.view,walletRank:n==null?void 0:n.order}})},setWcBasic(t){$e.wcBasic=t},setUri(t){$e.wcUri=t,$e.wcPairingExpiry=ee.getPairingExpiry()},setWcLinking(t){$e.wcLinking=t},setWcError(t){$e.wcError=t,$e.buffering=!1},setRecentWallet(t){$e.recentWallet=t},setBuffering(t){$e.buffering=t},setStatus(t){$e.status=t},setIsSwitchingConnection(t){$e.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=X._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new so("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},async disconnectConnector({id:t,namespace:e}){var n;try{await((n=X._getClient())==null?void 0:n.disconnectConnector({id:t,namespace:e}))}catch(r){throw new so("Failed to disconnect connector","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const n=new Map($e.connections);n.set(e,t),$e.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var i,o;const n=I.getAccountData(e),r=(o=(i=n==null?void 0:n.user)==null?void 0:i.accounts)==null?void 0:o.find(a=>a.type==="smartAccount"),s=r&&r.address.toLowerCase()===t.toLowerCase()&&Aa.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await X.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=V.getConnectorById(t.connectorId),s=t.connectorId===B.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)n&&await X.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await X.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=V.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===B.CONNECTOR_ID.AUTH,a=t.connectorId===B.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Aa.isSocialProvider(i)){const{address:d}=await Aa.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Oe.open({view:"ConnectingFarcaster"})},onConnect(){me.replace("ProfileWallets")}});c=d}else{const{address:d}=await Aa.connectEmail({closeModalOnConnect:r,onOpen(){Oe.open({view:"EmailLogin"})},onConnect(){me.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Aa.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){const f=h?"AllWallets":"ConnectingWalletConnect";Oe.state.open?me.push(f):Oe.open({view:f})},onConnect(){me.replace("ProfileWallets")}});c=d}else{const d=await X.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await X.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){var c;let i;const o=(c=I.getAccountData(n))==null?void 0:c.caipAddress;if(o){const{address:l}=At.parseCaipAddress(o);i=l}const a=Gu.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const l=await X.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&l){const u=l.toLowerCase()!==i.toLowerCase();s==null||s({address:l,namespace:n,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const l=await X.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});l&&(s==null||s({address:l,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},X=tr(WO),xh={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return po(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let Th;async function ty(){if(!Th){const{createPublicClient:t,http:e,defineChain:n}=await Ct(async()=>{const{createPublicClient:r,http:s,defineChain:i}=await import("./index.chunk.js");return{createPublicClient:r,http:s,defineChain:i}},__vite__mapDeps([2,3,1,4,5,0]));Th={createPublicClient:t,http:e,defineChain:n}}return Th}const wp={getBlockchainApiRpcUrl(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()},async getViemChain(t){const{defineChain:e}=await ty(),{chainId:n}=At.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(n)})},async createViemPublicClient(t){const{createPublicClient:e,http:n}=await ty(),r=F.state.projectId,s=await wp.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:n(wp.getBlockchainApiRpcUrl(t.caipNetworkId,r))})}},sg={async getMyTokensWithBalance(t){var a;const e=(a=I.getAccountData())==null?void 0:a.address,n=I.state.activeCaipNetwork,r=V.getConnectorId("eip155")===B.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=z.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===B.CHAIN.EVM&&r){const c=await this.getEIP155Balances(e,n);if(c)return this.filterLowQualityTokens(c)}const o=await be.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=xh.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await X.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await X.walletGetAssets({account:t,chainFilter:[s]});if(!xh.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>xh.createBalance(l,e.caipNetworkId));return z.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:n}){const r=await wp.createViemPublicClient(n),{address:s}=At.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await r.multicall({contracts:[{address:e,functionName:"name",args:[],abi:Pl},{address:e,functionName:"symbol",args:[],abi:Pl},{address:e,functionName:"balanceOf",args:[s],abi:Pl},{address:e,functionName:"decimals",args:[],abi:Pl}]});return{name:i,symbol:o,decimals:c,balance:a&&c?po(a,c):"0"}}},Oh={adapters:{}},Bv={state:Oh,initialize(t){Oh.adapters={...t}},get(t){return Oh.adapters[t]}},Yu={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},ln=Xe({providers:{...Yu},providerIds:{...Yu}}),Ye={state:ln,subscribeKey(t,e){return kt(ln,t,e)},subscribe(t){return Mt(ln,()=>{t(ln)})},subscribeProviders(t){return Mt(ln.providers,()=>t(ln.providers))},setProvider(t,e){t&&e&&(ln.providers[t]=lc(e))},getProvider(t){if(t)return ln.providers[t]},setProviderId(t,e){e&&(ln.providerIds[t]=e)},getProviderId(t){if(t)return ln.providerIds[t]},reset(){ln.providers={...Yu},ln.providerIds={...Yu}},resetChain(t){ln.providers[t]=void 0,ln.providerIds[t]=void 0}},Co=Xe({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),gr={state:Co,subscribe(t){return Mt(Co,()=>t(Co))},subscribeOpen(t){return kt(Co,"open",t)},set(t){Object.assign(Co,{...Co,...t})}},qO={async getTokenList(t){var r;const e=await be.fetchSwapTokens({chainId:t});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=I.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(X==null?void 0:X.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await be.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await be.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=X.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await sg.getMyTokensWithBalance(t);return I.setAccountProp("tokenBalance",e,I.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Uv(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]},async handleSwapError(t){var e,n;try{const r=t==null?void 0:t.cause;if(!(r!=null&&r.json))return;const s=await r.json(),i=(n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description;return i!=null&&i.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}},Ue=Xe({tokenBalances:[],loading:!1}),VO={state:Ue,subscribe(t){return Mt(Ue,()=>t(Ue))},subscribeKey(t,e){return kt(Ue,t,e)},setToken(t){t&&(Ue.token=lc(t))},setTokenAmount(t){Ue.sendTokenAmount=t},setReceiverAddress(t){Ue.receiverAddress=t},setReceiverProfileImageUrl(t){Ue.receiverProfileImageUrl=t},setReceiverProfileName(t){Ue.receiverProfileName=t},setNetworkBalanceInUsd(t){Ue.networkBalanceInUSD=t},setLoading(t){Ue.loading=t},getSdkEventProperties(t){var e,n;return{message:ee.parseError(t),isSmartAccount:nn(I.state.activeChain)===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((e=Ue.token)==null?void 0:e.symbol)||"",amount:Ue.sendTokenAmount??0,network:((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}},async sendToken(){var t;try{switch(Se.setLoading(!0),(t=I.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Se.sendEvmToken();return;case"solana":await Se.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(e){throw dr.isUserRejectedRequestError(e)?new $o(e):e}finally{Se.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=I.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=nn(t);if(!Se.state.sendTokenAmount||!Se.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Se.state.token)throw new Error("A token is required");if((n=Se.state.token)!=null&&n.address){Ce.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Se.state.token.address,amount:Se.state.sendTokenAmount,network:((r=I.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}});const{hash:i}=await Se.sendERC20Token({receiverAddress:Se.state.receiverAddress,tokenAddress:Se.state.token.address,sendTokenAmount:Se.state.sendTokenAmount,decimals:Se.state.token.quantity.decimals});i&&(Ue.hash=i)}else{Ce.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:Se.state.token.symbol||"",amount:Se.state.sendTokenAmount,network:((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}});const{hash:i}=await Se.sendNativeToken({receiverAddress:Se.state.receiverAddress,sendTokenAmount:Se.state.sendTokenAmount,decimals:Se.state.token.quantity.decimals});i&&(Ue.hash=i)}},async fetchTokenBalance(t){var o,a,c;Ue.loading=!0;const e=I.state.activeChain,n=(o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=I.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=((c=I.getAccountData(e))==null?void 0:c.caipAddress)??I.state.activeCaipAddress,i=s?ee.getPlainAddress(s):void 0;if(Ue.lastRetry&&!ee.isAllowedRetry(Ue.lastRetry,30*ke.ONE_SEC_MS))return Ue.loading=!1,[];try{if(i&&n&&r){const l=await sg.getMyTokensWithBalance();return Ue.tokenBalances=l,Ue.lastRetry=void 0,l}}catch(l){Ue.lastRetry=Date.now(),t==null||t(l),Ur.showError("Token Balance Unavailable")}finally{Ue.loading=!1}return[]},fetchNetworkBalance(){if(Ue.tokenBalances.length===0)return;const t=qO.mapBalancesToSwapTokens(Ue.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Uv());e&&(Ue.networkBalanceInUSD=e?_I.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var o,a,c,l;me.pushTransactionStack({});const e=t.receiverAddress,n=(o=I.getAccountData())==null?void 0:o.address,r=X.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i=await X.sendTransaction({chainNamespace:B.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)});return Ce.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:nn("eip155")===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((a=Se.state.token)==null?void 0:a.symbol)||"",amount:t.sendTokenAmount,network:((c=I.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)||"",hash:i||""}}),(l=X._getClient())==null||l.updateBalance("eip155"),Se.resetSend(),{hash:i}},async sendERC20Token(t){var r,s,i;me.pushTransactionStack({onSuccess(){me.replace("Account")}});const e=X.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),n=(r=I.getAccountData())==null?void 0:r.address;if(n&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const o=ee.getPlainAddress(t.tokenAddress);if(!o)throw new Error("SendController:sendERC20Token - tokenAddress is required");const a=await X.writeContract({fromAddress:n,tokenAddress:o,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:NI.getERC20Abi(o),chainNamespace:B.CHAIN.EVM});return Ce.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:nn("eip155")===dt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((s=Se.state.token)==null?void 0:s.symbol)||"",amount:t.sendTokenAmount,network:((i=I.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||"",hash:a||""}}),Se.resetSend(),{hash:a}}return{hash:void 0}},async sendSolanaToken(){var n,r,s;if(!Se.state.sendTokenAmount||!Se.state.receiverAddress)throw new Error("An amount and receiver address are required");me.pushTransactionStack({onSuccess(){me.replace("Account")}});let t;Se.state.token&&Se.state.token.address!==ke.SOLANA_NATIVE_TOKEN_ADDRESS&&(ee.isCaipAddress(Se.state.token.address)?t=ee.getPlainAddress(Se.state.token.address):t=Se.state.token.address);const e=await X.sendTransaction({chainNamespace:"solana",tokenMint:t,to:Se.state.receiverAddress,value:Se.state.sendTokenAmount});e&&(Ue.hash=e),(n=X._getClient())==null||n.updateBalance("solana"),Ce.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:((r=Se.state.token)==null?void 0:r.symbol)||"",amount:Se.state.sendTokenAmount,network:((s=I.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||"",hash:e||""}}),Se.resetSend()},resetSend(){Ue.token=void 0,Ue.sendTokenAmount=void 0,Ue.receiverAddress=void 0,Ue.receiverProfileImageUrl=void 0,Ue.receiverProfileName=void 0,Ue.loading=!1,Ue.tokenBalances=[]}},Se=tr(VO),Rh={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Bl={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},te=Xe({chains:fI(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),Lv={state:te,subscribe(t){return Mt(te,()=>{t(te)})},subscribeKey(t,e){return kt(te,t,e)},subscribeAccountStateProp(t,e,n){var s;const r=n||te.activeChain;return r?kt(((s=te.chains.get(r))==null?void 0:s.accountState)||{},t,e):()=>{}},subscribeChainProp(t,e,n){let r;return Mt(te.chains,()=>{var i;const s=n||te.activeChain;if(s){const o=(i=te.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=z.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=F.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(te.noAdapters=!0),te.noAdapters||(te.activeChain=a==null?void 0:a.namespace,te.activeCaipNetwork=i,I.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),te.activeChain&&gr.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=z.getPreferredAccountTypes()||{},f={...F.state.defaultAccountTypes,...h};I.state.chains.set(u,{namespace:u,networkState:Xe({...Bl,caipNetwork:d==null?void 0:d[0]}),accountState:Xe({...Rh,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),I.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(te.activeChain===t){const r=Array.from(te.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&I.setActiveCaipNetwork(s)}}te.chains.delete(t)},addAdapter(t,{connectionControllerClient:e},n){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");te.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Bl,caipNetwork:n[0]},accountState:{...Rh},caipNetworks:n,connectionControllerClient:e}),I.setRequestedCaipNetworks((n==null?void 0:n.filter(r=>r.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=te.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),te.chains.set(t.chainNamespace,{...e,caipNetworks:r}),I.setRequestedCaipNetworks(r,t.chainNamespace),V.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=te.chains.get(t);if(n){const o=((r=te.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&I.setActiveCaipNetwork(n.caipNetworks[0]),te.chains.set(t,{...n,caipNetworks:a}),I.setRequestedCaipNetworks(a||[],t),a.length===0&&V.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=te.chains.get(t);n&&(n.networkState={...n.networkState||Bl,...e},te.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=te.chains.get(t);if(r){const s={...r.accountState||Rh,...e};te.chains.set(t,{...r,accountState:s}),(te.chains.size===1||te.activeChain===t)&&e.caipAddress&&(te.activeCaipAddress=e.caipAddress)}},setChainNetworkData(t,e){if(!t)return;const n=te.chains.get(t);if(n){const r={...n.networkState||Bl,...e};te.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){I.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;te.activeChain=t;const e=t?te.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(te.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,te.activeCaipNetwork=n,I.setChainNetworkData(t,{caipNetwork:n}),z.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),gr.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var i,o;if(!t)return;const e=te.activeChain===t.chainNamespace;e||I.setIsSwitchingNamespace(!0);const n=te.chains.get(t.chainNamespace);te.activeChain=t.chainNamespace,te.activeCaipNetwork=t,I.setChainNetworkData(t.chainNamespace,{caipNetwork:t});let r=(i=n==null?void 0:n.accountState)==null?void 0:i.address;if(r)te.activeCaipAddress=`${t.chainNamespace}:${t.id}:${r}`;else if(e&&te.activeCaipAddress){const{address:a}=At.parseCaipAddress(te.activeCaipAddress);r=a,te.activeCaipAddress=`${t.caipNetworkId}:${r}`}else te.activeCaipAddress=void 0;I.setChainAccountData(t.chainNamespace,{address:r,caipAddress:te.activeCaipAddress}),Se.resetSend(),gr.set({activeChain:te.activeChain,selectedNetworkId:(o=te.activeCaipNetwork)==null?void 0:o.caipNetworkId}),z.setActiveCaipNetworkId(t.caipNetworkId),!I.checkIfSupportedNetwork(t.chainNamespace)&&F.state.enableNetworkSwitch&&!F.state.allowUnsupportedChain&&!X.state.wcBasic&&I.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=te.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==I.state.activeChain,n=(s=I.getNetworkData(t))==null?void 0:s.caipNetwork,r=I.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await I.switchActiveNetwork(r)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){var o;const n=I.state.activeChain;if(!n)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=Ye.getProviderId(te.activeChain)==="AUTH",s=(o=I.getAccountData(n))==null?void 0:o.address,i=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t.chainNamespace);try{if(s&&t.chainNamespace===n||r&&i){const a=Bv.get(t.chainNamespace);if(!a)throw new Error("Adapter not found");await a.switchNetwork({caipNetwork:t})}I.setActiveCaipNetwork(t)}catch(a){if(e)throw a}Ce.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})},getConnectionControllerClient(t){const e=t||te.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=te.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){var r;const n=(r=te.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=te.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ee.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return te.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=I.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){I.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=I.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));V.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return te.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=I.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=te.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:te.activeCaipNetwork},getActiveCaipAddress(){return te.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=te.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},setApprovedCaipNetworksData(t,e){I.setAdapterNetworkState(t,e)},checkIfSupportedNetwork(t,e){var s;const n=e||((s=te.activeCaipNetwork)==null?void 0:s.caipNetworkId),r=I.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){if(!te.activeChain)return!0;const e=I.getRequestedCaipNetworks(te.activeChain);return e==null?void 0:e.some(n=>n.id===t)},checkIfSmartAccountEnabled(){var r,s;const t=uc.caipNetworkIdToNumber((r=te.activeCaipNetwork)==null?void 0:r.caipNetworkId);if(!te.activeChain||!t)return!1;const n=((s=vt.get(le.SMART_ACCOUNT_ENABLED_NETWORKS))==null?void 0:s.split(","))||[];return!!(n!=null&&n.includes(t.toString()))},showUnsupportedChainUI(){Oe.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=te.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ke.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){I.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){var s,i;const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=(i=(s=I.state.chains.get(e))==null?void 0:s.accountState)==null?void 0:i.preferredAccountType,r=F.state.defaultAccountTypes[e];te.activeCaipAddress=void 0,I.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),V.removeConnectorId(e)},setIsSwitchingNamespace(t){te.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(te.chains.forEach(s=>{B.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=te.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var n;const e=t||te.activeChain;if(e)return(n=I.state.chains.get(e))==null?void 0:n.accountState},getNetworkData(t){var n;const e=t||te.activeChain;if(e)return(n=I.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=I.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id.toString()===(e==null?void 0:e.toString()));return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=V.state.filterByNamespace;return(t?[te.chains.get(t)]:Array.from(te.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?I.getRequestedCaipNetworks(t):I.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return Lv.getCaipNetworks(e).find(n=>n.id.toString()===t.toString()||n.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){te.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return te.lastConnectedSIWECaipNetwork},async fetchTokenBalance(t){var o,a;const e=I.getAccountData();if(!e)return[];const n=(o=I.state.activeCaipNetwork)==null?void 0:o.caipNetworkId,r=(a=I.state.activeCaipNetwork)==null?void 0:a.chainNamespace,s=I.state.activeCaipAddress,i=s?ee.getPlainAddress(s):void 0;if(I.setAccountProp("balanceLoading",!0,r),e.lastRetry&&!ee.isAllowedRetry(e.lastRetry,30*ke.ONE_SEC_MS))return I.setAccountProp("balanceLoading",!1,r),[];try{if(i&&n&&r){const c=await sg.getMyTokensWithBalance();return I.setAccountProp("tokenBalance",c,r),I.setAccountProp("lastRetry",void 0,r),I.setAccountProp("balanceLoading",!1,r),c}}catch(c){I.setAccountProp("lastRetry",Date.now(),r),t==null||t(c),Ur.showError("Token Balance Unavailable")}finally{I.setAccountProp("balanceLoading",!1,r)}return[]},isCaipNetworkDisabled(t){var c;const e=t.chainNamespace,n=!!((c=I.getAccountData(e))!=null&&c.caipAddress),r=I.getAllApprovedCaipNetworkIds(),s=I.getNetworkProp("supportsAllNetworks",e)!==!1,i=V.getConnectorId(e),o=V.getAuthConnector(),a=i===B.CONNECTOR_ID.AUTH&&o;return!n||s||a?!1:!(r!=null&&r.includes(t.caipNetworkId))}},I=tr(Lv),KO={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){var h,f;const n=I.state.activeCaipNetwork,r=I.state.activeChain,s=me.state.data;if(t.id===(n==null?void 0:n.id))return;const o=!!((h=I.getAccountData(r))!=null&&h.address),a=!!((f=I.getAccountData(t.chainNamespace))!=null&&f.address),c=t.chainNamespace!==r,u=V.getConnectorId(r)===B.CONNECTOR_ID.AUTH,d=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(p=>p===t.chainNamespace);e||u&&d?me.push("SwitchNetwork",{...s,network:t}):o&&c&&!a?me.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):me.push("SwitchNetwork",{...s,network:t})}},un=Xe({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),GO={state:un,subscribe(t){return Mt(un,()=>t(un))},subscribeKey(t,e){return kt(un,t,e)},async open(t){var o,a;const e=t==null?void 0:t.namespace,n=I.state.activeChain,r=e&&e!==n,s=(o=I.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress,i=I.state.noAdapters;if(X.state.wcBasic?de.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await de.prefetch(),V.setFilterByNamespace(t==null?void 0:t.namespace),Oe.setLoading(!0,e),e&&r){const c=((a=I.getNetworkData(e))==null?void 0:a.caipNetwork)||I.getRequestedCaipNetworks(e)[0];c&&(i?(await I.switchActiveNetwork(c),me.push("ConnectingWalletConnectBasic")):KO.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0}))}else F.state.manualWCControl||i&&!s?ee.isMobile()?me.reset("AllWallets"):me.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?me.reset(t.view,t.data):s?me.reset("Account"):me.reset("Connect");un.open=!0,gr.set({open:!0}),Ce.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=F.state.enableEmbedded,e=!!I.state.activeCaipAddress;un.open&&Ce.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),un.open=!1,me.reset("Connect"),Oe.clearLoading(),t?e?me.replace("Account"):me.push("Connect"):gr.set({open:!1}),X.resetUri()},setLoading(t,e){e&&un.loadingNamespaceMap.set(e,t),un.loading=t,gr.set({loading:t})},clearLoading(){un.loadingNamespaceMap.clear(),un.loading=!1,gr.set({loading:!1})},shake(){un.shake||(un.shake=!0,setTimeout(()=>{un.shake=!1},500))}},Oe=tr(GO),Ja={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Ep={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},YO={providers:z1,selectedProvider:null,error:null,purchaseCurrency:Ja,paymentCurrency:Ep,purchaseCurrencies:[Ja],paymentCurrencies:[],quotesLoading:!1},Be=Xe(YO),ZO={state:Be,subscribe(t){return Mt(Be,()=>t(Be))},subscribeKey(t,e){return kt(Be,t,e)},setSelectedProvider(t){var e,n;if(t&&t.name==="meld"){const r=I.state.activeChain,s=r===B.CHAIN.SOLANA?"SOL":"USDC",i=r?((n=(e=I.state.chains.get(r))==null?void 0:e.accountState)==null?void 0:n.address)??"":"",o=new URL(t.url);o.searchParams.append("publicKey",TI),o.searchParams.append("destinationCurrencyCode",s),o.searchParams.append("walletAddress",i),o.searchParams.append("externalCustomerId",F.state.projectId),Be.selectedProvider={...t,url:o.toString()}}else Be.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=z1.filter(r=>e.includes(r.name));Be.providers=n}else Be.providers=[]},setPurchaseCurrency(t){Be.purchaseCurrency=t},setPaymentCurrency(t){Be.paymentCurrency=t},setPurchaseAmount(t){vp.state.purchaseAmount=t},setPaymentAmount(t){vp.state.paymentAmount=t},async getAvailableCurrencies(){const t=await be.getOnrampOptions();Be.purchaseCurrencies=t.purchaseCurrencies,Be.paymentCurrencies=t.paymentCurrencies,Be.paymentCurrency=t.paymentCurrencies[0]||Ep,Be.purchaseCurrency=t.purchaseCurrencies[0]||Ja,await de.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await de.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Be.quotesLoading=!0;try{const n=await be.getOnrampQuote({purchaseCurrency:Be.purchaseCurrency,paymentCurrency:Be.paymentCurrency,amount:((t=Be.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Be.purchaseCurrency)==null?void 0:e.symbol});return Be.quotesLoading=!1,Be.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Be.error=n.message,Be.quotesLoading=!1,null}finally{Be.quotesLoading=!1}},resetState(){Be.selectedProvider=null,Be.error=null,Be.purchaseCurrency=Ja,Be.paymentCurrency=Ep,Be.purchaseCurrencies=[Ja],Be.paymentCurrencies=[],Be.paymentAmount=void 0,Be.purchaseAmount=void 0,Be.quotesLoading=!1}},vp=tr(ZO);var ig={exports:{}},zo=typeof Reflect=="object"?Reflect:null,ny=zo&&typeof zo.apply=="function"?zo.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},gu;zo&&typeof zo.ownKeys=="function"?gu=zo.ownKeys:Object.getOwnPropertySymbols?gu=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:gu=function(e){return Object.getOwnPropertyNames(e)};function JO(t){console&&console.warn&&console.warn(t)}var Mv=Number.isNaN||function(e){return e!==e};function Ke(){Ke.init.call(this)}ig.exports=Ke;ig.exports.once=t8;Ke.EventEmitter=Ke;Ke.prototype._events=void 0;Ke.prototype._eventsCount=0;Ke.prototype._maxListeners=void 0;var ry=10;function Ld(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ke,"defaultMaxListeners",{enumerable:!0,get:function(){return ry},set:function(t){if(typeof t!="number"||t<0||Mv(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ry=t}});Ke.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ke.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Mv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Fv(t){return t._maxListeners===void 0?Ke.defaultMaxListeners:t._maxListeners}Ke.prototype.getMaxListeners=function(){return Fv(this)};Ke.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")ny(c,this,n);else for(var l=c.length,u=qv(c,l),r=0;r<l;++r)ny(u[r],this,n);return!0};function jv(t,e,n,r){var s,i,o;if(Ld(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=Fv(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,JO(a)}return t}Ke.prototype.addListener=function(e,n){return jv(this,e,n,!1)};Ke.prototype.on=Ke.prototype.addListener;Ke.prototype.prependListener=function(e,n){return jv(this,e,n,!0)};function XO(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Hv(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=XO.bind(r);return s.listener=n,r.wrapFn=s,s}Ke.prototype.once=function(e,n){return Ld(n),this.on(e,Hv(this,e,n)),this};Ke.prototype.prependOnceListener=function(e,n){return Ld(n),this.prependListener(e,Hv(this,e,n)),this};Ke.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Ld(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():QO(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Ke.prototype.off=Ke.prototype.removeListener;Ke.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function zv(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?e8(s):qv(s,s.length)}Ke.prototype.listeners=function(e){return zv(this,e,!0)};Ke.prototype.rawListeners=function(e){return zv(this,e,!1)};Ke.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Wv.call(t,e)};Ke.prototype.listenerCount=Wv;function Wv(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ke.prototype.eventNames=function(){return this._eventsCount>0?gu(this._events):[]};function qv(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function QO(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function e8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function t8(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}Vv(t,e,i,{once:!0}),e!=="error"&&n8(t,s,{once:!0})})}function n8(t,e,n){typeof t.on=="function"&&Vv(t,"error",e,n)}function Vv(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var nr=ig.exports;const og=bd(nr);var Z={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cp=function(t,e){return Cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Cp(t,e)};function r8(t,e){Cp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _p=function(){return _p=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_p.apply(this,arguments)};function s8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function i8(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function o8(t,e){return function(n,r){e(n,r,t)}}function a8(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function c8(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function l8(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function u8(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function d8(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ap(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kv(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function h8(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Kv(arguments[e]));return t}function f8(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Kc(t){return this instanceof Kc?(this.v=t,this):new Kc(t)}function p8(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Kc?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function g8(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Kc(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function m8(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ap=="function"?Ap(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function y8(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b8(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function w8(t){return t&&t.__esModule?t:{default:t}}function E8(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function v8(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const C8=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return _p},__asyncDelegator:g8,__asyncGenerator:p8,__asyncValues:m8,__await:Kc,__awaiter:c8,__classPrivateFieldGet:E8,__classPrivateFieldSet:v8,__createBinding:u8,__decorate:i8,__exportStar:d8,__extends:r8,__generator:l8,__importDefault:w8,__importStar:b8,__makeTemplateObject:y8,__metadata:a8,__param:o8,__read:Kv,__rest:s8,__spread:h8,__spreadArrays:f8,__values:Ap},Symbol.toStringTag,{value:"Module"})),pl=pI(C8);var Ph={},Ia={},sy;function _8(){if(sy)return Ia;sy=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Ia.delay=t,Ia}var _i={},kh={},Ai={},iy;function A8(){return iy||(iy=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.ONE_THOUSAND=Ai.ONE_HUNDRED=void 0,Ai.ONE_HUNDRED=100,Ai.ONE_THOUSAND=1e3),Ai}var Dh={},oy;function I8(){return oy||(oy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Dh)),Dh}var ay;function Gv(){return ay||(ay=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pl;e.__exportStar(A8(),t),e.__exportStar(I8(),t)}(kh)),kh}var cy;function S8(){if(cy)return _i;cy=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.fromMiliseconds=_i.toMiliseconds=void 0;const t=Gv();function e(r){return r*t.ONE_THOUSAND}_i.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return _i.fromMiliseconds=n,_i}var ly;function N8(){return ly||(ly=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pl;e.__exportStar(_8(),t),e.__exportStar(S8(),t)}(Ph)),Ph}var _o={},uy;function x8(){if(uy)return _o;uy=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return _o.Watch=t,_o.default=t,_o}var $h={},Sa={},dy;function T8(){if(dy)return Sa;dy=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.IWatch=void 0;class t{}return Sa.IWatch=t,Sa}var hy;function O8(){return hy||(hy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),pl.__exportStar(T8(),t)}($h)),$h}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pl;e.__exportStar(N8(),t),e.__exportStar(x8(),t),e.__exportStar(O8(),t),e.__exportStar(Gv(),t)})(Z);class go{}let R8=class extends go{constructor(e){super()}};const fy=Z.FIVE_SECONDS,mo={pulse:"heartbeat_pulse"};let P8=class Yv extends R8{constructor(e){super(e),this.events=new nr.EventEmitter,this.interval=fy,this.interval=(e==null?void 0:e.interval)||fy}static async init(e){const n=new Yv(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Z.toMiliseconds(this.interval))}pulse(){this.events.emit(mo.pulse)}};const k8=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,D8=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,$8=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function U8(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){B8(t);return}return e}function B8(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ll(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!$8.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(k8.test(t)||D8.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,U8)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function L8(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function xt(t,...e){try{return L8(t(...e))}catch(n){return Promise.reject(n)}}function M8(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function F8(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function mu(t){if(M8(t))return String(t);if(F8(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return mu(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Ip="base64:";function j8(t){return typeof t=="string"?t:Ip+W8(t)}function H8(t){return typeof t!="string"||!t.startsWith(Ip)?t:z8(t.slice(Ip.length))}function z8(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function W8(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function fn(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function q8(...t){return fn(t.join(":"))}function Ml(t){return t=fn(t),t?t+":":""}function V8(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function K8(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const G8="memory",Y8=()=>{const t=new Map;return{name:G8,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Z8(t={}){const e={mounts:{"":t.driver||Y8()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=fn(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await py(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",m=fn(g?p:p.key),w=g?void 0:p.value,_=g||!p.options?u:{...u,...p.options},b=n(m);f(b).items.push({key:m,value:w,relativeKey:b.relativeKey,options:_})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=fn(l);const{relativeKey:d,driver:h}=n(l);return xt(h.hasItem,d,u)},getItem(l,u={}){l=fn(l);const{relativeKey:d,driver:h}=n(l);return xt(h.getItem,d,u).then(f=>Ll(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?xt(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:q8(d.base,f.key),value:Ll(f.value)}))):Promise.all(d.items.map(h=>xt(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Ll(f)})))))},getItemRaw(l,u={}){l=fn(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?xt(h.getItemRaw,d,u):xt(h.getItem,d,u).then(f=>H8(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=fn(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await xt(f.setItem,h,mu(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return xt(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:mu(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>xt(d.driver.setItem,h.relativeKey,mu(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=fn(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await xt(f.setItemRaw,h,u,d);else if(f.setItem)await xt(f.setItem,h,j8(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=fn(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await xt(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await xt(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=fn(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await xt(h.getMeta,d,u)),!u.nativeOnly){const p=await xt(h.getItem,d+"$",u).then(g=>Ll(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=Ml(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const w of d){(m=w.driver.flags)!=null&&m.maxDepth||(p=!1);const _=await xt(w.driver.getKeys,w.relativeBase,u);for(const b of _){const A=w.mountpoint+fn(b);h.some(C=>A.startsWith(C))||f.push(A)}h=[w.mountpoint,...h.filter(b=>!b.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(w=>(!g||V8(w,u.maxDepth))&&K8(w,l))},async clear(l,u={}){l=Ml(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return xt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>gy(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Ml(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(py(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=Ml(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await gy(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=fn(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=fn(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function py(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function gy(t){typeof t.dispose=="function"&&await xt(t.dispose)}function yo(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Zv(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=yo(n);return(s,i)=>r.then(o=>i(o.transaction(e,s).objectStore(e)))}let Uh;function gl(){return Uh||(Uh=Zv("keyval-store","keyval")),Uh}function my(t,e=gl()){return e("readonly",n=>yo(n.get(t)))}function J8(t,e,n=gl()){return n("readwrite",r=>(r.put(e,t),yo(r.transaction)))}function X8(t,e=gl()){return e("readwrite",n=>(n.delete(t),yo(n.transaction)))}function Q8(t=gl()){return t("readwrite",e=>(e.clear(),yo(e.transaction)))}function eR(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},yo(t.transaction)}function tR(t=gl()){return t("readonly",e=>{if(e.getAllKeys)return yo(e.getAllKeys());const n=[];return eR(e,r=>n.push(r.key)).then(()=>n)})}const nR="idb-keyval";var rR=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=Zv(t.dbName,t.storeName)),{name:nR,options:t,async hasItem(s){return!(typeof await my(n(s),r)>"u")},async getItem(s){return await my(n(s),r)??null},setItem(s,i){return J8(n(s),i,r)},removeItem(s){return X8(n(s),r)},getKeys(){return tR(r)},clear(){return Q8(r)}}};const sR="WALLET_CONNECT_V2_INDEXED_DB",iR="keyvaluestorage";let oR=class{constructor(){this.indexedDb=Z8({driver:rR({dbName:sR,storeName:iR})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,As(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yu={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Bh<"u"&&Bh.localStorage?yu.exports=Bh.localStorage:typeof window<"u"&&window.localStorage?yu.exports=window.localStorage:yu.exports=new e})();function aR(t){var e;return[t[0],eo((e=t[1])!=null?e:"")]}let cR=class{constructor(){this.localStorage=yu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(aR)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return eo(n)}async setItem(e,n){this.localStorage.setItem(e,As(n))}async removeItem(e){this.localStorage.removeItem(e)}};const lR="wc_storage_version",yy=1,uR=async(t,e,n)=>{const r=lR,s=await e.getItem(r);if(s&&s>=yy){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,yy),n(e),dR(t,o)},dR=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let hR=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new cR;this.storage=e;try{const n=new oR;uR(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var fR=Object.defineProperty,pR=(t,e,n)=>e in t?fR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,by=(t,e,n)=>pR(t,typeof e!="symbol"?e+"":e,n);let gR=class extends go{constructor(e){super(),this.opts=e,by(this,"protocol","wc"),by(this,"version",2)}};var mR=Object.defineProperty,yR=(t,e,n)=>e in t?mR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bR=(t,e,n)=>yR(t,e+"",n);let wR=class extends go{constructor(e,n){super(),this.core=e,this.logger=n,bR(this,"records",new Map)}},ER=class{constructor(e,n){this.logger=e,this.core=n}},vR=class extends go{constructor(e,n){super(),this.relayer=e,this.logger=n}},CR=class extends go{constructor(e){super()}},_R=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},AR=class extends go{constructor(e,n){super(),this.relayer=e,this.logger=n}},IR=class extends go{constructor(e,n){super(),this.core=e,this.logger=n}},SR=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},NR=class{constructor(e,n){this.projectId=e,this.logger=n}},xR=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var TR=Object.defineProperty,OR=(t,e,n)=>e in t?TR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wy=(t,e,n)=>OR(t,typeof e!="symbol"?e+"":e,n);let RR=class{constructor(e){this.opts=e,wy(this,"protocol","wc"),wy(this,"version",2)}},PR=class{constructor(e){this.client=e}};function kR(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jv(t,...e){if(!kR(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ey(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function DR(t,e){Jv(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ao=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function $R(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Xv(t){return typeof t=="string"&&(t=$R(t)),Jv(t),t}let UR=class{clone(){return this._cloneInto()}};function BR(t){const e=r=>t().update(Xv(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Qv(t=32){if(Ao&&typeof Ao.getRandomValues=="function")return Ao.getRandomValues(new Uint8Array(t));if(Ao&&typeof Ao.randomBytes=="function")return Ao.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function LR(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let MR=class extends UR{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Lh(this.buffer)}update(e){Ey(this);const{view:n,buffer:r,blockLen:s}=this;e=Xv(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Lh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ey(this),DR(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;LR(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Lh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Fl=BigInt(2**32-1),Sp=BigInt(32);function eC(t,e=!1){return e?{h:Number(t&Fl),l:Number(t>>Sp&Fl)}:{h:Number(t>>Sp&Fl)|0,l:Number(t&Fl)|0}}function FR(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=eC(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const jR=(t,e)=>BigInt(t>>>0)<<Sp|BigInt(e>>>0),HR=(t,e,n)=>t>>>n,zR=(t,e,n)=>t<<32-n|e>>>n,WR=(t,e,n)=>t>>>n|e<<32-n,qR=(t,e,n)=>t<<32-n|e>>>n,VR=(t,e,n)=>t<<64-n|e>>>n-32,KR=(t,e,n)=>t>>>n-32|e<<64-n,GR=(t,e)=>e,YR=(t,e)=>t,ZR=(t,e,n)=>t<<n|e>>>32-n,JR=(t,e,n)=>e<<n|t>>>32-n,XR=(t,e,n)=>e<<n-32|t>>>64-n,QR=(t,e,n)=>t<<n-32|e>>>64-n;function eP(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const tP=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),nP=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,rP=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),sP=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,iP=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),oP=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ie={fromBig:eC,split:FR,toBig:jR,shrSH:HR,shrSL:zR,rotrSH:WR,rotrSL:qR,rotrBH:VR,rotrBL:KR,rotr32H:GR,rotr32L:YR,rotlSH:ZR,rotlSL:JR,rotlBH:XR,rotlBL:QR,add:eP,add3L:tP,add3H:nP,add4L:rP,add4H:sP,add5H:oP,add5L:iP},[aP,cP]=Ie.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ks=new Uint32Array(80),Ds=new Uint32Array(80);let lP=class extends MR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let b=0;b<16;b++,n+=4)ks[b]=e.getUint32(n),Ds[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const A=ks[b-15]|0,C=Ds[b-15]|0,S=Ie.rotrSH(A,C,1)^Ie.rotrSH(A,C,8)^Ie.shrSH(A,C,7),N=Ie.rotrSL(A,C,1)^Ie.rotrSL(A,C,8)^Ie.shrSL(A,C,7),D=ks[b-2]|0,O=Ds[b-2]|0,L=Ie.rotrSH(D,O,19)^Ie.rotrBH(D,O,61)^Ie.shrSH(D,O,6),M=Ie.rotrSL(D,O,19)^Ie.rotrBL(D,O,61)^Ie.shrSL(D,O,6),U=Ie.add4L(N,M,Ds[b-7],Ds[b-16]),R=Ie.add4H(U,S,L,ks[b-7],ks[b-16]);ks[b]=R|0,Ds[b]=U|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:w,Hl:_}=this;for(let b=0;b<80;b++){const A=Ie.rotrSH(d,h,14)^Ie.rotrSH(d,h,18)^Ie.rotrBH(d,h,41),C=Ie.rotrSL(d,h,14)^Ie.rotrSL(d,h,18)^Ie.rotrBL(d,h,41),S=d&f^~d&g,N=h&p^~h&m,D=Ie.add5L(_,C,N,cP[b],Ds[b]),O=Ie.add5H(D,w,A,S,aP[b],ks[b]),L=D|0,M=Ie.rotrSH(r,s,28)^Ie.rotrBH(r,s,34)^Ie.rotrBH(r,s,39),U=Ie.rotrSL(r,s,28)^Ie.rotrBL(r,s,34)^Ie.rotrBL(r,s,39),R=r&i^r&a^i&a,$=s&o^s&c^o&c;w=g|0,_=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=Ie.add(l|0,u|0,O|0,L|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const y=Ie.add3L(L,U,$);r=Ie.add3H(y,O,M,R),s=y|0}({h:r,l:s}=Ie.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ie.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ie.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ie.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ie.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ie.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Ie.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:_}=Ie.add(this.Hh|0,this.Hl|0,w|0,_|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,w,_)}roundClean(){ks.fill(0),Ds.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const uP=BR(()=>new lP);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ag=BigInt(0),tC=BigInt(1),dP=BigInt(2);function cg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lg(t){if(!cg(t))throw new Error("Uint8Array expected")}function Mh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const hP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ug(t){lg(t);let e="";for(let n=0;n<t.length;n++)e+=hP[t[n]];return e}function nC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ag:BigInt("0x"+t)}const Jr={_0:48,_9:57,A:65,F:70,a:97,f:102};function vy(t){if(t>=Jr._0&&t<=Jr._9)return t-Jr._0;if(t>=Jr.A&&t<=Jr.F)return t-(Jr.A-10);if(t>=Jr.a&&t<=Jr.f)return t-(Jr.a-10)}function rC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=vy(t.charCodeAt(i)),a=vy(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function fP(t){return nC(ug(t))}function bu(t){return lg(t),nC(ug(Uint8Array.from(t).reverse()))}function sC(t,e){return rC(t.toString(16).padStart(e*2,"0"))}function Np(t,e){return sC(t,e).reverse()}function Xr(t,e,n){let r;if(typeof e=="string")try{r=rC(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(cg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Cy(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];lg(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Fh=t=>typeof t=="bigint"&&ag<=t;function pP(t,e,n){return Fh(t)&&Fh(e)&&Fh(n)&&e<=t&&t<n}function Na(t,e,n,r){if(!pP(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gP(t){let e;for(e=0;t>ag;t>>=tC,e+=1);return e}const mP=t=>(dP<<BigInt(t-1))-tC,yP={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||cg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function dg(t,e,n={}){const r=(s,i,o)=>{const a=yP[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function _y(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Pt=BigInt(0),ut=BigInt(1),Pi=BigInt(2),bP=BigInt(3),xp=BigInt(4),Ay=BigInt(5),Iy=BigInt(8);function _t(t,e){const n=t%e;return n>=Pt?n:e+n}function wP(t,e,n){if(e<Pt)throw new Error("invalid exponent, negatives unsupported");if(n<=Pt)throw new Error("invalid modulus");if(n===ut)return Pt;let r=ut;for(;e>Pt;)e&ut&&(r=r*t%n),t=t*t%n,e>>=ut;return r}function Ir(t,e,n){let r=t;for(;e-- >Pt;)r*=r,r%=n;return r}function Sy(t,e){if(t===Pt)throw new Error("invert: expected non-zero number");if(e<=Pt)throw new Error("invert: expected positive modulus, got "+e);let n=_t(t,e),r=e,s=Pt,i=ut;for(;n!==Pt;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ut)throw new Error("invert: does not exist");return _t(s,e)}function EP(t){const e=(t-ut)/Pi;let n,r,s;for(n=t-ut,r=0;n%Pi===Pt;n/=Pi,r++);for(s=Pi;s<t&&wP(s,e,t)!==t-ut;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ut)/xp;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ut)/Pi;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ut<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function vP(t){if(t%xp===bP){const e=(t+ut)/xp;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%Iy===Ay){const e=(t-Ay)/Iy;return function(n,r){const s=n.mul(r,Pi),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Pi),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return EP(t)}const CP=(t,e)=>(_t(t,e)&ut)===ut,_P=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function AP(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=_P.reduce((r,s)=>(r[s]="function",r),e);return dg(t,n)}function IP(t,e,n){if(n<Pt)throw new Error("invalid exponent, negatives unsupported");if(n===Pt)return t.ONE;if(n===ut)return e;let r=t.ONE,s=e;for(;n>Pt;)n&ut&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ut;return r}function SP(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function iC(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function oC(t,e,n=!1,r={}){if(t<=Pt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=iC(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:mP(s),ZERO:Pt,ONE:ut,create:c=>_t(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Pt<=c&&c<t},is0:c=>c===Pt,isOdd:c=>(c&ut)===ut,neg:c=>_t(-c,t),eql:(c,l)=>c===l,sqr:c=>_t(c*c,t),add:(c,l)=>_t(c+l,t),sub:(c,l)=>_t(c-l,t),mul:(c,l)=>_t(c*l,t),pow:(c,l)=>IP(a,c,l),div:(c,l)=>_t(c*Sy(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Sy(c,t),sqrt:r.sqrt||(c=>(o||(o=vP(t)),o(a,c))),invertBatch:c=>SP(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Np(c,i):sC(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?bu(c):fP(c)}});return Object.freeze(a)}const Ny=BigInt(0),jl=BigInt(1);function jh(t,e){const n=e.negate();return t?n:e}function aC(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Hh(t,e){aC(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function NP(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function xP(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const zh=new WeakMap,cC=new WeakMap;function Wh(t){return cC.get(t)||1}function TP(t,e){return{constTimeNegate:jh,hasPrecomputes(n){return Wh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Ny;)r&jl&&(s=s.add(i)),i=i.double(),r>>=jl;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Hh(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Hh(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=jl);const g=f,m=f+Math.abs(p)-1,w=h%2!==0,_=p<0;p===0?c=c.add(jh(w,r[g])):a=a.add(jh(_,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Hh(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===Ny)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=jl),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=zh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&zh.set(r,s(i))),i},wNAFCached(n,r,s){const i=Wh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Wh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){aC(r,e),cC.set(n,r),zh.delete(n)}}}function OP(t,e,n,r){if(NP(n,t),xP(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=gP(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function RP(t){return AP(t.Fp),dg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iC(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const rr=BigInt(0),dn=BigInt(1),Hl=BigInt(2),PP=BigInt(8),kP={zip215:!0};function DP(t){const e=RP(t);return dg(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function $P(t){const e=DP(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Hl<<BigInt(a*8)-dn,u=n.create,d=oC(e.n,e.nBitLength),h=e.uvRatio||((y,v)=>{try{return{isValid:!0,value:n.sqrt(y*n.inv(v))}}catch{return{isValid:!1,value:rr}}}),f=e.adjustScalarBytes||(y=>y),p=e.domain||((y,v,x)=>{if(Mh("phflag",x),v.length||x)throw new Error("Contexts/pre-hash are not supported");return y});function g(y,v){Na("coordinate "+y,v,rr,l)}function m(y){if(!(y instanceof b))throw new Error("ExtendedPoint expected")}const w=_y((y,v)=>{const{ex:x,ey:k,ez:T}=y,P=y.is0();v==null&&(v=P?PP:n.inv(T));const j=u(x*v),H=u(k*v),Q=u(T*v);if(P)return{x:rr,y:dn};if(Q!==dn)throw new Error("invZ was invalid");return{x:j,y:H}}),_=_y(y=>{const{a:v,d:x}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:k,ey:T,ez:P,et:j}=y,H=u(k*k),Q=u(T*T),K=u(P*P),G=u(K*K),ae=u(H*v),ge=u(K*u(ae+Q)),xe=u(G+u(x*u(H*Q)));if(ge!==xe)throw new Error("bad point: equation left != right (1)");const pe=u(k*T),Te=u(P*j);if(pe!==Te)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(v,x,k,T){this.ex=v,this.ey=x,this.ez=k,this.et=T,g("x",v),g("y",x),g("z",k),g("t",T),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof b)throw new Error("extended point not allowed");const{x,y:k}=v||{};return g("x",x),g("y",k),new b(x,k,dn,u(x*k))}static normalizeZ(v){const x=n.invertBatch(v.map(k=>k.ez));return v.map((k,T)=>k.toAffine(x[T])).map(b.fromAffine)}static msm(v,x){return OP(b,d,v,x)}_setWindowSize(v){S.setWindowSize(this,v)}assertValidity(){_(this)}equals(v){m(v);const{ex:x,ey:k,ez:T}=this,{ex:P,ey:j,ez:H}=v,Q=u(x*H),K=u(P*T),G=u(k*H),ae=u(j*T);return Q===K&&G===ae}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:v}=e,{ex:x,ey:k,ez:T}=this,P=u(x*x),j=u(k*k),H=u(Hl*u(T*T)),Q=u(v*P),K=x+k,G=u(u(K*K)-P-j),ae=Q+j,ge=ae-H,xe=Q-j,pe=u(G*ge),Te=u(ae*xe),st=u(G*xe),bt=u(ge*ae);return new b(pe,Te,bt,st)}add(v){m(v);const{a:x,d:k}=e,{ex:T,ey:P,ez:j,et:H}=this,{ex:Q,ey:K,ez:G,et:ae}=v;if(x===BigInt(-1)){const rm=u((P-T)*(K+Q)),sm=u((P+T)*(K-Q)),lh=u(sm-rm);if(lh===rr)return this.double();const im=u(j*Hl*ae),om=u(H*Hl*G),am=om+im,cm=sm+rm,lm=om-im,J2=u(am*lh),X2=u(cm*lm),Q2=u(am*lm),eI=u(lh*cm);return new b(J2,X2,eI,Q2)}const ge=u(T*Q),xe=u(P*K),pe=u(H*k*ae),Te=u(j*G),st=u((T+P)*(Q+K)-ge-xe),bt=Te-pe,It=Te+pe,Xt=u(xe-x*ge),Gr=u(st*bt),xs=u(It*Xt),Y2=u(st*Xt),Z2=u(bt*It);return new b(Gr,xs,Z2,Y2)}subtract(v){return this.add(v.negate())}wNAF(v){return S.wNAFCached(this,v,b.normalizeZ)}multiply(v){const x=v;Na("scalar",x,dn,r);const{p:k,f:T}=this.wNAF(x);return b.normalizeZ([k,T])[0]}multiplyUnsafe(v,x=b.ZERO){const k=v;return Na("scalar",k,rr,r),k===rr?C:this.is0()||k===dn?this:S.wNAFCachedUnsafe(this,k,b.normalizeZ,x)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(v){return w(this,v)}clearCofactor(){const{h:v}=e;return v===dn?this:this.multiplyUnsafe(v)}static fromHex(v,x=!1){const{d:k,a:T}=e,P=n.BYTES;v=Xr("pointHex",v,P),Mh("zip215",x);const j=v.slice(),H=v[P-1];j[P-1]=H&-129;const Q=bu(j),K=x?l:n.ORDER;Na("pointHex.y",Q,rr,K);const G=u(Q*Q),ae=u(G-dn),ge=u(k*G-T);let{isValid:xe,value:pe}=h(ae,ge);if(!xe)throw new Error("Point.fromHex: invalid y coordinate");const Te=(pe&dn)===dn,st=(H&128)!==0;if(!x&&pe===rr&&st)throw new Error("Point.fromHex: x=0 and x_0=1");return st!==Te&&(pe=u(-pe)),b.fromAffine({x:pe,y:Q})}static fromPrivateKey(v){return O(v).point}toRawBytes(){const{x:v,y:x}=this.toAffine(),k=Np(x,n.BYTES);return k[k.length-1]|=v&dn?128:0,k}toHex(){return ug(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,dn,u(e.Gx*e.Gy)),b.ZERO=new b(rr,dn,dn,rr);const{BASE:A,ZERO:C}=b,S=TP(b,a*8);function N(y){return _t(y,r)}function D(y){return N(bu(y))}function O(y){const v=n.BYTES;y=Xr("private key",y,v);const x=Xr("hashed private key",i(y),2*v),k=f(x.slice(0,v)),T=x.slice(v,2*v),P=D(k),j=A.multiply(P),H=j.toRawBytes();return{head:k,prefix:T,scalar:P,point:j,pointBytes:H}}function L(y){return O(y).pointBytes}function M(y=new Uint8Array,...v){const x=Cy(...v);return D(i(p(x,Xr("context",y),!!s)))}function U(y,v,x={}){y=Xr("message",y),s&&(y=s(y));const{prefix:k,scalar:T,pointBytes:P}=O(v),j=M(x.context,k,y),H=A.multiply(j).toRawBytes(),Q=M(x.context,H,P,y),K=N(j+Q*T);Na("signature.s",K,rr,r);const G=Cy(H,Np(K,n.BYTES));return Xr("result",G,n.BYTES*2)}const R=kP;function $(y,v,x,k=R){const{context:T,zip215:P}=k,j=n.BYTES;y=Xr("signature",y,2*j),v=Xr("message",v),x=Xr("publicKey",x,j),P!==void 0&&Mh("zip215",P),s&&(v=s(v));const H=bu(y.slice(j,2*j));let Q,K,G;try{Q=b.fromHex(x,P),K=b.fromHex(y.slice(0,j),P),G=A.multiplyUnsafe(H)}catch{return!1}if(!P&&Q.isSmallOrder())return!1;const ae=M(T,K.toRawBytes(),Q.toRawBytes(),v);return K.add(Q.multiplyUnsafe(ae)).subtract(G).clearCofactor().equals(b.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:L,sign:U,verify:$,ExtendedPoint:b,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>o(n.BYTES),precompute(y=8,v=b.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}}}}BigInt(0),BigInt(1);const hg=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xy=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const UP=BigInt(1),Ty=BigInt(2);BigInt(3);const BP=BigInt(5),LP=BigInt(8);function MP(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=hg,o=t*t%i*t%i,a=Ir(o,Ty,i)*o%i,c=Ir(a,UP,i)*t%i,l=Ir(c,BP,i)*c%i,u=Ir(l,e,i)*l%i,d=Ir(u,n,i)*u%i,h=Ir(d,r,i)*d%i,f=Ir(h,s,i)*h%i,p=Ir(f,s,i)*h%i,g=Ir(p,e,i)*l%i;return{pow_p_5_8:Ir(g,Ty,i)*t%i,b2:o}}function FP(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function jP(t,e){const n=hg,r=_t(e*e*e,n),s=_t(r*r*e,n),i=MP(t*s).pow_p_5_8;let o=_t(t*r*i,n);const a=_t(e*o*o,n),c=o,l=_t(o*xy,n),u=a===t,d=a===_t(-t,n),h=a===_t(-t*xy,n);return u&&(o=c),(d||h)&&(o=l),CP(o,n)&&(o=_t(-o,n)),{isValid:u||d,value:o}}const HP=oC(hg,void 0,!0),zP={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:HP,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:LP,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:uP,randomBytes:Qv,adjustScalarBytes:FP,uvRatio:jP},lC=$P(zP),WP="EdDSA",qP="JWT",Zu=".",Md="base64url",uC="utf8",dC="utf8",VP=":",KP="did",GP="key",Oy="base58btc",YP="z",ZP="K36",JP=32;function fg(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function hC(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fg(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function fC(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=hC(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return fg(n)}function XP(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,_=p.length;w!==_&&p[w]===0;)w++,g++;for(var b=(_-w)*u+1>>>0,A=new Uint8Array(b);w!==_;){for(var C=p[w],S=0,N=b-1;(C!==0||S<m)&&N!==-1;N--,S++)C+=256*A[N]>>>0,A[N]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=S,w++}for(var D=b-m;D!==b&&A[D]===0;)D++;for(var O=c.repeat(g);D<b;++D)O+=t.charAt(A[D]);return O}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var _=(p.length-g)*l+1>>>0,b=new Uint8Array(_);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=_-1;(A!==0||C<w)&&S!==-1;S--,C++)A+=a*b[S]>>>0,b[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=C,g++}if(p[g]!==" "){for(var N=_-w;N!==_&&b[N]===0;)N++;for(var D=new Uint8Array(m+(_-N)),O=m;N!==_;)D[O++]=b[N++];return D}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var QP=XP,ek=QP;const pC=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},tk=t=>new TextEncoder().encode(t),nk=t=>new TextDecoder().decode(t);let rk=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},sk=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return gC(this,e)}},ik=class{constructor(e){this.decoders=e}or(e){return gC(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const gC=(t,e)=>new ik({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let ok=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new rk(e,n,r),this.decoder=new sk(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Fd=({name:t,prefix:e,encode:n,decode:r})=>new ok(t,e,n,r),ml=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=ek(n,e);return Fd({prefix:t,name:e,encode:r,decode:i=>pC(s(i))})},ak=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},ck=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},jt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Fd({prefix:e,name:t,encode(s){return ck(s,r,n)},decode(s){return ak(s,r,n,t)}}),lk=Fd({prefix:"\0",name:"identity",encode:t=>nk(t),decode:t=>tk(t)});var uk=Object.freeze({__proto__:null,identity:lk});const dk=jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hk=Object.freeze({__proto__:null,base2:dk});const fk=jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var pk=Object.freeze({__proto__:null,base8:fk});const gk=ml({prefix:"9",name:"base10",alphabet:"0123456789"});var mk=Object.freeze({__proto__:null,base10:gk});const yk=jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bk=jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var wk=Object.freeze({__proto__:null,base16:yk,base16upper:bk});const Ek=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vk=jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ck=jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_k=jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ak=jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ik=jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Sk=jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nk=jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xk=jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Tk=Object.freeze({__proto__:null,base32:Ek,base32upper:vk,base32pad:Ck,base32padupper:_k,base32hex:Ak,base32hexupper:Ik,base32hexpad:Sk,base32hexpadupper:Nk,base32z:xk});const Ok=ml({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rk=ml({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Pk=Object.freeze({__proto__:null,base36:Ok,base36upper:Rk});const kk=ml({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Dk=ml({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $k=Object.freeze({__proto__:null,base58btc:kk,base58flickr:Dk});const Uk=jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Bk=jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lk=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mk=jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Fk=Object.freeze({__proto__:null,base64:Uk,base64pad:Bk,base64url:Lk,base64urlpad:Mk});const mC=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),jk=mC.reduce((t,e,n)=>(t[n]=e,t),[]),Hk=mC.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function zk(t){return t.reduce((e,n)=>(e+=jk[n],e),"")}function Wk(t){const e=[];for(const n of t){const r=Hk[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const qk=Fd({prefix:"ðŸš€",name:"base256emoji",encode:zk,decode:Wk});var Vk=Object.freeze({__proto__:null,base256emoji:qk}),Kk=yC,Ry=128,Gk=-128,Yk=Math.pow(2,31);function yC(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Yk;)e[n++]=t&255|Ry,t/=128;for(;t&Gk;)e[n++]=t&255|Ry,t>>>=7;return e[n]=t|0,yC.bytes=n-r+1,e}var Zk=Tp,Jk=128,Py=127;function Tp(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Tp.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Py)<<s:(o&Py)*Math.pow(2,s),s+=7}while(o>=Jk);return Tp.bytes=i-r,n}var Xk=Math.pow(2,7),Qk=Math.pow(2,14),e4=Math.pow(2,21),t4=Math.pow(2,28),n4=Math.pow(2,35),r4=Math.pow(2,42),s4=Math.pow(2,49),i4=Math.pow(2,56),o4=Math.pow(2,63),a4=function(t){return t<Xk?1:t<Qk?2:t<e4?3:t<t4?4:t<n4?5:t<r4?6:t<s4?7:t<i4?8:t<o4?9:10},c4={encode:Kk,decode:Zk,encodingLength:a4},bC=c4;const ky=(t,e,n=0)=>(bC.encode(t,e,n),e),Dy=t=>bC.encodingLength(t),Op=(t,e)=>{const n=e.byteLength,r=Dy(t),s=r+Dy(n),i=new Uint8Array(s+n);return ky(t,i,0),ky(n,i,r),i.set(e,s),new l4(t,n,e,i)};let l4=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const wC=({name:t,code:e,encode:n})=>new u4(t,e,n);let u4=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Op(this.code,n):n.then(r=>Op(this.code,r))}else throw Error("Unknown type, must be binary type")}};const EC=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),d4=wC({name:"sha2-256",code:18,encode:EC("SHA-256")}),h4=wC({name:"sha2-512",code:19,encode:EC("SHA-512")});var f4=Object.freeze({__proto__:null,sha256:d4,sha512:h4});const vC=0,p4="identity",CC=pC,g4=t=>Op(vC,CC(t)),m4={code:vC,name:p4,encode:CC,digest:g4};var y4=Object.freeze({__proto__:null,identity:m4});new TextEncoder,new TextDecoder;const $y={...uk,...hk,...pk,...mk,...wk,...Tk,...Pk,...$k,...Fk,...Vk};({...f4,...y4});function _C(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Uy=_C("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),qh=_C("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=hC(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),AC={utf8:Uy,"utf-8":Uy,hex:$y.base16,latin1:qh,ascii:qh,binary:qh,...$y};function jd(t,e="utf8"){const n=AC[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function ga(t,e="utf8"){const n=AC[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fg(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function By(t){return eo(jd(ga(t,Md),uC))}function Ju(t){return jd(ga(As(t),uC),Md)}function IC(t){const e=ga(ZP,Oy),n=YP+jd(fC([e,t]),Oy);return[KP,GP,n].join(VP)}function b4(t){return jd(t,Md)}function w4(t){return ga(t,Md)}function E4(t){return ga([Ju(t.header),Ju(t.payload)].join(Zu),dC)}function v4(t){return[Ju(t.header),Ju(t.payload),b4(t.signature)].join(Zu)}function Rp(t){const e=t.split(Zu),n=By(e[0]),r=By(e[1]),s=w4(e[2]),i=ga(e.slice(0,2).join(Zu),dC);return{header:n,payload:r,signature:s,data:i}}function Ly(t=Qv(JP)){const e=lC.getPublicKey(t);return{secretKey:fC([t,e]),publicKey:e}}async function C4(t,e,n,r,s=Z.fromMiliseconds(Date.now())){const i={alg:WP,typ:qP},o=IC(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=E4({header:i,payload:c}),u=lC.sign(l,r.secretKey.slice(0,32));return v4({header:i,payload:c,signature:u})}var My=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},_4=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),A4=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),I4=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),S4=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),N4=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),x4=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,T4=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Fy=3,O4=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",x4]],jy=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function R4(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new N4:typeof navigator<"u"?k4(navigator.userAgent):$4()}function P4(t){return t!==""&&O4.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function k4(t){var e=P4(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new S4;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<Fy&&(s=My(My([],s,!0),U4(Fy-s.length),!0)):s=[];var i=s.join("."),o=D4(t),a=T4.exec(t);return a&&a[1]?new I4(n,i,o,a[1]):new _4(n,i,o)}function D4(t){for(var e=0,n=jy.length;e<n;e++){var r=jy[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function $4(){var t=typeof process<"u"&&process.version;return t?new A4(process.version.slice(1)):null}function U4(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.getLocalStorage=Je.getLocalStorageOrThrow=Je.getCrypto=Je.getCryptoOrThrow=SC=Je.getLocation=Je.getLocationOrThrow=pg=Je.getNavigator=Je.getNavigatorOrThrow=io=Je.getDocument=Je.getDocumentOrThrow=Je.getFromWindowOrThrow=Je.getFromWindow=void 0;function bo(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Je.getFromWindow=bo;function ma(t){const e=bo(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Je.getFromWindowOrThrow=ma;function B4(){return ma("document")}Je.getDocumentOrThrow=B4;function L4(){return bo("document")}var io=Je.getDocument=L4;function M4(){return ma("navigator")}Je.getNavigatorOrThrow=M4;function F4(){return bo("navigator")}var pg=Je.getNavigator=F4;function j4(){return ma("location")}Je.getLocationOrThrow=j4;function H4(){return bo("location")}var SC=Je.getLocation=H4;function z4(){return ma("crypto")}Je.getCryptoOrThrow=z4;function W4(){return bo("crypto")}Je.getCrypto=W4;function q4(){return ma("localStorage")}Je.getLocalStorageOrThrow=q4;function V4(){return bo("localStorage")}Je.getLocalStorage=V4;var gg={};Object.defineProperty(gg,"__esModule",{value:!0});var NC=gg.getWindowMetadata=void 0;const Hy=Je;function K4(){let t,e;try{t=Hy.getDocumentOrThrow(),e=Hy.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(m.indexOf("/")===0)w+=m;else{const _=e.pathname.split("/");_.pop();const b=_.join("/");w+=b+"/"+m}h.push(w)}else if(m.indexOf("//")===0){const w=e.protocol+m;h.push(w)}else h.push(m)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(g.length&&g){const m=p.getAttribute("content");if(m)return m}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}NC=gg.getWindowMetadata=K4;const G4="0.1.1";function Y4(){return G4}let ht=class Pp extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Pp){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Pp&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Y4()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return xC(this,e)}};function xC(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?xC(t.cause,e):e?null:t}const Io=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Z4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Gc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function oo(t,...e){if(!Z4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function J4(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Gc(t.outputLen),Gc(t.blockLen)}function oa(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function TC(t,e){oo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function X4(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function aa(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Vh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Sr(t,e){return t<<32-e|t>>>e}const Q4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function eD(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function tD(t){for(let e=0;e<t.length;e++)t[e]=eD(t[e]);return t}const zy=Q4?t=>t:tD;function nD(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Hd(t){return typeof t=="string"&&(t=nD(t)),oo(t),t}function rD(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];oo(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class mg{}function OC(t){const e=r=>t().update(Hd(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function sD(t=32){if(Io&&typeof Io.getRandomValues=="function")return Io.getRandomValues(new Uint8Array(t));if(Io&&typeof Io.randomBytes=="function")return Uint8Array.from(Io.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function iD(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function oD(t,e,n){return t&e^~t&n}function aD(t,e,n){return t&e^t&n^e&n}class cD extends mg{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Vh(this.buffer)}update(e){oa(this),e=Hd(e),oo(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Vh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){oa(this),TC(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,aa(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;iD(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Vh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const $s=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zl=BigInt(2**32-1),Wy=BigInt(32);function lD(t,e=!1){return e?{h:Number(t&zl),l:Number(t>>Wy&zl)}:{h:Number(t>>Wy&zl)|0,l:Number(t&zl)|0}}function uD(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=lD(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const dD=(t,e,n)=>t<<n|e>>>32-n,hD=(t,e,n)=>e<<n|t>>>32-n,fD=(t,e,n)=>e<<n-32|t>>>64-n,pD=(t,e,n)=>t<<n-32|e>>>64-n,gD=BigInt(0),xa=BigInt(1),mD=BigInt(2),yD=BigInt(7),bD=BigInt(256),wD=BigInt(113),RC=[],PC=[],kC=[];for(let t=0,e=xa,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],RC.push(2*(5*r+n)),PC.push((t+1)*(t+2)/2%64);let s=gD;for(let i=0;i<7;i++)e=(e<<xa^(e>>yD)*wD)%bD,e&mD&&(s^=xa<<(xa<<BigInt(i))-xa);kC.push(s)}const DC=uD(kC,!0),ED=DC[0],vD=DC[1],qy=(t,e,n)=>n>32?fD(t,e,n):dD(t,e,n),Vy=(t,e,n)=>n>32?pD(t,e,n):hD(t,e,n);function CD(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=qy(l,u,1)^n[a],h=Vy(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=PC[o],c=qy(s,i,a),l=Vy(s,i,a),u=RC[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=ED[r],t[1]^=vD[r]}aa(n)}class yg extends mg{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Gc(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=X4(this.state)}clone(){return this._cloneInto()}keccak(){zy(this.state32),CD(this.state32,this.rounds),zy(this.state32),this.posOut=0,this.pos=0}update(e){oa(this),e=Hd(e),oo(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){oa(this,!1),oo(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Gc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(TC(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,aa(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new yg(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const _D=(t,e,n)=>OC(()=>new yg(e,t,n)),AD=_D(1,136,256/8),ID=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Us=new Uint32Array(64);class SD extends cD{constructor(e=32){super(64,e,8,!1),this.A=$s[0]|0,this.B=$s[1]|0,this.C=$s[2]|0,this.D=$s[3]|0,this.E=$s[4]|0,this.F=$s[5]|0,this.G=$s[6]|0,this.H=$s[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Us[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Us[d-15],f=Us[d-2],p=Sr(h,7)^Sr(h,18)^h>>>3,g=Sr(f,17)^Sr(f,19)^f>>>10;Us[d]=g+Us[d-7]+p+Us[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Sr(a,6)^Sr(a,11)^Sr(a,25),f=u+h+oD(a,c,l)+ID[d]+Us[d]|0,g=(Sr(r,2)^Sr(r,13)^Sr(r,22))+aD(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){aa(Us)}destroy(){this.set(0,0,0,0,0,0,0,0),aa(this.buffer)}}const ND=OC(()=>new SD);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bg=BigInt(0),kp=BigInt(1);function yl(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function wg(t){if(!yl(t))throw new Error("Uint8Array expected")}function Yc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Wl(t){const e=t.toString(16);return e.length&1?"0"+e:e}function $C(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?bg:BigInt("0x"+t)}const UC=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zc(t){if(wg(t),UC)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=xD[t[n]];return e}const Qr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ky(t){if(t>=Qr._0&&t<=Qr._9)return t-Qr._0;if(t>=Qr.A&&t<=Qr.F)return t-(Qr.A-10);if(t>=Qr.a&&t<=Qr.f)return t-(Qr.a-10)}function Xu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(UC)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Ky(t.charCodeAt(i)),a=Ky(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Ki(t){return $C(Zc(t))}function BC(t){return wg(t),$C(Zc(Uint8Array.from(t).reverse()))}function bl(t,e){return Xu(t.toString(16).padStart(e*2,"0"))}function LC(t,e){return bl(t,e).reverse()}function Vn(t,e,n){let r;if(typeof e=="string")try{r=Xu(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(yl(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Qu(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];wg(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Kh=t=>typeof t=="bigint"&&bg<=t;function Eg(t,e,n){return Kh(t)&&Kh(e)&&Kh(n)&&e<=t&&t<n}function Wo(t,e,n,r){if(!Eg(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function TD(t){let e;for(e=0;t>bg;t>>=kp,e+=1);return e}const zd=t=>(kp<<BigInt(t))-kp,Gh=t=>new Uint8Array(t),Gy=t=>Uint8Array.from(t);function OD(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Gh(t),s=Gh(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=Gh(0))=>{s=a(Gy([0]),d),r=a(),d.length!==0&&(s=a(Gy([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return Qu(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const RD={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||yl(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Wd(t,e,n={}){const r=(s,i,o)=>{const a=RD[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Yy(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}function PD(t,e){if(Qy(t)>e)throw new QD({givenSize:Qy(t),maxSize:e})}const es={zero:48,nine:57,A:65,F:70,a:97,f:102};function Zy(t){if(t>=es.zero&&t<=es.nine)return t-es.zero;if(t>=es.A&&t<=es.F)return t-(es.A-10);if(t>=es.a&&t<=es.f)return t-(es.a-10)}function kD(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new e$({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function MC(t,e){if(mi(t)>e)throw new zD({givenSize:mi(t),maxSize:e})}function DD(t,e){if(typeof e=="number"&&e>0&&e>mi(t)-1)throw new HC({offset:e,position:"start",size:mi(t)})}function $D(t,e,n){if(typeof e=="number"&&typeof n=="number"&&mi(t)!==n-e)throw new HC({offset:n,position:"end",size:mi(t)})}function FC(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new WD({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const UD="#__bigint";function vg(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+UD:s,n)}const BD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function LD(t,e={}){const{strict:n=!1}=e;if(!t)throw new Jy(t);if(typeof t!="string")throw new Jy(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new Xy(t);if(!t.startsWith("0x"))throw new Xy(t)}function MD(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Cg(t){return t instanceof Uint8Array?ed(t):Array.isArray(t)?ed(new Uint8Array(t)):t}function ed(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=BD[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(MC(r,e.size),jC(r,e.size)):r}function Yh(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new HD({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?FD(c,r):c}function FD(t,e){return FC(t,{dir:"left",size:e})}function jC(t,e){return FC(t,{dir:"right",size:e})}function cs(t,e,n,r={}){const{strict:s}=r;DD(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&$D(i,e,n),i}function mi(t){return Math.ceil((t.length-2)/2)}function jD(t,e={}){const{strict:n=!1}=e;try{return LD(t,{strict:n}),!0}catch{return!1}}class HD extends ht{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Jy extends ht{constructor(e){super(`Value \`${typeof e=="object"?vg(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Xy extends ht{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let zD=class extends ht{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class HC extends ht{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let WD=class extends ht{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const qD=new TextEncoder;function VD(t){if(!(t instanceof Uint8Array)){if(!t)throw new ql(t);if(typeof t!="object")throw new ql(t);if(!("BYTES_PER_ELEMENT"in t))throw new ql(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new ql(t)}}function KD(t){return t instanceof Uint8Array?t:typeof t=="string"?YD(t):GD(t)}function GD(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function YD(t,e={}){const{size:n}=e;let r=t;n&&(MC(t,n),r=jC(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=Zy(s.charCodeAt(c++)),u=Zy(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new ht(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function ZD(t,e={}){const{size:n}=e,r=qD.encode(t);return typeof n=="number"?(PD(r,n),JD(r,n)):r}function JD(t,e){return kD(t,{dir:"right",size:e})}function Qy(t){return t.length}function XD(t){try{return VD(t),!0}catch{return!1}}class ql extends ht{constructor(e){super(`Value \`${typeof e=="object"?vg(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class QD extends ht{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class e$ extends ht{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function zC(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=AD(KD(t));return n==="Bytes"?r:ed(r)}class t$ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const n$={checksum:new t$(8192)},Zh=n$.checksum;function WC(t,e={}){const{compressed:n}=e,{prefix:r,x:s,y:i}=t;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new eb({prefix:r,cause:new c$});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new eb({prefix:r,cause:new a$});return}throw new o$({publicKey:t})}function r$(t){const e=(()=>{if(jD(t))return qC(t);if(XD(t))return s$(t);const{prefix:n,x:r,y:s}=t;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return WC(e),e}function s$(t){return qC(ed(t))}function qC(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new l$({publicKey:t});if(t.length===130){const r=BigInt(cs(t,0,32)),s=BigInt(cs(t,32,64));return{prefix:4,x:r,y:s}}if(t.length===132){const r=Number(cs(t,0,1)),s=BigInt(cs(t,1,33)),i=BigInt(cs(t,33,65));return{prefix:r,x:s,y:i}}const e=Number(cs(t,0,1)),n=BigInt(cs(t,1,33));return{prefix:e,x:n}}function i$(t,e={}){WC(t);const{prefix:n,x:r,y:s}=t,{includePrefix:i=!0}=e;return MD(i?Yh(n,{size:1}):"0x",Yh(r,{size:32}),typeof s=="bigint"?Yh(s,{size:32}):"0x")}class o$ extends ht{constructor({publicKey:e}){super(`Value \`${vg(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class eb extends ht{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class a$ extends ht{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class c$ extends ht{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let l$=class extends ht{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${mi(Cg(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const u$=/^0x[a-fA-F0-9]{40}$/;function VC(t,e={}){const{strict:n=!0}=e;if(!u$.test(t))throw new tb({address:t,cause:new f$});if(n){if(t.toLowerCase()===t)return;if(KC(t)!==t)throw new tb({address:t,cause:new p$})}}function KC(t){if(Zh.has(t))return Zh.get(t);VC(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=zC(ZD(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return Zh.set(t,s),s}function d$(t,e={}){const{checksum:n=!1}=e;return VC(t),n?KC(t):t}function h$(t,e={}){const n=zC(`0x${i$(t).slice(4)}`).substring(26);return d$(`0x${n}`,e)}class tb extends ht{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class f$ extends ht{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class p$ extends ht{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class GC extends mg{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,J4(e);const r=Hd(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),aa(i)}update(e){return oa(this),this.iHash.update(e),this}digestInto(e){oa(this),oo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const YC=(t,e,n)=>new GC(t,e).update(n).digest();YC.create=(t,e)=>new GC(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wn=BigInt(0),rn=BigInt(1),Mi=BigInt(2),g$=BigInt(3),ZC=BigInt(4),JC=BigInt(5),XC=BigInt(8);function mn(t,e){const n=t%e;return n>=wn?n:e+n}function Fn(t,e,n){let r=t;for(;e-- >wn;)r*=r,r%=n;return r}function Dp(t,e){if(t===wn)throw new Error("invert: expected non-zero number");if(e<=wn)throw new Error("invert: expected positive modulus, got "+e);let n=mn(t,e),r=e,s=wn,i=rn;for(;n!==wn;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==rn)throw new Error("invert: does not exist");return mn(s,e)}function QC(t,e){const n=(t.ORDER+rn)/ZC,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function m$(t,e){const n=(t.ORDER-JC)/XC,r=t.mul(e,Mi),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Mi),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function y$(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-rn,n=0;for(;e%Mi===wn;)e/=Mi,n++;let r=Mi;const s=_g(t);for(;nb(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return QC;let i=s.pow(r,e);const o=(e+rn)/Mi;return function(c,l){if(c.is0(l))return l;if(nb(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const m=rn<<BigInt(u-p-1),w=c.pow(d,m);u=p,d=c.sqr(w),h=c.mul(h,d),f=c.mul(f,w)}return f}}function b$(t){return t%ZC===g$?QC:t%XC===JC?m$:y$(t)}const w$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E$(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=w$.reduce((r,s)=>(r[s]="function",r),e);return Wd(t,n)}function v$(t,e,n){if(n<wn)throw new Error("invalid exponent, negatives unsupported");if(n===wn)return t.ONE;if(n===rn)return e;let r=t.ONE,s=e;for(;n>wn;)n&rn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=rn;return r}function e_(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function nb(t,e){const n=(t.ORDER-rn)/Mi,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function t_(t,e){e!==void 0&&Gc(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _g(t,e,n=!1,r={}){if(t<=wn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=t_(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:zd(s),ZERO:wn,ONE:rn,create:c=>mn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return wn<=c&&c<t},is0:c=>c===wn,isOdd:c=>(c&rn)===rn,neg:c=>mn(-c,t),eql:(c,l)=>c===l,sqr:c=>mn(c*c,t),add:(c,l)=>mn(c+l,t),sub:(c,l)=>mn(c-l,t),mul:(c,l)=>mn(c*l,t),pow:(c,l)=>v$(a,c,l),div:(c,l)=>mn(c*Dp(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Dp(c,t),sqrt:r.sqrt||(c=>(o||(o=b$(t)),o(a,c))),toBytes:c=>n?LC(c,i):bl(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?BC(c):Ki(c)},invertBatch:c=>e_(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function n_(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function r_(t){const e=n_(t);return e+Math.ceil(e/2)}function C$(t,e,n=!1){const r=t.length,s=n_(e),i=r_(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?BC(t):Ki(t),a=mn(o,e-rn)+rn;return n?LC(a,s):bl(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rb=BigInt(0),$p=BigInt(1);function Jh(t,e){const n=e.negate();return t?n:e}function s_(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Xh(t,e){s_(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=zd(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function sb(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=$p);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function _$(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function A$(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Qh=new WeakMap,i_=new WeakMap;function ef(t){return i_.get(t)||1}function I$(t,e){return{constTimeNegate:Jh,hasPrecomputes(n){return ef(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>rb;)r&$p&&(s=s.add(i)),i=i.double(),r>>=$p;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Xh(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Xh(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=sb(s,c,a);s=l,d?o=o.add(Jh(f,r[p])):i=i.add(Jh(h,r[u]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Xh(n,e);for(let a=0;a<o.windows&&s!==rb;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=sb(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return i},getPrecomputes(n,r,s){let i=Qh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Qh.set(r,s(i))),i},wNAFCached(n,r,s){const i=ef(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=ef(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){s_(r,e),i_.set(n,r),Qh.delete(n)}}}function S$(t,e,n,r){_$(n,t),A$(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=TD(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=zd(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const m=r[g],w=Number(m>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,m=o;g>0;g--)m=m.add(u[g]),p=p.add(m);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function o_(t){return E$(t.Fp),Wd(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...t_(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ib(t){t.lowS!==void 0&&Yc("lowS",t.lowS),t.prehash!==void 0&&Yc("prehash",t.prehash)}function N$(t){const e=o_(t);Wd(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class x$ extends Error{constructor(e=""){super(e)}}const ds={Err:x$,_tlv:{encode:(t,e)=>{const{Err:n}=ds;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Wl(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Wl(s.length/2|128):"";return Wl(t)+i+s+e},decode(t,e){const{Err:n}=ds;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ds;if(t<fs)throw new e("integer: negative integers are not allowed");let n=Wl(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ds;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ki(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ds,s=Vn("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=ds,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function tf(t,e){return Zc(bl(t,e))}const fs=BigInt(0),Tt=BigInt(1);BigInt(2);const nf=BigInt(3),T$=BigInt(4);function O$(t){const e=N$(t),{Fp:n}=e,r=_g(e.n,e.nBitLength),s=e.toBytes||((b,A,C)=>{const S=A.toAffine();return Qu(Uint8Array.from([4]),n.toBytes(S.x),n.toBytes(S.y))}),i=e.fromBytes||(b=>{const A=b.subarray(1),C=n.fromBytes(A.subarray(0,n.BYTES)),S=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:C,y:S}});function o(b){const{a:A,b:C}=e,S=n.sqr(b),N=n.mul(S,b);return n.add(n.add(N,n.mul(b,A)),C)}function a(b,A){const C=n.sqr(A),S=o(b);return n.eql(C,S)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,nf),T$),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(b){return Eg(b,Tt,e.n)}function d(b){const{allowedPrivateKeyLengths:A,nByteLength:C,wrapPrivateKey:S,n:N}=e;if(A&&typeof b!="bigint"){if(yl(b)&&(b=Zc(b)),typeof b!="string"||!A.includes(b.length))throw new Error("invalid private key");b=b.padStart(C*2,"0")}let D;try{D=typeof b=="bigint"?b:Ki(Vn("private key",b,C))}catch{throw new Error("invalid private key, expected hex or "+C+" bytes, got "+typeof b)}return S&&(D=mn(D,N)),Wo("private key",D,Tt,N),D}function h(b){if(!(b instanceof g))throw new Error("ProjectivePoint expected")}const f=Yy((b,A)=>{const{px:C,py:S,pz:N}=b;if(n.eql(N,n.ONE))return{x:C,y:S};const D=b.is0();A==null&&(A=D?n.ONE:n.inv(N));const O=n.mul(C,A),L=n.mul(S,A),M=n.mul(N,A);if(D)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:O,y:L}}),p=Yy(b=>{if(b.is0()){if(e.allowInfinityPoint&&!n.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:A,y:C}=b.toAffine();if(!n.isValid(A)||!n.isValid(C))throw new Error("bad point: x or y not FE");if(!a(A,C))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(A,C,S){if(A==null||!n.isValid(A))throw new Error("x required");if(C==null||!n.isValid(C)||n.is0(C))throw new Error("y required");if(S==null||!n.isValid(S))throw new Error("z required");this.px=A,this.py=C,this.pz=S,Object.freeze(this)}static fromAffine(A){const{x:C,y:S}=A||{};if(!A||!n.isValid(C)||!n.isValid(S))throw new Error("invalid affine point");if(A instanceof g)throw new Error("projective point not allowed");const N=D=>n.eql(D,n.ZERO);return N(C)&&N(S)?g.ZERO:new g(C,S,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const C=e_(n,A.map(S=>S.pz));return A.map((S,N)=>S.toAffine(C[N])).map(g.fromAffine)}static fromHex(A){const C=g.fromAffine(i(Vn("pointHex",A)));return C.assertValidity(),C}static fromPrivateKey(A){return g.BASE.multiply(d(A))}static msm(A,C){return S$(g,r,A,C)}_setWindowSize(A){_.setWindowSize(this,A)}assertValidity(){p(this)}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){h(A);const{px:C,py:S,pz:N}=this,{px:D,py:O,pz:L}=A,M=n.eql(n.mul(C,L),n.mul(D,N)),U=n.eql(n.mul(S,L),n.mul(O,N));return M&&U}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:C}=e,S=n.mul(C,nf),{px:N,py:D,pz:O}=this;let L=n.ZERO,M=n.ZERO,U=n.ZERO,R=n.mul(N,N),$=n.mul(D,D),y=n.mul(O,O),v=n.mul(N,D);return v=n.add(v,v),U=n.mul(N,O),U=n.add(U,U),L=n.mul(A,U),M=n.mul(S,y),M=n.add(L,M),L=n.sub($,M),M=n.add($,M),M=n.mul(L,M),L=n.mul(v,L),U=n.mul(S,U),y=n.mul(A,y),v=n.sub(R,y),v=n.mul(A,v),v=n.add(v,U),U=n.add(R,R),R=n.add(U,R),R=n.add(R,y),R=n.mul(R,v),M=n.add(M,R),y=n.mul(D,O),y=n.add(y,y),R=n.mul(y,v),L=n.sub(L,R),U=n.mul(y,$),U=n.add(U,U),U=n.add(U,U),new g(L,M,U)}add(A){h(A);const{px:C,py:S,pz:N}=this,{px:D,py:O,pz:L}=A;let M=n.ZERO,U=n.ZERO,R=n.ZERO;const $=e.a,y=n.mul(e.b,nf);let v=n.mul(C,D),x=n.mul(S,O),k=n.mul(N,L),T=n.add(C,S),P=n.add(D,O);T=n.mul(T,P),P=n.add(v,x),T=n.sub(T,P),P=n.add(C,N);let j=n.add(D,L);return P=n.mul(P,j),j=n.add(v,k),P=n.sub(P,j),j=n.add(S,N),M=n.add(O,L),j=n.mul(j,M),M=n.add(x,k),j=n.sub(j,M),R=n.mul($,P),M=n.mul(y,k),R=n.add(M,R),M=n.sub(x,R),R=n.add(x,R),U=n.mul(M,R),x=n.add(v,v),x=n.add(x,v),k=n.mul($,k),P=n.mul(y,P),x=n.add(x,k),k=n.sub(v,k),k=n.mul($,k),P=n.add(P,k),v=n.mul(x,P),U=n.add(U,v),v=n.mul(j,P),M=n.mul(T,M),M=n.sub(M,v),v=n.mul(T,x),R=n.mul(j,R),R=n.add(R,v),new g(M,U,R)}subtract(A){return this.add(A.negate())}is0(){return this.equals(g.ZERO)}wNAF(A){return _.wNAFCached(this,A,g.normalizeZ)}multiplyUnsafe(A){const{endo:C,n:S}=e;Wo("scalar",A,fs,S);const N=g.ZERO;if(A===fs)return N;if(this.is0()||A===Tt)return this;if(!C||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,A,g.normalizeZ);let{k1neg:D,k1:O,k2neg:L,k2:M}=C.splitScalar(A),U=N,R=N,$=this;for(;O>fs||M>fs;)O&Tt&&(U=U.add($)),M&Tt&&(R=R.add($)),$=$.double(),O>>=Tt,M>>=Tt;return D&&(U=U.negate()),L&&(R=R.negate()),R=new g(n.mul(R.px,C.beta),R.py,R.pz),U.add(R)}multiply(A){const{endo:C,n:S}=e;Wo("scalar",A,Tt,S);let N,D;if(C){const{k1neg:O,k1:L,k2neg:M,k2:U}=C.splitScalar(A);let{p:R,f:$}=this.wNAF(L),{p:y,f:v}=this.wNAF(U);R=_.constTimeNegate(O,R),y=_.constTimeNegate(M,y),y=new g(n.mul(y.px,C.beta),y.py,y.pz),N=R.add(y),D=$.add(v)}else{const{p:O,f:L}=this.wNAF(A);N=O,D=L}return g.normalizeZ([N,D])[0]}multiplyAndAddUnsafe(A,C,S){const N=g.BASE,D=(L,M)=>M===fs||M===Tt||!L.equals(N)?L.multiplyUnsafe(M):L.multiply(M),O=D(this,C).add(D(A,S));return O.is0()?void 0:O}toAffine(A){return f(this,A)}isTorsionFree(){const{h:A,isTorsionFree:C}=e;if(A===Tt)return!0;if(C)return C(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:C}=e;return A===Tt?this:C?C(g,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return Yc("isCompressed",A),this.assertValidity(),s(g,this,A)}toHex(A=!0){return Yc("isCompressed",A),Zc(this.toRawBytes(A))}}g.BASE=new g(e.Gx,e.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:m,nBitLength:w}=e,_=I$(g,m?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:u}}function R$(t){const e=o_(t);return Wd(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function P$(t){const e=R$(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(y){return mn(y,r)}function l(y){return Dp(y,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=O$({...e,toBytes(y,v,x){const k=v.toAffine(),T=n.toBytes(k.x),P=Qu;return Yc("isCompressed",x),x?P(Uint8Array.from([v.hasEvenY()?2:3]),T):P(Uint8Array.from([4]),T,n.toBytes(k.y))},fromBytes(y){const v=y.length,x=y[0],k=y.subarray(1);if(v===o&&(x===2||x===3)){const T=Ki(k);if(!Eg(T,Tt,n.ORDER))throw new Error("Point is not on curve");const P=h(T);let j;try{j=n.sqrt(P)}catch(K){const G=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+G)}const H=(j&Tt)===Tt;return(x&1)===1!==H&&(j=n.neg(j)),{x:T,y:j}}else if(v===a&&x===4){const T=n.fromBytes(k.subarray(0,n.BYTES)),P=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:T,y:P}}else{const T=o,P=a;throw new Error("invalid Point, expected length of "+T+", or uncompressed "+P+", got "+v)}}});function p(y){const v=r>>Tt;return y>v}function g(y){return p(y)?c(-y):y}const m=(y,v,x)=>Ki(y.slice(v,x));class w{constructor(v,x,k){Wo("r",v,Tt,r),Wo("s",x,Tt,r),this.r=v,this.s=x,k!=null&&(this.recovery=k),Object.freeze(this)}static fromCompact(v){const x=s;return v=Vn("compactSignature",v,x*2),new w(m(v,0,x),m(v,x,2*x))}static fromDER(v){const{r:x,s:k}=ds.toSig(Vn("DER",v));return new w(x,k)}assertValidity(){}addRecoveryBit(v){return new w(this.r,this.s,v)}recoverPublicKey(v){const{r:x,s:k,recovery:T}=this,P=N(Vn("msgHash",v));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const j=T===2||T===3?x+e.n:x;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=T&1?"03":"02",Q=u.fromHex(H+tf(j,n.BYTES)),K=l(j),G=c(-P*K),ae=c(k*K),ge=u.BASE.multiplyAndAddUnsafe(Q,G,ae);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Xu(this.toDERHex())}toDERHex(){return ds.hexFromSig(this)}toCompactRawBytes(){return Xu(this.toCompactHex())}toCompactHex(){const v=s;return tf(this.r,v)+tf(this.s,v)}}const _={isValidPrivateKey(y){try{return d(y),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const y=r_(e.n);return C$(e.randomBytes(y),e.n)},precompute(y=8,v=u.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}};function b(y,v=!0){return u.fromPrivateKey(y).toRawBytes(v)}function A(y){if(typeof y=="bigint")return!1;if(y instanceof u)return!0;const x=Vn("key",y).length,k=n.BYTES,T=k+1,P=2*k+1;if(!(e.allowedPrivateKeyLengths||s===T))return x===T||x===P}function C(y,v,x=!0){if(A(y)===!0)throw new Error("first arg must be private key");if(A(v)===!1)throw new Error("second arg must be public key");return u.fromHex(v).multiply(d(y)).toRawBytes(x)}const S=e.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");const v=Ki(y),x=y.length*8-i;return x>0?v>>BigInt(x):v},N=e.bits2int_modN||function(y){return c(S(y))},D=zd(i);function O(y){return Wo("num < 2^"+i,y,fs,D),bl(y,s)}function L(y,v,x=M){if(["recovered","canonical"].some(pe=>pe in x))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:T}=e;let{lowS:P,prehash:j,extraEntropy:H}=x;P==null&&(P=!0),y=Vn("msgHash",y),ib(x),j&&(y=Vn("prehashed msgHash",k(y)));const Q=N(y),K=d(v),G=[O(K),O(Q)];if(H!=null&&H!==!1){const pe=H===!0?T(n.BYTES):H;G.push(Vn("extraEntropy",pe))}const ae=Qu(...G),ge=Q;function xe(pe){const Te=S(pe);if(!f(Te))return;const st=l(Te),bt=u.BASE.multiply(Te).toAffine(),It=c(bt.x);if(It===fs)return;const Xt=c(st*c(ge+It*K));if(Xt===fs)return;let Gr=(bt.x===It?0:2)|Number(bt.y&Tt),xs=Xt;return P&&p(Xt)&&(xs=g(Xt),Gr^=1),new w(It,xs,Gr)}return{seed:ae,k2sig:xe}}const M={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function R(y,v,x=M){const{seed:k,k2sig:T}=L(y,v,x),P=e;return OD(P.hash.outputLen,P.nByteLength,P.hmac)(k,T)}u.BASE._setWindowSize(8);function $(y,v,x,k=U){var Gr;const T=y;v=Vn("msgHash",v),x=Vn("publicKey",x);const{lowS:P,prehash:j,format:H}=k;if(ib(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const Q=typeof T=="string"||yl(T),K=!Q&&!H&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!Q&&!K)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,ae;try{if(K&&(G=new w(T.r,T.s)),Q){try{H!=="compact"&&(G=w.fromDER(T))}catch(xs){if(!(xs instanceof ds.Err))throw xs}!G&&H!=="der"&&(G=w.fromCompact(T))}ae=u.fromHex(x)}catch{return!1}if(!G||P&&G.hasHighS())return!1;j&&(v=e.hash(v));const{r:ge,s:xe}=G,pe=N(v),Te=l(xe),st=c(pe*Te),bt=c(ge*Te),It=(Gr=u.BASE.multiplyAndAddUnsafe(ae,st,bt))==null?void 0:Gr.toAffine();return It?c(It.x)===ge:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:C,sign:R,verify:$,ProjectivePoint:u,Signature:w,utils:_}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function k$(t){return{hash:t,hmac:(e,...n)=>YC(t,e,rD(...n)),randomBytes:sD}}function D$(t,e){const n=r=>P$({...t,...k$(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ob=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$$=BigInt(0),U$=BigInt(1),Up=BigInt(2),ab=(t,e)=>(t+e/Up)/e;function B$(t){const e=a_,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Fn(u,n,e)*u%e,h=Fn(d,n,e)*u%e,f=Fn(h,Up,e)*l%e,p=Fn(f,s,e)*f%e,g=Fn(p,i,e)*p%e,m=Fn(g,a,e)*g%e,w=Fn(m,c,e)*m%e,_=Fn(w,a,e)*g%e,b=Fn(_,n,e)*u%e,A=Fn(b,o,e)*p%e,C=Fn(A,r,e)*l%e,S=Fn(C,Up,e);if(!Bp.eql(Bp.sqr(S),t))throw new Error("Cannot find square root");return S}const Bp=_g(a_,void 0,void 0,{sqrt:B$}),L$=D$({a:$$,b:BigInt(7),Fp:Bp,n:ob,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ob,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-U$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=ab(i*t,e),c=ab(-r*t,e);let l=mn(t-a*n-c*s,e),u=mn(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},ND);function M$(t){if(t.length!==130&&t.length!==132)throw new j$({signature:t});const e=BigInt(cs(t,0,32)),n=BigInt(cs(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return F$(s)}catch{throw new H$({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function F$(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new z$({value:t})}class j$ extends ht{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${mi(Cg(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class H$ extends ht{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class z$ extends ht{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function W$(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function c_(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function td(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Ag(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Lp(t){if(!Array.isArray(t))throw new Error("array expected")}function nd(t,e){if(!c_(!0,e))throw new Error(`${t}: array of strings expected`)}function q$(t,e){if(!c_(!1,e))throw new Error(`${t}: array of numbers expected`)}function V$(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function K$(t){const e=typeof t=="string"?t.split(""):t,n=e.length;nd("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(Lp(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(Lp(s),s.map(i=>{td("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function G$(t=""){return td("join",t),{encode:e=>(nd("join.decode",e),e.join(t)),decode:e=>(td("join.decode",e),e.split(t))}}function Y$(t,e="="){return Ag(t),td("padding",e),{encode(n){for(nd("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){nd("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const l_=(t,e)=>e===0?t:l_(e,t%e),rd=(t,e)=>t+(e-l_(t,e)),rf=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function cb(t,e,n,r){if(Lp(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(rd(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${rd(e,n)}`);let s=0,i=0;const o=rf[e],a=rf[n]-1,c=[];for(const l of t){if(Ag(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=rf[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function Z$(t,e=!1){if(Ag(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(rd(8,t)>32||rd(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!W$(n))throw new Error("radix2.encode input should be Uint8Array");return cb(Array.from(n),8,t,!e)},decode:n=>(q$("radix2.decode",n),Uint8Array.from(cb(n,t,8,e)))}}const J$=V$(Z$(5),K$("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Y$(5),G$(""));function X$(t){return h$(Q$(t))}function Q$(t){const{payload:e,signature:n}=t,{r,s,yParity:i}=n,a=new L$.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i).recoverPublicKey(Cg(e).substring(2));return r$(a)}var u_={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var m=this._events[g],w=arguments.length,_,b;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),w){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,f),!0;case 6:return m.fn.call(m.context,u,d,h,f,p),!0}for(b=1,_=new Array(w-1);b<w;b++)_[b-1]=arguments[b];m.fn.apply(m.context,_)}else{var A=m.length,C;for(b=0;b<A;b++)switch(m[b].once&&this.removeListener(l,m[b].fn,void 0,!0),w){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,u);break;case 3:m[b].fn.call(m[b].context,u,d);break;case 4:m[b].fn.call(m[b].context,u,d,h);break;default:if(!_)for(C=1,_=new Array(w-1);C<w;C++)_[C-1]=arguments[C];m[b].fn.apply(m[b].context,_)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,m=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(u_);var eU=u_.exports;const tU=bd(eU);function nU(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let _=l[h],b=0;for(let A=p-1;(_!==0||b<d)&&A!==-1;A--,b++)_+=256*g[A]>>>0,g[A]=_%n>>>0,_=_/n>>>0;if(_!==0)throw new Error("Non-zero carry");d=b,h++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let w=r.repeat(u);for(;m<p;++m)w+=t.charAt(g[m]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const _=l.charCodeAt(u);if(_>255)return;let b=e[_];if(b===255)return;let A=0;for(let C=f-1;(b!==0||A<h)&&C!==-1;C--,A++)b+=n*p[C]>>>0,p[C]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)m[w++]=p[g++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var rU="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const ya=nU(rU);function sU(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function iU(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const oU=new TextEncoder,aU=50;function cU(t,e,n){oU.encodeInto(t,e.subarray(n))}function lU(t,e,n){t.length>aU?cU(t,e,n):iU(t,e,n)}const uU=4096;function d_(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=uU&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const dU=new TextDecoder,hU=200;function fU(t,e,n){const r=t.subarray(e,e+n);return dU.decode(r)}function pU(t,e,n){return n>hU?fU(t,e,n):d_(t,e,n)}class Vl{constructor(e,n){this.type=e,this.data=n}}class Pn extends Error{constructor(e){super(e);const n=Object.create(Pn.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Pn.name})}}const Ta=4294967295;function gU(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function h_(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function f_(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function mU(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const yU=-1,bU=4294967296-1,wU=17179869184-1;function EU({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=wU)if(e===0&&t<=bU){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),h_(r,4,t),n}}function vU(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function CU(t){if(t instanceof Date){const e=vU(t);return EU(e)}else return null}function _U(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=f_(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Pn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function AU(t){const e=_U(t);return new Date(e.sec*1e3+e.nsec/1e6)}const IU={type:yU,encode:CU,decode:AU};class sd{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(IU)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new Vl(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new Vl(o,i)}}}return e instanceof Vl?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new Vl(n,e)}}sd.defaultCodec=new sd;function SU(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Mp(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):SU(t)?new Uint8Array(t):Uint8Array.from(t)}const NU=100,xU=2048;let TU=class p_{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??sd.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??NU,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??xU,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new p_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=sU(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),lU(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Mp(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),gU(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),h_(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function OU(t,e){return new TU(e).encodeSharedRef(t)}function sf(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const RU=16,PU=16;class kU{constructor(e=RU,n=PU){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=d_(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const Fp="array",Xa="map_key",g_="map_value",DU=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Pn("The type of key must be string or number but "+typeof t)};class $U{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Fp,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Xa,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Fp){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Xa||e.type===g_){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Oa=-1,Ig=new DataView(new ArrayBuffer(0)),UU=new Uint8Array(Ig.buffer);try{Ig.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const lb=new RangeError("Insufficient data"),BU=new kU;let LU=class m_{constructor(e){this.totalPos=0,this.pos=0,this.view=Ig,this.bytes=UU,this.headByte=Oa,this.stack=new $U,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??sd.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Ta,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Ta,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Ta,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Ta,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Ta,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:BU,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??DU}clone(){return new m_({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Oa,this.stack.reset()}setBuffer(e){const n=Mp(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Oa&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=Mp(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${sf(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Pn(`Unrecognized type byte: ${sf(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Fp)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===Xa){if(n==="__proto__")throw new Pn("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=g_;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=Xa;continue e}}return n}}readHeadByte(){return this.headByte===Oa&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Oa}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Pn(`Unrecognized array type byte: ${sf(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Pn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Pn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new Pn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw lb;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=pU(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Xa:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Pn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw lb;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Pn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=mU(this.view,this.pos);return this.pos+=8,e}readI64(){const e=f_(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function MU(t,e){return new LU(e).decode(t)}function Sg(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function y_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Sg(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Qa(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=y_(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Sg(n)}function FU(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,_=p.length;w!==_&&p[w]===0;)w++,g++;for(var b=(_-w)*u+1>>>0,A=new Uint8Array(b);w!==_;){for(var C=p[w],S=0,N=b-1;(C!==0||S<m)&&N!==-1;N--,S++)C+=256*A[N]>>>0,A[N]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=S,w++}for(var D=b-m;D!==b&&A[D]===0;)D++;for(var O=c.repeat(g);D<b;++D)O+=t.charAt(A[D]);return O}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var _=(p.length-g)*l+1>>>0,b=new Uint8Array(_);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=_-1;(A!==0||C<w)&&S!==-1;S--,C++)A+=a*b[S]>>>0,b[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=C,g++}if(p[g]!==" "){for(var N=_-w;N!==_&&b[N]===0;)N++;for(var D=new Uint8Array(m+(_-N)),O=m;N!==_;)D[O++]=b[N++];return D}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var jU=FU,HU=jU;const zU=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},WU=t=>new TextEncoder().encode(t),qU=t=>new TextDecoder().decode(t);class VU{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class KU{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return b_(this,e)}}class GU{constructor(e){this.decoders=e}or(e){return b_(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const b_=(t,e)=>new GU({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class YU{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new VU(e,n,r),this.decoder=new KU(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const qd=({name:t,prefix:e,encode:n,decode:r})=>new YU(t,e,n,r),wl=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=HU(n,e);return qd({prefix:t,name:e,encode:r,decode:i=>zU(s(i))})},ZU=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},JU=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ht=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>qd({prefix:e,name:t,encode(s){return JU(s,r,n)},decode(s){return ZU(s,r,n,t)}}),XU=qd({prefix:"\0",name:"identity",encode:t=>qU(t),decode:t=>WU(t)}),QU=Object.freeze(Object.defineProperty({__proto__:null,identity:XU},Symbol.toStringTag,{value:"Module"})),e9=Ht({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),t9=Object.freeze(Object.defineProperty({__proto__:null,base2:e9},Symbol.toStringTag,{value:"Module"})),n9=Ht({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),r9=Object.freeze(Object.defineProperty({__proto__:null,base8:n9},Symbol.toStringTag,{value:"Module"})),s9=wl({prefix:"9",name:"base10",alphabet:"0123456789"}),i9=Object.freeze(Object.defineProperty({__proto__:null,base10:s9},Symbol.toStringTag,{value:"Module"})),o9=Ht({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),a9=Ht({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),c9=Object.freeze(Object.defineProperty({__proto__:null,base16:o9,base16upper:a9},Symbol.toStringTag,{value:"Module"})),l9=Ht({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),u9=Ht({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),d9=Ht({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),h9=Ht({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),f9=Ht({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),p9=Ht({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),g9=Ht({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),m9=Ht({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),y9=Ht({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),b9=Object.freeze(Object.defineProperty({__proto__:null,base32:l9,base32hex:f9,base32hexpad:g9,base32hexpadupper:m9,base32hexupper:p9,base32pad:d9,base32padupper:h9,base32upper:u9,base32z:y9},Symbol.toStringTag,{value:"Module"})),w9=wl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),E9=wl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),v9=Object.freeze(Object.defineProperty({__proto__:null,base36:w9,base36upper:E9},Symbol.toStringTag,{value:"Module"})),C9=wl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_9=wl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),A9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:C9,base58flickr:_9},Symbol.toStringTag,{value:"Module"})),I9=Ht({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),S9=Ht({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),N9=Ht({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),x9=Ht({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),T9=Object.freeze(Object.defineProperty({__proto__:null,base64:I9,base64pad:S9,base64url:N9,base64urlpad:x9},Symbol.toStringTag,{value:"Module"})),w_=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),O9=w_.reduce((t,e,n)=>(t[n]=e,t),[]),R9=w_.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function P9(t){return t.reduce((e,n)=>(e+=O9[n],e),"")}function k9(t){const e=[];for(const n of t){const r=R9[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const D9=qd({prefix:"ðŸš€",name:"base256emoji",encode:P9,decode:k9}),$9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:D9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const ub={...QU,...t9,...r9,...i9,...c9,...b9,...v9,...A9,...T9,...$9};function E_(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const db=E_("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),of=E_("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=y_(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),v_={utf8:db,"utf-8":db,hex:ub.base16,latin1:of,ascii:of,binary:of,...ub};function Yn(t,e="utf8"){const n=v_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Sg(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Cn(t,e="utf8"){const n=v_[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const U9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},B9="Input must be an string, Buffer or Uint8Array";function L9(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(B9);return e}function M9(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Kl(t){return(4294967296+t).toString(16).substring(1)}function F9(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=Kl(e[s]).toUpperCase(),r+=" ",r+=Kl(e[s+1]).toUpperCase();else if(n===64)r+=Kl(e[s+1]).toUpperCase(),r+=Kl(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function j9(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var C_={normalizeInput:L9,toHex:M9,debugPrint:F9,testSpeed:j9};const wu=C_;function Gl(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function hb(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function __(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Bs(t,e,n,r,s,i){const o=qa[s],a=qa[s+1],c=qa[i],l=qa[i+1];Gl(_e,t,e),hb(_e,t,o,a);let u=_e[r]^_e[t],d=_e[r+1]^_e[t+1];_e[r]=d,_e[r+1]=u,Gl(_e,n,r),u=_e[e]^_e[n],d=_e[e+1]^_e[n+1],_e[e]=u>>>24^d<<8,_e[e+1]=d>>>24^u<<8,Gl(_e,t,e),hb(_e,t,c,l),u=_e[r]^_e[t],d=_e[r+1]^_e[t+1],_e[r]=u>>>16^d<<16,_e[r+1]=d>>>16^u<<16,Gl(_e,n,r),u=_e[e]^_e[n],d=_e[e+1]^_e[n+1],_e[e]=d>>>31^u<<1,_e[e+1]=u>>>31^d<<1}const A_=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),H9=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Wt=new Uint8Array(H9.map(function(t){return t*2})),_e=new Uint32Array(32),qa=new Uint32Array(32);function I_(t,e){let n=0;for(n=0;n<16;n++)_e[n]=t.h[n],_e[n+16]=A_[n];for(_e[24]=_e[24]^t.t,_e[25]=_e[25]^t.t/4294967296,e&&(_e[28]=~_e[28],_e[29]=~_e[29]),n=0;n<32;n++)qa[n]=__(t.b,4*n);for(n=0;n<12;n++)Bs(0,8,16,24,Wt[n*16+0],Wt[n*16+1]),Bs(2,10,18,26,Wt[n*16+2],Wt[n*16+3]),Bs(4,12,20,28,Wt[n*16+4],Wt[n*16+5]),Bs(6,14,22,30,Wt[n*16+6],Wt[n*16+7]),Bs(0,10,20,30,Wt[n*16+8],Wt[n*16+9]),Bs(2,12,22,24,Wt[n*16+10],Wt[n*16+11]),Bs(4,14,16,26,Wt[n*16+12],Wt[n*16+13]),Bs(6,8,18,28,Wt[n*16+14],Wt[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^_e[n]^_e[n+16]}const Ls=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function S_(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Ls.fill(0),Ls[0]=t,e&&(Ls[1]=e.length),Ls[2]=1,Ls[3]=1,n&&Ls.set(n,32),r&&Ls.set(r,48);for(let i=0;i<16;i++)s.h[i]=A_[i]^__(Ls,i*4);return e&&(Ng(s,e),s.c=128),s}function Ng(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,I_(t,!1),t.c=0),t.b[t.c++]=e[n]}function N_(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;I_(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function x_(t,e,n,r,s){n=n||64,t=wu.normalizeInput(t),r&&(r=wu.normalizeInput(r)),s&&(s=wu.normalizeInput(s));const i=S_(n,e,r,s);return Ng(i,t),N_(i)}function z9(t,e,n,r,s){const i=x_(t,e,n,r,s);return wu.toHex(i)}var W9={blake2b:x_,blake2bHex:z9,blake2bInit:S_,blake2bUpdate:Ng,blake2bFinal:N_};const T_=C_;function q9(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ms(t,e,n,r,s,i){Fe[t]=Fe[t]+Fe[e]+s,Fe[r]=Yl(Fe[r]^Fe[t],16),Fe[n]=Fe[n]+Fe[r],Fe[e]=Yl(Fe[e]^Fe[n],12),Fe[t]=Fe[t]+Fe[e]+i,Fe[r]=Yl(Fe[r]^Fe[t],8),Fe[n]=Fe[n]+Fe[r],Fe[e]=Yl(Fe[e]^Fe[n],7)}function Yl(t,e){return t>>>e^t<<32-e}const O_=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qt=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Fe=new Uint32Array(16),Dt=new Uint32Array(16);function R_(t,e){let n=0;for(n=0;n<8;n++)Fe[n]=t.h[n],Fe[n+8]=O_[n];for(Fe[12]^=t.t,Fe[13]^=t.t/4294967296,e&&(Fe[14]=~Fe[14]),n=0;n<16;n++)Dt[n]=q9(t.b,4*n);for(n=0;n<10;n++)Ms(0,4,8,12,Dt[qt[n*16+0]],Dt[qt[n*16+1]]),Ms(1,5,9,13,Dt[qt[n*16+2]],Dt[qt[n*16+3]]),Ms(2,6,10,14,Dt[qt[n*16+4]],Dt[qt[n*16+5]]),Ms(3,7,11,15,Dt[qt[n*16+6]],Dt[qt[n*16+7]]),Ms(0,5,10,15,Dt[qt[n*16+8]],Dt[qt[n*16+9]]),Ms(1,6,11,12,Dt[qt[n*16+10]],Dt[qt[n*16+11]]),Ms(2,7,8,13,Dt[qt[n*16+12]],Dt[qt[n*16+13]]),Ms(3,4,9,14,Dt[qt[n*16+14]],Dt[qt[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Fe[n]^Fe[n+8]}function P_(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(O_),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(xg(r,e),r.c=64),r}function xg(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,R_(t,!1),t.c=0),t.b[t.c++]=e[n]}function k_(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;R_(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function D_(t,e,n){n=n||32,t=T_.normalizeInput(t);const r=P_(n,e);return xg(r,t),k_(r)}function V9(t,e,n){const r=D_(t,e,n);return T_.toHex(r)}var K9={blake2s:D_,blake2sHex:V9,blake2sInit:P_,blake2sUpdate:xg,blake2sFinal:k_};const Ra=W9,Pa=K9;var G9={blake2b:Ra.blake2b,blake2bHex:Ra.blake2bHex,blake2bInit:Ra.blake2bInit,blake2bUpdate:Ra.blake2bUpdate,blake2bFinal:Ra.blake2bFinal,blake2s:Pa.blake2s,blake2sHex:Pa.blake2sHex,blake2sInit:Pa.blake2sInit,blake2sUpdate:Pa.blake2sUpdate,blake2sFinal:Pa.blake2sFinal},Y9={};const Z9=":";function bs(t){const[e,n]=t.split(Z9);return{namespace:e,reference:n}}function $_(t,e){return t.includes(":")?[t]:e.chains||[]}var J9=Object.defineProperty,X9=Object.defineProperties,Q9=Object.getOwnPropertyDescriptors,fb=Object.getOwnPropertySymbols,eB=Object.prototype.hasOwnProperty,tB=Object.prototype.propertyIsEnumerable,jp=(t,e,n)=>e in t?J9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pb=(t,e)=>{for(var n in e||(e={}))eB.call(e,n)&&jp(t,n,e[n]);if(fb)for(var n of fb(e))tB.call(e,n)&&jp(t,n,e[n]);return t},nB=(t,e)=>X9(t,Q9(e)),gb=(t,e,n)=>jp(t,typeof e!="symbol"?e+"":e,n);const rB="ReactNative",Ln={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},sB="js";function id(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function bi(){return!io()&&!!pg()&&navigator.product===rB}function iB(){return bi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function oB(){return bi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ba(){return!id()&&!!pg()&&!!io()}function El(){return bi()?Ln.reactNative:id()?Ln.node:ba()?Ln.browser:Ln.unknown}function mb(){var t;try{return bi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function aB(t,e){const n=new URLSearchParams(t);return Object.entries(e).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!=null&&n.set(r,String(s))}),n.toString()}function cB(t){var e,n;const r=U_();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),nB(pb(pb({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function U_(){return NC()||{name:"",description:"",url:"",icons:[""]}}function lB(){if(El()===Ln.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=R4();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function uB(){var t;const e=El();return e===Ln.browser?[e,((t=SC())==null?void 0:t.host)||"unknown"].join(":"):e}function B_(t,e,n){const r=lB(),s=uB();return[[t,e].join("-"),[sB,n].join("-"),r,s].join("/")}function dB({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=B_(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=aB(l[1]||"",d);return l[0]+"?"+h}function Fi(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Hp(t){return Object.fromEntries(t.entries())}function zp(t){return new Map(Object.entries(t))}function Ri(t=Z.FIVE_MINUTES,e){const n=Z.toMiliseconds(t||Z.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Br(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function L_(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function hB(t){return L_("topic",t)}function fB(t){return L_("id",t)}function M_(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function pt(t,e){return Z.fromMiliseconds(Date.now()+Z.toMiliseconds(t))}function Dr(t){return Date.now()>=Z.toMiliseconds(t)}function qe(t,e){return`${t}${e?`:${e}`:""}`}function Fr(t=[],e=[]){return[...new Set([...t,...e])]}async function pB({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=gB(i,t,e),a=El();if(a===Ln.browser){if(!((r=io())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}mB(o)}else a===Ln.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function gB(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${EB(r,!0)}`}else s=`${s}/wc?${r}`;return s}function mB(t){let e="_self";wB()?e="_top":(bB()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function yB(t,e){let n="";try{if(ba()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function yb(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function bb(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Tg(){return typeof process<"u"&&Y9.IS_VITEST==="true"}function bB(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function wB(){try{return window.self!==window.top}catch{return!1}}function EB(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function F_(t){return Buffer.from(t,"base64").toString("utf-8")}function vB(t){return new Promise(e=>setTimeout(e,t))}let CB=class{constructor({limit:e}){gb(this,"limit"),gb(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const Zl=BigInt(2**32-1),wb=BigInt(32);function j_(t,e=!1){return e?{h:Number(t&Zl),l:Number(t>>wb&Zl)}:{h:Number(t>>wb&Zl)|0,l:Number(t&Zl)|0}}function H_(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=j_(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Eb=(t,e,n)=>t>>>n,vb=(t,e,n)=>t<<32-n|e>>>n,Vs=(t,e,n)=>t>>>n|e<<32-n,Ks=(t,e,n)=>t<<32-n|e>>>n,Va=(t,e,n)=>t<<64-n|e>>>n-32,Ka=(t,e,n)=>t>>>n-32|e<<64-n,_B=(t,e)=>e,AB=(t,e)=>t,IB=(t,e,n)=>t<<n|e>>>32-n,SB=(t,e,n)=>e<<n|t>>>32-n,NB=(t,e,n)=>e<<n-32|t>>>64-n,xB=(t,e,n)=>t<<n-32|e>>>64-n;function cr(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Og=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Rg=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,TB=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),OB=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,RB=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),PB=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,So=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Vd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Is(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Cr(t,...e){if(!Vd(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Kd(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Is(t.outputLen),Is(t.blockLen)}function yi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Pg(t,e){Cr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Jc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Qn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function af(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Nr(t,e){return t<<32-e|t>>>e}const z_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function W_(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const ss=z_?t=>t:t=>W_(t);function kB(t){for(let e=0;e<t.length;e++)t[e]=W_(t[e]);return t}const Gs=z_?t=>t:kB,q_=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",DB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qo(t){if(Cr(t),q_)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=DB[t[n]];return e}const ts={_0:48,_9:57,A:65,F:70,a:97,f:102};function Cb(t){if(t>=ts._0&&t<=ts._9)return t-ts._0;if(t>=ts.A&&t<=ts.F)return t-(ts.A-10);if(t>=ts.a&&t<=ts.f)return t-(ts.a-10)}function od(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(q_)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Cb(t.charCodeAt(i)),a=Cb(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function V_(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Er(t){return typeof t=="string"&&(t=V_(t)),Cr(t),t}function Xs(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Cr(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Gd=class{};function vl(t){const e=r=>t().update(Er(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function $B(t){const e=(r,s)=>t(s).update(Er(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function wo(t=32){if(So&&typeof So.getRandomValues=="function")return So.getRandomValues(new Uint8Array(t));if(So&&typeof So.randomBytes=="function")return Uint8Array.from(So.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const UB=BigInt(0),ka=BigInt(1),BB=BigInt(2),LB=BigInt(7),MB=BigInt(256),FB=BigInt(113),K_=[],G_=[],Y_=[];for(let t=0,e=ka,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],K_.push(2*(5*r+n)),G_.push((t+1)*(t+2)/2%64);let s=UB;for(let i=0;i<7;i++)e=(e<<ka^(e>>LB)*FB)%MB,e&BB&&(s^=ka<<(ka<<BigInt(i))-ka);Y_.push(s)}const Z_=H_(Y_,!0),jB=Z_[0],HB=Z_[1],_b=(t,e,n)=>n>32?NB(t,e,n):IB(t,e,n),Ab=(t,e,n)=>n>32?xB(t,e,n):SB(t,e,n);function zB(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=_b(l,u,1)^n[a],h=Ab(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=G_[o],c=_b(s,i,a),l=Ab(s,i,a),u=K_[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=jB[r],t[1]^=HB[r]}Qn(n)}let WB=class J_ extends Gd{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Is(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Jc(this.state)}clone(){return this._cloneInto()}keccak(){Gs(this.state32),zB(this.state32,this.rounds),Gs(this.state32),this.posOut=0,this.pos=0}update(e){yi(this),e=Er(e),Cr(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){yi(this,!1),Cr(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Is(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Pg(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Qn(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new J_(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const qB=(t,e,n)=>vl(()=>new WB(e,t,n)),VB=qB(1,136,256/8);function KB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function GB(t,e,n){return t&e^~t&n}function YB(t,e,n){return t&e^t&n^e&n}let X_=class extends Gd{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=af(this.buffer)}update(e){yi(this),e=Er(e),Cr(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=af(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yi(this),Pg(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Qn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;KB(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=af(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Fs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vt=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Kt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ZB=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),js=new Uint32Array(64);class JB extends X_{constructor(e=32){super(64,e,8,!1),this.A=Fs[0]|0,this.B=Fs[1]|0,this.C=Fs[2]|0,this.D=Fs[3]|0,this.E=Fs[4]|0,this.F=Fs[5]|0,this.G=Fs[6]|0,this.H=Fs[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)js[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=js[d-15],f=js[d-2],p=Nr(h,7)^Nr(h,18)^h>>>3,g=Nr(f,17)^Nr(f,19)^f>>>10;js[d]=g+js[d-7]+p+js[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Nr(a,6)^Nr(a,11)^Nr(a,25),f=u+h+GB(a,c,l)+ZB[d]+js[d]|0,p=(Nr(r,2)^Nr(r,13)^Nr(r,22))+YB(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Qn(js)}destroy(){this.set(0,0,0,0,0,0,0,0),Qn(this.buffer)}}const Q_=H_(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),XB=Q_[0],QB=Q_[1],Hs=new Uint32Array(80),zs=new Uint32Array(80);let kg=class extends X_{constructor(e=64){super(128,e,16,!1),this.Ah=Kt[0]|0,this.Al=Kt[1]|0,this.Bh=Kt[2]|0,this.Bl=Kt[3]|0,this.Ch=Kt[4]|0,this.Cl=Kt[5]|0,this.Dh=Kt[6]|0,this.Dl=Kt[7]|0,this.Eh=Kt[8]|0,this.El=Kt[9]|0,this.Fh=Kt[10]|0,this.Fl=Kt[11]|0,this.Gh=Kt[12]|0,this.Gl=Kt[13]|0,this.Hh=Kt[14]|0,this.Hl=Kt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let b=0;b<16;b++,n+=4)Hs[b]=e.getUint32(n),zs[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const A=Hs[b-15]|0,C=zs[b-15]|0,S=Vs(A,C,1)^Vs(A,C,8)^Eb(A,C,7),N=Ks(A,C,1)^Ks(A,C,8)^vb(A,C,7),D=Hs[b-2]|0,O=zs[b-2]|0,L=Vs(D,O,19)^Va(D,O,61)^Eb(D,O,6),M=Ks(D,O,19)^Ka(D,O,61)^vb(D,O,6),U=TB(N,M,zs[b-7],zs[b-16]),R=OB(U,S,L,Hs[b-7],Hs[b-16]);Hs[b]=R|0,zs[b]=U|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:w,Hl:_}=this;for(let b=0;b<80;b++){const A=Vs(d,h,14)^Vs(d,h,18)^Va(d,h,41),C=Ks(d,h,14)^Ks(d,h,18)^Ka(d,h,41),S=d&f^~d&g,N=h&p^~h&m,D=RB(_,C,N,QB[b],zs[b]),O=PB(D,w,A,S,XB[b],Hs[b]),L=D|0,M=Vs(r,s,28)^Va(r,s,34)^Va(r,s,39),U=Ks(r,s,28)^Ka(r,s,34)^Ka(r,s,39),R=r&i^r&a^i&a,$=s&o^s&c^o&c;w=g|0,_=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=cr(l|0,u|0,O|0,L|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const y=Og(L,U,$);r=Rg(y,O,M,R),s=y|0}({h:r,l:s}=cr(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=cr(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=cr(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=cr(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=cr(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=cr(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=cr(this.Gh|0,this.Gl|0,g|0,m|0),{h:w,l:_}=cr(this.Hh|0,this.Hl|0,w|0,_|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,w,_)}roundClean(){Qn(Hs,zs)}destroy(){Qn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class eL extends kg{constructor(){super(48),this.Ah=Vt[0]|0,this.Al=Vt[1]|0,this.Bh=Vt[2]|0,this.Bl=Vt[3]|0,this.Ch=Vt[4]|0,this.Cl=Vt[5]|0,this.Dh=Vt[6]|0,this.Dl=Vt[7]|0,this.Eh=Vt[8]|0,this.El=Vt[9]|0,this.Fh=Vt[10]|0,this.Fl=Vt[11]|0,this.Gh=Vt[12]|0,this.Gl=Vt[13]|0,this.Hh=Vt[14]|0,this.Hl=Vt[15]|0}}const Gt=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class tL extends kg{constructor(){super(32),this.Ah=Gt[0]|0,this.Al=Gt[1]|0,this.Bh=Gt[2]|0,this.Bl=Gt[3]|0,this.Ch=Gt[4]|0,this.Cl=Gt[5]|0,this.Dh=Gt[6]|0,this.Dl=Gt[7]|0,this.Eh=Gt[8]|0,this.El=Gt[9]|0,this.Fh=Gt[10]|0,this.Fl=Gt[11]|0,this.Gh=Gt[12]|0,this.Gl=Gt[13]|0,this.Hh=Gt[14]|0,this.Hl=Gt[15]|0}}const Yd=vl(()=>new JB),nL=vl(()=>new kg),rL=vl(()=>new eL),sL=vl(()=>new tL),iL=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Et=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function Ws(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ne[2*t],l=ne[2*t+1],u=ne[2*e],d=ne[2*e+1],h=ne[2*n],f=ne[2*n+1],p=ne[2*r],g=ne[2*r+1],m=Og(c,u,o);l=Rg(m,l,d,a),c=m|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:_B(g,p),Dl:AB(g)},{h:f,l:h}=cr(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Vs(d,u,24),Bl:Ks(d,u,24)},ne[2*t]=c,ne[2*t+1]=l,ne[2*e]=u,ne[2*e+1]=d,ne[2*n]=h,ne[2*n+1]=f,ne[2*r]=p,ne[2*r+1]=g}function qs(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ne[2*t],l=ne[2*t+1],u=ne[2*e],d=ne[2*e+1],h=ne[2*n],f=ne[2*n+1],p=ne[2*r],g=ne[2*r+1],m=Og(c,u,o);l=Rg(m,l,d,a),c=m|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:Vs(g,p,16),Dl:Ks(g,p,16)},{h:f,l:h}=cr(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Va(d,u,63),Bl:Ka(d,u,63)},ne[2*t]=c,ne[2*t+1]=l,ne[2*e]=u,ne[2*e+1]=d,ne[2*n]=h,ne[2*n+1]=f,ne[2*r]=p,ne[2*r+1]=g}function oL(t,e={},n,r,s){if(Is(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class aL extends Gd{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Is(e),Is(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Jc(this.buffer)}update(e){yi(this),e=Er(e),Cr(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Gs(s),this.compress(s,0,!1),Gs(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Gs(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Gs(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){yi(this),Pg(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Qn(this.buffer.subarray(n)),Gs(r),this.compress(r,0,!0),Gs(r);const s=Jc(e);this.get().forEach((i,o)=>s[o]=ss(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class cL extends aL{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Et[0]|0,this.v0h=Et[1]|0,this.v1l=Et[2]|0,this.v1h=Et[3]|0,this.v2l=Et[4]|0,this.v2h=Et[5]|0,this.v3l=Et[6]|0,this.v3h=Et[7]|0,this.v4l=Et[8]|0,this.v4h=Et[9]|0,this.v5l=Et[10]|0,this.v5h=Et[11]|0,this.v6l=Et[12]|0,this.v6h=Et[13]|0,this.v7l=Et[14]|0,this.v7h=Et[15]|0,oL(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Er(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Er(i);const a=Jc(i);this.v4l^=ss(a[0]),this.v4h^=ss(a[1]),this.v5l^=ss(a[2]),this.v5h^=ss(a[3])}if(s!==void 0){s=Er(s);const a=Jc(s);this.v6l^=ss(a[0]),this.v6h^=ss(a[1]),this.v7l^=ss(a[2]),this.v7h^=ss(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=m|0}compress(e,n,r){this.get().forEach((c,l)=>ne[l]=c),ne.set(Et,16);let{h:s,l:i}=j_(BigInt(this.length));ne[24]=Et[8]^i,ne[25]=Et[9]^s,r&&(ne[28]=~ne[28],ne[29]=~ne[29]);let o=0;const a=iL;for(let c=0;c<12;c++)Ws(0,4,8,12,e,n+2*a[o++]),qs(0,4,8,12,e,n+2*a[o++]),Ws(1,5,9,13,e,n+2*a[o++]),qs(1,5,9,13,e,n+2*a[o++]),Ws(2,6,10,14,e,n+2*a[o++]),qs(2,6,10,14,e,n+2*a[o++]),Ws(3,7,11,15,e,n+2*a[o++]),qs(3,7,11,15,e,n+2*a[o++]),Ws(0,5,10,15,e,n+2*a[o++]),qs(0,5,10,15,e,n+2*a[o++]),Ws(1,6,11,12,e,n+2*a[o++]),qs(1,6,11,12,e,n+2*a[o++]),Ws(2,7,8,13,e,n+2*a[o++]),qs(2,7,8,13,e,n+2*a[o++]),Ws(3,4,9,14,e,n+2*a[o++]),qs(3,4,9,14,e,n+2*a[o++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],Qn(ne)}destroy(){this.destroyed=!0,Qn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const lL=$B(t=>new cL(t)),uL="https://rpc.walletconnect.org/v1";function eA(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(VB(n)).toString("hex")}async function dL(t,e,n,r,s,i){switch(n.t){case"eip191":return await hL(t,e,n.s);case"eip1271":return await fL(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function hL(t,e,n){const r=M$(n);return X$({payload:eA(e),signature:r}).toLowerCase()===t.toLowerCase()}async function fL(t,e,n,r,s,i){const o=bs(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:eA(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||uL}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:pL(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function pL(){return Date.now()+Math.floor(Math.random()*1e3)}function gL(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return ya.encode(i)}function mL(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=lL(r,{dkLen:32});return ya.encode(s)}function Ib(t){const e=new Uint8Array(Yd(yL(t)));return ya.encode(e)}function yL(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function Sb(t){const e=Buffer.from(t,"base64"),n=MU(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=OU(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=sL(i);return J$.encode(o).replace(/=+$/,"")}function cf(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function bL(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(cf(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(cf(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(cf(r.length)),s.push(r);const i=Buffer.concat(s),o=Yd(i);return Buffer.from(o).toString("hex").toUpperCase()}function wL(t){var e,n;const r=[];try{if(typeof t=="string")return r.push(t),r;if(typeof t!="object")return r;t!=null&&t.id&&r.push(t.id);const s=(n=(e=t==null?void 0:t.capabilities)==null?void 0:e.caip345)==null?void 0:n.transactionHashes;s&&r.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return r}var EL=Object.defineProperty,vL=Object.defineProperties,CL=Object.getOwnPropertyDescriptors,Nb=Object.getOwnPropertySymbols,_L=Object.prototype.hasOwnProperty,AL=Object.prototype.propertyIsEnumerable,xb=(t,e,n)=>e in t?EL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IL=(t,e)=>{for(var n in e||(e={}))_L.call(e,n)&&xb(t,n,e[n]);if(Nb)for(var n of Nb(e))AL.call(e,n)&&xb(t,n,e[n]);return t},SL=(t,e)=>vL(t,CL(e));const tA="did:pkh:",NL={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},xL=t=>t?NL[t]||t:"",Zd=t=>t==null?void 0:t.split(":"),TL=t=>{const e=t&&Zd(t);if(e)return t.includes(tA)?e[3]:e[1]},OL=t=>{const e=t&&Zd(t);if(e)return t.includes(tA)?e[2]:e[0]},Wp=t=>{const e=t&&Zd(t);if(e)return e[2]+":"+e[3]},ad=t=>{const e=t&&Zd(t);if(e)return e.pop()};async function Tb(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=nA(s,s.iss),o=ad(s.iss);return await dL(o,i,r,Wp(s.iss),n)}const nA=(t,e)=>{const n=OL(e);if(!n)throw new Error("Invalid issuer: "+e);const r=`${t.domain} wants you to sign in with your ${xL(n)} account:`,s=ad(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,c=`Chain ID: ${TL(e)}`,l=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,g=Eu(t.resources);if(g){const m=Xc(g);i=ML(i,m)}return[r,s,"",i,"",o,a,c,l,u,d,h,f,p].filter(m=>m!=null).join(`
`)};function RL(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function PL(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function ao(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function kL(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:DL(e,n,r)}}}function DL(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function rA(t){return ao(t),`urn:recap:${RL(t).replace(/=/g,"")}`}function Xc(t){const e=PL(t.replace("urn:recap:",""));return ao(e),e}function $L(t,e,n){const r=kL(t,e,n);return rA(r)}function UL(t){return t&&t.includes("urn:recap:")}function BL(t,e){const n=Xc(t),r=Xc(e),s=LL(n,r);return rA(s)}function LL(t,e){ao(t),ao(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=SL(IL({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function ML(t="",e){ao(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Ob(t){var e;const n=Xc(t);ao(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Rb(t){const e=Xc(t);ao(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Eu(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return UL(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function sA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qp(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function lf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yn(t,...e){if(!sA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Pb(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function FL(t,e){yn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function oi(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ca(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function jL(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const HL=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function zL(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Vp(t){if(typeof t=="string")t=zL(t);else if(sA(t))t=Kp(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function WL(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function qL(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const VL=(t,e)=>{function n(r,...s){if(yn(r),!HL)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?yn(l):yn(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&yn(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");yn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,yn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(yn(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function kb(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!GL(e))throw new Error("invalid output, must be aligned");return e}function Db(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function KL(t,e,n){qp(n);const r=new Uint8Array(16),s=jL(r);return Db(s,0,BigInt(e),n),Db(s,8,BigInt(t),n),r}function GL(t){return t.byteOffset%4===0}function Kp(t){return Uint8Array.from(t)}const iA=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),YL=iA("expand 16-byte k"),ZL=iA("expand 32-byte k"),JL=oi(YL),XL=oi(ZL);function Le(t,e){return t<<e|t>>>32-e}function Gp(t){return t.byteOffset%4===0}const Jl=64,QL=16,oA=2**32-1,$b=new Uint32Array;function eM(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Jl),u=oi(l),d=Gp(s)&&Gp(i),h=d?oi(s):$b,f=d?oi(i):$b;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=oA)throw new Error("arx: counter overflow");const g=Math.min(Jl,c-p);if(d&&g===Jl){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,_;w<QL;w++)_=m+w,f[_]=h[_]^u[w];p+=Jl;continue}for(let m=0,w;m<g;m++)w=p+m,i[w]=s[w]^l[m];p+=g}}function tM(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=WL({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return lf(s),lf(o),qp(i),qp(n),(a,c,l,u,d=0)=>{yn(a),yn(c),yn(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),yn(u),lf(d),d<0||d>=oA)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=Kp(a)),m=XL;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=JL,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Gp(c)||f.push(c=Kp(c));const w=oi(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,w,oi(c.subarray(0,16)),w),c=c.subarray(16)}const _=16-s;if(_!==c.length)throw new Error(`arx: nonce must be ${_} or 16 bytes`);if(_!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const b=oi(c);return eM(t,m,w,b,l,u,d,o),ca(...f),u}}const $t=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class nM{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Vp(e),yn(e,32);const n=$t(e,0),r=$t(e,2),s=$t(e,4),i=$t(e,6),o=$t(e,8),a=$t(e,10),c=$t(e,12),l=$t(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=$t(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],w=$t(e,n+0),_=$t(e,n+2),b=$t(e,n+4),A=$t(e,n+6),C=$t(e,n+8),S=$t(e,n+10),N=$t(e,n+12),D=$t(e,n+14);let O=i[0]+(w&8191),L=i[1]+((w>>>13|_<<3)&8191),M=i[2]+((_>>>10|b<<6)&8191),U=i[3]+((b>>>7|A<<9)&8191),R=i[4]+((A>>>4|C<<12)&8191),$=i[5]+(C>>>1&8191),y=i[6]+((C>>>14|S<<2)&8191),v=i[7]+((S>>>11|N<<5)&8191),x=i[8]+((N>>>8|D<<8)&8191),k=i[9]+(D>>>5|s),T=0,P=T+O*a+L*(5*m)+M*(5*g)+U*(5*p)+R*(5*f);T=P>>>13,P&=8191,P+=$*(5*h)+y*(5*d)+v*(5*u)+x*(5*l)+k*(5*c),T+=P>>>13,P&=8191;let j=T+O*c+L*a+M*(5*m)+U*(5*g)+R*(5*p);T=j>>>13,j&=8191,j+=$*(5*f)+y*(5*h)+v*(5*d)+x*(5*u)+k*(5*l),T+=j>>>13,j&=8191;let H=T+O*l+L*c+M*a+U*(5*m)+R*(5*g);T=H>>>13,H&=8191,H+=$*(5*p)+y*(5*f)+v*(5*h)+x*(5*d)+k*(5*u),T+=H>>>13,H&=8191;let Q=T+O*u+L*l+M*c+U*a+R*(5*m);T=Q>>>13,Q&=8191,Q+=$*(5*g)+y*(5*p)+v*(5*f)+x*(5*h)+k*(5*d),T+=Q>>>13,Q&=8191;let K=T+O*d+L*u+M*l+U*c+R*a;T=K>>>13,K&=8191,K+=$*(5*m)+y*(5*g)+v*(5*p)+x*(5*f)+k*(5*h),T+=K>>>13,K&=8191;let G=T+O*h+L*d+M*u+U*l+R*c;T=G>>>13,G&=8191,G+=$*a+y*(5*m)+v*(5*g)+x*(5*p)+k*(5*f),T+=G>>>13,G&=8191;let ae=T+O*f+L*h+M*d+U*u+R*l;T=ae>>>13,ae&=8191,ae+=$*c+y*a+v*(5*m)+x*(5*g)+k*(5*p),T+=ae>>>13,ae&=8191;let ge=T+O*p+L*f+M*h+U*d+R*u;T=ge>>>13,ge&=8191,ge+=$*l+y*c+v*a+x*(5*m)+k*(5*g),T+=ge>>>13,ge&=8191;let xe=T+O*g+L*p+M*f+U*h+R*d;T=xe>>>13,xe&=8191,xe+=$*u+y*l+v*c+x*a+k*(5*m),T+=xe>>>13,xe&=8191;let pe=T+O*m+L*g+M*p+U*f+R*h;T=pe>>>13,pe&=8191,pe+=$*d+y*u+v*l+x*c+k*a,T+=pe>>>13,pe&=8191,T=(T<<2)+T|0,T=T+P|0,P=T&8191,T=T>>>13,j+=T,i[0]=P,i[1]=j,i[2]=H,i[3]=Q,i[4]=K,i[5]=G,i[6]=ae,i[7]=ge,i[8]=xe,i[9]=pe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;ca(r)}update(e){Pb(this),e=Vp(e),yn(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){ca(this.h,this.r,this.buffer,this.pad)}digestInto(e){Pb(this),FL(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function rM(t){const e=(r,s)=>t(s).update(Vp(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const sM=rM(t=>new nM(t));function iM(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],m=e[6],w=e[7],_=s,b=n[0],A=n[1],C=n[2],S=o,N=a,D=c,O=l,L=u,M=d,U=h,R=f,$=p,y=g,v=m,x=w,k=_,T=b,P=A,j=C;for(let Q=0;Q<i;Q+=2)S=S+L|0,k=Le(k^S,16),$=$+k|0,L=Le(L^$,12),S=S+L|0,k=Le(k^S,8),$=$+k|0,L=Le(L^$,7),N=N+M|0,T=Le(T^N,16),y=y+T|0,M=Le(M^y,12),N=N+M|0,T=Le(T^N,8),y=y+T|0,M=Le(M^y,7),D=D+U|0,P=Le(P^D,16),v=v+P|0,U=Le(U^v,12),D=D+U|0,P=Le(P^D,8),v=v+P|0,U=Le(U^v,7),O=O+R|0,j=Le(j^O,16),x=x+j|0,R=Le(R^x,12),O=O+R|0,j=Le(j^O,8),x=x+j|0,R=Le(R^x,7),S=S+M|0,j=Le(j^S,16),v=v+j|0,M=Le(M^v,12),S=S+M|0,j=Le(j^S,8),v=v+j|0,M=Le(M^v,7),N=N+U|0,k=Le(k^N,16),x=x+k|0,U=Le(U^x,12),N=N+U|0,k=Le(k^N,8),x=x+k|0,U=Le(U^x,7),D=D+R|0,T=Le(T^D,16),$=$+T|0,R=Le(R^$,12),D=D+R|0,T=Le(T^D,8),$=$+T|0,R=Le(R^$,7),O=O+L|0,P=Le(P^O,16),y=y+P|0,L=Le(L^y,12),O=O+L|0,P=Le(P^O,8),y=y+P|0,L=Le(L^y,7);let H=0;r[H++]=o+S|0,r[H++]=a+N|0,r[H++]=c+D|0,r[H++]=l+O|0,r[H++]=u+L|0,r[H++]=d+M|0,r[H++]=h+U|0,r[H++]=f+R|0,r[H++]=p+$|0,r[H++]=g+y|0,r[H++]=m+v|0,r[H++]=w+x|0,r[H++]=_+k|0,r[H++]=b+T|0,r[H++]=A+P|0,r[H++]=C+j|0}const oM=tM(iM,{counterRight:!1,counterLength:4,allowShortKeys:!1}),aM=new Uint8Array(16),Ub=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(aM.subarray(n))},cM=new Uint8Array(32);function Bb(t,e,n,r,s){const i=t(e,n,cM),o=sM.create(i);s&&Ub(o,s),Ub(o,r);const a=KL(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return ca(i,a),c}const lM=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=kb(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Bb(t,e,n,a,r);return i.set(c,o),ca(c),i},decrypt(s,i){i=kb(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Bb(t,e,n,o,r);if(!qL(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),ca(c),i}}),aA=VL({blockSize:64,nonceLength:12,tagLength:16},lM(oM));let cA=class extends Gd{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Kd(e);const r=Er(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Qn(i)}update(e){return yi(this),this.iHash.update(e),this}digestInto(e){yi(this),Cr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Jd=(t,e,n)=>new cA(t,e).update(n).digest();Jd.create=(t,e)=>new cA(t,e);function uM(t,e,n){return Kd(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Jd(t,Er(n),Er(e))}const uf=Uint8Array.from([0]),Lb=Uint8Array.of();function dM(t,e,n,r=32){Kd(t),Is(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=Lb);const o=new Uint8Array(i*s),a=Jd.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)uf[0]=u+1,c.update(u===0?Lb:l).update(n).update(uf).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Qn(l,uf),o.slice(0,r)}const hM=(t,e,n,r,s)=>dM(t,uM(t,e,n),r,s),Xd=Yd,Dg=BigInt(0),Yp=BigInt(1);function cd(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function ji(t,e,n=""){const r=Vd(t),s=t==null?void 0:t.length,i=e!==void 0;if(!r||i&&s!==e){const o=n&&`"${n}" `,a=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function Xl(t){const e=t.toString(16);return e.length&1?"0"+e:e}function lA(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Dg:BigInt("0x"+t)}function Qd(t){return lA(qo(t))}function ld(t){return Cr(t),lA(qo(Uint8Array.from(t).reverse()))}function $g(t,e){return od(t.toString(16).padStart(e*2,"0"))}function Ug(t,e){return $g(t,e).reverse()}function Zt(t,e,n){let r;if(typeof e=="string")try{r=od(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Vd(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const df=t=>typeof t=="bigint"&&Dg<=t;function fM(t,e,n){return df(t)&&df(e)&&df(n)&&e<=t&&t<n}function Zp(t,e,n,r){if(!fM(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function uA(t){let e;for(e=0;t>Dg;t>>=Yp,e+=1);return e}const Cl=t=>(Yp<<BigInt(t))-Yp;function pM(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return Xs(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function eh(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Mb(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const En=BigInt(0),sn=BigInt(1),Hi=BigInt(2),dA=BigInt(3),hA=BigInt(4),fA=BigInt(5),gM=BigInt(7),pA=BigInt(8),mM=BigInt(9),gA=BigInt(16);function kn(t,e){const n=t%e;return n>=En?n:e+n}function ar(t,e,n){let r=t;for(;e-- >En;)r*=r,r%=n;return r}function Fb(t,e){if(t===En)throw new Error("invert: expected non-zero number");if(e<=En)throw new Error("invert: expected positive modulus, got "+e);let n=kn(t,e),r=e,s=En,i=sn;for(;n!==En;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==sn)throw new Error("invert: does not exist");return kn(s,e)}function Bg(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function mA(t,e){const n=(t.ORDER+sn)/hA,r=t.pow(e,n);return Bg(t,r,e),r}function yM(t,e){const n=(t.ORDER-fA)/pA,r=t.mul(e,Hi),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Hi),s),a=t.mul(i,t.sub(o,t.ONE));return Bg(t,a,e),a}function bM(t){const e=wi(t),n=yA(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+gM)/gA;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,r);const d=a.mul(l,s),h=a.mul(l,i),f=a.eql(a.sqr(u),c),p=a.eql(a.sqr(d),c);l=a.cmov(l,u,f),u=a.cmov(h,d,p);const g=a.eql(a.sqr(u),c),m=a.cmov(l,u,g);return Bg(a,m,c),m}}function yA(t){if(t<dA)throw new Error("sqrt is not defined for small field");let e=t-sn,n=0;for(;e%Hi===En;)e/=Hi,n++;let r=Hi;const s=wi(t);for(;jb(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return mA;let i=s.pow(r,e);const o=(e+sn)/Hi;return function(a,c){if(a.is0(c))return c;if(jb(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=sn<<BigInt(l-f-1),m=a.pow(u,g);l=f,u=a.sqr(m),d=a.mul(d,u),h=a.mul(h,m)}return h}}function wM(t){return t%hA===dA?mA:t%pA===fA?yM:t%gA===mM?bM(t):yA(t)}const EM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vM(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=EM.reduce((r,s)=>(r[s]="function",r),e);return eh(t,n),t}function CM(t,e,n){if(n<En)throw new Error("invalid exponent, negatives unsupported");if(n===En)return t.ONE;if(n===sn)return e;let r=t.ONE,s=e;for(;n>En;)n&sn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=sn;return r}function bA(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function jb(t,e){const n=(t.ORDER-sn)/Hi,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function wA(t,e){e!==void 0&&Is(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function wi(t,e,n=!1,r={}){if(t<=En)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(s=h.BITS),h.sqrt&&(i=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE),typeof h.modFromBytes=="boolean"&&(o=h.modFromBytes),a=h.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:l}=wA(t,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:Cl(c),ZERO:En,ONE:sn,allowedLengths:a,create:h=>kn(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return En<=h&&h<t},is0:h=>h===En,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&sn)===sn,neg:h=>kn(-h,t),eql:(h,f)=>h===f,sqr:h=>kn(h*h,t),add:(h,f)=>kn(h+f,t),sub:(h,f)=>kn(h-f,t),mul:(h,f)=>kn(h*f,t),pow:(h,f)=>CM(d,h,f),div:(h,f)=>kn(h*Fb(f,t),t),sqrN:h=>h*h,addN:(h,f)=>h+f,subN:(h,f)=>h-f,mulN:(h,f)=>h*f,inv:h=>Fb(h,t),sqrt:i||(h=>(u||(u=wM(t)),u(d,h))),toBytes:h=>n?Ug(h,l):$g(h,l),fromBytes:(h,f=!0)=>{if(a){if(!a.includes(h.length)||h.length>l)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);const g=new Uint8Array(l);g.set(h,n?0:g.length-h.length),h=g}if(h.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+h.length);let p=n?ld(h):Qd(h);if(o&&(p=kn(p,t)),!f&&!d.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:h=>bA(d,h),cmov:(h,f,p)=>p?f:h});return Object.freeze(d)}function EA(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function vA(t){const e=EA(t);return e+Math.ceil(e/2)}function _M(t,e,n=!1){const r=t.length,s=EA(e),i=vA(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?ld(t):Qd(t),a=kn(o,e-sn)+sn;return n?Ug(a,s):$g(a,s)}const la=BigInt(0),zi=BigInt(1);function ud(t,e){const n=e.negate();return t?n:e}function hf(t,e){const n=bA(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function CA(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ff(t,e){CA(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Cl(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Hb(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=zi);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function AM(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function IM(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const pf=new WeakMap,_A=new WeakMap;function gf(t){return _A.get(t)||1}function zb(t){if(t!==la)throw new Error("invalid wNAF")}class SM{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>la;)n&zi&&(r=r.add(s)),s=s.double(),n>>=zi;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=ff(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let l=1;l<s;l++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=ff(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:h,offsetF:f}=Hb(r,a,o);r=c,u?i=i.add(ud(h,n[f])):s=s.add(ud(d,n[l]))}return zb(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=ff(e,this.bits);for(let o=0;o<i.windows&&r!==la;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=Hb(r,o,i);if(r=a,!l){const d=n[c];s=s.add(u?d.negate():d)}}return zb(r),s}getPrecomputes(e,n,r){let s=pf.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),pf.set(n,s))),s}cached(e,n,r){const s=gf(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=gf(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){CA(n,this.bits),_A.set(e,n),pf.delete(e)}hasCache(e){return gf(e)!==1}}function NM(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>la||r>la;)n&zi&&(i=i.add(s)),r&zi&&(o=o.add(s)),s=s.double(),n>>=zi,r>>=zi;return{p1:i,p2:o}}function xM(t,e,n,r){AM(n,t),IM(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=uA(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Cl(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const m=r[g],w=Number(m>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,m=o;g>0;g--)m=m.add(u[g]),p=p.add(m);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function Wb(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return vM(e),e}else return wi(t,{isLE:n})}function TM(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>la))throw new Error(`CURVE.${a} must be positive bigint`)}const s=Wb(e.p,n.Fp,r),i=Wb(e.n,n.Fn,r),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),V_("HashToScalar-");const Da=BigInt(0),No=BigInt(1),Ql=BigInt(2);function OM(t){return eh(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function RM(t){const e=OM(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||wo,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Ql**BigInt(254):Ql**BigInt(447),p=a?BigInt(8)*Ql**BigInt(251)-No:BigInt(4)*Ql**BigInt(445)-No,g=f+p+No,m=U=>kn(U,n),w=_(d);function _(U){return Ug(m(U),u)}function b(U){const R=Zt("u coordinate",U,u);return a&&(R[31]&=127),m(ld(R))}function A(U){return ld(s(Zt("scalar",U,u)))}function C(U,R){const $=D(b(R),A(U));if($===Da)throw new Error("invalid private or public key received");return _($)}function S(U){return C(U,w)}function N(U,R,$){const y=m(U*(R-$));return R=m(R-y),$=m($+y),{x_2:R,x_3:$}}function D(U,R){Zp("u",U,Da,n),Zp("scalar",R,f,g);const $=R,y=U;let v=No,x=Da,k=U,T=No,P=Da;for(let H=BigInt(l-1);H>=Da;H--){const Q=$>>H&No;P^=Q,{x_2:v,x_3:k}=N(P,v,k),{x_2:x,x_3:T}=N(P,x,T),P=Q;const K=v+x,G=m(K*K),ae=v-x,ge=m(ae*ae),xe=G-ge,pe=k+T,Te=k-T,st=m(Te*K),bt=m(pe*ae),It=st+bt,Xt=st-bt;k=m(It*It),T=m(y*m(Xt*Xt)),v=m(G*ge),x=m(xe*(G+m(h*xe)))}({x_2:v,x_3:k}=N(P,v,k)),{x_2:x,x_3:T}=N(P,x,T);const j=i(x);return m(v*j)}const O={secretKey:u,publicKey:u,seed:u},L=(U=c(u))=>(Cr(U,O.seed),U);function M(U){const R=L(U);return{secretKey:R,publicKey:S(R)}}return{keygen:M,getSharedSecret:(U,R)=>C(U,R),getPublicKey:U=>S(U),scalarMult:C,scalarMultBase:S,utils:{randomSecretKey:L,randomPrivateKey:L},GuBytes:w.slice(),lengths:O}}const PM=BigInt(1),qb=BigInt(2),kM=BigInt(3),DM=BigInt(5);BigInt(8);const AA=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),$M={p:AA,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function UM(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=AA,o=t*t%i*t%i,a=ar(o,qb,i)*o%i,c=ar(a,PM,i)*t%i,l=ar(c,DM,i)*c%i,u=ar(l,e,i)*l%i,d=ar(u,n,i)*u%i,h=ar(d,r,i)*d%i,f=ar(h,s,i)*h%i,p=ar(f,s,i)*h%i,g=ar(p,e,i)*l%i;return{pow_p_5_8:ar(g,qb,i)*t%i,b2:o}}function BM(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const LM=wi($M.p,{isLE:!0}),Jp=(()=>{const t=LM.ORDER;return RM({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=UM(e);return kn(ar(n,kM,t)*r,t)},adjustScalarBytes:BM})})(),Vb=(t,e)=>(t+(t>=0?e:-e)/IA)/e;function MM(t,e,n){const[[r,s],[i,o]]=e,a=Vb(o*t,n),c=Vb(-s*t,n);let l=t-a*r-c*i,u=-a*s-c*o;const d=l<gs,h=u<gs;d&&(l=-l),h&&(u=-u);const f=Cl(Math.ceil(uA(n)/2))+Vo;if(l<gs||l>=f||u<gs||u>=f)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}function Xp(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function mf(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return cd(n.lowS,"lowS"),cd(n.prehash,"prehash"),n.format!==void 0&&Xp(n.format),n}class FM extends Error{constructor(e=""){super(e)}}const hs={Err:FM,_tlv:{encode:(t,e)=>{const{Err:n}=hs;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Xl(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Xl(s.length/2|128):"";return Xl(t)+i+s+e},decode(t,e){const{Err:n}=hs;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=hs;if(t<gs)throw new e("integer: negative integers are not allowed");let n=Xl(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=hs;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Qd(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=hs,s=Zt("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=hs,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},gs=BigInt(0),Vo=BigInt(1),IA=BigInt(2),eu=BigInt(3),jM=BigInt(4);function Uo(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=Zt("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function HM(t,e={}){const n=TM("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:o,n:a}=i;eh(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=NA(r,s);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(U,R,$){const{x:y,y:v}=R.toAffine(),x=r.toBytes(y);if(cd($,"isCompressed"),$){u();const k=!r.isOdd(v);return Xs(SA(k),x)}else return Xs(Uint8Array.of(4),x,r.toBytes(v))}function h(U){ji(U,void 0,"Point");const{publicKey:R,publicKeyUncompressed:$}=l,y=U.length,v=U[0],x=U.subarray(1);if(y===R&&(v===2||v===3)){const k=r.fromBytes(x);if(!r.isValid(k))throw new Error("bad point: is not on curve, wrong x");const T=g(k);let P;try{P=r.sqrt(T)}catch(H){const Q=H instanceof Error?": "+H.message:"";throw new Error("bad point: is not on curve, sqrt error"+Q)}u();const j=r.isOdd(P);return(v&1)===1!==j&&(P=r.neg(P)),{x:k,y:P}}else if(y===$&&v===4){const k=r.BYTES,T=r.fromBytes(x.subarray(0,k)),P=r.fromBytes(x.subarray(k,k*2));if(!m(T,P))throw new Error("bad point: is not on curve");return{x:T,y:P}}else throw new Error(`bad point: got length ${y}, expected compressed=${R} or uncompressed=${$}`)}const f=e.toBytes||d,p=e.fromBytes||h;function g(U){const R=r.sqr(U),$=r.mul(R,U);return r.add(r.add($,r.mul(U,i.a)),i.b)}function m(U,R){const $=r.sqr(R),y=g(U);return r.eql($,y)}if(!m(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const w=r.mul(r.pow(i.a,eu),jM),_=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(w,_)))throw new Error("bad curve params: a or b");function b(U,R,$=!1){if(!r.isValid(R)||$&&r.is0(R))throw new Error(`bad point coordinate ${U}`);return R}function A(U){if(!(U instanceof O))throw new Error("ProjectivePoint expected")}function C(U){if(!c||!c.basises)throw new Error("no endo");return MM(U,c.basises,s.ORDER)}const S=Mb((U,R)=>{const{X:$,Y:y,Z:v}=U;if(r.eql(v,r.ONE))return{x:$,y};const x=U.is0();R==null&&(R=x?r.ONE:r.inv(v));const k=r.mul($,R),T=r.mul(y,R),P=r.mul(v,R);if(x)return{x:r.ZERO,y:r.ZERO};if(!r.eql(P,r.ONE))throw new Error("invZ was invalid");return{x:k,y:T}}),N=Mb(U=>{if(U.is0()){if(e.allowInfinityPoint&&!r.is0(U.Y))return;throw new Error("bad point: ZERO")}const{x:R,y:$}=U.toAffine();if(!r.isValid(R)||!r.isValid($))throw new Error("bad point: x or y not field elements");if(!m(R,$))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function D(U,R,$,y,v){return $=new O(r.mul($.X,U),$.Y,$.Z),R=ud(y,R),$=ud(v,$),R.add($)}class O{constructor(R,$,y){this.X=b("x",R),this.Y=b("y",$,!0),this.Z=b("z",y),Object.freeze(this)}static CURVE(){return i}static fromAffine(R){const{x:$,y}=R||{};if(!R||!r.isValid($)||!r.isValid(y))throw new Error("invalid affine point");if(R instanceof O)throw new Error("projective point not allowed");return r.is0($)&&r.is0(y)?O.ZERO:new O($,y,r.ONE)}static fromBytes(R){const $=O.fromAffine(p(ji(R,void 0,"point")));return $.assertValidity(),$}static fromHex(R){return O.fromBytes(Zt("pointHex",R))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(R=8,$=!0){return M.createCache(this,R),$||this.multiply(eu),this}assertValidity(){N(this)}hasEvenY(){const{y:R}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(R)}equals(R){A(R);const{X:$,Y:y,Z:v}=this,{X:x,Y:k,Z:T}=R,P=r.eql(r.mul($,T),r.mul(x,v)),j=r.eql(r.mul(y,T),r.mul(k,v));return P&&j}negate(){return new O(this.X,r.neg(this.Y),this.Z)}double(){const{a:R,b:$}=i,y=r.mul($,eu),{X:v,Y:x,Z:k}=this;let T=r.ZERO,P=r.ZERO,j=r.ZERO,H=r.mul(v,v),Q=r.mul(x,x),K=r.mul(k,k),G=r.mul(v,x);return G=r.add(G,G),j=r.mul(v,k),j=r.add(j,j),T=r.mul(R,j),P=r.mul(y,K),P=r.add(T,P),T=r.sub(Q,P),P=r.add(Q,P),P=r.mul(T,P),T=r.mul(G,T),j=r.mul(y,j),K=r.mul(R,K),G=r.sub(H,K),G=r.mul(R,G),G=r.add(G,j),j=r.add(H,H),H=r.add(j,H),H=r.add(H,K),H=r.mul(H,G),P=r.add(P,H),K=r.mul(x,k),K=r.add(K,K),H=r.mul(K,G),T=r.sub(T,H),j=r.mul(K,Q),j=r.add(j,j),j=r.add(j,j),new O(T,P,j)}add(R){A(R);const{X:$,Y:y,Z:v}=this,{X:x,Y:k,Z:T}=R;let P=r.ZERO,j=r.ZERO,H=r.ZERO;const Q=i.a,K=r.mul(i.b,eu);let G=r.mul($,x),ae=r.mul(y,k),ge=r.mul(v,T),xe=r.add($,y),pe=r.add(x,k);xe=r.mul(xe,pe),pe=r.add(G,ae),xe=r.sub(xe,pe),pe=r.add($,v);let Te=r.add(x,T);return pe=r.mul(pe,Te),Te=r.add(G,ge),pe=r.sub(pe,Te),Te=r.add(y,v),P=r.add(k,T),Te=r.mul(Te,P),P=r.add(ae,ge),Te=r.sub(Te,P),H=r.mul(Q,pe),P=r.mul(K,ge),H=r.add(P,H),P=r.sub(ae,H),H=r.add(ae,H),j=r.mul(P,H),ae=r.add(G,G),ae=r.add(ae,G),ge=r.mul(Q,ge),pe=r.mul(K,pe),ae=r.add(ae,ge),ge=r.sub(G,ge),ge=r.mul(Q,ge),pe=r.add(pe,ge),G=r.mul(ae,pe),j=r.add(j,G),G=r.mul(Te,pe),P=r.mul(xe,P),P=r.sub(P,G),G=r.mul(xe,ae),H=r.mul(Te,H),H=r.add(H,G),new O(P,j,H)}subtract(R){return this.add(R.negate())}is0(){return this.equals(O.ZERO)}multiply(R){const{endo:$}=e;if(!s.isValidNot0(R))throw new Error("invalid scalar: out of range");let y,v;const x=k=>M.cached(this,k,T=>hf(O,T));if($){const{k1neg:k,k1:T,k2neg:P,k2:j}=C(R),{p:H,f:Q}=x(T),{p:K,f:G}=x(j);v=Q.add(G),y=D($.beta,H,K,k,P)}else{const{p:k,f:T}=x(R);y=k,v=T}return hf(O,[y,v])[0]}multiplyUnsafe(R){const{endo:$}=e,y=this;if(!s.isValid(R))throw new Error("invalid scalar: out of range");if(R===gs||y.is0())return O.ZERO;if(R===Vo)return y;if(M.hasCache(this))return this.multiply(R);if($){const{k1neg:v,k1:x,k2neg:k,k2:T}=C(R),{p1:P,p2:j}=NM(O,y,x,T);return D($.beta,P,j,v,k)}else return M.unsafe(y,R)}multiplyAndAddUnsafe(R,$,y){const v=this.multiplyUnsafe($).add(R.multiplyUnsafe(y));return v.is0()?void 0:v}toAffine(R){return S(this,R)}isTorsionFree(){const{isTorsionFree:R}=e;return o===Vo?!0:R?R(O,this):M.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:R}=e;return o===Vo?this:R?R(O,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(R=!0){return cd(R,"isCompressed"),this.assertValidity(),f(O,this,R)}toHex(R=!0){return qo(this.toBytes(R))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(R=!0){return this.toBytes(R)}_setWindowSize(R){this.precompute(R)}static normalizeZ(R){return hf(O,R)}static msm(R,$){return xM(O,s,R,$)}static fromPrivateKey(R){return O.BASE.multiply(Uo(s,R))}}O.BASE=new O(i.Gx,i.Gy,r.ONE),O.ZERO=new O(r.ZERO,r.ONE,r.ZERO),O.Fp=r,O.Fn=s;const L=s.BITS,M=new SM(O,e.endo?Math.ceil(L/2):L);return O.BASE.precompute(8),O}function SA(t){return Uint8Array.of(t?2:3)}function NA(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function zM(t,e={}){const{Fn:n}=t,r=e.randomBytes||wo,s=Object.assign(NA(t.Fp,n),{seed:vA(n.ORDER)});function i(h){try{return!!Uo(n,h)}catch{return!1}}function o(h,f){const{publicKey:p,publicKeyUncompressed:g}=s;try{const m=h.length;return f===!0&&m!==p||f===!1&&m!==g?!1:!!t.fromBytes(h)}catch{return!1}}function a(h=r(s.seed)){return _M(ji(h,s.seed,"seed"),n.ORDER)}function c(h,f=!0){return t.BASE.multiply(Uo(n,h)).toBytes(f)}function l(h){const f=a(h);return{secretKey:f,publicKey:c(f)}}function u(h){if(typeof h=="bigint")return!1;if(h instanceof t)return!0;const{secretKey:f,publicKey:p,publicKeyUncompressed:g}=s;if(n.allowedLengths||f===p)return;const m=Zt("key",h).length;return m===p||m===g}function d(h,f,p=!0){if(u(h)===!0)throw new Error("first arg must be private key");if(u(f)===!1)throw new Error("second arg must be public key");const g=Uo(n,h);return t.fromHex(f).multiply(g).toBytes(p)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:l,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:h=>Uo(n,h),precompute(h=8,f=t.BASE){return f.precompute(h,!1)}},lengths:s})}function WM(t,e,n={}){Kd(e),eh(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||wo,s=n.hmac||(($,...y)=>Jd(e,$,Xs(...y))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f}=zM(t,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function m($){const y=a>>Vo;return $>y}function w($,y){if(!o.isValidNot0(y))throw new Error(`invalid signature ${$}: out of range 1..Point.Fn.ORDER`);return y}function _($,y){Xp(y);const v=f.signature,x=y==="compact"?v:y==="recovered"?v+1:void 0;return ji($,x,`${y} signature`)}class b{constructor(y,v,x){this.r=w("r",y),this.s=w("s",v),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(y,v=g){_(y,v);let x;if(v==="der"){const{r:j,s:H}=hs.toSig(ji(y));return new b(j,H)}v==="recovered"&&(x=y[0],v="compact",y=y.subarray(1));const k=o.BYTES,T=y.subarray(0,k),P=y.subarray(k,k*2);return new b(o.fromBytes(T),o.fromBytes(P),x)}static fromHex(y,v){return this.fromBytes(od(y),v)}addRecoveryBit(y){return new b(this.r,this.s,y)}recoverPublicKey(y){const v=i.ORDER,{r:x,s:k,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(a*IA<v&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=T===2||T===3?x+a:x;if(!i.isValid(P))throw new Error("recovery id 2 or 3 invalid");const j=i.toBytes(P),H=t.fromBytes(Xs(SA((T&1)===0),j)),Q=o.inv(P),K=C(Zt("msgHash",y)),G=o.create(-K*Q),ae=o.create(k*Q),ge=t.BASE.multiplyUnsafe(G).add(H.multiplyUnsafe(ae));if(ge.is0())throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return m(this.s)}toBytes(y=g){if(Xp(y),y==="der")return od(hs.hexFromSig(this));const v=o.toBytes(this.r),x=o.toBytes(this.s);if(y==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Xs(Uint8Array.of(this.recovery),v,x)}return Xs(v,x)}toHex(y){return qo(this.toBytes(y))}assertValidity(){}static fromCompact(y){return b.fromBytes(Zt("sig",y),"compact")}static fromDER(y){return b.fromBytes(Zt("sig",y),"der")}normalizeS(){return this.hasHighS()?new b(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return qo(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return qo(this.toBytes("compact"))}}const A=n.bits2int||function($){if($.length>8192)throw new Error("input is too large");const y=Qd($),v=$.length*8-c;return v>0?y>>BigInt(v):y},C=n.bits2int_modN||function($){return o.create(A($))},S=Cl(c);function N($){return Zp("num < 2^"+c,$,gs,S),o.toBytes($)}function D($,y){return ji($,void 0,"message"),y?ji(e($),void 0,"prehashed message"):$}function O($,y,v){if(["recovered","canonical"].some(ae=>ae in v))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:k,extraEntropy:T}=mf(v,p);$=D($,k);const P=C($),j=Uo(o,y),H=[N(j),N(P)];if(T!=null&&T!==!1){const ae=T===!0?r(f.secretKey):T;H.push(Zt("extraEntropy",ae))}const Q=Xs(...H),K=P;function G(ae){const ge=A(ae);if(!o.isValidNot0(ge))return;const xe=o.inv(ge),pe=t.BASE.multiply(ge).toAffine(),Te=o.create(pe.x);if(Te===gs)return;const st=o.create(xe*o.create(K+Te*j));if(st===gs)return;let bt=(pe.x===Te?0:2)|Number(pe.y&Vo),It=st;return x&&m(st)&&(It=o.neg(st),bt^=1),new b(Te,It,bt)}return{seed:Q,k2sig:G}}function L($,y,v={}){$=Zt("message",$);const{seed:x,k2sig:k}=O($,y,v);return pM(e.outputLen,o.BYTES,s)(x,k)}function M($){let y;const v=typeof $=="string"||Vd($),x=!v&&$!==null&&typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint";if(!v&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)y=new b($.r,$.s);else if(v){try{y=b.fromBytes(Zt("sig",$),"der")}catch(k){if(!(k instanceof hs.Err))throw k}if(!y)try{y=b.fromBytes(Zt("sig",$),"compact")}catch{return!1}}return y||!1}function U($,y,v,x={}){const{lowS:k,prehash:T,format:P}=mf(x,p);if(v=Zt("publicKey",v),y=D(Zt("message",y),T),"strict"in x)throw new Error("options.strict was renamed to lowS");const j=P===void 0?M($):b.fromBytes(Zt("sig",$),P);if(j===!1)return!1;try{const H=t.fromBytes(v);if(k&&j.hasHighS())return!1;const{r:Q,s:K}=j,G=C(y),ae=o.inv(K),ge=o.create(G*ae),xe=o.create(Q*ae),pe=t.BASE.multiplyUnsafe(ge).add(H.multiplyUnsafe(xe));return pe.is0()?!1:o.create(pe.x)===Q}catch{return!1}}function R($,y,v={}){const{prehash:x}=mf(v,p);return y=D(y,x),b.fromBytes($,"recovered").recoverPublicKey(y).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f,Point:t,sign:L,verify:U,recoverPublicKey:R,Signature:b,hash:e})}function qM(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=wi(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function VM(t){const{CURVE:e,curveOpts:n}=qM(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function KM(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,wA(n.Fn.ORDER,n.Fn.BITS))})}function GM(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=VM(t),i=HM(e,n),o=WM(i,r,s);return KM(t,o)}function Qp(t,e){const n=r=>GM({...t,hash:r});return{...n(e),create:n}}const xA={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},TA={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},OA={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},YM=wi(xA.p),ZM=wi(TA.p),JM=wi(OA.p),XM=Qp({...xA,Fp:YM,lowS:!1},Yd);Qp({...TA,Fp:ZM,lowS:!1},rL),Qp({...OA,Fp:JM,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},nL);const QM=XM,RA="base10",on="base16",bn="base64pad",Qs="base64url",_l="utf8",PA=0,ws=1,Al=2,eF=0,Kb=1,ec=12,Lg=32;function tF(){const t=Jp.utils.randomPrivateKey(),e=Jp.getPublicKey(t);return{privateKey:Cn(t,on),publicKey:Cn(e,on)}}function e0(){const t=wo(Lg);return Cn(t,on)}function nF(t,e){const n=Jp.getSharedSecret(Yn(t,on),Yn(e,on)),r=hM(Xd,n,void 0,void 0,Lg);return Cn(r,on)}function vu(t){const e=Xd(Yn(t,on));return Cn(e,on)}function Kn(t){const e=Xd(Yn(t,_l));return Cn(e,on)}function kA(t){return Yn(`${t}`,RA)}function co(t){return Number(Cn(t,RA))}function DA(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function $A(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function rF(t){const e=kA(typeof t.type<"u"?t.type:PA);if(co(e)===ws&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Yn(t.senderPublicKey,on):void 0,r=typeof t.iv<"u"?Yn(t.iv,on):wo(ec),s=Yn(t.symKey,on),i=aA(s,r).encrypt(Yn(t.message,_l)),o=UA({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Qs?DA(o):o}function sF(t){const e=Yn(t.symKey,on),{sealed:n,iv:r}=Qc({encoded:t.encoded,encoding:t.encoding}),s=aA(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Cn(s,_l)}function iF(t,e){const n=kA(Al),r=wo(ec),s=Yn(t,_l),i=UA({type:n,sealed:s,iv:r});return e===Qs?DA(i):i}function oF(t,e){const{sealed:n}=Qc({encoded:t,encoding:e});return Cn(n,_l)}function UA(t){if(co(t.type)===Al)return Cn(Qa([t.type,t.sealed]),bn);if(co(t.type)===ws){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Cn(Qa([t.type,t.senderPublicKey,t.iv,t.sealed]),bn)}return Cn(Qa([t.type,t.iv,t.sealed]),bn)}function Qc(t){const e=(t.encoding||bn)===Qs?$A(t.encoded):t.encoded,n=Yn(e,bn),r=n.slice(eF,Kb),s=Kb;if(co(r)===ws){const c=s+Lg,l=c+ec,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(co(r)===Al){const c=n.slice(s),l=wo(ec);return{type:r,sealed:c,iv:l}}const i=s+ec,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function aF(t,e){const n=Qc({encoded:t,encoding:e==null?void 0:e.encoding});return BA({type:co(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Cn(n.senderPublicKey,on):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function BA(t){const e=(t==null?void 0:t.type)||PA;if(e===ws){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Gb(t){return t.type===ws&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Yb(t){return t.type===Al}function cF(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Qa([new Uint8Array([4]),e,n])}function lF(t,e){const[n,r,s]=t.split("."),i=Buffer.from($A(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Xd(c),u=cF(e);if(!QM.verify(Qa([o,a]),l,u))throw new Error("Invalid signature");return Rp(t).payload}const uF="irn";function dd(t){return(t==null?void 0:t.relay)||{protocol:uF}}function Bo(t){const e=U9[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var dF=Object.defineProperty,hF=Object.defineProperties,fF=Object.getOwnPropertyDescriptors,Zb=Object.getOwnPropertySymbols,pF=Object.prototype.hasOwnProperty,gF=Object.prototype.propertyIsEnumerable,Jb=(t,e,n)=>e in t?dF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yf=(t,e)=>{for(var n in e||(e={}))pF.call(e,n)&&Jb(t,n,e[n]);if(Zb)for(var n of Zb(e))gF.call(e,n)&&Jb(t,n,e[n]);return t},mF=(t,e)=>hF(t,fF(e));function yF(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function Xb(t){if(!t.includes("wc:")){const l=F_(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:bF(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:yF(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function bF(t){return t.startsWith("//")?t.substring(2):t}function wF(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Qb(t){const e=new URLSearchParams,n=yf(yf(mF(yf({},wF(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(n).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!==void 0&&e.append(r,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function tu(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var EF=Object.defineProperty,vF=Object.defineProperties,CF=Object.getOwnPropertyDescriptors,ew=Object.getOwnPropertySymbols,_F=Object.prototype.hasOwnProperty,AF=Object.prototype.propertyIsEnumerable,tw=(t,e,n)=>e in t?EF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IF=(t,e)=>{for(var n in e||(e={}))_F.call(e,n)&&tw(t,n,e[n]);if(ew)for(var n of ew(e))AF.call(e,n)&&tw(t,n,e[n]);return t},SF=(t,e)=>vF(t,CF(e));function wa(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function LA(t){const e=[];return Object.values(t).forEach(n=>{e.push(...wa(n.accounts))}),[...new Set(e)]}function NF(t){const e=[];return Object.values(t).forEach(n=>{e.push(...n.methods)}),[...new Set(e)]}function xF(t){const e=[];return Object.values(t).forEach(n=>{e.push(...n.events)}),[...new Set(e)]}function TF(t,e){const n=[];return Object.values(t).forEach(r=>{wa(r.accounts).includes(e)&&n.push(...r.methods)}),n}function OF(t,e){const n=[];return Object.values(t).forEach(r=>{wa(r.accounts).includes(e)&&n.push(...r.events)}),n}function th(t){return t.includes(":")}function Lo(t){return th(t)?t.split(":")[0]:t}function nw(t){var e,n,r;const s={};if(!jr(t))return s;for(const[i,o]of Object.entries(t)){const a=th(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Lo(i);s[u]=SF(IF({},s[u]),{chains:Fr(a,(e=s[u])==null?void 0:e.chains),methods:Fr(c,(n=s[u])==null?void 0:n.methods),events:Fr(l,(r=s[u])==null?void 0:r.events)})}return s}function RF(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function rw(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=RF(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Fr(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function PF(t,e){var n,r,s,i,o,a;const c=nw(t),l=nw(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Fr((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Fr((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Fr((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const kF={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},DF={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(t,e){const{message:n,code:r}=DF[t];return{message:e?`${n} ${e}`:n,code:r}}function nt(t,e){const{message:n,code:r}=kF[t];return{message:e?`${n} ${e}`:n,code:r}}function Es(t,e){return!!Array.isArray(t)}function jr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ot(t){return typeof t>"u"}function mt(t,e){return e&&Ot(t)?!0:typeof t=="string"&&!!t.trim().length}function Mg(t,e){return typeof t=="number"&&!isNaN(t)}function $F(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Fi(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=wa(a),d=n[o];(!Fi($_(o,d),u)||!Fi(d.methods,c)||!Fi(d.events,l))&&(i=!1)}),i):!1}function hd(t){return mt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function UF(t){if(mt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&hd(n)}}return!1}function BF(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(mt(t,!1)){if(e(t))return!0;const n=F_(t);return e(n)}}catch{}return!1}function LF(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function MF(t){return t==null?void 0:t.topic}function FF(t,e){let n=null;return mt(t==null?void 0:t.publicKey,!1)||(n=J("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function sw(t){let e=!0;return Es(t)?t.length&&(e=t.every(n=>mt(n,!1))):e=!1,e}function jF(t,e,n){let r=null;return Es(e)&&e.length?e.forEach(s=>{r||hd(s)||(r=nt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):hd(t)||(r=nt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function HF(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=jF(s,$_(s,i),`${e} ${n}`);o&&(r=o)}),r}function zF(t,e){let n=null;return Es(t)?t.forEach(r=>{n||UF(r)||(n=nt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=nt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function WF(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=zF(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function qF(t,e){let n=null;return sw(t==null?void 0:t.methods)?sw(t==null?void 0:t.events)||(n=nt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=nt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function MA(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=qF(r,`${e}, namespace`);s&&(n=s)}),n}function VF(t,e,n){let r=null;if(t&&jr(t)){const s=MA(t,e);s&&(r=s);const i=HF(t,e,n);i&&(r=i)}else r=J("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function bf(t,e){let n=null;if(t&&jr(t)){const r=MA(t,e);r&&(n=r);const s=WF(t,e);s&&(n=s)}else n=J("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function FA(t){return mt(t.protocol,!0)}function KF(t,e){let n=!1;return t?t&&Es(t)&&t.length&&t.forEach(r=>{n=FA(r)}):n=!0,n}function GF(t){return typeof t=="number"}function pn(t){return typeof t<"u"&&typeof t!==null}function YF(t){return!(!t||typeof t!="object"||!t.code||!Mg(t.code)||!t.message||!mt(t.message,!1))}function ZF(t){return!(Ot(t)||!mt(t.method,!1))}function JF(t){return!(Ot(t)||Ot(t.result)&&Ot(t.error)||!Mg(t.id)||!mt(t.jsonrpc,!1))}function XF(t){return!(Ot(t)||!mt(t.name,!1))}function iw(t,e){return!(!hd(e)||!LA(t).includes(e))}function QF(t,e,n){return mt(n,!1)?TF(t,e).includes(n):!1}function e7(t,e,n){return mt(n,!1)?OF(t,e).includes(n):!1}function ow(t,e,n){let r=null;const s=t7(t),i=n7(e),o=Object.keys(s),a=Object.keys(i),c=aw(Object.keys(t)),l=aw(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Fi(o,a)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=wa(e[d].accounts);h.includes(d)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Fi(s[d].methods,i[d].methods)?Fi(s[d].events,i[d].events)||(r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=J("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function t7(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function aw(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function n7(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=wa(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function r7(t,e){return Mg(t)&&t<=e.max&&t>=e.min}function cw(){const t=El();return new Promise(e=>{switch(t){case Ln.browser:e(s7());break;case Ln.reactNative:e(i7());break;case Ln.node:e(o7());break;default:e(!0)}})}function s7(){return ba()&&(navigator==null?void 0:navigator.onLine)}async function i7(){if(bi()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function o7(){return!0}function a7(t){switch(El()){case Ln.browser:c7(t);break;case Ln.reactNative:l7(t);break}}function c7(t){!bi()&&ba()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function l7(t){bi()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function u7(){var t;return ba()&&io()?((t=io())==null?void 0:t.visibilityState)==="visible":!0}const wf={};class $a{static get(e){return wf[e]}static set(e,n){wf[e]=n}static delete(e){delete wf[e]}}function d7(t){const e=ya.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function h7({publicKey:t,signature:e,payload:n}){var r;const s=t0(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=g7(n.address),a=n.era==="00"?new Uint8Array([0]):t0(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${p7(n.tip)}`),d=y7(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=m7(h.length+1);return new Uint8Array([...f,i,...h])}function f7(t){const e=t0(t),n=G9.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function t0(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function p7(t){return t.startsWith("0x")?t.slice(2):t}function g7(t){const e=ya.decode(t)[0];return e===42?0:e===60?2:1}function m7(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function y7(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function b7(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=d7(t.transaction.address),r=h7({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return f7(s)}function Fg({logger:t,name:e}){const n=typeof t=="string"?Ad({opts:{level:t,name:e}}).logger:t;return n.level=typeof t=="string"?t:t.level,n}const w7="PARSE_ERROR",E7="INVALID_REQUEST",v7="METHOD_NOT_FOUND",C7="INVALID_PARAMS",jA="INTERNAL_ERROR",jg="SERVER_ERROR",_7=[-32700,-32600,-32601,-32602,-32603],tc={[w7]:{code:-32700,message:"Parse error"},[E7]:{code:-32600,message:"Invalid Request"},[v7]:{code:-32601,message:"Method not found"},[C7]:{code:-32602,message:"Invalid params"},[jA]:{code:-32603,message:"Internal error"},[jg]:{code:-32e3,message:"Server error"}},HA=jg;function A7(t){return _7.includes(t)}function lw(t){return Object.keys(tc).includes(t)?tc[t]:tc[HA]}function I7(t){const e=Object.values(tc).find(n=>n.code===t);return e||tc[HA]}function zA(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var WA={},ns={},uw;function S7(){if(uw)return ns;uw=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.isBrowserCryptoAvailable=ns.getSubtleCrypto=ns.getBrowerCrypto=void 0;function t(){return(kr==null?void 0:kr.crypto)||(kr==null?void 0:kr.msCrypto)||{}}ns.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}ns.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return ns.isBrowserCryptoAvailable=n,ns}var rs={},dw;function N7(){if(dw)return rs;dw=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.isBrowser=rs.isNode=rs.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}rs.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}rs.isNode=e;function n(){return!t()&&!e()}return rs.isBrowser=n,rs}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pl;e.__exportStar(S7(),t),e.__exportStar(N7(),t)})(WA);function Rr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ri(t=6){return BigInt(Rr(t))}function ur(t,e,n){return{id:n||Rr(),jsonrpc:"2.0",method:t,params:e}}function el(t,e){return{id:t,jsonrpc:"2.0",result:e}}function nh(t,e,n){return{id:t,jsonrpc:"2.0",error:x7(e)}}function x7(t,e){return typeof t>"u"?lw(jA):(typeof t=="string"&&(t=Object.assign(Object.assign({},lw(jg)),{message:t})),A7(t.code)&&(t=I7(t.code)),t)}let T7=class{},O7=class extends T7{constructor(){super()}},R7=class extends O7{constructor(e){super()}};const P7="^https?:",k7="^wss?:";function D7(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function qA(t,e){const n=D7(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function hw(t){return qA(t,P7)}function fw(t){return qA(t,k7)}function $7(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function VA(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Hg(t){return VA(t)&&"method"in t}function rh(t){return VA(t)&&(Pr(t)||Gn(t))}function Pr(t){return"result"in t}function Gn(t){return"error"in t}let zg=class extends R7{constructor(e){super(e),this.events=new nr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(ur(e.method,e.params||[],e.id||ri().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Gn(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),rh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const U7=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),B7=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",pw=t=>t.split("?")[0],gw=10,L7=U7();let M7=class{constructor(e){if(this.url=e,this.events=new nr.EventEmitter,this.registering=!1,!fw(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(As(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!fw(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=WA.isReactNative()?void 0:{rejectUnauthorized:!$7(e)},i=new L7(e,[],s);B7()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?eo(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=nh(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return zA(e,pw(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>gw&&this.events.setMaxListeners(gw)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${pw(this.url)}`));return this.events.emit("register_error",n),n}};var F7={};const KA="wc",GA=2,n0="core",Vr=`${KA}@2:${n0}:`,j7={logger:"error"},H7={database:":memory:"},z7="crypto",mw="client_ed25519_seed",W7=Z.ONE_DAY,q7="keychain",V7="0.3",K7="messages",G7="0.3",Y7=Z.SIX_HOURS,Z7="publisher",YA="irn",J7="error",ZA="wss://relay.walletconnect.org",X7="relayer",gt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Q7="_subscription",jn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},ej=.1,r0="2.23.0",Qe={link_mode:"link_mode",relay:"relay"},Cu={inbound:"inbound",outbound:"outbound"},tj="0.3",nj="WALLETCONNECT_CLIENT_ID",yw="WALLETCONNECT_LINK_MODE_APPS",Rn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},rj="subscription",sj="0.3",ij="pairing",oj="0.3",Ua={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},ki={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},sr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},aj="history",cj="0.3",lj="expirer",qn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},uj="0.3",dj="verify-api",hj="https://verify.walletconnect.com",JA="https://verify.walletconnect.org",nc=JA,fj=`${nc}/v3`,pj=[hj,JA],gj="echo",mj="https://echo.walletconnect.com",Or={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},is={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ir={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Ii={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},Si={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ba={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},yj=.1,bj="event-client",wj=86400,Ej="https://pulse.walletconnect.org/batch";function vj(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,w=0,_=p.length;w!==_&&p[w]===0;)w++,g++;for(var b=(_-w)*u+1>>>0,A=new Uint8Array(b);w!==_;){for(var C=p[w],S=0,N=b-1;(C!==0||S<m)&&N!==-1;N--,S++)C+=256*A[N]>>>0,A[N]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=S,w++}for(var D=b-m;D!==b&&A[D]===0;)D++;for(var O=c.repeat(g);D<b;++D)O+=t.charAt(A[D]);return O}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,w=0;p[g]===c;)m++,g++;for(var _=(p.length-g)*l+1>>>0,b=new Uint8Array(_);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=_-1;(A!==0||C<w)&&S!==-1;S--,C++)A+=a*b[S]>>>0,b[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=C,g++}if(p[g]!==" "){for(var N=_-w;N!==_&&b[N]===0;)N++;for(var D=new Uint8Array(m+(_-N)),O=m;N!==_;)D[O++]=b[N++];return D}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Cj=vj,_j=Cj;const XA=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Aj=t=>new TextEncoder().encode(t),Ij=t=>new TextDecoder().decode(t);class Sj{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Nj{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return QA(this,e)}}class xj{constructor(e){this.decoders=e}or(e){return QA(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const QA=(t,e)=>new xj({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Tj{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Sj(e,n,r),this.decoder=new Nj(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const sh=({name:t,prefix:e,encode:n,decode:r})=>new Tj(t,e,n,r),Il=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=_j(n,e);return sh({prefix:t,name:e,encode:r,decode:i=>XA(s(i))})},Oj=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Rj=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},zt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>sh({prefix:e,name:t,encode(s){return Rj(s,r,n)},decode(s){return Oj(s,r,n,t)}}),Pj=sh({prefix:"\0",name:"identity",encode:t=>Ij(t),decode:t=>Aj(t)});var kj=Object.freeze({__proto__:null,identity:Pj});const Dj=zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $j=Object.freeze({__proto__:null,base2:Dj});const Uj=zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Bj=Object.freeze({__proto__:null,base8:Uj});const Lj=Il({prefix:"9",name:"base10",alphabet:"0123456789"});var Mj=Object.freeze({__proto__:null,base10:Lj});const Fj=zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jj=zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hj=Object.freeze({__proto__:null,base16:Fj,base16upper:jj});const zj=zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Wj=zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qj=zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Vj=zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Kj=zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Gj=zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yj=zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zj=zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jj=zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Xj=Object.freeze({__proto__:null,base32:zj,base32upper:Wj,base32pad:qj,base32padupper:Vj,base32hex:Kj,base32hexupper:Gj,base32hexpad:Yj,base32hexpadupper:Zj,base32z:Jj});const Qj=Il({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eH=Il({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var tH=Object.freeze({__proto__:null,base36:Qj,base36upper:eH});const nH=Il({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rH=Il({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var sH=Object.freeze({__proto__:null,base58btc:nH,base58flickr:rH});const iH=zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oH=zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),aH=zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cH=zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lH=Object.freeze({__proto__:null,base64:iH,base64pad:oH,base64url:aH,base64urlpad:cH});const e2=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),uH=e2.reduce((t,e,n)=>(t[n]=e,t),[]),dH=e2.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function hH(t){return t.reduce((e,n)=>(e+=uH[n],e),"")}function fH(t){const e=[];for(const n of t){const r=dH[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const pH=sh({prefix:"ðŸš€",name:"base256emoji",encode:hH,decode:fH});var gH=Object.freeze({__proto__:null,base256emoji:pH}),mH=t2,bw=128,yH=-128,bH=Math.pow(2,31);function t2(t,e,n){e=e||[],n=n||0;for(var r=n;t>=bH;)e[n++]=t&255|bw,t/=128;for(;t&yH;)e[n++]=t&255|bw,t>>>=7;return e[n]=t|0,t2.bytes=n-r+1,e}var wH=s0,EH=128,ww=127;function s0(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw s0.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&ww)<<s:(o&ww)*Math.pow(2,s),s+=7}while(o>=EH);return s0.bytes=i-r,n}var vH=Math.pow(2,7),CH=Math.pow(2,14),_H=Math.pow(2,21),AH=Math.pow(2,28),IH=Math.pow(2,35),SH=Math.pow(2,42),NH=Math.pow(2,49),xH=Math.pow(2,56),TH=Math.pow(2,63),OH=function(t){return t<vH?1:t<CH?2:t<_H?3:t<AH?4:t<IH?5:t<SH?6:t<NH?7:t<xH?8:t<TH?9:10},RH={encode:mH,decode:wH,encodingLength:OH},n2=RH;const Ew=(t,e,n=0)=>(n2.encode(t,e,n),e),vw=t=>n2.encodingLength(t),i0=(t,e)=>{const n=e.byteLength,r=vw(t),s=r+vw(n),i=new Uint8Array(s+n);return Ew(t,i,0),Ew(n,i,r),i.set(e,s),new PH(t,n,e,i)};class PH{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const r2=({name:t,code:e,encode:n})=>new kH(t,e,n);class kH{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?i0(this.code,n):n.then(r=>i0(this.code,r))}else throw Error("Unknown type, must be binary type")}}const s2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),DH=r2({name:"sha2-256",code:18,encode:s2("SHA-256")}),$H=r2({name:"sha2-512",code:19,encode:s2("SHA-512")});var UH=Object.freeze({__proto__:null,sha256:DH,sha512:$H});const i2=0,BH="identity",o2=XA,LH=t=>i0(i2,o2(t)),MH={code:i2,name:BH,encode:o2,digest:LH};var FH=Object.freeze({__proto__:null,identity:MH});new TextEncoder,new TextDecoder;const Cw={...kj,...$j,...Bj,...Mj,...Hj,...Xj,...tH,...sH,...lH,...gH};({...UH,...FH});function a2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function jH(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?a2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function c2(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const _w=c2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ef=c2("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=jH(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),HH={utf8:_w,"utf-8":_w,hex:Cw.base16,latin1:Ef,ascii:Ef,binary:Ef,...Cw};function zH(t,e="utf8"){const n=HH[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?a2(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var WH=Object.defineProperty,qH=(t,e,n)=>e in t?WH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xr=(t,e,n)=>qH(t,typeof e!="symbol"?e+"":e,n);class VH{constructor(e,n){this.core=e,this.logger=n,xr(this,"keychain",new Map),xr(this,"name",q7),xr(this,"version",V7),xr(this,"initialized",!1),xr(this,"storagePrefix",Vr),xr(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),xr(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),xr(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),xr(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=J("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),xr(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=In(n,this.name)}get context(){return An(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Hp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var KH=Object.defineProperty,GH=(t,e,n)=>e in t?KH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,St=(t,e,n)=>GH(t,typeof e!="symbol"?e+"":e,n);class YH{constructor(e,n,r){this.core=e,this.logger=n,St(this,"name",z7),St(this,"keychain"),St(this,"randomSessionIdentifier",e0()),St(this,"initialized",!1),St(this,"clientId"),St(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),St(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),St(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=Ly(s),o=IC(i.publicKey);return this.clientId=o,o}),St(this,"generateKeyPair",()=>{this.isInitialized();const s=tF();return this.setPrivateKey(s.publicKey,s.privateKey)}),St(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Ly(i),a=this.randomSessionIdentifier;return await C4(a,s,W7,o)}),St(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=nF(a,i);return this.setSymKey(c,o)}),St(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||vu(s);return await this.keychain.set(o,s),o}),St(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),St(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),St(this,"encode",async(s,i,o)=>{this.isInitialized();const a=BA(o),c=As(i);if(Yb(a))return iF(c,o==null?void 0:o.encoding);if(Gb(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return rF({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),St(this,"decode",async(s,i,o)=>{this.isInitialized();const a=aF(i,o);if(Yb(a)){const c=oF(i,o==null?void 0:o.encoding);return eo(c)}if(Gb(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=sF({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return eo(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),St(this,"getPayloadType",(s,i=bn)=>{const o=Qc({encoded:s,encoding:i});return co(o.type)}),St(this,"getPayloadSenderPublicKey",(s,i=bn)=>{const o=Qc({encoded:s,encoding:i});return o.senderPublicKey?Cn(o.senderPublicKey,on):void 0}),this.core=e,this.logger=In(n,this.name),this.keychain=r||new VH(this.core,this.logger)}get context(){return An(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(mw)}catch{e=e0(),await this.keychain.set(mw,e)}return zH(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ZH=Object.defineProperty,JH=Object.defineProperties,XH=Object.getOwnPropertyDescriptors,Aw=Object.getOwnPropertySymbols,QH=Object.prototype.hasOwnProperty,ez=Object.prototype.propertyIsEnumerable,o0=(t,e,n)=>e in t?ZH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tz=(t,e)=>{for(var n in e||(e={}))QH.call(e,n)&&o0(t,n,e[n]);if(Aw)for(var n of Aw(e))ez.call(e,n)&&o0(t,n,e[n]);return t},nz=(t,e)=>JH(t,XH(e)),Tn=(t,e,n)=>o0(t,typeof e!="symbol"?e+"":e,n);class rz extends ER{constructor(e,n){super(e,n),this.logger=e,this.core=n,Tn(this,"messages",new Map),Tn(this,"messagesWithoutClientAck",new Map),Tn(this,"name",K7),Tn(this,"version",G7),Tn(this,"initialized",!1),Tn(this,"storagePrefix",Vr),Tn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Tn(this,"set",async(r,s,i)=>{this.isInitialized();const o=Kn(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Cu.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,nz(tz({},c),{[o]:s}))}return await this.persist(),o}),Tn(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Tn(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Tn(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Kn(s);return typeof i[o]<"u"}),Tn(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Kn(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Tn(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=In(e,this.name),this.core=n}get context(){return An(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Hp(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Hp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zp(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?zp(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sz=Object.defineProperty,iz=Object.defineProperties,oz=Object.getOwnPropertyDescriptors,Iw=Object.getOwnPropertySymbols,az=Object.prototype.hasOwnProperty,cz=Object.prototype.propertyIsEnumerable,a0=(t,e,n)=>e in t?sz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xo=(t,e)=>{for(var n in e||(e={}))az.call(e,n)&&a0(t,n,e[n]);if(Iw)for(var n of Iw(e))cz.call(e,n)&&a0(t,n,e[n]);return t},Sw=(t,e)=>iz(t,oz(e)),Hn=(t,e,n)=>a0(t,typeof e!="symbol"?e+"":e,n);class lz extends vR{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Hn(this,"events",new nr.EventEmitter),Hn(this,"name",Z7),Hn(this,"queue",new Map),Hn(this,"publishTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Hn(this,"initialPublishTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Hn(this,"needsTransportRestart",!1),Hn(this,"publish",async(r,s,i)=>{var o,a,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=(i==null?void 0:i.ttl)||Y7,h=(i==null?void 0:i.prompt)||!1,f=(i==null?void 0:i.tag)||0,p=(i==null?void 0:i.id)||ri().toString(),g=Bo(dd().protocol),m={id:p,method:(i==null?void 0:i.publishMethod)||g.publish,params:xo({topic:r,message:s,ttl:d,prompt:h,tag:f,attestation:i==null?void 0:i.attestation},i==null?void 0:i.tvf)},w=`Failed to publish payload, please try again. id:${p} tag:${f}`;try{Ot((o=m.params)==null?void 0:o.prompt)&&((a=m.params)==null||delete a.prompt),Ot((c=m.params)==null?void 0:c.tag)&&((l=m.params)==null||delete l.tag);const _=new Promise(async b=>{const A=({id:S})=>{var N;((N=m.id)==null?void 0:N.toString())===S.toString()&&(this.removeRequestFromQueue(S),this.relayer.events.removeListener(gt.publish,A),b())};this.relayer.events.on(gt.publish,A);const C=Br(new Promise((S,N)=>{this.rpcPublish(m,i).then(S).catch(D=>{this.logger.warn(D,D==null?void 0:D.message),N(D)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${f}`);try{await C,this.events.removeListener(gt.publish,A)}catch(S){this.queue.set(p,{request:m,opts:i,attempt:1}),this.logger.warn(S,S==null?void 0:S.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:r,message:s,opts:i}}),await Br(_,this.publishTimeout,w)}catch(_){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(_),(u=i==null?void 0:i.internal)!=null&&u.throwOnFailedPublish)throw _}finally{this.queue.delete(p)}}),Hn(this,"publishCustom",async r=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:l,opts:u={}}=r,{attestation:d,tvf:h,publishMethod:f,prompt:p,tag:g,ttl:m=Z.FIVE_MINUTES}=u,w=u.id||ri().toString(),_=Bo(dd().protocol),b=f||_.publish,A={id:w,method:b,params:xo(Sw(xo({},l),{ttl:m,prompt:p,tag:g,attestation:d}),h)},C=`Failed to publish custom payload, please try again. id:${w} tag:${g}`;try{Ot((s=A.params)==null?void 0:s.prompt)&&((i=A.params)==null||delete i.prompt),Ot((o=A.params)==null?void 0:o.tag)&&((a=A.params)==null||delete a.tag);const S=new Promise(async N=>{const D=({id:L})=>{var M;((M=A.id)==null?void 0:M.toString())===L.toString()&&(this.removeRequestFromQueue(L),this.relayer.events.removeListener(gt.publish,D),N())};this.relayer.events.on(gt.publish,D);const O=Br(new Promise((L,M)=>{this.rpcPublish(A,u).then(L).catch(U=>{this.logger.warn(U,U==null?void 0:U.message),M(U)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${b} id:${w} tag:${g}`);try{await O,this.events.removeListener(gt.publish,D)}catch(L){this.queue.set(w,{request:A,opts:u,attempt:1}),this.logger.warn(L,L==null?void 0:L.message)}});this.logger.trace({type:"method",method:"publish",params:{id:w,payload:l,opts:u}}),await Br(S,this.publishTimeout,C)}catch(S){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(S),(c=u==null?void 0:u.internal)!=null&&c.throwOnFailedPublish)throw S}finally{this.queue.delete(w)}}),Hn(this,"on",(r,s)=>{this.events.on(r,s)}),Hn(this,"once",(r,s)=>{this.events.once(r,s)}),Hn(this,"off",(r,s)=>{this.events.off(r,s)}),Hn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=In(n,this.name),this.registerEventListeners()}get context(){return An(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(gt.publish,xo(xo({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,Sw(xo({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(mo.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(gt.connection_stalled);return}this.checkQueue()}),this.relayer.on(gt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var uz=Object.defineProperty,dz=(t,e,n)=>e in t?uz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,To=(t,e,n)=>dz(t,typeof e!="symbol"?e+"":e,n);class hz{constructor(){To(this,"map",new Map),To(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),To(this,"get",e=>this.map.get(e)||[]),To(this,"exists",(e,n)=>this.get(e).includes(n)),To(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),To(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var fz=Object.defineProperty,pz=Object.defineProperties,gz=Object.getOwnPropertyDescriptors,Nw=Object.getOwnPropertySymbols,mz=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,c0=(t,e,n)=>e in t?fz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,La=(t,e)=>{for(var n in e||(e={}))mz.call(e,n)&&c0(t,n,e[n]);if(Nw)for(var n of Nw(e))yz.call(e,n)&&c0(t,n,e[n]);return t},vf=(t,e)=>pz(t,gz(e)),Ge=(t,e,n)=>c0(t,typeof e!="symbol"?e+"":e,n);class bz extends AR{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ge(this,"subscriptions",new Map),Ge(this,"topicMap",new hz),Ge(this,"events",new nr.EventEmitter),Ge(this,"name",rj),Ge(this,"version",sj),Ge(this,"pending",new Map),Ge(this,"cached",[]),Ge(this,"initialized",!1),Ge(this,"storagePrefix",Vr),Ge(this,"subscribeTimeout",Z.toMiliseconds(Z.ONE_MINUTE)),Ge(this,"initialSubscribeTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Ge(this,"clientId"),Ge(this,"batchSubscribeTopicsLimit",500),Ge(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Ge(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=dd(s),a={topic:r,relay:o,transportType:s==null?void 0:s.transportType};(i=s==null?void 0:s.internal)!=null&&i.skipSubscribe||this.pending.set(r,a);const c=await this.rpcSubscribe(r,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Ge(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Ge(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Ge(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Ge(this,"on",(r,s)=>{this.events.on(r,s)}),Ge(this,"once",(r,s)=>{this.events.once(r,s)}),Ge(this,"off",(r,s)=>{this.events.off(r,s)}),Ge(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Ge(this,"start",async()=>{await this.onConnect()}),Ge(this,"stop",async()=>{await this.onDisconnect()}),Ge(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Ge(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Ge(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(mo.pulse,async()=>{await this.checkPending()}),this.events.on(Rn.created,async r=>{const s=Rn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Rn.deleted,async r=>{const s=Rn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=In(n,this.name),this.clientId=""}get context(){return An(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=dd(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=nt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const o=await this.getSubscriptionId(e);if((s=r==null?void 0:r.internal)!=null&&s.skipSubscribe)return o;(!r||(r==null?void 0:r.transportType)===Qe.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const a={method:Bo(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{if((r==null?void 0:r.transportType)===Qe.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},Z.toMiliseconds(Z.ONE_SECOND)),o;const l=new Promise(async d=>{const h=f=>{f.topic===e&&(this.events.removeListener(Rn.created,h),d(f.id))};this.events.on(Rn.created,h);try{const f=await Br(new Promise((p,g)=>{this.relayer.request(a).catch(m=>{this.logger.warn(m,m==null?void 0:m.message),g(m)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Rn.created,h),d(f)}catch{}}),u=await Br(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(gt.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Bo(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Br(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(gt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Bo(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Br(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(gt.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Bo(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,vf(La({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,La({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,La({},n)),this.topicMap.set(n.topic,e),this.events.emit(Rn.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Rn.deleted,vf(La({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Rn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Rn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>vf(La({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await vB(Z.toMiliseconds(Z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Kn(e+await this.getClientId())}}var wz=Object.defineProperty,xw=Object.getOwnPropertySymbols,Ez=Object.prototype.hasOwnProperty,vz=Object.prototype.propertyIsEnumerable,l0=(t,e,n)=>e in t?wz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tw=(t,e)=>{for(var n in e||(e={}))Ez.call(e,n)&&l0(t,n,e[n]);if(xw)for(var n of xw(e))vz.call(e,n)&&l0(t,n,e[n]);return t},Me=(t,e,n)=>l0(t,typeof e!="symbol"?e+"":e,n);class Cz extends CR{constructor(e){var n;super(e),Me(this,"protocol","wc"),Me(this,"version",2),Me(this,"core"),Me(this,"logger"),Me(this,"events",new nr.EventEmitter),Me(this,"provider"),Me(this,"messages"),Me(this,"subscriber"),Me(this,"publisher"),Me(this,"name",X7),Me(this,"transportExplicitlyClosed",!1),Me(this,"initialized",!1),Me(this,"connectionAttemptInProgress",!1),Me(this,"relayUrl"),Me(this,"projectId"),Me(this,"packageName"),Me(this,"bundleId"),Me(this,"hasExperiencedNetworkDisruption",!1),Me(this,"pingTimeout"),Me(this,"heartBeatTimeout",Z.toMiliseconds(Z.THIRTY_SECONDS+Z.FIVE_SECONDS)),Me(this,"reconnectTimeout"),Me(this,"connectPromise"),Me(this,"reconnectInProgress",!1),Me(this,"requestsInFlight",[]),Me(this,"connectTimeout",Z.toMiliseconds(Z.ONE_SECOND*15)),Me(this,"request",async r=>{var s,i;this.logger.debug("Publishing Request Payload");const o=r.id||ri().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:r.method,topic:(s=r.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(l=>l!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),Me(this,"resetPingTimeout",()=>{id()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a==null?void 0:a.message)}},this.heartBeatTimeout))}),Me(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Me(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(gt.connect)}),Me(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),Me(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(gt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Me(this,"registerProviderListeners",()=>{this.provider.on(jn.payload,this.onPayloadHandler),this.provider.on(jn.connect,this.onConnectHandler),this.provider.on(jn.disconnect,this.onDisconnectHandler),this.provider.on(jn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=Fg({logger:(n=e.logger)!=null?n:J7,name:this.name}),this.messages=new rz(this.logger,e.core),this.subscriber=new bz(this,this.logger),this.publisher=new lz(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||ZA,iB()?this.packageName=mb():oB()&&(this.bundleId=mb()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return An(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Qe.relay},Cu.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Rn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Rn.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Tw({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Br(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await cw())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=pt(Z.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(gt.message,e),await this.recordMessageEvent(e,Cu.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(jn.disconnect,i),await Br(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(jn.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(jn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(jn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Z.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(id())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new zg(new M7(dB({sdkVersion:r0,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Hg(e)){if(!e.method.endsWith(Q7))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Qe.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Tw({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else rh(e)&&this.events.emit(gt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Cu.inbound),this.events.emit(gt.message,e))}async acknowledgePayload(e){const n=el(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(jn.payload,this.onPayloadHandler),this.provider.off(jn.connect,this.onConnectHandler),this.provider.off(jn.disconnect,this.onDisconnectHandler),this.provider.off(jn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await cw();a7(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(mo.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&u7())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(gt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Z.toMiliseconds(ej)))))}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function _z(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Ow(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Rw(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Az="[object RegExp]",Iz="[object String]",Sz="[object Number]",Nz="[object Boolean]",Pw="[object Arguments]",xz="[object Symbol]",Tz="[object Date]",Oz="[object Map]",Rz="[object Set]",Pz="[object Array]",kz="[object Function]",Dz="[object ArrayBuffer]",Cf="[object Object]",$z="[object Error]",Uz="[object DataView]",Bz="[object Uint8Array]",Lz="[object Uint8ClampedArray]",Mz="[object Uint16Array]",Fz="[object Uint32Array]",jz="[object BigUint64Array]",Hz="[object Int8Array]",zz="[object Int16Array]",Wz="[object Int32Array]",qz="[object BigInt64Array]",Vz="[object Float32Array]",Kz="[object Float64Array]";function Gz(){}function kw(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Yz(t,e,n){return Ga(t,e,void 0,void 0,void 0,void 0,n)}function Ga(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return rc(t,e,i,o)}return rc(t,e,i,o)}function rc(t,e,n,r){if(Object.is(t,e))return!0;let s=Rw(t),i=Rw(e);if(s===Pw&&(s=Cf),i===Pw&&(i=Cf),s!==i)return!1;switch(s){case Iz:return t.toString()===e.toString();case Sz:{const c=t.valueOf(),l=e.valueOf();return _z(c,l)}case Nz:case Tz:case xz:return Object.is(t.valueOf(),e.valueOf());case Az:return t.source===e.source&&t.flags===e.flags;case kz:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case Oz:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Ga(l,e.get(c),c,t,e,n,r))return!1;return!0}case Rz:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Ga(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case Pz:case Bz:case Lz:case Mz:case Fz:case jz:case Hz:case zz:case Wz:case qz:case Vz:case Kz:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Ga(t[c],e[c],c,t,e,n,r))return!1;return!0}case Dz:return t.byteLength!==e.byteLength?!1:rc(new Uint8Array(t),new Uint8Array(e),n,r);case Uz:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:rc(new Uint8Array(t),new Uint8Array(e),n,r);case $z:return t.name===e.name&&t.message===e.message;case Cf:{if(!(rc(t.constructor,e.constructor,n,r)||kw(t)&&kw(e)))return!1;const c=[...Object.keys(t),...Ow(t)],l=[...Object.keys(e),...Ow(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Ga(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Zz(t,e){return Yz(t,e,Gz)}var Jz=Object.defineProperty,Dw=Object.getOwnPropertySymbols,Xz=Object.prototype.hasOwnProperty,Qz=Object.prototype.propertyIsEnumerable,u0=(t,e,n)=>e in t?Jz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$w=(t,e)=>{for(var n in e||(e={}))Xz.call(e,n)&&u0(t,n,e[n]);if(Dw)for(var n of Dw(e))Qz.call(e,n)&&u0(t,n,e[n]);return t},hn=(t,e,n)=>u0(t,typeof e!="symbol"?e+"":e,n);class Eo extends _R{constructor(e,n,r,s=Vr,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,hn(this,"map",new Map),hn(this,"version",tj),hn(this,"cached",[]),hn(this,"initialized",!1),hn(this,"getKey"),hn(this,"storagePrefix",Vr),hn(this,"recentlyDeleted",[]),hn(this,"recentlyDeletedLimit",200),hn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ot(o)?this.map.set(this.getKey(o),o):LF(o)?this.map.set(o.id,o):MF(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),hn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),hn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),hn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Zz(a[c],o[c]))):this.values)),hn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=$w($w({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),hn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=In(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return An(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=J("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var eW=Object.defineProperty,tW=(t,e,n)=>e in t?eW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Re=(t,e,n)=>tW(t,typeof e!="symbol"?e+"":e,n);class nW{constructor(e,n){this.core=e,this.logger=n,Re(this,"name",ij),Re(this,"version",oj),Re(this,"events",new og),Re(this,"pairings"),Re(this,"initialized",!1),Re(this,"storagePrefix",Vr),Re(this,"ignoredPayloadTypes",[ws]),Re(this,"registeredMethods",[]),Re(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Re(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Re(this,"create",async r=>{this.isInitialized();const s=e0(),i=await this.core.crypto.setSymKey(s),o=pt(Z.FIVE_MINUTES),a={protocol:YA},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=Qb({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ki.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType,internal:r==null?void 0:r.internal}),{topic:i,uri:l}}),Re(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Or.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=Xb(r.uri);s.props.properties.topic=i,s.addTrace(Or.pairing_uri_validation_success),s.addTrace(Or.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Or.existing_pairing),u.active)throw s.setError(is.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Or.pairing_not_expired)}const d=c||pt(Z.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Or.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ki.create,h),s.addTrace(Or.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Or.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(is.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(is.subscribe_pairing_topic_failure),f}return s.addTrace(Or.subscribe_pairing_topic_success),h}),Re(this,"activate",async({topic:r})=>{this.isInitialized();const s=pt(Z.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Re(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Ri();this.events.once(qe("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Re(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Re(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Re(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Re(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",nt("USER_DISCONNECTED")),await this.deletePairing(s))}),Re(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Qb({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Re(this,"sendRequest",async(r,s,i)=>{const o=ur(s,i),a=await this.core.crypto.encode(r,o),c=Ua[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Re(this,"sendResult",async(r,s,i)=>{const o=el(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Ua[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Re(this,"sendError",async(r,s,i)=>{const o=nh(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Ua[c]?Ua[c].res:Ua.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Re(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Re(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Dr(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Re(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Re(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Re(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ki.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Re(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Pr(s)?this.events.emit(qe("pairing_ping",i),{}):Gn(s)&&this.events.emit(qe("pairing_ping",i),{error:s.error})},500)}),Re(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ki.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Re(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=nt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Re(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(nt("WC_METHOD_UNSUPPORTED",r))}),Re(this,"isValidPair",(r,s)=>{var i;if(!pn(r)){const{message:a}=J("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(is.malformed_pairing_uri),new Error(a)}if(!BF(r.uri)){const{message:a}=J("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(is.malformed_pairing_uri),new Error(a)}const o=Xb(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(is.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(is.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Z.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(is.pairing_expired);const{message:a}=J("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Re(this,"isValidPing",async r=>{if(!pn(r)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Re(this,"isValidDisconnect",async r=>{if(!pn(r)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Re(this,"isValidPairingTopic",async r=>{if(!mt(r,!1)){const{message:s}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Dr(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=J("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=In(n,this.name),this.pairings=new Eo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return An(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(gt.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Qe.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);Hg(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):rh(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(qn.expired,async e=>{const{topic:n}=M_(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ki.expire,{topic:n}))})}}var rW=Object.defineProperty,sW=(t,e,n)=>e in t?rW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ut=(t,e,n)=>sW(t,typeof e!="symbol"?e+"":e,n);class iW extends wR{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ut(this,"records",new Map),Ut(this,"events",new nr.EventEmitter),Ut(this,"name",aj),Ut(this,"version",cj),Ut(this,"cached",[]),Ut(this,"initialized",!1),Ut(this,"storagePrefix",Vr),Ut(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ut(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:pt(Z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(sr.created,o)}),Ut(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Gn(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(sr.updated,s))}),Ut(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Ut(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(sr.deleted,i)}}),this.persist()}),Ut(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Ut(this,"on",(r,s)=>{this.events.on(r,s)}),Ut(this,"once",(r,s)=>{this.events.once(r,s)}),Ut(this,"off",(r,s)=>{this.events.off(r,s)}),Ut(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=In(n,this.name)}get context(){return An(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:ur(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(sr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(sr.created,e=>{const n=sr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(sr.updated,e=>{const n=sr.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(sr.deleted,e=>{const n=sr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(mo.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Z.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(sr.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oW=Object.defineProperty,aW=(t,e,n)=>e in t?oW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yt=(t,e,n)=>aW(t,typeof e!="symbol"?e+"":e,n);class cW extends IR{constructor(e,n){super(e,n),this.core=e,this.logger=n,Yt(this,"expirations",new Map),Yt(this,"events",new nr.EventEmitter),Yt(this,"name",lj),Yt(this,"version",uj),Yt(this,"cached",[]),Yt(this,"initialized",!1),Yt(this,"storagePrefix",Vr),Yt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Yt(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Yt(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(qn.created,{target:i,expiration:o})}),Yt(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Yt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(qn.deleted,{target:s,expiration:i})}}),Yt(this,"on",(r,s)=>{this.events.on(r,s)}),Yt(this,"once",(r,s)=>{this.events.once(r,s)}),Yt(this,"off",(r,s)=>{this.events.off(r,s)}),Yt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=In(n,this.name)}get context(){return An(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return hB(e);if(typeof e=="number")return fB(e);const{message:n}=J("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(qn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Z.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(qn.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(mo.pulse,()=>this.checkExpirations()),this.events.on(qn.created,e=>{const n=qn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(qn.expired,e=>{const n=qn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(qn.deleted,e=>{const n=qn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lW=Object.defineProperty,uW=(t,e,n)=>e in t?lW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e,n)=>uW(t,typeof e!="symbol"?e+"":e,n);class dW extends SR{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ft(this,"name",dj),ft(this,"abortController"),ft(this,"isDevEnv"),ft(this,"verifyUrlV3",fj),ft(this,"storagePrefix",Vr),ft(this,"version",GA),ft(this,"publicKey"),ft(this,"fetchPromise"),ft(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Z.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ft(this,"register",async s=>{if(!ba()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=io(),u=this.startAbortTimer(Z.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",m),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=w=>{if(w.data&&typeof w.data=="string")try{const _=JSON.parse(w.data);if(_.type==="verify_attestation"){if(Rp(_.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),h(_.attestation===null?"":_.attestation)}}catch(_){this.logger.warn(_)}};l.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(l){this.logger.warn(l)}return""}),ft(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(Rp(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ft(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Z.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ft(this,"getVerifyUrl",s=>{let i=s||nc;return pj.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${nc}`),i=nc),i}),ft(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Z.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ft(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ft(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ft(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ft(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ft(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ft(this,"validateAttestation",(s,i)=>{const o=lF(s,i.publicKey),a={hasExpired:Z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=In(n,this.name),this.abortController=new AbortController,this.isDevEnv=Tg(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return An(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Z.toMiliseconds(e))}}var hW=Object.defineProperty,fW=(t,e,n)=>e in t?hW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uw=(t,e,n)=>fW(t,typeof e!="symbol"?e+"":e,n);class pW extends NR{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Uw(this,"context",gj),Uw(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${mj}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=In(n,this.context)}}var gW=Object.defineProperty,Bw=Object.getOwnPropertySymbols,mW=Object.prototype.hasOwnProperty,yW=Object.prototype.propertyIsEnumerable,d0=(t,e,n)=>e in t?gW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ma=(t,e)=>{for(var n in e||(e={}))mW.call(e,n)&&d0(t,n,e[n]);if(Bw)for(var n of Bw(e))yW.call(e,n)&&d0(t,n,e[n]);return t},Nt=(t,e,n)=>d0(t,typeof e!="symbol"?e+"":e,n);class bW extends xR{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Nt(this,"context",bj),Nt(this,"storagePrefix",Vr),Nt(this,"storageVersion",yj),Nt(this,"events",new Map),Nt(this,"shouldPersist",!1),Nt(this,"init",async()=>{if(!Tg())try{const s={eventId:bb(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:B_(this.core.relayer.protocol,this.core.relayer.version,r0)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Nt(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=bb(),u=this.core.projectId||"",d=Date.now(),h=Ma({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Nt(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Ma(Ma({},a),this.setMethods(a.eventId))}),Nt(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Nt(this,"setEventListeners",()=>{this.core.heartbeat.on(mo.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Z.fromMiliseconds(Date.now())-Z.fromMiliseconds(s.timestamp)>wj&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Nt(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Nt(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Nt(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Nt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Nt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Ma(Ma({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Nt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Nt(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Ej}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${r0}${i}`,{method:"POST",body:JSON.stringify(s)})}),Nt(this,"getAppDomain",()=>U_().url),this.logger=In(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var wW=Object.defineProperty,Lw=Object.getOwnPropertySymbols,EW=Object.prototype.hasOwnProperty,vW=Object.prototype.propertyIsEnumerable,h0=(t,e,n)=>e in t?wW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mw=(t,e)=>{for(var n in e||(e={}))EW.call(e,n)&&h0(t,n,e[n]);if(Lw)for(var n of Lw(e))vW.call(e,n)&&h0(t,n,e[n]);return t},Ze=(t,e,n)=>h0(t,typeof e!="symbol"?e+"":e,n);let CW=class l2 extends gR{constructor(e){var n;super(e),Ze(this,"protocol",KA),Ze(this,"version",GA),Ze(this,"name",n0),Ze(this,"relayUrl"),Ze(this,"projectId"),Ze(this,"customStoragePrefix"),Ze(this,"events",new nr.EventEmitter),Ze(this,"logger"),Ze(this,"heartbeat"),Ze(this,"relayer"),Ze(this,"crypto"),Ze(this,"storage"),Ze(this,"history"),Ze(this,"expirer"),Ze(this,"pairing"),Ze(this,"verify"),Ze(this,"echoClient"),Ze(this,"linkModeSupportedApps"),Ze(this,"eventClient"),Ze(this,"initialized",!1),Ze(this,"logChunkController"),Ze(this,"on",(a,c)=>this.events.on(a,c)),Ze(this,"once",(a,c)=>this.events.once(a,c)),Ze(this,"off",(a,c)=>this.events.off(a,c)),Ze(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ze(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Qe.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||ZA,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=O0({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:j7.logger,name:n0}),{logger:i,chunkLoggerController:o}=Ad({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=In(i,this.name),this.heartbeat=new P8,this.crypto=new YH(this,this.logger,e==null?void 0:e.keychain),this.history=new iW(this,this.logger),this.expirer=new cW(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new hR(Mw(Mw({},H7),e==null?void 0:e.storageOptions)),this.relayer=new Cz({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new nW(this,this.logger),this.verify=new dW(this,this.logger,this.storage),this.echoClient=new pW(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new bW(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new l2(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(nj,r),n}get context(){return An(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(yw,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(yw)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&F7.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const _W=CW,u2="wc",d2=2,h2="client",Wg=`${u2}@${d2}:${h2}:`,_f={name:h2,logger:"error"},Fw="WALLETCONNECT_DEEPLINK_CHOICE",AW="proposal",jw="Proposal expired",IW="session",Oo=Z.SEVEN_DAYS,SW="engine",Bt={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1119}}},Af={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},Tr={idle:"IDLE",active:"ACTIVE"},NW={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},xW="request",TW=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],OW="wc",RW="auth",PW="authKeys",kW="pairingTopics",DW="requests",ih=`${OW}@${1.5}:${RW}:`,_u=`${ih}:PUB_KEY`;var $W=Object.defineProperty,UW=Object.defineProperties,BW=Object.getOwnPropertyDescriptors,Hw=Object.getOwnPropertySymbols,LW=Object.prototype.hasOwnProperty,MW=Object.prototype.propertyIsEnumerable,f0=(t,e,n)=>e in t?$W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ze=(t,e)=>{for(var n in e||(e={}))LW.call(e,n)&&f0(t,n,e[n]);if(Hw)for(var n of Hw(e))MW.call(e,n)&&f0(t,n,e[n]);return t},Lt=(t,e)=>UW(t,BW(e)),q=(t,e,n)=>f0(t,typeof e!="symbol"?e+"":e,n);class FW extends PR{constructor(e){super(e),q(this,"name",SW),q(this,"events",new og),q(this,"initialized",!1),q(this,"requestQueue",{state:Tr.idle,queue:[]}),q(this,"sessionRequestQueue",{state:Tr.idle,queue:[]}),q(this,"emittedSessionRequests",new CB({limit:500})),q(this,"requestQueueDelay",Z.ONE_SECOND),q(this,"expectedPairingMethodMap",new Map),q(this,"recentlyDeletedMap",new Map),q(this,"recentlyDeletedLimit",200),q(this,"relayMessageCache",[]),q(this,"pendingSessions",new Map),q(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Bt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay)))}),q(this,"connect",async n=>{var r;this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=Lt(ze({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=PF(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:l,relays:u,authentication:d,walletPay:h}=s,f=((r=d==null?void 0:d[0])==null?void 0:r.ttl)||Bt.wc_sessionPropose.req.ttl||Z.FIVE_MINUTES;this.validateRequestExpiry(f);let p=i,g,m=!1;try{if(p){const O=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),m=O.active}}catch(O){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),O}if(!p||!m){const{topic:O,uri:L}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});p=O,g=L}if(!p){const{message:O}=J("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(O)}const w=await this.client.core.crypto.generateKeyPair(),_=pt(f),b=ze(Lt(ze(ze({requiredNamespaces:o,optionalNamespaces:a,relays:u??[{protocol:YA}],proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:_,pairingTopic:p},c&&{sessionProperties:c}),l&&{scopedProperties:l}),{id:Rr()}),(d||h)&&{requests:{authentication:d==null?void 0:d.map(O=>{const{domain:L,chains:M,nonce:U,uri:R,exp:$,nbf:y,type:v,statement:x,requestId:k,resources:T,signatureTypes:P}=O;return{domain:L,chains:M,nonce:U,type:v??"caip122",aud:R,version:"1",iat:new Date().toISOString(),exp:$,nbf:y,statement:x,requestId:k,resources:T,signatureTypes:P}}),walletPay:h}}),A=qe("session_connect",b.id),{reject:C,resolve:S,done:N}=Ri(f,jw),D=({id:O})=>{O===b.id&&(this.client.events.off("proposal_expire",D),this.pendingSessions.delete(b.id),this.events.emit(A,{error:{message:jw,code:0}}))};return this.client.events.on("proposal_expire",D),this.events.once(A,({error:O,session:L})=>{this.client.events.off("proposal_expire",D),O?C(O):L&&S(L)}),await this.setProposal(b.id,b),await this.sendProposeSession({proposal:b,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:b.id}}}).catch(O=>{throw this.deleteProposal(b.id),O}),{uri:g,approval:N}}),q(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),q(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ir.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(L){throw o.setError(Ii.no_internet_connection),L}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(L){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Ii.proposal_not_found),L}try{await this.isValidApprove(n)}catch(L){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ii.session_approve_namespace_validation_failure),L}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h,proposalRequestsResponses:f}=n,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:m,requiredNamespaces:w,optionalNamespaces:_}=p;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:g});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ir.session_approve_started,properties:{topic:g,trace:[ir.session_approve_started,ir.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),C=m.publicKey,S=await this.client.core.crypto.generateSharedKey(A,C),N=Lt(ze(ze(ze({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:A,metadata:this.client.metadata},expiry:pt(Oo)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{proposalRequestsResponses:f}),D=Qe.relay;b.addTrace(ir.subscribing_session_topic);try{await this.client.core.relayer.subscribe(S,{transportType:D,internal:{skipSubscribe:!0}})}catch(L){throw b.setError(Ii.subscribe_session_topic_failure),L}b.addTrace(ir.subscribe_session_topic_success);const O=Lt(ze({},N),{topic:S,requiredNamespaces:w,optionalNamespaces:_,pairingTopic:g,acknowledged:!1,self:N.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:A,transportType:Qe.relay,authentication:f==null?void 0:f.authentication,walletPayResult:f==null?void 0:f.walletPay});await this.client.session.set(S,O),b.addTrace(ir.store_session);try{await this.sendApproveSession({sessionTopic:S,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:A},sessionSettleRequest:N,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:ze({correlationId:a},this.getTVFApproveParams(O))}}),b.addTrace(ir.session_approve_publish_success)}catch(L){throw this.client.logger.error(L),this.client.session.delete(S,nt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(S),L}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:m.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(S,pt(Oo)),{topic:S,acknowledged:()=>Promise.resolve(this.client.session.get(S))}}),q(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Bt.wc_sessionPropose.reject}),await this.deleteProposal(r)}),q(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Ri(Z.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=Rr(),l=ri().toString(),u=this.client.session.get(r).namespaces;return this.events.once(qe("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),q(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Rr(),{done:i,resolve:o,reject:a}=Ri(Z.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(qe("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,pt(Oo)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),q(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=Bt.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Qe.relay&&await this.confirmOnlineStateOrThrow();const c=Rr(),l=ri().toString(),{done:u,resolve:d,reject:h}=Ri(o,"Request expired. Please try again.");this.events.once(qe("session_request",c),({error:m,result:w})=>{m?h(m):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Lt(ze({},s),{expiryTimestamp:pt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Lt(ze({},s),{expiryTimestamp:pt(o)}),chainId:r};return await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const _=await yB(this.client.core.storage,Fw);await pB({id:c,topic:i,wcDeepLink:_})}m()}),u()]).then(m=>m[2])}),q(this,"respond",async n=>{var r,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:(n==null?void 0:n.topic)||((s=(r=n==null?void 0:n.response)==null?void 0:r.id)==null?void 0:s.toString()),trace:[ir.session_request_response_started]}});try{await this.isValidRespond(n)}catch(d){throw i.addTrace(d==null?void 0:d.message),i.setError(Ii.session_request_response_validation_failure),d}i.addTrace(ir.session_request_response_validation_success);const{topic:o,response:a}=n,{id:c}=a,l=this.client.session.get(o);l.transportType===Qe.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);try{i.addTrace(ir.session_request_response_publish_started),Pr(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:u}):Gn(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:u}),this.cleanupAfterResponse(n)}catch(d){throw i.addTrace(d==null?void 0:d.message),i.setError(Ii.session_request_response_publish_failure),d}}),q(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Rr(),i=ri().toString(),{done:o,resolve:a,reject:c}=Ri(Z.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(qe("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),q(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=ri().toString(),a=Rr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),q(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:nt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=J("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),q(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>$F(r,n)))),q(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),q(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Qe.link_mode:Qe.relay;o===Qe.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:m}=n,w=[...n.resources||[]],{topic:_,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:_,uri:b}});const A=await this.client.core.crypto.generateKeyPair(),C=vu(A);if(await Promise.all([this.client.auth.authKeys.set(_u,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:_})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${_}`),g.length>0){const{namespace:T}=bs(a[0]);let P=$L(T,"request",g);Eu(w)&&(P=BL(P,w.pop())),w.push(P)}const S=m&&m>Bt.wc_sessionAuthenticate.req.ttl?m:Bt.wc_sessionAuthenticate.req.ttl,N={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:pt(S)},D={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},O={requiredNamespaces:{},optionalNamespaces:D,relays:[{protocol:"irn"}],pairingTopic:_,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:pt(Bt.wc_sessionPropose.req.ttl),id:Rr()},{done:L,resolve:M,reject:U}=Ri(S,"Request expired"),R=Rr(),$=qe("session_connect",O.id),y=qe("session_request",R),v=async({error:T,session:P})=>{this.events.off(y,x),T?U(T):P&&M({session:P})},x=async T=>{var P,j,H;if(await this.deletePendingAuthRequest(R,{message:"fulfilled",code:0}),T.error){const pe=nt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return T.error.code===pe.code?void 0:(this.events.off($,v),U(T.error.message))}await this.deleteProposal(O.id),this.events.off($,v);const{cacaos:Q,responder:K}=T.result,G=[],ae=[];for(const pe of Q){await Tb({cacao:pe,projectId:this.client.core.projectId})||(this.client.logger.error(pe,"Signature verification failed"),U(nt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Te}=pe,st=Eu(Te.resources),bt=[Wp(Te.iss)],It=ad(Te.iss);if(st){const Xt=Ob(st),Gr=Rb(st);G.push(...Xt),bt.push(...Gr)}for(const Xt of bt)ae.push(`${Xt}:${It}`)}const ge=await this.client.core.crypto.generateSharedKey(A,K.publicKey);let xe;G.length>0&&(xe={topic:ge,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:K,controller:K.publicKey,expiry:pt(Oo),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:_,namespaces:rw([...new Set(G)],[...new Set(ae)]),transportType:o},await this.client.core.relayer.subscribe(ge,{transportType:o}),await this.client.session.set(ge,xe),_&&await this.client.core.pairing.updateMetadata({topic:_,metadata:K.metadata}),xe=this.client.session.get(ge)),(P=this.client.metadata.redirect)!=null&&P.linkMode&&(j=K.metadata.redirect)!=null&&j.linkMode&&(H=K.metadata.redirect)!=null&&H.universal&&r&&(this.client.core.addLinkModeSupportedApp(K.metadata.redirect.universal),this.client.session.update(ge,{transportType:Qe.link_mode})),M({auths:Q,session:xe})};this.events.once($,v),this.events.once(y,x);let k;try{if(i){const T=ur("wc_sessionAuthenticate",N,R);this.client.core.history.set(_,T);const P=await this.client.core.crypto.encode("",T,{type:Al,encoding:Qs});k=tu(r,_,P)}else await Promise.all([this.sendRequest({topic:_,method:"wc_sessionAuthenticate",params:N,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:R}),this.sendRequest({topic:_,method:"wc_sessionPropose",params:O,expiry:Bt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O.id})])}catch(T){throw this.events.off($,v),this.events.off(y,x),T}return await this.setProposal(O.id,O),await this.setAuthRequest(R,{request:Lt(ze({},N),{verifyContext:{}}),pairingTopic:_,transportType:o}),{uri:k??b,response:L}}),q(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Si.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(Ba.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Ba.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Qe.relay;a===Qe.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=vu(c),d={type:ws,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of s){if(!await Tb({cacao:m,projectId:this.client.core.projectId})){i.setError(Ba.invalid_cacao);const C=nt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(Si.cacaos_verified);const{p:w}=m,_=Eu(w.resources),b=[Wp(w.iss)],A=ad(w.iss);if(_){const C=Ob(_),S=Rb(_);h.push(...C),b.push(...S)}for(const C of b)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Si.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:pt(Oo),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:rw([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Si.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw i.setError(Ba.subscribe_authenticated_session_topic_failure),m}i.addTrace(Si.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Si.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Si.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(Ba.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),q(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Qe.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=vu(o),l={type:ws,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Bt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),q(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return nA(r,s)}),q(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),q(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),q(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,nt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Fw).catch(l=>this.client.logger.warn(l)),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Tr.idle),await Promise.all(this.getPendingSessionRequests().filter(l=>l.topic===s).map(l=>this.deletePendingSessionRequest(l.id,nt("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),q(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Ii.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,nt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),q(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Tr.idle,this.client.events.emit("session_request_expire",{id:n}))}),q(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),q(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),q(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,pt(Bt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),q(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Qe.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),q(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||pt(Bt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),q(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d,publishOpts:h={}}=n,f=ur(s,i,c);let p;const g=!!u;try{const _=g?Qs:bn;p=await this.client.core.crypto.encode(r,f,{encoding:_})}catch(_){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),_}let m;if(TW.includes(s)){const _=Kn(JSON.stringify(f)),b=Kn(p);m=await this.client.core.verify.register({id:b,decryptedId:_})}const w=ze(ze({},Bt[s].req),h);if(w.attestation=m,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,f),g){const _=tu(u,r,p);await global.Linking.openURL(_,this.client.name)}else w.tvf=Lt(ze({},d),{correlationId:f.id}),l?(w.internal=Lt(ze({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,w)):this.client.core.relayer.publish(r,p,w).catch(_=>this.client.logger.error(_));return f.id}),q(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=ur("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const o=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:bn}),a=Kn(JSON.stringify(i)),c=Kn(o),l=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:o},opts:Lt(ze({},s),{publishMethod:"wc_proposeSession",attestation:l})})}),q(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=n,c=el(i.id,s),l=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:bn}),u=ur("wc_sessionSettle",o,a==null?void 0:a.id),d=await this.client.core.crypto.encode(r,u,{encoding:bn});this.client.core.history.set(r,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:d},opts:Lt(ze({},a),{publishMethod:"wc_approveSession"})})}),q(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=el(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Qs:bn;u=await this.client.core.crypto.encode(s,l,Lt(ze({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=tu(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Bt[p].res;g.tvf=Lt(ze({},f),{correlationId:r}),o?(g.internal=Lt(ze({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),q(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=nh(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Qs:bn;u=await this.client.core.crypto.encode(s,l,Lt(ze({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=tu(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Bt[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),q(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Dr(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Dr(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),q(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),q(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),q(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Tr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Tr.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Tr.idle}),q(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),q(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),q(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=J("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),q(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),q(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(is.proposal_listener_not_found)),this.isValidConnect(ze({},s.params));const u=a.expiryTimestamp||pt(Bt.wc_sessionPropose.req.ttl),d=ze({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Kn(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Or.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Bt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),q(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Pr(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Gn(r)){await this.deleteProposal(i);const o=qe("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),q(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h,proposalRequestsResponses:f}=r.params,p=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!p)return this.client.logger.error(`Pending session not found for topic ${n}`);const g=this.client.proposal.get(p.proposalId),m=Lt(ze(ze(ze({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Qe.relay,authentication:f==null?void 0:f.authentication,walletPayResult:f==null?void 0:f.walletPay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:m.peer.metadata}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:m}),this.events.emit(qe("session_connect",p.proposalId),{session:m})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),q(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Pr(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(qe("session_approve",s),{})):Gn(r)&&(await this.client.session.delete(n,nt("USER_DISCONNECTED")),this.events.emit(qe("session_approve",s),{error:r.error}))}),q(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=$a.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:nt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ze({topic:n},s));try{$a.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw $a.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),q(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),q(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=qe("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Pr(r)?this.events.emit(qe("session_update",s),{}):Gn(r)&&this.events.emit(qe("session_update",s),{error:r.error})}),q(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,pt(Oo)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),q(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=qe("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Pr(r)?this.events.emit(qe("session_extend",s),{}):Gn(r)&&this.events.emit(qe("session_extend",s),{error:r.error})}),q(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),q(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=qe("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Pr(r)?this.events.emit(qe("session_ping",s),{}):Gn(r)&&this.events.emit(qe("session_ping",s),{error:r.error})},500)}),q(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{await this.isValidDisconnect({topic:n,reason:r.params}),this.cleanupPendingSentRequestsForTopic({topic:n,error:nt("USER_DISCONNECTED")}),await this.deleteSession({topic:n,id:s})}catch(i){this.client.logger.error(i)}}),q(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(ze({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Kn(JSON.stringify(ur("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Qe.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),q(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=qe("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Pr(r)?this.events.emit(qe("session_request",s),{result:r.result}):Gn(r)&&this.events.emit(qe("session_request",s),{error:r.error})}),q(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=$a.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(ze({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),$a.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),q(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Pr(r)?this.events.emit(qe("session_request",s),{result:r.result}):Gn(r)&&this.events.emit(qe("session_request",s),{error:r.error})}),q(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Kn(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Qe.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:ws,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Bt.wc_sessionAuthenticate.autoReject,appLink:h})}}),q(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),q(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Tr.idle,this.processSessionRequestQueue()},Z.toMiliseconds(this.requestQueueDelay))}),q(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{this.events.emit(qe("session_request",i.request.id),{error:r})})}),q(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Tr.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),q(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Tr.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),q(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:ur("wc_sessionPropose",Lt(ze({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),q(this,"isValidConnect",async n=>{if(!pn(n)){const{message:l}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Ot(r)||await this.isValidPairingTopic(r),!KF(c)){const{message:l}=J("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(s&&!Ot(s)&&jr(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!Ot(i)&&jr(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),q(this,"validateNamespaces",(n,r)=>{const s=VF(n,"connect()",r);if(s)throw new Error(s.message)}),q(this,"isValidApprove",async n=>{if(!pn(n))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=bf(s,"approve()");if(l)throw new Error(l.message);const u=ow(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!mt(i,!0)){const{message:d}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!Ot(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Ot(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),q(this,"isValidReject",async n=>{if(!pn(n)){const{message:i}=J("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!YF(s)){const{message:i}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),q(this,"isValidSessionSettleRequest",n=>{if(!pn(n)){const{message:l}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!FA(r)){const{message:l}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=FF(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=bf(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Dr(o)){const{message:l}=J("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),q(this,"isValidUpdate",async n=>{if(!pn(n)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=bf(s,"update()");if(o)throw new Error(o.message);const a=ow(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),q(this,"isValidExtend",async n=>{if(!pn(n)){const{message:s}=J("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),q(this,"isValidRequest",async n=>{if(!pn(n)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!iw(a,i)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!ZF(s)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!QF(a,i,s.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),q(this,"isValidRespond",async n=>{var r;if(!pn(n)){const{message:a}=J("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(a){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!JF(i)){const{message:a}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=J("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),q(this,"isValidPing",async n=>{if(!pn(n)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),q(this,"isValidEmit",async n=>{if(!pn(n)){const{message:a}=J("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!iw(o,i)){const{message:a}=J("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!XF(s)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!e7(o,i,s.name)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),q(this,"isValidDisconnect",async n=>{if(!pn(n)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),q(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!mt(s,!1))throw new Error("uri is required parameter");if(!mt(i,!1))throw new Error("domain is required parameter");if(!mt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>bs(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=bs(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),q(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||nc,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Qe.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),q(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=J("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),q(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),q(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),q(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=J("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),q(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Qe.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),q(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),q(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=yb(n,"topic")||"",s=decodeURIComponent(yb(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Qe.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),q(this,"registerLinkModeListeners",async()=>{var n;if(Tg()||bi()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),q(this,"getTVFApproveParams",n=>{try{const r=LA(n.namespaces),s=NF(n.namespaces),i=xF(n.namespaces),o=n.sessionProperties,a=n.scopedProperties;return{approvedChains:r,approvedMethods:s,approvedEvents:i,sessionProperties:o,scopedProperties:a}}catch(r){return this.client.logger.warn(r,"Error getting TVF approve params"),{}}}),q(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn(l,"Error getting TVF params")}return c}),q(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),q(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=NW[i];if(i==="sui_signTransaction")return[mL(r.transactionBytes)];if(i==="near_signTransaction")return[Ib(r)];if(i==="near_signTransactions")return r.map(c=>Ib(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[b7({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Es(r)?r.map(c=>Sb(c)):[Sb(r)];if(i==="cosmos_signDirect")return[bL(r)];if(i==="wallet_sendCalls")return wL(r);if(typeof r=="string")return[r];const a=r[o.key];if(Es(a))return i==="solana_signAllTransactions"?a.map(c=>gL(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(gt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(_u)?this.client.auth.authKeys.get(_u):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Qe.link_mode?Qs:bn});Hg(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Kn(r)})):rh(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i})),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${r}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(qn.expired,async e=>{const{topic:n,id:r}=M_(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,J("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,J("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ki.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ki.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!mt(e,!1)){const{message:n}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Dr(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=J("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!mt(e,!1)){const{message:n}=J("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Dr(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=J("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=J("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(mt(e,!1)){const{message:n}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!GF(e)){const{message:n}=J("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Dr(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=J("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}validateRequestExpiry(e){if(e&&!r7(e,Af)){const{message:n}=J("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${Af.min} and ${Af.max}`);throw new Error(n)}}}class jW extends Eo{constructor(e,n){super(e,n,AW,Wg),this.core=e,this.logger=n}}let HW=class extends Eo{constructor(e,n){super(e,n,IW,Wg),this.core=e,this.logger=n}};class zW extends Eo{constructor(e,n){super(e,n,xW,Wg,r=>r.id),this.core=e,this.logger=n}}class WW extends Eo{constructor(e,n){super(e,n,PW,ih,()=>_u),this.core=e,this.logger=n}}class qW extends Eo{constructor(e,n){super(e,n,kW,ih),this.core=e,this.logger=n}}class VW extends Eo{constructor(e,n){super(e,n,DW,ih,r=>r.id),this.core=e,this.logger=n}}var KW=Object.defineProperty,GW=(t,e,n)=>e in t?KW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,If=(t,e,n)=>GW(t,typeof e!="symbol"?e+"":e,n);class YW{constructor(e,n){this.core=e,this.logger=n,If(this,"authKeys"),If(this,"pairingTopics"),If(this,"requests"),this.authKeys=new WW(this.core,this.logger),this.pairingTopics=new qW(this.core,this.logger),this.requests=new VW(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var ZW=Object.defineProperty,JW=(t,e,n)=>e in t?ZW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pe=(t,e,n)=>JW(t,typeof e!="symbol"?e+"":e,n);class qg extends RR{constructor(e){super(e),Pe(this,"protocol",u2),Pe(this,"version",d2),Pe(this,"name",_f.name),Pe(this,"metadata"),Pe(this,"core"),Pe(this,"logger"),Pe(this,"events",new nr.EventEmitter),Pe(this,"engine"),Pe(this,"session"),Pe(this,"proposal"),Pe(this,"pendingRequest"),Pe(this,"auth"),Pe(this,"signConfig"),Pe(this,"on",(r,s)=>this.events.on(r,s)),Pe(this,"once",(r,s)=>this.events.once(r,s)),Pe(this,"off",(r,s)=>this.events.off(r,s)),Pe(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Pe(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Pe(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Pe(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Pe(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Pe(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||_f.name,this.metadata=cB(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=Fg({logger:(e==null?void 0:e.logger)||_f.logger,name:this.name});this.logger=n,this.core=(e==null?void 0:e.core)||new _W(e),this.session=new HW(this.core,this.logger),this.proposal=new jW(this.core,this.logger),this.pendingRequest=new zW(this.core,this.logger),this.engine=new FW(this),this.auth=new YW(this.core,this.logger)}static async init(e){const n=new qg(e);return await n.initialize(),n}get context(){return An(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const XW=qg;var p0={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof kr<"u"&&kr,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof kr<"u"&&kr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(y){return y&&DataView.prototype.isPrototypeOf(y)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(y){return y&&u.indexOf(Object.prototype.toString.call(y))>-1};function h(y){if(typeof y!="string"&&(y=String(y)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(y)||y==="")throw new TypeError('Invalid character in header field name: "'+y+'"');return y.toLowerCase()}function f(y){return typeof y!="string"&&(y=String(y)),y}function p(y){var v={next:function(){var x=y.shift();return{done:x===void 0,value:x}}};return c.iterable&&(v[Symbol.iterator]=function(){return v}),v}function g(y){this.map={},y instanceof g?y.forEach(function(v,x){this.append(x,v)},this):Array.isArray(y)?y.forEach(function(v){if(v.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+v.length);this.append(v[0],v[1])},this):y&&Object.getOwnPropertyNames(y).forEach(function(v){this.append(v,y[v])},this)}g.prototype.append=function(y,v){y=h(y),v=f(v);var x=this.map[y];this.map[y]=x?x+", "+v:v},g.prototype.delete=function(y){delete this.map[h(y)]},g.prototype.get=function(y){return y=h(y),this.has(y)?this.map[y]:null},g.prototype.has=function(y){return this.map.hasOwnProperty(h(y))},g.prototype.set=function(y,v){this.map[h(y)]=f(v)},g.prototype.forEach=function(y,v){for(var x in this.map)this.map.hasOwnProperty(x)&&y.call(v,this.map[x],x,this)},g.prototype.keys=function(){var y=[];return this.forEach(function(v,x){y.push(x)}),p(y)},g.prototype.values=function(){var y=[];return this.forEach(function(v){y.push(v)}),p(y)},g.prototype.entries=function(){var y=[];return this.forEach(function(v,x){y.push([x,v])}),p(y)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(y){if(!y._noBody){if(y.bodyUsed)return Promise.reject(new TypeError("Already read"));y.bodyUsed=!0}}function w(y){return new Promise(function(v,x){y.onload=function(){v(y.result)},y.onerror=function(){x(y.error)}})}function _(y){var v=new FileReader,x=w(v);return v.readAsArrayBuffer(y),x}function b(y){var v=new FileReader,x=w(v),k=/charset=([A-Za-z0-9_-]+)/.exec(y.type),T=k?k[1]:"utf-8";return v.readAsText(y,T),x}function A(y){for(var v=new Uint8Array(y),x=new Array(v.length),k=0;k<v.length;k++)x[k]=String.fromCharCode(v[k]);return x.join("")}function C(y){if(y.slice)return y.slice(0);var v=new Uint8Array(y.byteLength);return v.set(new Uint8Array(y)),v.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(y){this.bodyUsed=this.bodyUsed,this._bodyInit=y,y?typeof y=="string"?this._bodyText=y:c.blob&&Blob.prototype.isPrototypeOf(y)?this._bodyBlob=y:c.formData&&FormData.prototype.isPrototypeOf(y)?this._bodyFormData=y:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)?this._bodyText=y.toString():c.arrayBuffer&&c.blob&&l(y)?(this._bodyArrayBuffer=C(y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(y)||d(y))?this._bodyArrayBuffer=C(y):this._bodyText=y=Object.prototype.toString.call(y):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var y=m(this);if(y)return y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var y=m(this);return y||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(_);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var y=m(this);if(y)return y;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function D(y){var v=y.toUpperCase();return N.indexOf(v)>-1?v:y}function O(y,v){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');v=v||{};var x=v.body;if(y instanceof O){if(y.bodyUsed)throw new TypeError("Already read");this.url=y.url,this.credentials=y.credentials,v.headers||(this.headers=new g(y.headers)),this.method=y.method,this.mode=y.mode,this.signal=y.signal,!x&&y._bodyInit!=null&&(x=y._bodyInit,y.bodyUsed=!0)}else this.url=String(y);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new g(v.headers)),this.method=D(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal||function(){if("AbortController"in a){var P=new AbortController;return P.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(x),(this.method==="GET"||this.method==="HEAD")&&(v.cache==="no-store"||v.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var T=/\?/;this.url+=(T.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function L(y){var v=new FormData;return y.trim().split("&").forEach(function(x){if(x){var k=x.split("="),T=k.shift().replace(/\+/g," "),P=k.join("=").replace(/\+/g," ");v.append(decodeURIComponent(T),decodeURIComponent(P))}}),v}function M(y){var v=new g,x=y.replace(/\r?\n[\t ]+/g," ");return x.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var T=k.split(":"),P=T.shift().trim();if(P){var j=T.join(":").trim();try{v.append(P,j)}catch(H){console.warn("Response "+H.message)}}}),v}S.call(O.prototype);function U(y,v){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=v.statusText===void 0?"":""+v.statusText,this.headers=new g(v.headers),this.url=v.url||"",this._initBody(y)}S.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},U.error=function(){var y=new U(null,{status:200,statusText:""});return y.ok=!1,y.status=0,y.type="error",y};var R=[301,302,303,307,308];U.redirect=function(y,v){if(R.indexOf(v)===-1)throw new RangeError("Invalid status code");return new U(null,{status:v,headers:{location:y}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(v,x){this.message=v,this.name=x;var k=Error(v);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function $(y,v){return new Promise(function(x,k){var T=new O(y,v);if(T.signal&&T.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function j(){P.abort()}P.onload=function(){var K={statusText:P.statusText,headers:M(P.getAllResponseHeaders()||"")};T.url.indexOf("file://")===0&&(P.status<200||P.status>599)?K.status=200:K.status=P.status,K.url="responseURL"in P?P.responseURL:K.headers.get("X-Request-URL");var G="response"in P?P.response:P.responseText;setTimeout(function(){x(new U(G,K))},0)},P.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function H(K){try{return K===""&&a.location.href?a.location.href:K}catch{return K}}if(P.open(T.method,H(T.url),!0),T.credentials==="include"?P.withCredentials=!0:T.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(c.blob?P.responseType="blob":c.arrayBuffer&&(P.responseType="arraybuffer")),v&&typeof v.headers=="object"&&!(v.headers instanceof g||a.Headers&&v.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(v.headers).forEach(function(K){Q.push(h(K)),P.setRequestHeader(K,f(v.headers[K]))}),T.headers.forEach(function(K,G){Q.indexOf(G)===-1&&P.setRequestHeader(G,K)})}else T.headers.forEach(function(K,G){P.setRequestHeader(G,K)});T.signal&&(T.signal.addEventListener("abort",j),P.onreadystatechange=function(){P.readyState===4&&T.signal.removeEventListener("abort",j)}),P.send(typeof T._bodyInit>"u"?null:T._bodyInit)})}return $.polyfill=!0,a.fetch||(a.fetch=$,a.Headers=g,a.Request=O,a.Response=U),o.Headers=g,o.Request=O,o.Response=U,o.fetch=$,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(p0,p0.exports);var QW=p0.exports;const zw=bd(QW);var eq=Object.defineProperty,tq=Object.defineProperties,nq=Object.getOwnPropertyDescriptors,Ww=Object.getOwnPropertySymbols,rq=Object.prototype.hasOwnProperty,sq=Object.prototype.propertyIsEnumerable,qw=(t,e,n)=>e in t?eq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vw=(t,e)=>{for(var n in e||(e={}))rq.call(e,n)&&qw(t,n,e[n]);if(Ww)for(var n of Ww(e))sq.call(e,n)&&qw(t,n,e[n]);return t},Kw=(t,e)=>tq(t,nq(e));const iq={Accept:"application/json","Content-Type":"application/json"},oq="POST",Gw={headers:iq,method:oq},Yw=10;let f2=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new nr.EventEmitter,this.isAvailable=!1,this.registering=!1,!hw(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=As(e),r=await(await zw(this.url,Kw(Vw({},Gw),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!hw(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=As({id:1,jsonrpc:"2.0",method:"test",params:[]});await zw(e,Kw(Vw({},Gw),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?eo(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=nh(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return zA(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Yw&&this.events.setMaxListeners(Yw)}};function Vg(t){return t==null||typeof t!="object"&&typeof t!="function"}function p2(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function g2(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const aq="[object RegExp]",m2="[object String]",y2="[object Number]",b2="[object Boolean]",w2="[object Arguments]",cq="[object Symbol]",lq="[object Date]",uq="[object Map]",dq="[object Set]",hq="[object Array]",fq="[object ArrayBuffer]",pq="[object Object]",gq="[object DataView]",mq="[object Uint8Array]",yq="[object Uint8ClampedArray]",bq="[object Uint16Array]",wq="[object Uint32Array]",Eq="[object Int8Array]",vq="[object Int16Array]",Cq="[object Int32Array]",_q="[object Float32Array]",Aq="[object Float64Array]";function Kg(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Iq(t,e){return Mo(t,void 0,t,new Map,e)}function Mo(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(Vg(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Mo(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Mo(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Mo(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Kg(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Mo(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Di(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Di(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Di(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Di(o,t,n,r,s),o}if(typeof t=="object"&&Sq(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Di(o,t,n,r,s),o}return t}function Di(t,e,n=t,r,s){const i=[...Object.keys(e),...p2(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Mo(e[a],a,n,r,s))}}function Sq(t){switch(g2(t)){case w2:case hq:case fq:case gq:case b2:case lq:case _q:case Aq:case Eq:case vq:case Cq:case uq:case y2:case pq:case aq:case dq:case m2:case cq:case mq:case yq:case bq:case wq:return!0;default:return!1}}function Nq(t,e){return Iq(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case y2:case m2:case b2:{const o=new t.constructor(t==null?void 0:t.valueOf());return Di(o,t),o}case w2:{const o={};return Di(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Zw(t){return Nq(t)}function Jw(t){return t!==null&&typeof t=="object"&&g2(t)==="[object Arguments]"}function Xw(t){return typeof t=="object"&&t!==null}function xq(){}function Tq(t){return Kg(t)}function Oq(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Rq(t){if(Vg(t))return t;if(Array.isArray(t)||Kg(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Pq(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=g0(s,o,r,new Map)}return s}function g0(t,e,n,r){if(Vg(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Rq(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...p2(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Jw(a)&&(a={...a}),Jw(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Zw(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Xw(c)&&Xw(a)?t[o]=g0(c,a,n,r):c==null&&Oq(a)?t[o]=g0({},a,n,r):c==null&&Tq(a)?t[o]=Zw(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function kq(t,...e){return Pq(t,...e,xq)}const Qw="error",Dq="wss://relay.walletconnect.org",$q="wc",E2="universal_provider",nu=`${$q}@2:${E2}:`,v2="https://rpc.walletconnect.org/v1/",C2="generic",Uq=`${v2}bundler`,Ko="call_status",Bq=86400,Gg={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Lq=Object.defineProperty,Mq=Object.defineProperties,Fq=Object.getOwnPropertyDescriptors,e1=Object.getOwnPropertySymbols,jq=Object.prototype.hasOwnProperty,Hq=Object.prototype.propertyIsEnumerable,t1=(t,e,n)=>e in t?Lq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ru=(t,e)=>{for(var n in e||(e={}))jq.call(e,n)&&t1(t,n,e[n]);if(e1)for(var n of e1(e))Hq.call(e,n)&&t1(t,n,e[n]);return t},zq=(t,e)=>Mq(t,Fq(e));function _2(t,e,n){var r;const s=bs(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${v2}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Wq(t){return t.includes(":")?t.split(":")[1]:t}function A2(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function qq(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function n1(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n==null?void 0:n.chains)==null?void 0:r.length)&&((s=n==null?void 0:n.chains)==null?void 0:s.length)>0}))}function su(t={},e={}){const n=n1(r1(t)),r=n1(r1(e));return kq(n,r)}function r1(t){var e,n,r,s,i;const o={};if(!jr(t))return o;for(const[a,c]of Object.entries(t)){const l=th(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Lo(a);o[f]=zq(ru(ru({},o[f]),c),{chains:Fr(l,(e=o[f])==null?void 0:e.chains),methods:Fr(u,(n=o[f])==null?void 0:n.methods),events:Fr(d,(r=o[f])==null?void 0:r.events)}),(jr(h)||jr(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=ru(ru({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function s1(t){return t.includes(":")?t.split(":")[2]:t}function i1(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=th(n)?[n]:r.chains?r.chains:A2(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Sf(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function Vq(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const I2={},Go=t=>I2[t],Nf=(t,e)=>{I2[t]=e};var Kq=Object.defineProperty,o1=Object.getOwnPropertySymbols,Gq=Object.prototype.hasOwnProperty,Yq=Object.prototype.propertyIsEnumerable,a1=(t,e,n)=>e in t?Kq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c1=(t,e)=>{for(var n in e||(e={}))Gq.call(e,n)&&a1(t,n,e[n]);if(o1)for(var n of o1(e))Yq.call(e,n)&&a1(t,n,e[n]);return t};const l1="eip155",Zq=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Jq=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,xf=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,u1=t=>Object.keys(t).filter(e=>Zq.includes(e)).reduce((e,n)=>(e[n]=Xq(t[n]),e),{}),Xq=t=>typeof t=="string"&&Vq(t)?JSON.parse(t):t,Qq=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!jr(s)&&!jr(r))return;const o=u1(r);for(const a of n){const c=Jq(a);if(!c)continue;i[xf(c)]=o;const l=s==null?void 0:s[`${l1}:${c}`];if(l){const u=l==null?void 0:l[`${l1}:${c}:${e}`];i[xf(c)]=c1(c1({},i[xf(c)]),u1(u||l))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var eV=Object.defineProperty,tV=(t,e,n)=>e in t?eV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nV=(t,e,n)=>tV(t,e+"",n);let Tf;class Yg{constructor(e){nV(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,n){return await this.storage.setItem(e,n)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return Tf||(Tf=new Yg(e)),Tf}}var rV=Object.defineProperty,sV=Object.defineProperties,iV=Object.getOwnPropertyDescriptors,d1=Object.getOwnPropertySymbols,oV=Object.prototype.hasOwnProperty,aV=Object.prototype.propertyIsEnumerable,h1=(t,e,n)=>e in t?rV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cV=(t,e)=>{for(var n in e||(e={}))oV.call(e,n)&&h1(t,n,e[n]);if(d1)for(var n of d1(e))aV.call(e,n)&&h1(t,n,e[n]);return t},lV=(t,e)=>sV(t,iV(e));async function uV(t,e){const n=bs(t.result.capabilities.caip345.caip2),r=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(r.map(d=>dV(n.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!i.length||i.some(d=>!d),a=i.every(d=>(d==null?void 0:d.status)==="0x1"),c=i.every(d=>(d==null?void 0:d.status)==="0x0"),l=i.some(d=>(d==null?void 0:d.status)==="0x0");let u;return o?u=100:a?u=200:c?u=500:l&&(u=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:u}}async function dV(t,e,n){return await n(parseInt(t)).request(ur("eth_getTransactionReceipt",[e]))}async function hV({sendCalls:t,storage:e}){const n=await e.getItem(Ko);await e.setItem(Ko,lV(cV({},n),{[t.result.id]:{request:t.request,result:t.result,expiry:pt(Bq)}}))}async function fV({resultId:t,storage:e}){const n=await e.getItem(Ko);if(n){delete n[t],await e.setItem(Ko,n);for(const r in n)Dr(n[r].expiry)&&delete n[r];await e.setItem(Ko,n)}}async function pV({resultId:t,storage:e}){const n=await e.getItem(Ko),r=n==null?void 0:n[t];if(r&&!Dr(r.expiry))return r;await fV({resultId:t,storage:e})}var gV=Object.defineProperty,mV=Object.defineProperties,yV=Object.getOwnPropertyDescriptors,f1=Object.getOwnPropertySymbols,bV=Object.prototype.hasOwnProperty,wV=Object.prototype.propertyIsEnumerable,m0=(t,e,n)=>e in t?gV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Of=(t,e)=>{for(var n in e||(e={}))bV.call(e,n)&&m0(t,n,e[n]);if(f1)for(var n of f1(e))wV.call(e,n)&&m0(t,n,e[n]);return t},Rf=(t,e)=>mV(t,yV(e)),Ni=(t,e,n)=>m0(t,typeof e!="symbol"?e+"":e,n);class EV{constructor(e){Ni(this,"name","eip155"),Ni(this,"client"),Ni(this,"chainId"),Ni(this,"namespace"),Ni(this,"httpProviders"),Ni(this,"events"),Ni(this,"storage"),this.namespace=e.namespace,this.events=Go("events"),this.client=Go("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=Yg.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n);const r=this.chainId;this.chainId=parseInt(e),this.events.emit(Gg.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||_2(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zg(new f2(r,Go("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Wq(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(e){const n=e||this.chainId;return this.httpProviders[n]||(this.httpProviders=Rf(Of({},this.httpProviders),{[n]:this.createHttpProvider(n)}),this.httpProviders[n])}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,h=u==null?void 0:u[d];if(h)return h;let f;try{f=Qq(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(f)return f;const p=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Rf(Of({},l.sessionProperties||{}),{capabilities:Rf(Of({},u||{}),{[d]:p})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return p}async getCallStatus(e){var n,r,s;const i=this.client.session.get(e.topic),o=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(o){const l=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(l,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,l)}}const a=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,a)}const c=await pV({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await uV(c,this.getHttpProvider.bind(this))}catch(l){console.warn("Failed to fetch call status from stored send calls",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ur("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${Uq}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}async sendCalls(e){var n,r,s;const i=await this.client.request(e),o=(n=e.request.params)==null?void 0:n[0],a=i==null?void 0:i.id,c=(i==null?void 0:i.capabilities)||{},l=(r=c==null?void 0:c.caip345)==null?void 0:r.caip2,u=(s=c==null?void 0:c.caip345)==null?void 0:s.transactionHashes;return!a||!l||!(u!=null&&u.length)||await hV({sendCalls:{request:o,result:i},storage:this.storage}),i}}var vV=Object.defineProperty,CV=(t,e,n)=>e in t?vV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ro=(t,e,n)=>CV(t,typeof e!="symbol"?e+"":e,n);class _V{constructor(e){Ro(this,"name",C2),Ro(this,"client"),Ro(this,"httpProviders"),Ro(this,"events"),Ro(this,"namespace"),Ro(this,"chainId"),this.namespace=e.namespace,this.events=Go("events"),this.client=Go("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n);const r=this.chainId;this.chainId=e,this.events.emit(Gg.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return bs(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{var i,o;const a=bs(s),c=(o=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];r[a.reference]=this.createHttpProvider(s,c)}),r}getHttpProvider(e){const n=bs(e).reference,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_2(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zg(new f2(r,Go("disableProviderPing")))}}var AV=Object.defineProperty,IV=Object.defineProperties,SV=Object.getOwnPropertyDescriptors,p1=Object.getOwnPropertySymbols,NV=Object.prototype.hasOwnProperty,xV=Object.prototype.propertyIsEnumerable,y0=(t,e,n)=>e in t?AV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fa=(t,e)=>{for(var n in e||(e={}))NV.call(e,n)&&y0(t,n,e[n]);if(p1)for(var n of p1(e))xV.call(e,n)&&y0(t,n,e[n]);return t},iu=(t,e)=>IV(t,SV(e)),On=(t,e,n)=>y0(t,typeof e!="symbol"?e+"":e,n);let TV=class S2{constructor(e){On(this,"client"),On(this,"namespaces"),On(this,"optionalNamespaces"),On(this,"sessionProperties"),On(this,"scopedProperties"),On(this,"events",new og),On(this,"rpcProviders",{}),On(this,"session"),On(this,"providerOpts"),On(this,"logger"),On(this,"uri"),On(this,"disableProviderPing",!1),On(this,"connectParams");var n,r;this.providerOpts=e,this.logger=Fg({logger:(n=e.logger)!=null?n:Qw,name:(r=this.providerOpts.name)!=null?r:E2}),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new S2(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Fa({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,el(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:nt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=e,this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=i1(this.session.namespaces);this.namespaces=su(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){var n,r;const{uri:s,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(n=this.connectParams)==null?void 0:n.authentication,walletPay:(r=this.connectParams)==null?void 0:r.walletPay});s&&(this.uri=s,this.events.emit("display_uri",s));const o=await i();this.session=o;const a=i1(o.namespaces);return this.namespaces=su(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!Es(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn(n,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await XW.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Qw,relayUrl:this.providerOpts.relayUrl||Dq,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Lo(n)))];Nf("client",this.client),Nf("events",this.events),Nf("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=qq(n,this.session);if((r==null?void 0:r.length)===0)return;const s=A2(r),i=su(this.namespaces,this.optionalNamespaces),o=iu(Fa({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new EV({namespace:o});break;default:this.rpcProviders[n]=new _V({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Es(o)&&this.events.emit("accountsChanged",o.map(s1))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Lo(o),l=Sf(o)!==Sf(a)?`${c}:${Sf(a)}`:o;this.onChainChanged({currentCaipChainId:l})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=iu(Fa({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",iu(Fa({},nt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Gg.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(iu(Fa({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[C2]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=su(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Lo(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Lo(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:n,internal:r=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),r?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:n})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:n,previousCaipChainId:r}){var s,i;try{if(r===n)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(s1);if(!Es(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${nu}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${nu}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${nu}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(nu)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn(n,"Failed to cleanup storage")}}};const g1=2147483648,OV={convertEVMChainIdToCoinType(t){if(t>=g1)throw new Error("Invalid chainId");return(g1|t)>>>0}},zn=Xe({suggestions:[],loading:!1}),RV={state:zn,subscribe(t){return Mt(zn,()=>t(zn))},subscribeKey(t,e){return kt(zn,t,e)},async resolveName(t){var e,n;try{return await be.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await be.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{zn.loading=!0,zn.suggestions=[];const e=await be.getEnsNameSuggestions(t);return zn.suggestions=e.suggestions||[],zn.suggestions}catch(e){const n=sc.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{zn.loading=!1}},async getNamesForAddress(t){try{if(!I.state.activeCaipNetwork)return[];const n=z.getEnsFromCacheForAddress(t);if(n)return n;const r=await be.reverseLookupEnsName({address:t});return z.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=sc.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){var s;const e=I.state.activeCaipNetwork,n=(s=I.getAccountData(e==null?void 0:e.chainNamespace))==null?void 0:s.address,r=V.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");zn.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});me.pushTransactionStack({onCancel(){me.replace("RegisterAccountName")}});const o=await X.signMessage(i);zn.loading=!1;const a=e.id;if(!a)throw new Error("Network not found");const c=OV.convertEVMChainIdToCoinType(Number(a));await be.registerEnsName({coinType:c,address:n,signature:o,message:i}),I.setAccountProp("profileName",t,e.chainNamespace),z.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),me.replace("RegisterAccountNameSuccess")}catch(i){const o=sc.parseEnsApiError(i,`Error registering name ${t}`);throw me.replace("RegisterAccountName"),new Error(o)}finally{zn.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},sc=tr(RV);function b0(t){try{return new URL(t)}catch{return null}}function PV(t){const e=t.split("/"),n=e.length>0&&e[0]!==void 0?e[0]:"",r=n.lastIndexOf(":");return r===-1?{host:n}:{host:n.slice(0,r),port:n.slice(r+1)}}function kV(t){const e=t.indexOf("://");if(e===-1)return null;const n=t.slice(0,e),r=e+3;let s=t.indexOf("/",r);s===-1&&(s=t.length);const i=t.slice(r,s),o=i.lastIndexOf(":");return o===-1?{scheme:n,host:i}:{scheme:n,host:i.slice(0,o),port:i.slice(o+1)}}function DV(t,e){if(e.includes("://")){const o=b0(e);return o?o.origin===t:!1}const{host:n,port:r}=PV(e),s=t.indexOf("://");if(s!==-1){const o=s+3;let a=t.indexOf("/",o);a===-1&&(a=t.length);const c=t.slice(o,a);if(r!==void 0)return`${n}:${r}`===c;const l=c.split(":")[0];return n===l}const i=b0(t);return i?r!==void 0?n===i.hostname&&r===(i.port||void 0):n===i.hostname:!1}function $V(t,e,n){let r=n,s;const i=r.indexOf("://");i!==-1&&(s=r.slice(0,i),r=r.slice(i+3));const o=r.indexOf("/");o!==-1&&(r=r.slice(0,o));let a=r,c;const l=a.lastIndexOf(":");l!==-1&&(c=a.slice(l+1),a=a.slice(0,l));const u=a.split(".");for(const g of u)if(g.includes("*")&&g!=="*")return!1;const d=t.protocol.replace(/:$/u,"");if(s&&s!==d||c!==void 0&&c!=="*"&&c!==t.port)return!1;const h=kV(e),p=(h?h.host:t.hostname).split(".");if(u.length!==p.length)return!1;for(let g=u.length-1;g>=0;g-=1){const m=u[g],w=p[g];if(m!=="*"&&m!==w)return!1}return!0}const UV={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},vs={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace(t){return UV[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":u.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":u.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K");break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await sc.resolveName(t);return((r=(e!=null&&e.addresses?Object.values(e.addresses):[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isUserRejectedRequestError(t){try{if(typeof t=="object"&&t!==null){const e=t,n=typeof e.code=="number",r=n&&e.code===vs.RPC_ERROR_CODE.USER_REJECTED_METHODS,s=n&&e.code===vs.RPC_ERROR_CODE.USER_REJECTED;return r||s}return!1}catch{return!1}},isOriginAllowed(t,e,n){const r=[...e,...n];if(e.length===0)return!0;const s=b0(t);if(!s)return r.some(i=>!i.includes("*")&&i===t);if(s.hostname==="localhost"||s.hostname==="127.0.0.1")return!0;for(const i of r)if(i.includes("*")){if($V(s,t,i))return!0}else if(DV(t,i))return!0;return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=vs.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("accountsChanged",a=>{var c,l,u,d,h;try{const f=((u=(l=(c=t.session)==null?void 0:c.namespaces)==null?void 0:l[e])==null?void 0:u.accounts)||[],p=(h=(d=t.rpcProviders)==null?void 0:d[e])==null?void 0:h.getDefaultChain(),g=a.map(m=>{const w=f.find(A=>A.includes(`${e}:${p}:${m}`));if(!w)return;const{chainId:_,chainNamespace:b}=At.parseCaipAddress(w);return{address:m,chainId:_,chainNamespace:b}}).filter(m=>m!==void 0);g.length>0&&s(g)}catch(f){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,f)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>At.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}},BV=[B.CONNECTOR_ID.AUTH,B.CONNECTOR_ID.WALLET_CONNECT];class N2{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>I.getCaipNetworks(n),this.getConnectorId=n=>V.getConnectorId(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:B.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:B.CONNECTOR_ID.AUTH,type:"AUTH",name:B.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>n.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){I.setAccountProp("status",e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){try{return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(n){throw vs.isUserRejectedRequestError(n)?new $o(n):n}}async switchNetwork(e){var i;const{caipNetwork:n}=e,r=Ye.getProviderId(n.chainNamespace),s=Ye.getProvider(n.chainNamespace);if(!s)throw new Error("Provider not found");if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(r==="AUTH"){const o=(i=V.getAuthConnector())==null?void 0:i.provider;if(!o)throw new Error("Auth provider not found");const a=nn(n.chainNamespace);await o.switchNetwork({chainId:n.caipNetworkId});const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n.id==="walletConnect");if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ee.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ee.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ee.getAccount(e[0]),a=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&((s=this.getConnectorId(B.CHAIN.EVM))==null?void 0:s.toLowerCase())===n.toLowerCase()&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ee.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){var n;this.removeProviderListeners(e),this.deleteConnection(e),((n=this.getConnectorId(B.CHAIN.EVM))==null?void 0:n.toLowerCase())===e.toLowerCase()&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),s=this.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),((o=this.getConnectorId(B.CHAIN.EVM))==null?void 0:o.toLowerCase())===n.toLowerCase()&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(BV.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n;const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r==null?void 0:r.address,chainId:(n=e.caipNetwork)==null?void 0:n.id,connector:e.connector})}}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>l.connectorId.toLowerCase()===n.toLowerCase());if(!o)return null;const a=s.find(l=>l.id.toLowerCase()===o.connectorId.toLowerCase()),c=e?o.accounts.find(l=>l.address.toLowerCase()===e.toLowerCase()):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>a.id.toLowerCase()===o.connectorId.toLowerCase()));if(i){const[o]=i.accounts,a=s.find(c=>c.id.toLowerCase()===i.connectorId.toLowerCase());return{...i,account:o,connector:a}}return null}}let xi=null;const $n={getSIWX(){return F.state.siwx},async initializeIfEnabled(t=I.getActiveCaipAddress()){var i,o,a;const e=F.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(I.checkIfSupportedNetwork(n,`${n}:${r}`))try{if((i=F.state.remoteFeatures)!=null&&i.emailCapture){const l=(o=I.getAccountData(n))==null?void 0:o.user;await Oe.open({view:"DataCapture",data:{email:(l==null?void 0:l.email)??void 0}});return}if(xi&&await xi,(await e.getSessions(`${n}:${r}`,s)).length)return;await Oe.open({view:"SIWXSignMessage"})}catch(c){console.error("SIWXUtil:initializeIfEnabled",c),Ce.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(c)}),await((a=X._getClient())==null?void 0:a.disconnect().catch(console.error)),me.reset("Connect"),Ur.showError("A problem occurred while trying initialize authentication")}},async isAuthenticated(t=I.getActiveCaipAddress()){if(!F.state.siwx||!t)return!0;const{chainNamespace:n,chainId:r,address:s}=At.parseCaipAddress(t),i=`${n}:${r}`;return(await $n.getSessions({address:s,caipNetworkId:i})).length>0},async requestSignMessage(){const t=F.state.siwx,e=ee.getPlainAddress(I.getActiveCaipAddress()),n=ps();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");try{const r=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),s=r.toString();let i="";t.signMessage?i=await t.signMessage({message:s,chainId:n.caipNetworkId,accountAddress:e}):(V.getConnectorId(n.chainNamespace)===B.CONNECTOR_ID.AUTH&&me.pushTransactionStack({}),i=await X.signMessage(s)||""),await t.addSession({data:r,message:s,signature:i}),I.setLastConnectedSIWECaipNetwork(n),Oe.close(),Ce.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(r){(!Oe.state.open||me.state.view==="ApproveTransaction")&&await Oe.open({view:"SIWXSignMessage"}),Ur.showError("Error signing message"),Ce.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(r)}),console.error("SWIXUtil:requestSignMessage",r)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=I.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ee.getPlainAddress(I.getActiveCaipAddress())||""));s&&s.length>0?await I.switchActiveNetwork(r):await X.disconnect()}else await X.disconnect()}else Oe.close();Oe.close(),Ce.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=I.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ee.getPlainAddress(I.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=F.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=I.getActiveCaipAddress();n=ee.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=I.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=me.state.view==="ApproveTransaction",r=me.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var d;const i=$n.getSIWX(),o=ps();if(!i||!s.includes(B.CHAIN.EVM)||(d=F.state.remoteFeatures)!=null&&d.emailCapture){const h=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:h.address,chainId:h.chainId,accounts:h.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),l={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},u=await t.connect({chainId:e,socialUri:n,siwxMessage:l,preferredAccountType:r});return l.accountAddress=u.address,l.serializedMessage=u.message||"",u.signature&&u.message&&await $n.addEmbeddedWalletSession(l,u.message,u.signature),I.setLastConnectedSIWECaipNetwork(o),{address:u.address,chainId:u.chainId,accounts:u.accounts}},async addEmbeddedWalletSession(t,e,n){if(xi)return xi;const r=$n.getSIWX();return r?(xi=r.addSession({data:t,message:e,signature:n}).finally(()=>{xi=null}),xi):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var l,u,d;const r=$n.getSIWX(),s=ps(),i=new Set(e.map(h=>h.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:((l=ps())==null?void 0:l.caipNetworkId)||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(h=>h!==o.chainId)]});Ur.showLoading("Authenticating...",{autoClose:!1});const c={...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:(u=a.session.peer.metadata.icons)==null?void 0:u[0],type:"WALLET_CONNECT"};if(I.setAccountProp("connectedWalletInfo",c,Array.from(i)[0]),(d=a==null?void 0:a.auths)!=null&&d.length){const h=a.auths.map(f=>{const p=t.client.formatAuthMessage({request:f.p,iss:f.p.iss});return{data:{...f.p,accountAddress:f.p.iss.split(":").slice(-1).join(""),chainId:f.p.iss.split(":").slice(2,4).join(":"),uri:f.p.aud??"",version:f.p.version||o.version,expirationTime:f.p.exp,issuedAt:f.p.iat,notBefore:f.p.nbf},message:p,signature:f.s.s,cacao:f}});try{await r.setSessions(h),s&&I.setLastConnectedSIWECaipNetwork(s),Ce.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:$n.getSIWXEventProperties()})}catch(f){throw console.error("SIWX:universalProviderAuth - failed to set sessions",f),Ce.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:$n.getSIWXEventProperties(f)}),await t.disconnect().catch(console.error),f}finally{Ur.hide()}}return!0},getSIWXEventProperties(t){var n;const e=I.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((n=I.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||"",isSmartAccount:nn(e)===dt.ACCOUNT_TYPES.SMART_ACCOUNT,message:t?ee.parseError(t):void 0}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};class x2{constructor({provider:e,namespace:n}){this.id=B.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=I.getCaipNetworks.bind(I),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=F.state.universalProviderConfigOverride,s=vs.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return $n.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:LV})}}const LV=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],or=Xe({message:"",variant:"info",open:!1}),MV={state:or,subscribeKey(t,e){return kt(or,t,e)},open(t,e){const{debug:n}=F.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(or.message=s,or.variant=e,or.open=!0),i&&console.error(typeof i=="function"?i():i,r?{code:r}:void 0)},warn(t,e,n){or.open=!0,or.message=t,or.variant="warning",e&&console.warn(e,n)},close(){or.open=!1,or.message="",or.variant="info"}},ct=tr(MV),FV={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class jV extends Error{}function HV(){const{sdkType:t,sdkVersion:e,projectId:n}=F.getSnapshot(),r=new URL("https://rpc.walletconnect.org/v1/json-rpc");return r.searchParams.set("projectId",n),r.searchParams.set("st",t),r.searchParams.set("sv",e),r.searchParams.set("source","fund-wallet"),r.toString()}async function Zg(t,e){const n=HV(),{projectId:r}=F.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:r}},o=await(await fetch(n,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new jV(o.error.message);return o}async function kZ(t){return(await Zg("reown_getExchanges",t)).result}async function DZ(t){return(await Zg("reown_getExchangePayUrl",t)).result}async function $Z(t){return(await Zg("reown_getExchangeBuyStatus",t)).result}function UZ(t,e){const{chainNamespace:n,chainId:r}=At.parseCaipNetworkId(t),s=FV[n];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${n}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${n}:${r}`}/${i}:${o}`}const zV={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},WV={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},T2={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},qV={asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"},VV={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},KV={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},GV={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},YV={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},ZV={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},JV={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},XV={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},QV={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},eK={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},tK={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},nK={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},rK={ethereumETH:zV,baseETH:WV,baseUSDC:T2,baseSepoliaETH:VV,ethereumUSDC:KV,arbitrumUSDC:GV,polygonUSDC:YV,solanaUSDC:ZV,ethereumUSDT:JV,optimismUSDT:XV,arbitrumUSDT:QV,polygonUSDT:eK,solanaUSDT:tK,solanaSOL:nK};function BZ(t){return Object.values(rK).filter(e=>e.network===t)}const je={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:B.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},tn={ConnectorExplorerIds:{[B.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[B.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[B.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[B.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[B.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[B.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[je.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[je.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[je.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[je.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[je.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[je.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[je.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[je.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[je.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[je.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[je.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[je.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[je.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:{[B.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[B.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[B.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[B.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[B.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[B.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[B.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[B.CONNECTOR_ID.INJECTED]:"Browser Wallet",[B.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[B.CONNECTOR_ID.COINBASE]:"Coinbase",[B.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[B.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[B.CONNECTOR_ID.LEDGER]:"Ledger",[B.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[B.CONNECTOR_ID.INJECTED]:"INJECTED",[B.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[B.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[B.CONNECTOR_ID.AUTH]:"AUTH",[je.CONNECTOR_TYPE_AUTH]:"AUTH"}},mr={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${je.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=I.state.activeChain;return B.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>V.getConnectorId(e)===B.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return B.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?B.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(r=>r!==t):[]},getConnectorStorageInfo(t,e){const r=z.getConnections()[e]??[];return{hasDisconnected:z.isConnectorDisconnected(t,e),hasConnected:r.some(s=>mr.isLowerCaseMatch(s.connectorId,t))}}},sK=new AbortController,rt={EmbeddedWalletAbortController:sK,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Wa()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${F.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systemâ€™s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},O2={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:T2.asset,84532:qV.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries(O2.TOKEN_ADDRESSES_BY_SYMBOL).find(([n,r])=>Object.values(r).includes(t))??[];return e}},iK={createLogger(t,e="error"){const n=O0({level:e}),{logger:r}=Ad({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},oK="rpc.walletconnect.org";function m1(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Pf=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],$r={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===oK}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:B.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${B.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Pf.includes(e)?m1(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m,w,_;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(p=(f=(h=t.rpcUrls)==null?void 0:h.default)==null?void 0:f.http)==null?void 0:p[0],a=this.getDefaultRpcUrl(t,i,n),c=((w=(m=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:m.http)==null?void 0:w[0])||o,l=((_=r==null?void 0:r[i])==null?void 0:_.map(b=>b.url))||[],u=[...l,...a?[a]:[]],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:tn.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>$r.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ul(a.url,a.config))}),Pf.includes(t.caipNetworkId)&&r.push(Ul(m1(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ul(a))}),Jm(r)},extendWagmiTransports(t,e,n){if(Pf.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Jm([n,Ul(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:B.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=z.getActiveCaipNetworkId(),n=I.getAllRequestedCaipNetworks(),r=Array.from(((c=I.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}};class Gi{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){var d;const{metadata:c,sdkVersion:l,sdkType:u}=F.getSnapshot();return Gi.instance||(Gi.instance=new z6({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!((d=F.state.remoteFeatures)!=null&&d.emailCapture),metadata:c,sdkVersion:l,sdkType:u})),Gi.instance}}var y1={};const aK={ACCOUNT_TABS:[{label:"Tokens"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof y1<"u"?y1.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},cK=[tn.ConnectorExplorerIds[B.CONNECTOR_ID.COINBASE],tn.ConnectorExplorerIds[B.CONNECTOR_ID.COINBASE_SDK],tn.ConnectorExplorerIds[B.CONNECTOR_ID.BASE_ACCOUNT],tn.ConnectorExplorerIds[je.SOLFLARE_CONNECTOR_NAME],tn.ConnectorExplorerIds[je.PHANTOM_CONNECTOR_NAME],tn.ConnectorExplorerIds[je.BINANCE_CONNECTOR_NAME]],Ya={filterOutDuplicatesByRDNS(t){const e=F.state.enableEIP6963?V.state.connectors:[],n=z.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ee.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=V.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"||a.type==="MULTI_CHAIN"),n=z.getRecentWallets(),r=e.map(a=>{var c;return a.explorerId||((c=a.explorerWallet)==null?void 0:c.id)||a.id}),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=V.state,{featuredWalletIds:n}=F.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=F.state.features)==null?void 0:c.connectMethodsOrder),r=e||V.state.connectors;if(n)return n;const{injected:s,announced:i}=kf.getConnectorsByType(r,de.state.recommended,de.state.featured),o=s.filter(kf.showConnector),a=i.filter(kf.showConnector);return o.length||a.length?["wallet","email","social"]:aK.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&de.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&de.state.excludedWallets.some(r=>mr.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))},filterWalletsByWcSupport(t){return X.state.wcBasic?t.filter(e=>e.supports_wc):ee.isMobile()?t.filter(e=>e.supports_wc||cK.includes(e.id)):t}},kf={getConnectorsByType(t,e,n){const{customWallets:r}=F.state,s=z.getRecentWallets(),i=Ya.filterOutDuplicateWallets(e),o=Ya.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&de.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&de.state.excludedWallets.some(i=>mr.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ee.isMobile()||ee.isMobile()&&!e&&!X.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(I.state.chains.values()).some(n=>V.getConnectorId(n.namespace)===B.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=F.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const d=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(g=>g.isEnabled),h=new Set(d.map(g=>g.type)),f=c.filter(g=>h.has(g)).map(g=>({type:g,isEnabled:!0})),p=d.filter(({type:g})=>!f.some(({type:w})=>w===g));return Array.from(new Set([...f,...p].map(({type:g})=>g)))},sortConnectorsByExplorerWallet(t){return[...t].sort((e,n)=>e.explorerWallet&&n.explorerWallet?(e.explorerWallet.order??0)-(n.explorerWallet.order??0):e.explorerWallet?-1:n.explorerWallet?1:0)},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ee.isMobile())return{accounts:[],chainId:void 0};if(t.id===B.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}},getFilteredCustomWallets(t){const e=z.getRecentWallets(),n=V.state.connectors.map(o=>{var a;return(a=o.info)==null?void 0:a.rdns}).filter(Boolean),r=e.map(o=>o.rdns).filter(Boolean),s=n.concat(r);if(s.includes("io.metamask.mobile")&&ee.isMobile()){const o=s.indexOf("io.metamask.mobile");s[o]="io.metamask"}return t.filter(o=>!s.includes(String(o==null?void 0:o.rdns)))},hasWalletConnector(t){return V.state.connectors.some(e=>e.id===t.id||e.name===t.name)},isWalletCompatibleWithCurrentChain(t){const e=I.state.activeChain;return e&&t.chains?t.chains.some(n=>{const r=n.split(":")[0];return e===r}):!0},getFilteredRecentWallets(){return z.getRecentWallets().filter(n=>!Ya.isExcluded(n)).filter(n=>!this.hasWalletConnector(n)).filter(n=>this.isWalletCompatibleWithCurrentChain(n))},getCappedRecommendedWallets(t){const{connectors:e}=V.state,{customWallets:n,featuredWalletIds:r}=F.state,s=e.find(_=>_.id==="walletConnect"),i=e.filter(_=>_.type==="INJECTED"||_.type==="ANNOUNCED"||_.type==="MULTI_CHAIN");if(!s&&!i.length&&!(n!=null&&n.length))return[];const o=yp.isEmailEnabled(),a=yp.isSocialsEnabled(),c=i.filter(_=>_.name!=="Browser Wallet"&&_.name!=="WalletConnect"),l=(r==null?void 0:r.length)||0,u=(n==null?void 0:n.length)||0,d=c.length||0,h=o?1:0,f=a?1:0,p=l+u+d+h+f,m=Math.max(0,4-p);return m<=0?[]:Ya.filterOutDuplicateWallets(t).slice(0,m)}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Au=globalThis,Jg=Au.ShadowRoot&&(Au.ShadyCSS===void 0||Au.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Xg=Symbol(),b1=new WeakMap;let R2=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Xg)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Jg&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=b1.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&b1.set(n,e))}return e}toString(){return this.cssText}};const lr=t=>new R2(typeof t=="string"?t:t+"",void 0,Xg),ei=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new R2(n,t,Xg)},lK=(t,e)=>{if(Jg)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Au.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},w1=Jg?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return lr(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:uK,defineProperty:dK,getOwnPropertyDescriptor:hK,getOwnPropertyNames:fK,getOwnPropertySymbols:pK,getPrototypeOf:gK}=Object,ai=globalThis,E1=ai.trustedTypes,mK=E1?E1.emptyScript:"",Df=ai.reactiveElementPolyfillSupport,ic=(t,e)=>t,w0={toAttribute(t,e){switch(e){case Boolean:t=t?mK:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},P2=(t,e)=>!uK(t,e),v1={attribute:!0,type:String,converter:w0,reflect:!1,useDefault:!1,hasChanged:P2};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ai.litPropertyMetadata??(ai.litPropertyMetadata=new WeakMap);let Do=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=v1){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&dK(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=hK(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??v1}static _$Ei(){if(this.hasOwnProperty(ic("elementProperties")))return;const e=gK(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ic("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ic("properties"))){const n=this.properties,r=[...fK(n),...pK(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(w1(s))}else e!==void 0&&n.push(w1(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return lK(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:w0).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:w0;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??P2)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Do.elementStyles=[],Do.shadowRootOptions={mode:"open"},Do[ic("elementProperties")]=new Map,Do[ic("finalized")]=new Map,Df==null||Df({ReactiveElement:Do}),(ai.reactiveElementVersions??(ai.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oc=globalThis,fd=oc.trustedTypes,C1=fd?fd.createPolicy("lit-html",{createHTML:t=>t}):void 0,k2="$lit$",ti=`lit$${Math.random().toFixed(9).slice(2)}$`,D2="?"+ti,yK=`<${D2}>`,lo=document,tl=()=>lo.createComment(""),nl=t=>t===null||typeof t!="object"&&typeof t!="function",Qg=Array.isArray,bK=t=>Qg(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",$f=`[ 	
\f\r]`,ja=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_1=/-->/g,A1=/>/g,Ti=RegExp(`>|${$f}(?:([^\\s"'>=/]+)(${$f}*=${$f}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),I1=/'/g,S1=/"/g,$2=/^(?:script|style|textarea|title)$/i,U2=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),FZ=U2(1),jZ=U2(2),ua=Symbol.for("lit-noChange"),Rt=Symbol.for("lit-nothing"),N1=new WeakMap,Wi=lo.createTreeWalker(lo,129);function B2(t,e){if(!Qg(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return C1!==void 0?C1.createHTML(e):e}const wK=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=ja;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===ja?u[1]==="!--"?o=_1:u[1]!==void 0?o=A1:u[2]!==void 0?($2.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Ti):u[3]!==void 0&&(o=Ti):o===Ti?u[0]===">"?(o=s??ja,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Ti:u[3]==='"'?S1:I1):o===S1||o===I1?o=Ti:o===_1||o===A1?o=ja:(o=Ti,s=void 0);const f=o===Ti&&t[a+1].startsWith("/>")?" ":"";i+=o===ja?c+yK:d>=0?(r.push(l),c.slice(0,d)+k2+c.slice(d)+ti+f):c+ti+(d===-2?a:f)}return[B2(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class rl{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=wK(e,n);if(this.el=rl.createElement(l,r),Wi.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Wi.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(k2)){const h=u[o++],f=s.getAttribute(d).split(ti),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?vK:p[1]==="?"?CK:p[1]==="@"?_K:oh}),s.removeAttribute(d)}else d.startsWith(ti)&&(c.push({type:6,index:i}),s.removeAttribute(d));if($2.test(s.tagName)){const d=s.textContent.split(ti),h=d.length-1;if(h>0){s.textContent=fd?fd.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],tl()),Wi.nextNode(),c.push({type:2,index:++i});s.append(d[h],tl())}}}else if(s.nodeType===8)if(s.data===D2)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ti,d+1))!==-1;)c.push({type:7,index:i}),d+=ti.length-1}i++}}static createElement(e,n){const r=lo.createElement("template");return r.innerHTML=e,r}}function da(t,e,n=t,r){var o,a;if(e===ua)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=nl(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=da(t,s._$AS(t,e.values),s,r)),e}class EK{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??lo).importNode(n,!0);Wi.currentNode=s;let i=Wi.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Sl(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new AK(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Wi.nextNode(),o++)}return Wi.currentNode=lo,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Sl{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Rt,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=da(this,e,n),nl(e)?e===Rt||e==null||e===""?(this._$AH!==Rt&&this._$AR(),this._$AH=Rt):e!==this._$AH&&e!==ua&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):bK(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Rt&&nl(this._$AH)?this._$AA.nextSibling.data=e:this.T(lo.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=rl.createElement(B2(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new EK(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=N1.get(e.strings);return n===void 0&&N1.set(e.strings,n=new rl(e)),n}k(e){Qg(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Sl(this.O(tl()),this.O(tl()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class oh{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Rt,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Rt}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=da(this,e,n,0),o=!nl(e)||e!==this._$AH&&e!==ua,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=da(this,a[r+c],n,c),l===ua&&(l=this._$AH[c]),o||(o=!nl(l)||l!==this._$AH[c]),l===Rt?e=Rt:e!==Rt&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Rt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class vK extends oh{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Rt?void 0:e}}class CK extends oh{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Rt)}}class _K extends oh{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=da(this,e,n,0)??Rt)===ua)return;const r=this._$AH,s=e===Rt&&r!==Rt||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Rt&&(r===Rt||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class AK{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){da(this,e)}}const Uf=oc.litHtmlPolyfillSupport;Uf==null||Uf(rl,Sl),(oc.litHtmlVersions??(oc.litHtmlVersions=[])).push("3.3.1");const IK=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Sl(e.insertBefore(tl(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yi=globalThis;class Iu extends Do{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=IK(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ua}}var L1;Iu._$litElement$=!0,Iu.finalized=!0,(L1=Yi.litElementHydrateSupport)==null||L1.call(Yi,{LitElement:Iu});const Bf=Yi.litElementPolyfillSupport;Bf==null||Bf({LitElement:Iu});(Yi.litElementVersions??(Yi.litElementVersions=[])).push("4.2.1");const SK={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},pd={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},NK={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},xK={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},TK={regular:"KHTeka",mono:"KHTekaMono"},OK={regular:"400",medium:"500"},RK={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},PK={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},kK={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},DK={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},E0={colors:SK,fontFamily:TK,fontWeight:OK,textSize:RK,typography:PK,tokens:{core:pd.core,theme:pd.dark},borderRadius:NK,spacing:xK,durations:DK,easings:kK},x1="--apkt";function ou(t){if(!t)return{};const e={};return e["font-family"]=t["--apkt-font-family"]??t["--w3m-font-family"]??"KHTeka",e.accent=t["--apkt-accent"]??t["--w3m-accent"]??"#0988F0",e["color-mix"]=t["--apkt-color-mix"]??t["--w3m-color-mix"]??"#000",e["color-mix-strength"]=t["--apkt-color-mix-strength"]??t["--w3m-color-mix-strength"]??0,e["font-size-master"]=t["--apkt-font-size-master"]??t["--w3m-font-size-master"]??"10px",e["border-radius-master"]=t["--apkt-border-radius-master"]??t["--w3m-border-radius-master"]??"4px",t["--apkt-z-index"]!==void 0?e["z-index"]=t["--apkt-z-index"]:t["--w3m-z-index"]!==void 0&&(e["z-index"]=t["--w3m-z-index"]),e}const ls={createCSSVariables(t){const e={},n={};function r(i,o,a=""){for(const[c,l]of Object.entries(i)){const u=a?`${a}-${c}`:c;l&&typeof l=="object"&&Object.keys(l).length?(o[c]={},r(l,o[c],u)):typeof l=="string"&&(o[c]=`${x1}-${u}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return r(t,e),s(e,n),{cssVariables:e,cssVariablesVarPrefix:n}},assignCSSVariables(t,e){const n={};function r(s,i,o){for(const[a,c]of Object.entries(s)){const l=o?`${o}-${a}`:a,u=i[a];c&&typeof c=="object"?r(c,u,l):typeof u=="string"&&(n[`${x1}-${l}`]=u)}}return r(t,e),n},createRootStyles(t,e){const n={...E0,tokens:{...E0.tokens,theme:t==="light"?pd.light:pd.dark}},{cssVariables:r}=ls.createCSSVariables(n),s=ls.assignCSSVariables(r,n),i=ls.generateW3MVariables(e),o=ls.generateW3MOverrides(e),a=ls.generateScaledVariables(e),c=ls.generateBaseVariables(s),l={...s,...c,...i,...o,...a},u=ls.applyColorMixToVariables(e,l),d={...l,...u};return`:root {${Object.entries(d).map(([f,p])=>`${f}:${p.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e=ou(t),n={};return n["--w3m-font-family"]=e["font-family"],n["--w3m-accent"]=e.accent,n["--w3m-color-mix"]=e["color-mix"],n["--w3m-color-mix-strength"]=`${e["color-mix-strength"]}%`,n["--w3m-font-size-master"]=e["font-size-master"],n["--w3m-border-radius-master"]=e["border-radius-master"],n},generateW3MOverrides(t){if(!t)return{};const e=ou(t),n={};if(t["--apkt-accent"]||t["--w3m-accent"]){const r=e.accent;n["--apkt-tokens-core-iconAccentPrimary"]=r,n["--apkt-tokens-core-borderAccentPrimary"]=r,n["--apkt-tokens-core-textAccentPrimary"]=r,n["--apkt-tokens-core-backgroundAccentPrimary"]=r}return(t["--apkt-font-family"]||t["--w3m-font-family"])&&(n["--apkt-fontFamily-regular"]=e["font-family"]),e["z-index"]!==void 0&&(n["--apkt-tokens-core-zIndex"]=`${e["z-index"]}`),n},generateScaledVariables(t){if(!t)return{};const e=ou(t),n={};if(t["--apkt-font-size-master"]||t["--w3m-font-size-master"]){const r=parseFloat(e["font-size-master"].replace("px",""));n["--apkt-textSize-h1"]=`${Number(r)*5}px`,n["--apkt-textSize-h2"]=`${Number(r)*4.4}px`,n["--apkt-textSize-h3"]=`${Number(r)*3.8}px`,n["--apkt-textSize-h4"]=`${Number(r)*3.2}px`,n["--apkt-textSize-h5"]=`${Number(r)*2.6}px`,n["--apkt-textSize-h6"]=`${Number(r)*2}px`,n["--apkt-textSize-large"]=`${Number(r)*1.6}px`,n["--apkt-textSize-medium"]=`${Number(r)*1.4}px`,n["--apkt-textSize-small"]=`${Number(r)*1.2}px`}if(t["--apkt-border-radius-master"]||t["--w3m-border-radius-master"]){const r=parseFloat(e["border-radius-master"].replace("px",""));n["--apkt-borderRadius-1"]=`${Number(r)}px`,n["--apkt-borderRadius-2"]=`${Number(r)*2}px`,n["--apkt-borderRadius-3"]=`${Number(r)*3}px`,n["--apkt-borderRadius-4"]=`${Number(r)*4}px`,n["--apkt-borderRadius-5"]=`${Number(r)*5}px`,n["--apkt-borderRadius-6"]=`${Number(r)*6}px`,n["--apkt-borderRadius-8"]=`${Number(r)*8}px`,n["--apkt-borderRadius-16"]=`${Number(r)*16}px`,n["--apkt-borderRadius-20"]=`${Number(r)*20}px`,n["--apkt-borderRadius-32"]=`${Number(r)*32}px`,n["--apkt-borderRadius-64"]=`${Number(r)*64}px`,n["--apkt-borderRadius-128"]=`${Number(r)*128}px`}return n},generateColorMixCSS(t,e){if(!(t!=null&&t["--w3m-color-mix"])||!t["--w3m-color-mix-strength"])return"";const n=t["--w3m-color-mix"],r=t["--w3m-color-mix-strength"];if(!r||r===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=(e==null?void 0:e[o])||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${n} ${r}%, ${a});`:`${o}: color-mix(in srgb, ${n} ${r}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},n=t["--apkt-tokens-theme-backgroundPrimary"];n&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=n);const r=t["--apkt-tokens-core-backgroundAccentPrimary"];return r&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=r),e},applyColorMixToVariables(t,e){const n={};e!=null&&e["--apkt-tokens-theme-backgroundPrimary"]&&(n["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e!=null&&e["--apkt-tokens-core-backgroundAccentPrimary"]&&(n["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");const r=ou(t),s=r["color-mix"],i=r["color-mix-strength"];if(!i||i===0)return n;const o=Object.keys(e||{}).filter(a=>{const c=a.includes("-tokens-core-background")||a.includes("-tokens-core-text")||a.includes("-tokens-core-border")||a.includes("-tokens-core-foreground")||a.includes("-tokens-core-icon")||a.includes("-tokens-theme-background")||a.includes("-tokens-theme-text")||a.includes("-tokens-theme-border")||a.includes("-tokens-theme-foreground")||a.includes("-tokens-theme-icon")||a.includes("-tokens-theme-overlay"),l=a.includes("-borderRadius-")||a.includes("-spacing-")||a.includes("-textSize-")||a.includes("-fontFamily-")||a.includes("-fontWeight-")||a.includes("-typography-")||a.includes("-duration-")||a.includes("-ease-")||a.includes("-path-")||a.includes("-width-")||a.includes("-height-")||a.includes("-visual-size-")||a.includes("-modal-width")||a.includes("-cover");return c&&!l});return o.length===0||o.forEach(a=>{const c=(e==null?void 0:e[a])||"";a.endsWith("-base")||(a==="--apkt-tokens-theme-backgroundPrimary"||a==="--apkt-tokens-core-backgroundAccentPrimary"?n[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base))`:c.includes("color-mix")||c.startsWith("#")||c.startsWith("rgb")?n[a]=`color-mix(in srgb, ${s} ${i}%, ${c})`:n[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base, ${c}))`)}),n}},{cssVariablesVarPrefix:$K}=ls.createCSSVariables(E0);function HZ(t,...e){return ei(t,...e.map(n=>lr(typeof n=="function"?n($K):n)))}let $i,qi,Lr,Un,gd;const os={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function md(t,e="dark"){$i&&document.head.removeChild($i),$i=document.createElement("style"),$i.textContent=ls.createRootStyles(e,t),document.head.appendChild($i)}function zZ(t,e="dark"){if(gd=t,qi=document.createElement("style"),Lr=document.createElement("style"),Un=document.createElement("style"),qi.textContent=Yo(t).core.cssText,Lr.textContent=Yo(t).dark.cssText,Un.textContent=Yo(t).light.cssText,document.head.appendChild(qi),document.head.appendChild(Lr),document.head.appendChild(Un),md(t,e),v0(e),!((t==null?void 0:t["--apkt-font-family"])||(t==null?void 0:t["--w3m-font-family"])))for(const[r,s]of Object.entries(os)){const i=document.createElement("link");i.rel="preload",i.href=s,i.as="font",i.type=r.includes("woff2")?"font/woff2":"font/woff",i.crossOrigin="anonymous",document.head.appendChild(i)}v0(e)}function v0(t="dark"){Lr&&Un&&$i&&(t==="light"?(md(gd,t),Lr.removeAttribute("media"),Un.media="enabled"):(md(gd,t),Un.removeAttribute("media"),Lr.media="enabled"))}function UK(t){var e,n,r;if(gd=t,qi&&Lr&&Un){qi.textContent=Yo(t).core.cssText,Lr.textContent=Yo(t).dark.cssText,Un.textContent=Yo(t).light.cssText;const s=(t==null?void 0:t["--apkt-font-family"])||(t==null?void 0:t["--w3m-font-family"]);s&&(qi.textContent=(e=qi.textContent)==null?void 0:e.replace("font-family: KHTeka",`font-family: ${s}`),Lr.textContent=(n=Lr.textContent)==null?void 0:n.replace("font-family: KHTeka",`font-family: ${s}`),Un.textContent=(r=Un.textContent)==null?void 0:r.replace("font-family: KHTeka",`font-family: ${s}`))}if($i){const s=(Un==null?void 0:Un.media)==="enabled"?"light":"dark";md(t,s)}}function Yo(t){const e=!!(t!=null&&t["--apkt-font-family"]||t!=null&&t["--w3m-font-family"]);return{core:ei`
      ${e?ei``:ei`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${lr(os["KHTeka-400-woff2"])}) format('woff2'),
                url(${lr(os["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${lr(os["KHTeka-300-woff2"])}) format('woff2'),
                url(${lr(os["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${lr(os["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${lr(os["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${lr(os["KHTeka-400-woff2"])}) format('woff2'),
                url(${lr(os["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:ei`
      :root {
      }
    `,light:ei`
      :root {
      }
    `}}const WZ=ei`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,qZ=ei`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,au={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};class BK extends N2{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new x2({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ee.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var o,a,c,l,u;if(!(e.caipNetwork&&ke.BALANCE_SUPPORTED_CHAINS.includes((o=e.caipNetwork)==null?void 0:o.chainNamespace))||(a=e.caipNetwork)!=null&&a.testnet)return{balance:"0.00",symbol:((c=e.caipNetwork)==null?void 0:c.nativeCurrency.symbol)||""};const r=I.getAccountData();if(r!=null&&r.balanceLoading&&e.chainId===((l=I.state.activeCaipNetwork)==null?void 0:l.id))return{balance:(r==null?void 0:r.balance)||"0.00",symbol:(r==null?void 0:r.balanceSymbol)||""};const i=(await I.fetchTokenBalance()).find(d=>{var h,f;return d.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&d.symbol===((f=e.caipNetwork)==null?void 0:f.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=I.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===B.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:ya.encode(new TextEncoder().encode(r)),pubkey:s}},(a=I.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=I.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===B.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:wr(n.id)}]}))}catch(u){if(u.code===au.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===au.ERROR_INVALID_CHAIN_ID||u.code===au.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===au.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:wr(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const LK=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],cu={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?ke.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?ke.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?ke.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ke.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ke.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ke.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ke.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?ke.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},MK={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=cu[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=cu[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return cu[t].processApi(e)},processFallbackFeature(t,e){return cu[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await de.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?ke.DEFAULT_REMOTE_FEATURES:ke.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of LK){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),ke.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;ct.open({debugMessage:rt.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class FK{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o;if(n){const a=(s=I.getCaipNetworks(n))==null?void 0:s.find(u=>u.id===r);if(a)return a;const c=(i=I.getNetworkData(n))==null?void 0:i.caipNetwork;return c||((o=I.getRequestedCaipNetworks(n).filter(u=>u.chainNamespace===n))==null?void 0:o[0])}return I.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>I.getCaipNetworks(n),this.getActiveChainNamespace=()=>I.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{I.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>I.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>{var r,s;return I.state.activeChain===n||!n?I.state.activeCaipAddress:(s=(r=I.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.caipAddress},this.setClientId=n=>{be.setClientId(n)},this.getProvider=n=>Ye.getProvider(n),this.getProviderType=n=>Ye.getProviderId(n),this.getPreferredAccountType=n=>nn(n),this.setCaipAddress=(n,r,s=!1)=>{I.setAccountProp("caipAddress",n,r,s),I.setAccountProp("address",ee.getPlainAddress(n),r,s)},this.setBalance=(n,r,s)=>{I.setAccountProp("balance",n,s),I.setAccountProp("balanceSymbol",r,s)},this.setProfileName=(n,r)=>{I.setAccountProp("profileName",n,r)},this.setProfileImage=(n,r)=>{I.setAccountProp("profileImage",n,r)},this.setUser=(n,r)=>{I.setAccountProp("user",n,r)},this.resetAccount=n=>{I.resetAccount(n)},this.setCaipNetwork=n=>{I.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{I.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{I.setAccountProp("status",n,r),V.isConnected()?z.setConnectionStatus("connected"):z.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>{var r;return(r=I.getAccountData(n))==null?void 0:r.address},this.setConnectors=n=>{const r=[...V.state.allConnectors,...n];V.setConnectors(r)},this.setConnections=(n,r)=>{z.setConnections(n,r),X.setConnections(n,r)},this.fetchIdentity=n=>be.fetchIdentity(n),this.getReownName=n=>sc.getNamesForAddress(n),this.getConnectors=()=>V.getConnectors(),this.getConnectorImage=n=>Dv.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?Gu.getConnectionsData(n).connections:(ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?Gu.getConnectionsData(n).recentConnections:(ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await X.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}z.deleteAddressFromConnection(n),X.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=Ye.getProviderId(r),i=n?{...n,type:s}:void 0;I.setAccountProp("connectedWalletInfo",i,r)},this.getIsConnectedState=()=>!!I.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{var o;const i=((o=I.getAccountData(s))==null?void 0:o.addressLabels)||{};I.setAccountProp("addressLabels",{...i,[n]:r},s)},this.removeAddressLabel=(n,r)=>{var i;const s=((i=I.getAccountData(r))==null?void 0:i.addressLabels)||{};I.setAccountProp("addressLabels",{...s,[n]:void 0},r)},this.getAddress=n=>{var s;const r=n||I.state.activeChain;return(s=I.getAccountData(r))==null?void 0:s.address},this.resetNetwork=n=>{I.resetNetwork(n)},this.addConnector=n=>{V.addConnector(n)},this.resetWcConnection=()=>{X.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{I.setAccountProp("addressExplorerUrl",n,r)},this.setSmartAccountDeployed=(n,r)=>{I.setAccountProp("smartAccountDeployed",n,r)},this.setPreferredAccountType=(n,r)=>{I.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{F.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s,i,o;if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),F.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(this.remoteFeatures=await MK.fetchRemoteFeatures(e)),await de.fetchUsage(),F.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&vp.setOnrampProviders(this.remoteFeatures.onramp),((n=F.state.remoteFeatures)!=null&&n.email||Array.isArray((r=F.state.remoteFeatures)==null?void 0:r.socials)&&((s=F.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins(),(i=F.state.features)!=null&&i.reownAuthentication||(o=F.state.remoteFeatures)!=null&&o.reownAuthentication){const{ReownAuthentication:a}=await Ct(async()=>{const{ReownAuthentication:l}=await import("./features.chunk.js");return{ReownAuthentication:l}},[]),c=F.state.siwx;c instanceof a||(c&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),F.setSIWX(new a))}}async openSend(e){var i;const n=e.namespace||I.state.activeChain,r=this.getCaipAddress(n),s=(i=this.getCaipNetwork(n))==null?void 0:i.id;if(!r)throw new Error("openSend: caipAddress not found");if((s==null?void 0:s.toString())!==e.chainId.toString()){const o=I.getCaipNetworkById(e.chainId,n);if(!o)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(o,{throwOnFailure:!0})}try{const o=O2.getTokenSymbolByAddress(e.assetAddress);o&&await de.fetchTokenImages([o])}catch{}return await Oe.open({view:"WalletSend",data:{send:e}}),new Promise((o,a)=>{const c=Se.subscribeKey("hash",d=>{d&&(u(),o({hash:d}))}),l=Oe.subscribe(d=>{d.open||(u(),a(new Error("Modal closed")))}),u=this.createCleanupHandler([c,l])})}toModalOptions(){function e(r){return(r==null?void 0:r.view)==="Swap"}function n(r){return(r==null?void 0:r.view)==="WalletSend"}return{isSwap:e,isSend:n}}async checkAllowedOrigins(){try{const e=await de.fetchAllowedOrigins();if(!ee.isClient())return;const n=window.location.origin;vs.isOriginAllowed(n,e,B.DEFAULT_ALLOWED_ANCESTORS)||ct.open(rt.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":ct.open(rt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;ct.open({displayMessage:rt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:rt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(n=>{try{n()}catch{}})}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Ce.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){Bv.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&gn.setThemeMode(e.themeMode),e.themeVariables&&gn.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");I.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const n=this.getDefaultNetwork();n&&I.setActiveCaipNetwork(n)}initializeConnectionController(e){X.initialize(e.adapters??[]),X.setWcBasic(e.basic??!1)}initializeConnectorController(){V.initialize(this.chainNamespaces)}initializeProjectSettings(e){F.setProjectId(e.projectId),F.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;F.setDebug(e.debug!==!1),F.setEnableWalletGuide(e.enableWalletGuide!==!1),F.setEnableWallets(e.enableWallets!==!1),F.setEIP6963Enabled(e.enableEIP6963!==!1),F.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),F.setEnableReconnect(e.enableReconnect!==!1),F.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),F.setCoinbasePreference(e.coinbasePreference),F.setEnableAuthLogger(e.enableAuthLogger!==!1),F.setCustomRpcUrls(e.customRpcUrls),F.setEnableEmbedded(e.enableEmbedded),F.setAllWallets(e.allWallets),F.setIncludeWalletIds(e.includeWalletIds),F.setExcludeWalletIds(e.excludeWalletIds),F.setFeaturedWalletIds(e.featuredWalletIds),F.setTokens(e.tokens),F.setTermsConditionsUrl(e.termsConditionsUrl),F.setPrivacyPolicyUrl(e.privacyPolicyUrl),F.setCustomWallets(e.customWallets),F.setFeatures(e.features),F.setAllowUnsupportedChain(e.allowUnsupportedChain),F.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),F.setPreferUniversalLinks(e.experimental_preferUniversalLinks),F.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),F.setMetadata(e.metadata),F.setDisableAppend(e.disableAppend),F.setEnableEmbedded(e.enableEmbedded),F.setSIWX(e.siwx),this.features=F.state.features??{},!e.projectId){ct.open(rt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===B.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");F.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ee.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=$r.getUnsupportedNetwork(`${n}:${e}`);I.setActiveCaipNetwork(r)}}getDefaultNetwork(){return $r.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return $r.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return $r.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?$r.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,n){var r,s;try{this.setLoading(!0,e);let i={connections:[]};const o=this.getAdapter(e);return(((s=(r=I.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.caipAddress)||!F.state.enableReconnect)&&(o!=null&&o.disconnect)&&(i=await o.disconnect({id:n})),this.setLoading(!1,e),i}catch(i){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${i.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var l;const e=I.state.activeChain,n=this.getAdapter(e),r=(l=this.getCaipNetwork(e))==null?void 0:l.id,s=X.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),z.setConnectedNamespaces([...I.state.chains.keys()]),await this.syncWalletConnectAccount(),await $n.initializeIfEnabled()},connectExternal:async e=>{const n=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,n),n?{address:n.address}:void 0},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=I.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),z.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{var l;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||I.state.activeChain,o=V.getConnectorId(i),a=n===B.CONNECTOR_ID.AUTH||o===B.CONNECTOR_ID.AUTH,c=n===B.CONNECTOR_ID.WALLET_CONNECT||o===B.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(I.state.chains.keys());let d=r?[r]:u;(c||a)&&(d=u);const h=d.map(async g=>{const m=V.getConnectorId(g),w=n||m,_=await this.disconnectConnector(g,w);_&&(a&&z.deleteConnectedSocialProvider(),_.connections.forEach(b=>{z.addDisconnectedConnectorId(b.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),f=await Promise.allSettled(h);Se.resetSend(),X.resetWcConnection(),(l=$n.getSIWX())!=null&&l.signOutOnDisconnect&&await $n.clearSessions(),V.setFilterByNamespace(void 0),X.syncStorageConnections();const p=f.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));Ce.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=I.state.activeChain,r=this.getAdapter(I.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=this.getAddress(n);if(!s)throw new Error("signMessage: address not found");const i=await(r==null?void 0:r.signMessage({message:e,address:s,provider:Ye.getProvider(n)}));return(i==null?void 0:i.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(ke.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=Ye.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===B.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Ye.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var s;const e=I.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");const n=this.getAddress(e);if(!n)throw new Error("getEnsAvatar: address not found");await this.syncIdentity({address:n,chainId:Number((s=this.getCaipNetwork())==null?void 0:s.id),chainNamespace:e});const r=I.getAccountData();return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>await vs.resolveReownName(e),writeContract:async e=>{const n=I.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Ye.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(I.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(I.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(I.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getAddress(e),r=this.getCaipNetwork(e);!r||!n||this.updateNativeBalance(n,r==null?void 0:r.id,e)}},X.setClient(this.connectionControllerClient)}async onConnectExternal(e){var l,u,d,h,f,p,g,m;const n=I.state.activeChain,r=e.chain||n,s=this.getAdapter(r);let i=!0;if(e.type===je.CONNECTOR_TYPE_AUTH&&B.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(b=>V.getConnectorId(b)===B.CONNECTOR_ID.AUTH)&&e.chain!==n&&(i=!1),e.chain&&e.chain!==n&&!e.caipNetwork){const w=this.getCaipNetworks().find(_=>_.chainNamespace===e.chain);w&&i&&this.setCaipNetwork(w)}if(!r)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(r),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:((l=e.caipNetwork)==null?void 0:l.id)||(o==null?void 0:o.id),rpcUrl:((f=(h=(d=(u=e.caipNetwork)==null?void 0:u.rpcUrls)==null?void 0:d.default)==null?void 0:h.http)==null?void 0:f[0])||((m=(g=(p=o==null?void 0:o.rpcUrls)==null?void 0:p.default)==null?void 0:g.http)==null?void 0:m[0])});if(c)return z.addConnectedNamespace(r),this.syncProvider({...c,chainNamespace:r}),this.setStatus("connected",r),this.syncConnectedWalletInfo(r),z.removeDisconnectedConnectorId(e.id,r),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,n){var a;const r=e.type===je.CONNECTOR_TYPE_AUTH,s=mr.getOtherAuthNamespaces((a=n==null?void 0:n.connectedCaipNetwork)==null?void 0:a.chainNamespace),i=I.state.activeCaipNetwork,o=this.getAdapter(i==null?void 0:i.chainNamespace);r&&(await Promise.all(s.map(async c=>{var l,u,d;try{const h=Ye.getProvider(c),f=this.getCaipNetwork(c),p=this.getAdapter(c);await(p==null?void 0:p.connect({...e,provider:h,socialUri:void 0,chainId:f==null?void 0:f.id,rpcUrl:(d=(u=(l=f==null?void 0:f.rpcUrls)==null?void 0:l.default)==null?void 0:u.http)==null?void 0:d[0]}))&&(z.addConnectedNamespace(c),z.removeDisconnectedConnectorId(e.id,c),this.setStatus("connected",c),this.syncConnectedWalletInfo(c))}catch(h){ct.warn(rt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,rt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(c,h instanceof Error?h.message:void 0),rt.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await(o==null?void 0:o.switchNetwork({caipNetwork:i})))}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Ye.getProviderId(I.state.activeChain)===je.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Ye.getProviderId(n);if(e.chainNamespace===I.state.activeChain){const i=this.getAdapter(n);await(i==null?void 0:i.switchNetwork({caipNetwork:e}))}else if(this.setCaipNetwork(e),s===je.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const i=this.getAddressByChainNamespace(n);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=At.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i,o;const s=e==null?void 0:e.find(a=>a.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:(o=this.caipNetworks)==null?void 0:o.filter(({chainNamespace:a})=>a===r)}),n[r]=s):n[r]=new BK({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);const n=this.getAdapter(e);if(!n)throw new Error("adapter not found");await n.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=z.getConnectionStatus();F.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(z.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{var l,u;const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),a=I.state.activeChain===e,c=(u=(l=I.state.chains.get(e))==null?void 0:l.accountState)==null?void 0:u.address;if(o){const d=a&&s?s:c;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(X.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=this.getAddress(e),i=I.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{var u,d;this.handlePreviousConnectorConnection(o);const a=I.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o==null?void 0:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=(d=(u=I.getNetworkData(e))==null?void 0:u.caipNetwork)==null?void 0:d.id,l=i||c;a&&l?this.syncAccount({address:s,chainId:l,chainNamespace:e}):!a&&l?(this.syncAccountInfo(s,l,e),this.syncBalance({address:s,chainId:l,chainNamespace:e})):this.syncAccountInfo(s,i,e),z.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){var c;const n=e==null?void 0:e.chain,r=e==null?void 0:e.id,s=V.getConnectorId(n),i=(c=F.state.remoteFeatures)==null?void 0:c.multiWallet,a=n&&r&&s&&s!==r&&!i;try{a&&await X.disconnect({id:s,namespace:n})}catch(l){console.warn("Error disconnecting previous connector",l)}}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>X.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();this.getCaipAddress()||z.deleteRecentWallet();const n=z.getRecentWallet();Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:ee.isMobile()?"mobile":"qrcode",name:(n==null?void 0:n.name)||"Unknown",reconnect:!0,view:me.state.view,walletRank:n==null?void 0:n.order}})}async syncNamespaceConnection(e){try{e===B.CHAIN.EVM&&ee.isSafeApp()&&V.setConnectorId(B.CONNECTOR_ID.SAFE,e);const n=V.getConnectorId(e);switch(this.setStatus("connecting",e),n){case B.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case B.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};I.resetAccount(n),I.resetNetwork(n),z.removeConnectedNamespace(n);const s=Array.from(I.state.chains.keys());(n?[n]:s).forEach(o=>z.addDisconnectedConnectorId(V.getConnectorId(o)||"",o)),V.removeConnectorId(n),Ye.resetChain(n),this.setUser(null,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(null,n),r!==!1&&Oe.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getAdapter(e),r=this.getCaipAddress(e),s=this.getCaipNetwork(e);return n==null?void 0:n.syncConnections({connectToFirstConnector:!r,caipNetwork:s})}))}async syncAdapterConnection(e){var a,c,l,u,d;const n=this.getAdapter(e),r=this.getCaipNetwork(e),s=V.getConnectorId(e),o=V.getConnectors(e).find(h=>h.id===s);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(r!=null&&r.id))throw new Error("CaipNetwork not found");const h=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:r.id,rpcUrl:(l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));h?(this.syncProvider({...h,chainNamespace:e}),await this.syncAccount({...h,chainNamespace:e}),this.setStatus("connected",e),Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:h.address,properties:{method:"browser",name:((u=o.info)==null?void 0:u.name)||o.name||"Unknown",reconnect:!0,view:me.state.view,walletRank:(d=o==null?void 0:o.explorerWallet)==null?void 0:d.order}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var d,h,f,p,g;const o=this.getAdapter(i);if(!o)return;const a=((p=(f=(h=(d=this.universalProvider)==null?void 0:d.session)==null?void 0:h.namespaces)==null?void 0:f[i])==null?void 0:p.accounts)||[],c=(g=I.state.activeCaipNetwork)==null?void 0:g.id,l=a.find(m=>{const{chainId:w}=At.parseCaipAddress(m);return w===(c==null?void 0:c.toString())})||a[0];if(l){const m=At.validateCaipAddress(l),{chainId:w,address:_}=At.parseCaipAddress(m);if(Ye.setProviderId(i,je.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&I.state.activeCaipNetwork&&o.namespace!==B.CHAIN.EVM){const b=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:I.state.activeCaipNetwork});Ye.setProvider(i,b)}else Ye.setProvider(i,this.universalProvider);V.setConnectorId(B.CONNECTOR_ID.WALLET_CONNECT,i),z.addConnectedNamespace(i),await this.syncAccount({address:_,chainId:w,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);const u=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(i),I.setApprovedCaipNetworksData(i,{approvedCaipNetworkIds:u.approvedCaipNetworkIds,supportsAllNetworks:u.supportsAllNetworks})});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Ye.setProviderId(s,e),Ye.setProvider(s,n),V.setConnectorId(r,s)}async syncAccount(e){var d,h;const n=e.chainNamespace===I.state.activeChain,r=I.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=z.getActiveNetworkProps(),c=(r==null?void 0:r.id)||a,l=((d=I.state.activeCaipNetwork)==null?void 0:d.name)===B.UNSUPPORTED_NETWORK_NAME,u=I.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],_=w.find(A=>{var C;return((C=At.parseCaipNetworkId(A))==null?void 0:C.chainId)===c.toString()}),b=w.find(A=>{var C;return((C=At.parseCaipNetworkId(A))==null?void 0:C.chainNamespace)===o});f=this.getCaipNetworks().find(A=>A.caipNetworkId===_),p=this.getCaipNetworks().find(A=>A.caipNetworkId===b||"deprecatedCaipNetworkId"in A&&A.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===I.state.activeChain?F.state.enableNetworkSwitch&&!F.state.allowUnsupportedChain&&((h=I.state.activeCaipNetwork)==null?void 0:h.name)===B.UNSUPPORTED_NETWORK_NAME?I.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o);const m=this.getAddress(o);mr.isLowerCaseMatch(s,m)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=V.getConnectorId(e),r=Ye.getProviderId(e);if(r===je.CONNECTOR_TYPE_ANNOUNCED||r===je.CONNECTOR_TYPE_INJECTED){if(n){const o=this.getConnectors().find(a=>{var d,h;const c=a.id===n,l=((d=a.info)==null?void 0:d.rdns)===n,u=(h=a.connectors)==null?void 0:h.some(f=>{var p;return f.id===n||((p=f.info)==null?void 0:p.rdns)===n});return c||l||!!u});if(o){const{info:a,name:c,imageUrl:l}=o,u=l||this.getConnectorImage(o);this.setConnectedWalletInfo({name:c,icon:u,...a},e)}}}else if(r===je.CONNECTOR_TYPE_WALLET_CONNECT){const i=Ye.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&(n===B.CONNECTOR_ID.COINBASE_SDK||n===B.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(l=>l.id===n),o=(i==null?void 0:i.name)||"Coinbase Wallet",a=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),c=i==null?void 0:i.info;this.setConnectedWalletInfo({...c,name:o,icon:a},e)}}async syncBalance(e){!uc.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=I.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var s,i,o,a,c,l,u,d,h,f;const e=iK.createLogger((p,...g)=>{p&&this.handleAlertError(p),console.error(...g)}),n={projectId:(s=this.options)==null?void 0:s.projectId,metadata:{name:(i=this.options)!=null&&i.metadata?(o=this.options)==null?void 0:o.metadata.name:"",description:(a=this.options)!=null&&a.metadata?(c=this.options)==null?void 0:c.metadata.description:"",url:(l=this.options)!=null&&l.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(d=this.options)!=null&&d.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};F.setManualWCControl(!!((f=this.options)!=null&&f.manualWCControl)),this.universalProvider=this.options.universalProvider??await TV.init(n);const r=this.universalProvider.disconnect.bind(this.universalProvider);this.universalProvider.disconnect=async()=>{try{return await r()}catch(p){if(p instanceof Error&&p.message.includes("Missing or invalid. Record was recently deleted"))return;throw p}},F.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{vs.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{X.setUri(n)},onConnect:n=>{const{address:r}=ee.getAccount(n[0]);X.finalizeWcConnection(r)},onDisconnect:()=>{I.state.noAdapters&&this.resetAccount(e),X.resetWcConnection()},onChainChanged:n=>{const r=I.state.activeChain,s=r&&V.state.activeConnectorIds[r]===B.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(I.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=I.state.activeChain,s=r&&V.state.activeConnectorIds[r]===B.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(I.state.noAdapters||s)){const i=n==null?void 0:n[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ee.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ce.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){const e=I.getAllApprovedCaipNetworkIds(),n=I.getAllRequestedCaipNetworks();return ee.sortRequestedNetworks(e,n).filter(s=>I.isCaipNetworkDisabled(s))}handleAlertError(e){const n=Object.entries(rt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=rt.ALERT_ERRORS[o];a&&(ct.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s,i;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:(i=this.caipNetworks)==null?void 0:i.filter(({chainNamespace:o})=>o===n)}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&X.setUri(e.uri);const{isSwap:n,isSend:r}=this.toModalOptions();return n(e)?Oe.open({...e,data:{swap:e.arguments}}):r(e)&&e.arguments?this.openSend(e.arguments):Oe.open(e)}async close(){await this.injectModalUi(),Oe.close()}setLoading(e,n){Oe.setLoading(e,n)}async disconnect(e){await X.disconnect({namespace:e})}getSIWX(){return F.state.siwx}getError(){return""}getChainId(){var e;return(e=I.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e,{throwOnFailure:n=!1}={}){const r=this.getCaipNetworks().find(s=>s.id===e.id);if(!r){ct.open(rt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await I.switchActiveNetwork(r,{throwOnFailure:n})}getWalletProvider(){return I.state.activeChain?Ye.state.providers[I.state.activeChain]:null}getWalletProviderType(){return Ye.getProviderId(I.state.activeChain)}subscribeProviders(e){return Ye.subscribeProviders(e)}getThemeMode(){return gn.state.themeMode}getThemeVariables(){return gn.state.themeVariables}setThemeMode(e){gn.setThemeMode(e),v0(gn.state.themeMode)}setTermsConditionsUrl(e){F.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){F.setPrivacyPolicyUrl(e)}setThemeVariables(e){gn.setThemeVariables(e),UK(gn.state.themeVariables)}subscribeTheme(e){return gn.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?X.subscribe(e):(ct.open(B.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){var r,s;if(e)return(s=(r=I.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.connectedWalletInfo;const n=I.getAccountData();return n==null?void 0:n.connectedWalletInfo}getAccount(e){const n=e||I.state.activeChain,r=V.getAuthConnector(n),s=I.getAccountData(n),i=z.getConnectedConnectorId(I.state.activeChain),o=X.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u,publicKey:d})=>ee.createAccount(n,l,u||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ee.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===B.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:z.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:nn(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?I.subscribeChainProp("accountState",r,n):I.subscribe(r),V.subscribe(r)}subscribeNetwork(e){return I.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?I.subscribeChainProp("accountState",r=>e(r==null?void 0:r.connectedWalletInfo),n):I.subscribeChainProp("accountState",r=>e(r==null?void 0:r.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){I.subscribeChainProp("accountState",n=>e(n==null?void 0:n.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){I.subscribeKey("activeCaipNetwork",e)}getState(){return gr.state}getRemoteFeatures(){return F.state.remoteFeatures}subscribeState(e){return gr.subscribe(e)}subscribeRemoteFeatures(e){return F.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Ur.showError(e)}showSuccessMessage(e){Ur.showSuccess(e)}getEvent(){return{...Ce.state}}subscribeEvents(e){return Ce.subscribe(e)}replace(e){me.replace(e)}redirect(e){me.push(e)}popTransactionStack(e){me.popTransactionStack(e)}isOpen(){return Oe.state.open}isTransactionStackEmpty(){return me.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){F.setFeatures(e)}updateRemoteFeatures(e){F.setRemoteFeatures(e)}updateOptions(e){const r={...F.state||{},...e};F.setOptions(r)}setConnectMethodsOrder(e){F.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){F.setWalletFeaturesOrder(e)}setCollapseWallets(e){F.setCollapseWallets(e)}setSocialsOrder(e){F.setSocialsOrder(e)}getConnectMethodsOrder(){return Ya.getConnectOrderMethod(F.state.features,V.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||I.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&I.removeNetwork(e,n)}}let T1=!1;class jK extends FK{async onAuthProviderConnected(e){const n=mr.userChainIdToChainNamespace(e==null?void 0:e.chainId);if(e.message&&e.signature&&e.siwxMessage&&await $n.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===B.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=F.state.defaultAccountTypes[n],i=nn(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:l,...u}=e,d=I.getAccountData(n);this.setUser({...(d==null?void 0:d.user)||{},...u},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:n})]),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Bn.checkIfRequestExists(n)?Bn.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(dt.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(dt.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Bn.checkIfRequestIsSafe(r),i=this.getAddress(),o=I.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=I.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");V.getConnectorId(n)===B.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=I.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=gn.getSnapshot();await e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:dc(n.themeVariables,n.themeMode)})}async syncAuthConnector(e,n){var u,d,h,f,p,g,m,w,_;const r=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===I.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername(),c=((u=I.getAccountData(n))==null?void 0:u.user)||{};this.setUser({...c,username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:l}=await e.isConnected();if(n&&r&&s)if(l&&((d=this.connectionControllerClient)!=null&&d.connectExternal)){await e.init(),await this.syncAuthConnectorTheme(e),await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:B.CONNECTOR_ID.AUTH,info:{name:B.CONNECTOR_ID.AUTH},type:je.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=(h=I.getNetworkData(n))==null?void 0:h.caipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n);const b=z.getConnectedSocialProvider();b?Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:b,reconnect:!0}}):Ce.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:((_=(w=(m=(g=this.universalProvider)==null?void 0:g.session)==null?void 0:m.peer)==null?void 0:w.metadata)==null?void 0:_.name)||"Unknown",reconnect:!0,view:me.state.view,walletRank:void 0}})}else V.getConnectorId(n)===B.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),z.removeConnectedNamespace(n));this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ee.isTelegram())return;const r=z.getTelegramSocialProvider();if(!r||!ee.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;r&&I.setAccountProp("socialProvider",r,e),await((n=this.authProvider)==null?void 0:n.init());const o=V.getAuthConnector();r&&o&&(this.setLoading(!0,e),await X.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),z.setConnectedSocialProvider(r),z.removeTelegramSocialProvider(),Ce.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=mr.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=Gi.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:rt.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?ct.open(rt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?ct.open(rt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&ct.open(rt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:f=>ps(f),getCaipNetworks:f=>I.getCaipNetworks(f)}),gr.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===I.state.activeChain&&F.state.enableReconnect;F.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&de.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a,c;if(!e)return;const n=I.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&((o=I.getAccountData(r))!=null&&o.caipAddress)){const l=this.getAdapter(r);await(l==null?void 0:l.switchNetwork({caipNetwork:e})),this.setCaipNetwork(e)}else{const u=Ye.getProviderId(n)===je.CONNECTOR_TYPE_AUTH,d=Ye.getProviderId(r),h=d===je.CONNECTOR_TYPE_AUTH,f=B.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((u&&d===void 0||h)&&f)try{if(I.state.activeChain=e.chainNamespace,s){const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e}))}else await((c=(a=this.connectionControllerClient)==null?void 0:a.connectExternal)==null?void 0:c.call(a,{id:B.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:je.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const g=this.getAdapter(r);await(g==null?void 0:g.switchNetwork({caipNetwork:e}))}else if(d===je.CONNECTOR_TYPE_WALLET_CONNECT){if(!I.state.noAdapters){const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),gr.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var a;const s=`${r}:${n}`,i=(a=this.caipNetworks)==null?void 0:a.find(c=>c.caipNetworkId===s);if(i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=V.getConnectorId(r)===B.CONNECTOR_ID.AUTH;try{const{name:c,avatar:l}=await this.fetchIdentity({address:e});!c&&o?await this.syncReownName(e,r):(this.setProfileName(c,r),this.setProfileImage(l,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Ye.getProviderId(e);if(n===je.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=z.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ee.isClient()&&!T1)try{const e={...ke.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ee.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!F.state.disableAppend&&!F.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}T1=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ee.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Ct(()=>import("./embedded-wallet.chunk.js"),__vite__mapDeps([6,7,8,9,10,11,12,13,14,15,16,17,18]))),n.email&&r.push(Ct(()=>import("./email.chunk.js"),__vite__mapDeps([19,7,20,17,11,16,9,10,15,21,13]))),n.socials&&r.push(Ct(()=>import("./socials.chunk.js"),__vite__mapDeps([22,7,9,23,10,24,16,25,15,11,26,8,27]))),n.swaps&&n.swaps.length>0&&r.push(Ct(()=>import("./swaps.chunk.js"),__vite__mapDeps([28,7,15,11,16,9,29,30,31,27,32,8,13,10]))),e.send&&r.push(Ct(()=>import("./send.chunk.js"),__vite__mapDeps([33,7,15,11,16,9,34,10,35,17,32,8,27,31,13,36,37]))),e.receive&&r.push(Ct(()=>import("./receive.chunk.js"),__vite__mapDeps([38,7,9,8,26]))),n.onramp&&n.onramp.length>0&&r.push(Ct(()=>import("./onramp.chunk.js"),__vite__mapDeps([39,7,9,40,11,23,10,8,41,42,17,15,16,25,13]))),n.payWithExchange&&r.push(Ct(()=>import("./pay-with-exchange.chunk.js"),__vite__mapDeps([43,7,9,8,14,40,11,27,15,35,10,17,44,16,13,36,34]))),n.activity&&r.push(Ct(()=>import("./transactions.chunk.js"),__vite__mapDeps([45,7,46,16,9,17,8,27]))),(e.pay||n.payments)&&r.push(Ct(()=>import("./index.chunk35.js"),__vite__mapDeps([47,7,9,15,11,48,14,8,40,49,34,50,16,25]))),n.emailCapture&&r.push(Ct(()=>import("./data-capture.chunk.js"),__vite__mapDeps([51,7,20,17,11,52]))),await Promise.all([...r,Ct(()=>import("./index.chunk37.js"),__vite__mapDeps([53,7,9,8,11,37,16,54,42,17,12,50,14,40,15,44,46,27,36,29,30,34,10,13,49,21,23,24,25,26,18,41])),Ct(()=>import("./w3m-modal.chunk.js"),__vite__mapDeps([55,7,9,48,8,12,11,16,30,54,42,17,50,31,15]))])}}const HK="1.8.14";function zK(t){return new jK({...t,sdkVersion:ee.generateSdkVersion(t.adapters??[],"html",HK)})}const WK={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},qK={block:MT({format(t){var n;return{transactions:(n=t.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const s=$d(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?fr(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:BT({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?fr(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:q3({format(t){return{l1GasPrice:t.l1GasPrice?fr(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?fr(t.l1GasUsed):null,l1Fee:t.l1Fee?fr(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function VK(t,e){return YK(t)?GK(t):X3(t,e)}const KK={transaction:VK};function GK(t){ZK(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,l=[e,r,a??"0x",o?wr(o):"0x",c?wr(c):"0x",s?wr(s):"0x",i?"0x1":"0x",n??"0x"];return Ns(["0x7e",gi(l)])}function YK(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function ZK(t){const{from:e,to:n}=t;if(e&&!Ft(e))throw new _n({address:e});if(n&&!Ft(n))throw new _n({address:n})}const O1={blockTime:2e3,contracts:WK,formatters:qK,serializers:KK},Ha=1,L2=ng({...O1,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...O1.contracts,disputeGameFactory:{[Ha]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Ha]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Ha]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Ha]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Ha});({...L2});const JK=ng({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Ei(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}Ei({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});Ei({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Ei({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Ei({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Ei({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});Ei({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});Ei({id:"-239",name:"TON",network:"ton-mainnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://tonscan.org"}},testnet:!1,chainNamespace:"ton",caipNetworkId:"ton:-239"});Ei({id:"-3",name:"TON Testnet",network:"ton-testnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://testnet.tonscan.org"}},testnet:!0,chainNamespace:"ton",caipNetworkId:"ton:-3"});function Xn(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Su="2.22.1",XK=()=>`@wagmi/core@${Su}`;var M2=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},yd,F2;class _r extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return XK()}constructor(e,n={}){var i;super(),yd.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof _r?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof _r&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return M2(this,yd,"m",F2).call(this,this,e)}}yd=new WeakSet,F2=function t(e,n){return n!=null&&n(e)?e:e.cause?M2(this,yd,"m",t).call(this,e.cause,n):e};class sl extends _r{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class QK extends _r{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class eG extends _r{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class tG extends _r{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class nG extends _r{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class rG extends _r{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Lf(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new QK;try{t.setState(a=>({...a,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(a=>({...a,connections:new Map(a.connections).set(n.uid,{accounts:i.withCapabilities?o.accounts.map(c=>typeof c=="object"?c.address:c):o.accounts,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:i.withCapabilities?o.accounts.map(a=>typeof a=="object"?a:{address:a,capabilities:{}}):o.accounts,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function ah(t,e={}){const{assertChainId:n=!0}=e;let r;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new rG({connector:u});const[d,h]=await Promise.all([u.getAccounts().catch(f=>{if(e.account===null)return[];throw f}),u.getChainId()]);r={accounts:d,chainId:h,connector:u}}else r=t.state.connections.get(t.state.current);if(!r)throw new eG;const s=e.chainId??r.chainId,i=await r.connector.getChainId();if(n&&i!==s)throw new nG({connectionChainId:s,connectorChainId:i});const o=r.connector;if(o.getClient)return o.getClient({chainId:s});const a=Kr(e.account??r.accounts[0]);if(a&&(a.address=Ui(a.address)),e.account&&!r.accounts.some(u=>u.toLowerCase()===a.address.toLowerCase()))throw new tG({address:a.address,connector:o});const c=t.chains.find(u=>u.id===s),l=await r.connector.getProvider({chainId:s});return Ov({account:a,chain:c,name:"Connector Client",transport:u=>yO(l)({...u,retryCount:0})})}async function C0(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}function j2(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(sT[t])}async function sG(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await ah(t,{account:e.account,assertChainId:!1,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Xn(o,uv,"estimateGas")({...s,account:i})}function Zo(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function iG(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Xn(o,hO,"multicall")({allowFailure:n,contracts:s,...i})}function oG(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Xn(s,Iv,"readContract")(r)}async function aG(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>iG(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h,10),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof qE)throw c;const l=()=>o.map(u=>oG(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function cG(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await R1(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await R1(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=AE(Zn(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Xn(c,K3,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:po(u,j2(a)),symbol:d.nativeCurrency.symbol,value:u}}async function R1(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await aG(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=po(c??"0",j2(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function il(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!il(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!il(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let lu=[];function as(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||il(lu,e)?lu:(lu=e,e)}async function lG(t,e){const{account:n,chainId:r,...s}=e,i=n??Zo(t).address,o=t.getClient({chainId:r});return Xn(o,J0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Mf=!1;async function Ff(t,e={}){var l,u;if(Mf)return[];Mf=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const m=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:m}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Mf=!1,a}async function uG(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await ah(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await Xn(o,Nv,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function dG(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await ah(t,{account:n,connector:r}),Xn(i,mO,"signMessage")({...s,...n?{account:n}:{}})}class Ys extends _r{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class hG extends _r{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function P1(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new hG({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new sl;return t.setState(a=>({...a,chainId:r})),i}async function fG(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Xn(i,pO,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const c=Xn(i,Pv,"getTransaction"),{from:l,...u}=await c({hash:a.transactionHash}),h=await Xn(i,_v,"call")({...u,account:l,data:u.input,gasPrice:u.type!=="eip1559"?u.gasPrice:void 0,maxFeePerGas:u.type==="eip1559"?u.maxFeePerGas:void 0,maxPriorityFeePerGas:u.type==="eip1559"?u.maxPriorityFeePerGas:void 0}),f=h!=null&&h.data?AE(`0x${h.data.substring(138)}`):"unknown reason";throw new Error(f)}return{...a,chainId:i.chain.id}}function H2(t,e){const{onChange:n}=e;return t.subscribe(()=>Zo(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return il(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function pG(t,e){const{onChange:n}=e;return t.subscribe(()=>as(t),n,{equalityFn:il})}function gG(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function mG(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Xn(l,gO,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function yG(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await ah(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:s}),await Xn(o,Vu,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function VZ(t){return t}ch.type="injected";function ch(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...bG[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:ch.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u,withCapabilities:d}={}){var p,g,m,w,_,b;const h=await this.getProvider();if(!h)throw new Ys;let f=[];if(u)f=await this.getAccounts().catch(()=>[]);else if(e)try{f=(w=(m=(g=(p=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:p.caveats)==null?void 0:g[0])==null?void 0:m.value)==null?void 0:w.map(C=>Ui(C)),f.length>0&&(f=await this.getAccounts())}catch(A){const C=A;if(C.code===lt.code)throw new lt(C);if(C.code===ii.code)throw C}try{!(f!=null&&f.length)&&!u&&(f=(await h.request({method:"eth_requestAccounts"})).map(S=>Ui(S))),o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a));let A=await this.getChainId();if(l&&A!==l){const C=await this.switchChain({chainId:l}).catch(S=>{if(S.code===lt.code)throw S;return{id:A}});A=(C==null?void 0:C.id)??A}return e&&await((_=c.storage)==null?void 0:_.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:d?f.map(C=>({address:C,capabilities:{}})):f,chainId:A}}catch(A){const C=A;throw C.code===lt.code?new lt(C):C.code===ii.code?new ii(C):C}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Ys;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await Rv(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Ys;return(await l.request({method:"eth_accounts"})).map(d=>Ui(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Ys;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Nu(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new Ys}return!!(await Ku(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,m,w;const d=await this.getProvider();if(!d)throw new Ys;const h=c.chains.find(_=>_.id===u);if(!h)throw new qr(new sl);const f=new Promise(_=>{const b=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",b),_())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:re(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(_){const b=_;if(b.code===4902||((g=(p=b==null?void 0:b.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:A&&(S=[A.url,...Object.values(C).map(O=>O.url)]);let N;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?N=l.rpcUrls:N=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const D={blockExplorerUrls:S,chainId:re(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:N};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[D]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new lt(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new lt(A)}throw b.code===lt.code?new lt(b):new qr(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Ui(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const bG={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Nu(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Nu(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Nu(t,"isPhantom")}}};function Nu(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function wG(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function EG(){const t=new Set;let e=[];const n=()=>wG(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const vG=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},CG=vG;function _G(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const _0=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return _0(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return _0(r)(n)}}}},AG=(t,e)=>(n,r,s)=>{let i={storage:_G(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,m)=>{d(g,m),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(_=>{var b;return _((b=r())!=null?b:h)});const w=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=r())!=null?g:h))||void 0;return _0(l.getItem.bind(l))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate)return[!0,i.migrate(_.state,_.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var b;const[A,C]=_;if(f=i.merge(C,(b=r())!=null?b:h),n(f,!0),A)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,c.forEach(_=>_(f))}).catch(_=>{w==null||w(void 0,_)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},IG=AG,k1=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},jf=t=>t?k1(t):k1;class SG{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new tU})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function NG(t){return new SG(t)}function xG(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function D1(t,e){return t.slice(0,e).join(".")||"."}function $1(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function TG(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=$1(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=$1(s,c);if(u!==0)return r?e.call(this,a,c,D1(i,u)):`[ref=${D1(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function OG(t,e,n,r){return JSON.stringify(t,TG((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function RG(t){const{deserialize:e=xG,key:n="wagmi",serialize:r=OG,storage:s=z2}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const z2={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function PG(){const t=typeof window<"u"&&window.localStorage?window.localStorage:z2;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const A0=256;let uu=A0,du;function kG(t=11){if(!du||uu+t>A0*2){du="",uu=0;for(let e=0;e<A0;e++)du+=(256+Math.random()*256|0).toString(16).substring(1)}return du.substring(uu,uu+++t)}function DG(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=RG({storage:PG()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?EG():void 0,a=jf(()=>i.chains),c=jf(()=>{const C=[],S=new Set;for(const N of i.connectors??[]){const D=l(N);if(C.push(D),!s&&D.rdns){const O=typeof D.rdns=="string"?[D.rdns]:D.rdns;for(const L of O)S.add(L)}}if(!s&&o){const N=o.getProviders();for(const D of N)S.has(D.info.rdns)||C.push(l(u(D)))}return C});function l(C){var D;const S=NG(kG()),N={...C({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",b),(D=N.setup)==null||D.call(N),N}function u(C){const{info:S}=C,N=C.provider;return ch({target:{...S,id:S.rdns,provider:N}})}const d=new Map;function h(C={}){const S=C.chainId??m.getState().chainId,N=a.getState().find(O=>O.id===S);if(C.chainId&&!N)throw new sl;{const O=d.get(m.getState().chainId);if(O&&!N)return O;if(!N)throw new sl}{const O=d.get(S);if(O)return O}let D;if(i.client)D=i.client({chain:N});else{const O=N.id,L=a.getState().map(R=>R.id),M={},U=Object.entries(i);for(const[R,$]of U)if(!(R==="chains"||R==="client"||R==="connectors"||R==="transports"))if(typeof $=="object")if(O in $)M[R]=$[O];else{if(L.some(v=>v in $))continue;M[R]=$}else M[R]=$;D=Ov({...M,chain:N,batch:M.batch??{multicall:!0},transport:R=>i.transports[O]({...R,connectors:c})})}return d.set(S,D),D}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";Su.startsWith(g)?p=Number.parseInt(Su.replace(g,""),10):p=Number.parseInt(Su.split(".")[0]??"0",10);const m=jf(CG(n?IG(f,{migrate(C,S){if(S===p)return C;const N=f(),D=w(C,N.chainId);return{...N,chainId:D}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([S,N])=>{const{id:D,name:O,type:L,uid:M}=N.connector;return[S,{...N,connector:{id:D,name:O,type:L,uid:M}}]})},chainId:C.chainId,current:C.current}},merge(C,S){typeof C=="object"&&C&&"status"in C&&delete C.status;const N=w(C,S.chainId);return{...S,...C,chainId:N}},skipHydration:s,storage:n,version:p}):f));m.setState(f());function w(C,S){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(N=>N.id===C.chainId)?C.chainId:S}r&&m.subscribe(({connections:C,current:S})=>{var N;return S?(N=C.get(S))==null?void 0:N.chainId:void 0},C=>{if(a.getState().some(N=>N.id===C))return m.setState(N=>({...N,chainId:C??N.chainId}))}),o==null||o.subscribe(C=>{const S=new Set,N=new Set;for(const O of c.getState())if(S.add(O.id),O.rdns){const L=typeof O.rdns=="string"?[O.rdns]:O.rdns;for(const M of L)N.add(M)}const D=[];for(const O of C){if(N.has(O.info.rdns))continue;const L=l(u(O));S.has(L.id)||D.push(L)}n&&!m.persist.hasHydrated()||c.setState(O=>[...O,...D],!0)});function _(C){m.setState(S=>{const N=S.connections.get(C.uid);return N?{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts??N.accounts,chainId:C.chainId??N.chainId,connector:N.connector})}:S})}function b(C){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(S=>{const N=c.getState().find(D=>D.uid===C.uid);return N?(N.emitter.listenerCount("connect")&&N.emitter.off("connect",_),N.emitter.listenerCount("change")||N.emitter.on("change",_),N.emitter.listenerCount("disconnect")||N.emitter.on("disconnect",A),{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:N}),current:C.uid,status:"connected"}):S})}function A(C){m.setState(S=>{const N=S.connections.get(C.uid);if(N){const O=N.connector;O.emitter.listenerCount("change")&&N.connector.emitter.off("change",_),O.emitter.listenerCount("disconnect")&&N.connector.emitter.off("disconnect",A),O.emitter.listenerCount("connect")||N.connector.emitter.on("connect",b)}if(S.connections.delete(C.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const D=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:D.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(C){let S;typeof C=="function"?S=C(m.getState()):S=C;const N=f();typeof S!="object"&&(S=N),Object.keys(N).some(O=>!(O in S))&&(S=N),m.setState(S,!0)},subscribe(C,S,N){return m.subscribe(C,S,N?{...N,fireImmediately:N.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const C=m.getState(),S=C.connections;let N=C.current;for(const[,D]of S){const O=D.connector;O.isAuthorized&&await O.isAuthorized()||(S.delete(O.uid),N===O.uid&&(N=null))}m.setState(D=>({...D,connections:S,current:N}))},store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const S=typeof C=="function"?C(a.getState()):C;if(S.length!==0)return a.setState(S,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:_,connect:b,disconnect:A}}}}function $G(t){let e=[],n,r;function s(a){var u,d;const c=I.getCaipNetworks(B.CHAIN.EVM);let l=Number(uc.parseEvmChainId(a));if(!c.some(h=>String(h.id)===String(a))){const h=((u=I.getActiveCaipNetwork(B.CHAIN.EVM))==null?void 0:u.id)||((d=c[0])==null?void 0:d.id);h&&Number.isInteger(Number(h))&&(l=Number(h))}if(!l)throw new Error("ChainId not found in networks");return l}function i(){var a;return n||(n=Gi.getInstance({projectId:t.options.projectId,chainId:(a=ps())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ct.open(rt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ct.open(rt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ct.open(rt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:rt.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>ps(c),getCaipNetworks:c=>I.getCaipNetworks(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const m=uc.parseEvmChainId(c.getLastUsedChainId()||""),w=(g=t.chains)==null?void 0:g[0].id;if(l=m||w,!l)throw new Error("ChainId not found in provider")}const u=nn("eip155"),{address:d,chainId:h,accounts:f}=await $n.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:B.CHAIN.EVM});e=(f==null?void 0:f.map(m=>m.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsupported:!1}}}return a=>({id:B.CONNECTOR_ID.AUTH,name:B.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:B.CHAIN.EVM,async connect(c={}){if(r){const u=await r;return{accounts:c.withCapabilities?u.accounts.map(d=>({address:d,capabilities:{}})):u.accounts,chainId:u.chainId}}r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,{accounts:c.withCapabilities?l.accounts.map(u=>({address:u,capabilities:{}})):l.accounts,chainId:l.chainId}},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Gi.getInstance({projectId:t.options.projectId,chainId:(c=ps())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:rt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ct.open(rt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ct.open(rt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ct.open(rt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>ps(l),getCaipNetworks:l=>I.getCaipNetworks(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=I.state.activeChain===B.CHAIN.EVM;if(B.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>V.getConnectorId(h)===B.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new qr(new Error("chain not found on connector."));const d=await this.getProvider(),h=nn("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new qr(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Ui)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}em.type="walletConnect";function em(t){const e=t.isNewChainsStale??!0;let n,r,s,i,o,a,c;return l=>({id:"walletConnect",name:"WalletConnect",type:em.type,provider:t.universalProvider,async setup(){const u=await this.getProvider().catch(()=>null);u&&(i||(i=this.onConnect.bind(this),u.on("connect",i)),a||(a=this.onSessionDelete.bind(this),u.on("session_delete",a)))},async connect({...u}={}){var d,h,f;try{const p=I.getCaipNetworks(),g=await this.getProvider();if(!g)throw new Ys;o||(o=this.onDisplayUri,g.on("display_uri",o));const m=await this.isChainsStale();g.session&&m&&await g.disconnect();const w=F.state.universalProviderConfigOverride;if(!g.session||m){const D=vs.createNamespaces(p,w);await g.connect({optionalNamespaces:D,..."pairingTopic"in u?{pairingTopic:u.pairingTopic}:{}}),this.setRequestedChainsIds(p.map(O=>Number(O.id)))}const _=await this.getAccounts(),b=await this.getChainId(),A=(f=(h=(d=g.session)==null?void 0:d.namespaces)==null?void 0:h.eip155)==null?void 0:f.chains,C=A==null?void 0:A.some(D=>Number(D.split(":")[1])===b);let S=1;C?S=b:A!=null&&A[0]&&(S=Number(A[0].split(":")[1])),o&&(g.removeListener("display_uri",o),o=void 0),i&&(g.removeListener("connect",i),i=void 0),r||(r=this.onAccountsChanged.bind(this),g.on("accountsChanged",r)),s||(s=this.onChainChanged.bind(this),g.on("chainChanged",s)),c||(c=this.onDisconnect.bind(this),g.on("disconnect",c)),a||(a=this.onSessionDelete.bind(this),g.on("session_delete",a));const N=w==null?void 0:w.defaultChain;return g.setDefaultChain(N??`eip155:${S}`),{accounts:_,chainId:S}}catch(p){throw/(user rejected|connection request reset)/i.test(p==null?void 0:p.message)?new lt(p):p}},async disconnect(){const u=await this.getProvider();try{await(u==null?void 0:u.disconnect())}catch(d){if(!/No matching key/i.test(d.message))throw d}finally{s&&(u==null||u.removeListener("chainChanged",s),s=void 0),c&&(u==null||u.removeListener("disconnect",c),c=void 0),i||(i=this.onConnect.bind(this),u==null||u.on("connect",i)),r&&(u==null||u.removeListener("accountsChanged",r),r=void 0),a&&(u==null||u.removeListener("session_delete",a),a=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var g,m,w;const u=await this.getProvider();if(!((g=u==null?void 0:u.session)!=null&&g.namespaces))return[];const d=(w=(m=u==null?void 0:u.session)==null?void 0:m.namespaces[B.CHAIN.EVM])==null?void 0:w.accounts,h=(d==null?void 0:d.map(_=>_.split(":")[2]))??[],f=new Set;return h.filter(_=>{const b=_==null?void 0:_.toLowerCase();return f.has(b)?!1:(f.add(b),!0)})},async getProvider({chainId:u}={}){var f,p;n||(n=t.universalProvider,n==null||n.events.setMaxListeners(Number.POSITIVE_INFINITY));const d=z.getActiveNamespace(),h=(f=I.getActiveCaipNetwork())==null?void 0:f.id;if(u&&h!==u&&d){const g=z.getStoredActiveCaipNetworkId(),m=d?I.getCaipNetworks(d):[],w=m==null?void 0:m.find(_=>_.id===g);w&&w.chainNamespace===B.CHAIN.EVM&&await((p=this.switchChain)==null?void 0:p.call(this,{chainId:Number(w.id)}))}return n},async getChainId(){var p,g,m,w;const u=(p=I.getActiveCaipNetwork(B.CHAIN.EVM))==null?void 0:p.id;if(u)return u;const h=(w=(m=(g=(await this.getProvider()).session)==null?void 0:g.namespaces[B.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:w[0],f=I.getCaipNetworks().find(_=>_.id===h);return f==null?void 0:f.id},async isAuthorized(){try{const[u,d]=await Promise.all([this.getAccounts(),this.getProvider()]);return u.length?await this.isChainsStale()&&d.session?(await d.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:d}){var p,g,m,w;const h=await this.getProvider();if(!h)throw new Ys;const f=I.getCaipNetworks().find(_=>_.id===d);if(!f)throw new qr(new sl);try{await h.request({method:"wallet_switchEthereumChain",params:[{chainId:re(d)}]}),f!=null&&f.caipNetworkId&&h.setDefaultChain(f==null?void 0:f.caipNetworkId),l.emitter.emit("change",{chainId:Number(d)});const _=await this.getRequestedChainsIds();return this.setRequestedChainsIds([..._,d]),{...f,id:f.id}}catch(_){const b=_;if(/(?:user rejected)/iu.test(b.message))throw new lt(b);try{let A;u!=null&&u.blockExplorerUrls?A=u.blockExplorerUrls:A=(p=f.blockExplorers)!=null&&p.default.url?[(g=f.blockExplorers)==null?void 0:g.default.url]:[];const C=((w=(m=f.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:w.http)||[],S={blockExplorerUrls:A,chainId:re(d),chainName:f.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:f.nativeCurrency,rpcUrls:C};await h.request({method:"wallet_addEthereumChain",params:[S]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,d]),{...f,id:f.id}}catch(A){throw new lt(A)}}},onAccountsChanged(u){u.length===0?this.onDisconnect():l.emitter.emit("change",{accounts:u.map(d=>Ui(d))})},onChainChanged(u){const d=Number(u);l.emitter.emit("change",{chainId:d})},onConnect(u){this.setRequestedChainsIds(I.getCaipNetworks().map(d=>Number(d.id)))},async onDisconnect(u){this.setRequestedChainsIds([]),l.emitter.emit("disconnect");const d=await this.getProvider();r&&(d.removeListener("accountsChanged",r),r=void 0),s&&(d.removeListener("chainChanged",s),s=void 0),c&&(d.removeListener("disconnect",c),c=void 0),a&&(d.removeListener("session_delete",a),a=void 0),i||(i=this.onConnect.bind(this),d.on("connect",i))},onDisplayUri(u){l.emitter.emit("message",{type:"display_uri",data:u})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var h,f,p;if(!((h=n==null?void 0:n.session)!=null&&h.namespaces))return[];const u=(p=(f=n==null?void 0:n.session)==null?void 0:f.namespaces[B.CHAIN.EVM])==null?void 0:p.accounts;return(u==null?void 0:u.map(g=>Number.parseInt(g.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var d;const u=await((d=l.storage)==null?void 0:d.getItem(this.requestedChainsStorageKey))??[];return[...new Set(u)]},async isChainsStale(){if(!e)return!1;const u=l.chains.map(f=>f.id),d=this.getNamespaceChainsIds();if(d.length&&!d.some(f=>u.includes(f)))return!1;const h=await this.getRequestedChainsIds();return!u.every(f=>h.includes(Number(f)))},async setRequestedChainsIds(u){var d;await((d=l.storage)==null?void 0:d.setItem(this.requestedChainsStorageKey,u))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const za=Xe({pendingTransactions:0}),U1={state:za,subscribeKey(t,e){return kt(za,t,e)},increase(t){za[t]+=1},decrease(t){za[t]-=1},reset(t){za[t]=0}};async function UG(t){if(ee.isSafeApp()){const{safe:e}=await Ct(async()=>{const{safe:n}=await import("./index.chunk22.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function BG(t){try{const{baseAccount:e}=await Ct(async()=>{const{baseAccount:n}=await import("./index.chunk22.js");return{baseAccount:n}},[]);if(e&&!t.some(n=>n.id==="baseAccount"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const LG={enable:!1,pollingInterval:3e4};class MG extends N2{constructor(e){const n=$r.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=B.CHAIN.EVM,this.adapterType=B.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...LG,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===B.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ee.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Zo(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ee.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Zo(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===B.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=$r.getCaipNetworkId(s);i?n[s.id]=$r.extendWagmiTransports(s,e.projectId,i):n[s.id]=$r.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=DG({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=mG(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),U1.increase("pendingTransactions")}});const e=U1.subscribeKey("pendingTransactions",n=>{var r;n>=B.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){pG(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===B.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:this.toChecksummedAddress(i)})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:z.getConnectedSocialProvider(),username:z.getConnectedSocialUsername()}:void 0}}))}}),H2(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}})}async addThirdPartyConnectors(){const e=[],{enableCoinbase:n}=F.state||{};if(n!==!1){const s=await BG(this.wagmiConfig.connectors);s&&e.push(s)}const r=await UG(this.wagmiConfig.connectors);r&&e.push(r),await Promise.all(e.map(s=>{const i=this.configureInternalConnector(s);return this.addWagmiConnector(i)}))}addWagmiConnectors(){const e=[];F.state.enableInjected!==!1&&e.push(ch({shimDisconnect:!0}));const{features:n,remoteFeatures:r,projectId:s,enableAuthLogger:i}=F.state,o=(r==null?void 0:r.email)??(n==null?void 0:n.email)??!0,a=(r==null?void 0:r.socials)??(n==null?void 0:n.socials),c=Array.isArray(a)&&(a==null?void 0:a.length)>0;(o||c)&&e.push($G({chains:this.wagmiChains,options:{projectId:s,enableAuthLogger:i}})),e.forEach(l=>{this.configureInternalConnector(l)})}configureInternalConnector(e){const n=this.wagmiConfig._internal.connectors.setup(e);return this.wagmiConfig._internal.connectors.setState(r=>[...r,n]),n}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:this.toChecksummedAddress(e),chainId:n,connector:{id:r.id,name:tn.ConnectorNamesMap[r.id]??r.name,imageId:tn.ConnectorImageIds[r.id],type:tn.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===B.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await dG(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var a;const{chainId:n,address:r}=Zo(this.wagmiConfig),s=(a=this.wagmiChains)==null?void 0:a.find(c=>c.id===n),i={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chain:s,type:"legacy",parameters:["nonce"]};await lG(this.wagmiConfig,i);const o=await uG(this.wagmiConfig,i);return await fG(this.wagmiConfig,{hash:o,timeout:25e3}),{hash:o}}async writeContract(e){var a;const{caipNetwork:n,...r}=e,s=Number(uc.caipNetworkIdToNumber(n.caipNetworkId)),i=(a=this.wagmiChains)==null?void 0:a.find(c=>c.id===s);return{hash:await yG(this.wagmiConfig,{chain:i,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await sG(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return dO(e.value,e.decimals)}formatUnits(e){return po(e.value,e.decimals)}async addWagmiConnector(e){if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");const{enableEIP6963:n}=F.state||{};if(e.type===B.CONNECTOR_ID.INJECTED&&n===!1||e.id===B.CONNECTOR_ID.AUTH||e.id===B.CONNECTOR_ID.WALLET_CONNECT)return;let r;e.id!==B.CONNECTOR_ID.BASE_ACCOUNT&&(r=await e.getProvider().catch(()=>{}));const s=Dn.state.connectorImages;this.addConnector({id:e.id,explorerId:tn.ConnectorExplorerIds[e.id],imageUrl:(s==null?void 0:s[e.id])??e.icon,name:tn.ConnectorNamesMap[e.id]??e.name,imageId:tn.ConnectorImageIds[e.id],type:tn.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===B.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(){gG(this.wagmiConfig,{onChange:e=>{e.forEach(n=>this.addWagmiConnector(n))}}),this.addWagmiConnectors(),await Promise.all(this.wagmiConfig.connectors.map(e=>this.addWagmiConnector(e))),await this.addThirdPartyConnectors()}async syncConnections(){const e=this.connectors.filter(n=>{const{hasDisconnected:r,hasConnected:s}=mr.getConnectorStorageInfo(n.id,this.namespace);return!r&&s}).map(n=>this.getWagmiConnector(n.id)).filter(Boolean);await Ff(this.wagmiConfig,{connectors:e})}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=as(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ee.isSafeApp()&&n===B.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Lf(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:this.toChecksummedAddress(h.accounts[0]),provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:this.toChecksummedAddress(i==null?void 0:i.accounts[0]),provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){try{const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Lf(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await P1(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}catch(n){throw n instanceof lt?new $o(n):dr.isUserRejectedRequestError(n)?new $o(n):n}}async connect(e){var n,r,s,i,o;try{const{id:a,address:c,provider:l,type:u,info:d,chainId:h,socialUri:f}=e,p=this.getWagmiConnector(a);if(!p)throw new Error("connectionControllerClient:connectExternal - connector is undefined");l&&d&&p.id===B.CONNECTOR_ID.EIP6963&&((n=p.setEip6963Wallet)==null||n.call(p,{provider:l,info:d}));const g=(s=(r=this.wagmiConfig.state)==null?void 0:r.connections)==null?void 0:s.get(p.uid);if(g){await((i=this.wagmiConfig.storage)==null?void 0:i.setItem("recentConnectorId",p.id));const _=[...g.accounts].sort((b,A)=>mr.isLowerCaseMatch(b,c)?-1:mr.isLowerCaseMatch(A,c)?1:0);return(o=this.wagmiConfig)==null||o.setState(b=>({...b,connections:new Map(b.connections).set(p.uid,{accounts:_,chainId:g.chainId,connector:g.connector}),current:p.uid,status:"connected"})),{address:this.toChecksummedAddress(_[0]),chainId:g.chainId,provider:l,type:u,id:a}}const m=await Lf(this.wagmiConfig,{connector:p,chainId:h?Number(h):void 0,socialUri:f}),w=l??await p.getProvider();return{address:this.toChecksummedAddress(m.accounts[0]),chainId:m.chainId,provider:w,type:u,id:a}}catch(a){throw a instanceof lt?new $o(a):dr.isUserRejectedRequestError(a)?new $o(a):a}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:this.toChecksummedAddress(n)})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await Ff(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=z.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await cG(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});z.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=as(this.wagmiConfig).find(i=>mr.isLowerCaseMatch(i.connector.id,e.id));return await C0(this.wagmiConfig,{connector:n}),F.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:this.toChecksummedAddress(i)})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=as(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await C0(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:this.toChecksummedAddress(s)})),connectorId:r.connector.id}))}}async switchNetwork(e){var f,p,g,m,w;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(_=>_.id.toString()===n.id.toString());if(!r)throw new Error("connectionControllerClient:switchNetwork - wagmiChain is undefined");const{name:s,nativeCurrency:i,rpcUrls:o,blockExplorers:a,id:c}=r,l=((g=(p=(f=n.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])??o.default.http[0]??"",u=(a==null?void 0:a.default.url)??((w=(m=n.blockExplorers)==null?void 0:m.default)==null?void 0:w.url)??"",d=i??n.nativeCurrency,h=s??n.name;await P1(this.wagmiConfig,{chainId:c,addEthereumChainParameter:{chainName:h,nativeCurrency:d,rpcUrls:[l],blockExplorerUrls:[u]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=as(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=as(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=as(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=as(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:B.CONNECTOR_ID.AUTH,type:"AUTH",name:B.CONNECTOR_NAMES.AUTH,provider:e,imageId:tn.ConnectorImageIds[B.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){e.on("connect",()=>{const r=as(this.wagmiConfig),s=this.getWagmiConnector("walletConnect");if(s&&!r.find(i=>i.connector.id===s.id)){if(I.state.activeChain==="eip155")return;Ff(this.wagmiConfig,{connectors:[s]})}});const n=em({universalProvider:e});return this.configureInternalConnector(n),this.addConnector(new x2({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}toChecksummedAddress(e){return ul(e.toLowerCase())}}const W2="fd1a1f2a6addc16ab345942ee57a3531",q2=[JK,L2],V2=new MG({projectId:W2,networks:q2}),FG={name:"Launchpad",description:"Crypto Token Launchpad Platform",url:window.location.origin,icons:["https://avatars.githubusercontent.com/u/179229932"]},K2=zK({adapters:[V2],networks:q2,metadata:FG,projectId:W2,features:{analytics:!0,email:!1,socials:[]}}),tm=V2.wagmiConfig;function jG(){K2.open()}function HG(){K2.open({view:"Networks"})}function nm(){return Zo(tm)}function zG(){C0(tm)}function G2(t){return H2(tm,{onChange:t})}window.addEventListener("DOMContentLoaded",()=>{console.log("Wallet integration initialized"),G2(e=>{B1(e)});const t=nm();B1(t)});function B1(t){const e=document.getElementById("connect-wallet-btn"),n=document.getElementById("wallet-address"),r=document.getElementById("disconnect-wallet-btn");t.isConnected&&t.address?(e&&(e.style.display="none"),n&&(n.textContent=`${t.address.slice(0,6)}...${t.address.slice(-4)}`,n.style.display="inline-block"),r&&(r.style.display="inline-block"),I0(t.address)):(e&&(e.style.display="inline-block"),n&&(n.style.display="none"),r&&(r.style.display="none"),I0(null))}function I0(t){const e=document.getElementById("buy-wallet-address"),n=document.getElementById("sell-wallet-address"),r=document.getElementById("buy-button"),s=document.getElementById("sell-button");t?(e&&(e.value=t),n&&(n.value=t),r&&window.currentToken&&(r.disabled=!1),s&&window.currentToken&&(s.disabled=!1),window.dispatchEvent(new CustomEvent("walletConnected",{detail:{address:t}})),typeof updateWalletAddress=="function"&&updateWalletAddress(t)):(e&&(e.value="",e.placeholder="Connect wallet first"),n&&(n.value="",n.placeholder="Connect wallet first"),r&&(r.disabled=!0),s&&(s.disabled=!0),window.dispatchEvent(new CustomEvent("walletDisconnected")),typeof updateWalletAddress=="function"&&updateWalletAddress(null))}function WG(){const t=nm();return t.isConnected?t.address:null}window.WalletConnect={openConnectModal:jG,openNetworkModal:HG,getWalletAccount:nm,disconnectWallet:zG,onAccountChange:G2,getCurrentWalletAddress:WG,updateDEXWalletAddress:I0};export{oY as $,kN as A,xm as B,gN as C,yE as D,Sd as E,DN as F,$N as G,UN as H,QG as I,tY as J,nY as K,bE as L,rY as M,BN as N,wE as O,Fu as P,LN as Q,sY as R,lN as S,iY as T,fN as U,ep as V,EE as W,jN as X,FN as Y,HN as Z,zN as _,eY as a,Mc as a$,_n as a0,W as a1,ZE as a2,gp as a3,I3 as a4,S3 as a5,bv as a6,Ud as a7,gT as a8,qE as a9,Za as aA,H0 as aB,Mm as aC,Wc as aD,zc as aE,Hc as aF,Bc as aG,Fc as aH,no as aI,na as aJ,Rc as aK,Tc as aL,kc as aM,sa as aN,Oc as aO,Bi as aP,xc as aQ,Uc as aR,Mn as aS,Pc as aT,ii as aU,Nn as aV,qr as aW,ra as aX,Dc as aY,jc as aZ,ET as a_,mT as aa,yT as ab,bT as ac,j0 as ad,CE as ae,vE as af,_E as ag,qN as ah,VN as ai,KN as aj,OT as ak,$T as al,K0 as am,UT as an,Li as ao,ro as ap,rp as aq,ap as ar,cp as as,lp as at,op as au,sp as av,ip as aw,qc as ax,up as ay,Pd as az,hN as b,IE as b$,Lc as b0,$c as b1,lt as b2,iT as b3,oT as b4,cT as b5,lT as b6,uT as b7,dT as b8,hT as b9,ng as bA,Ev as bB,ta as bC,Nx as bD,Ns as bE,fi as bF,fa as bG,WN as bH,si as bI,yt as bJ,Sc as bK,LE as bL,xx as bM,Zn as bN,qx as bO,Vx as bP,ys as bQ,Kx as bR,fr as bS,dY as bT,pi as bU,AE as bV,JN as bW,Wr as bX,XN as bY,SE as bZ,xd as b_,zE as ba,WE as bb,fT as bc,EO as bd,uO as be,Rd as bf,tT as bg,n3 as bh,X0 as bi,ME as bj,wv as bk,Od as bl,B0 as bm,s3 as bn,Mx as bo,ul as bp,Ui as bq,Ft as br,t3 as bs,G0 as bt,Y0 as bu,tv as bv,ZT as bw,ov as bx,e3 as by,j3 as bz,dN as c,ei as c$,cn as c0,re as c1,Nd as c2,wr as c3,gi as c4,zu as c5,MT as c6,XE as c7,dv as c8,BT as c9,vn as cA,po as cB,dO as cC,Xe as cD,$Z as cE,I as cF,Ce as cG,ee as cH,Ur as cI,DZ as cJ,UZ as cK,kZ as cL,ke as cM,F as cN,_I as cO,Uv as cP,be as cQ,BZ as cR,kt as cS,Mt as cT,Rt as cU,HZ as cV,WZ as cW,qZ as cX,Iu as cY,FZ as cZ,$K as c_,$d as ca,JE as cb,q3 as cc,xv as cd,V0 as ce,PT as cf,ll as cg,YT as ch,$E as ci,P0 as cj,Ix as ck,U0 as cl,U3 as cm,Ku as cn,Rv as co,ST as cp,IT as cq,Jn as cr,Dd as cs,tg as ct,Z3 as cu,J3 as cv,av as cw,Bd as cx,X3 as cy,M0 as cz,uN as d,$n as d$,tr as d0,me as d1,X as d2,B as d3,nn as d4,dt as d5,qO as d6,ct as d7,sg as d8,V as d9,Ic as dA,Hu as dB,ea as dC,ju as dD,gY as dE,fY as dF,KT as dG,pI as dH,nr as dI,bd as dJ,je as dK,de as dL,z6 as dM,rt as dN,At as dO,Ye as dP,NI as dQ,dc as dR,vt as dS,Se as dT,sc as dU,vp as dV,Dn as dW,so as dX,dr as dY,kr as dZ,pu as d_,VZ as da,sl as db,Ct as dc,Ys as dd,ch as de,F0 as df,_v as dg,Oe as dh,aK as di,Dv as dj,gn as dk,hi as dl,LY as dm,jx as dn,lc as dp,z as dq,jZ as dr,Bn as ds,Tx as dt,wY as du,ue as dv,he as dw,xE as dx,hY as dy,R0 as dz,cN as e,z3 as e$,zZ as e0,Bv as e1,P2 as e2,w0 as e3,ua as e4,bN as e5,ON as e6,lE as e7,hr as e8,to as e9,GE as eA,Td as eB,vx as eC,ia as eD,us as eE,IY as eF,pv as eG,NY as eH,y3 as eI,xY as eJ,TY as eK,Ea as eL,d3 as eM,SY as eN,Pv as eO,v3 as eP,YE as eQ,z0 as eR,RY as eS,q6 as eT,yv as eU,zY as eV,Vc as eW,EY as eX,gO as eY,fO as eZ,pO as e_,XG as ea,Lx as eb,et as ec,uv as ed,Kr as ee,Q0 as ef,g3 as eg,pa as eh,fp as ei,OY as ej,m3 as ek,Wu as el,Sv as em,M3 as en,L3 as eo,F3 as ep,W3 as eq,vv as er,HY as es,MY as et,Iv as eu,jY as ev,FY as ew,W0 as ex,N3 as ey,bY as ez,mN as f,J0 as f0,hO as f1,Sh as f2,FT as f3,vY as f4,QE as f5,CY as f6,cv as f7,K3 as f8,V3 as f9,kf as fa,Gu as fb,mr as fc,Ya as fd,$r as fe,KO as ff,eg as fg,O1 as fh,tU as fi,dl as fj,L2 as fk,JK as fl,Zv as fm,J8 as fn,X8 as fo,my as fp,uc as fq,ps as fr,ha as g,pN as h,oN as i,Ov as j,rg as k,yO as l,Jm as m,Ul as n,Pl as o,pE as p,WY as q,pp as r,bO as s,_3 as t,A3 as u,qY as v,kd as w,nT as x,rT as y,sT as z};
